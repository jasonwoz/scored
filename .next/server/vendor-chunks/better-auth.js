"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/better-auth";
exports.ids = ["vendor-chunks/better-auth"];
exports.modules = {

/***/ "(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __export: () => (/* binding */ __export),\n/* harmony export */   __reExport: () => (/* binding */ __reExport)\n/* harmony export */ });\n//#region rolldown:runtime\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (all, symbols) => {\n\tlet target = {};\n\tfor (var name in all) {\n\t\t__defProp(target, name, {\n\t\t\tget: all[name],\n\t\t\tenumerable: true\n\t\t});\n\t}\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\treturn target;\n};\nvar __copyProps = (to, from, except, desc) => {\n\tif (from && typeof from === \"object\" || typeof from === \"function\") {\n\t\tfor (var keys = __getOwnPropNames(from), i = 0, n = keys.length, key; i < n; i++) {\n\t\t\tkey = keys[i];\n\t\t\tif (!__hasOwnProp.call(to, key) && key !== except) {\n\t\t\t\t__defProp(to, key, {\n\t\t\t\t\tget: ((k) => from[k]).bind(null, key),\n\t\t\t\t\tenumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn to;\n};\nvar __reExport = (target, mod, secondTarget, symbols) => {\n\tif (symbols) {\n\t\t__defProp(target, Symbol.toStringTag, { value: \"Module\" });\n\t\tsecondTarget && __defProp(secondTarget, Symbol.toStringTag, { value: \"Module\" });\n\t}\n\t__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\");\n};\n\n//#endregion\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9fdmlydHVhbC9yb2xsZG93bl9ydW50aW1lLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxPQUFPO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsaUJBQWlCO0FBQzNELGdFQUFnRSxpQkFBaUI7QUFDakY7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiByb2xsZG93bjpydW50aW1lXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xudmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1xudmFyIF9fZ2V0T3duUHJvcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2V4cG9ydCA9IChhbGwsIHN5bWJvbHMpID0+IHtcblx0bGV0IHRhcmdldCA9IHt9O1xuXHRmb3IgKHZhciBuYW1lIGluIGFsbCkge1xuXHRcdF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHtcblx0XHRcdGdldDogYWxsW25hbWVdLFxuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHR9XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHR9XG5cdHJldHVybiB0YXJnZXQ7XG59O1xudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcblx0aWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdGZvciAodmFyIGtleXMgPSBfX2dldE93blByb3BOYW1lcyhmcm9tKSwgaSA9IDAsIG4gPSBrZXlzLmxlbmd0aCwga2V5OyBpIDwgbjsgaSsrKSB7XG5cdFx0XHRrZXkgPSBrZXlzW2ldO1xuXHRcdFx0aWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdCkge1xuXHRcdFx0XHRfX2RlZlByb3AodG8sIGtleSwge1xuXHRcdFx0XHRcdGdldDogKChrKSA9PiBmcm9tW2tdKS5iaW5kKG51bGwsIGtleSksXG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogIShkZXNjID0gX19nZXRPd25Qcm9wRGVzYyhmcm9tLCBrZXkpKSB8fCBkZXNjLmVudW1lcmFibGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0bztcbn07XG52YXIgX19yZUV4cG9ydCA9ICh0YXJnZXQsIG1vZCwgc2Vjb25kVGFyZ2V0LCBzeW1ib2xzKSA9PiB7XG5cdGlmIChzeW1ib2xzKSB7XG5cdFx0X19kZWZQcm9wKHRhcmdldCwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiBcIk1vZHVsZVwiIH0pO1xuXHRcdHNlY29uZFRhcmdldCAmJiBfX2RlZlByb3Aoc2Vjb25kVGFyZ2V0LCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6IFwiTW9kdWxlXCIgfSk7XG5cdH1cblx0X19jb3B5UHJvcHModGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKSwgc2Vjb25kVGFyZ2V0ICYmIF9fY29weVByb3BzKHNlY29uZFRhcmdldCwgbW9kLCBcImRlZmF1bHRcIik7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BunSqliteDialect: () => (/* binding */ BunSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/bun-sqlite-dialect.ts\nvar BunSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar BunSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new BunSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar BunSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst stmt = this.#db.prepare(sql$1);\n\t\treturn Promise.resolve({ rows: stmt.all(parameters) });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar BunSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar BunSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar BunSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new BunSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new BunSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new BunSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new BunSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=bun-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9idW4tc3FsaXRlLWRpYWxlY3QubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlIOztBQUV6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHlCQUF5QjtBQUNuQztBQUNBLDJCQUEyQiw0QkFBNEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlDQUFpQztBQUM5RDtBQUNBLDJFQUEyRSwyREFBdUIsc0JBQXNCLGdFQUE0QjtBQUNwSjtBQUNBLG1DQUFtQyxNQUFNO0FBQ3pDO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLDJDQUFHLHFCQUFxQixNQUFNO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdEQUFvQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzRCO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2J1bi1zcWxpdGUtZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcGlsZWRRdWVyeSwgREVGQVVMVF9NSUdSQVRJT05fTE9DS19UQUJMRSwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUsIERlZmF1bHRRdWVyeUNvbXBpbGVyLCBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvYnVuLXNxbGl0ZS1kaWFsZWN0LnRzXG52YXIgQnVuU3FsaXRlQWRhcHRlciA9IGNsYXNzIHtcblx0Z2V0IHN1cHBvcnRzQ3JlYXRlSWZOb3RFeGlzdHMoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0Z2V0IHN1cHBvcnRzVHJhbnNhY3Rpb25hbERkbCgpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Z2V0IHN1cHBvcnRzUmV0dXJuaW5nKCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGFzeW5jIGFjcXVpcmVNaWdyYXRpb25Mb2NrKCkge31cblx0YXN5bmMgcmVsZWFzZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRnZXQgc3VwcG9ydHNPdXRwdXQoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlRHJpdmVyID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHQjY29ubmVjdGlvbk11dGV4ID0gbmV3IENvbm5lY3Rpb25NdXRleCgpO1xuXHQjZGI7XG5cdCNjb25uZWN0aW9uO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGFzeW5jIGluaXQoKSB7XG5cdFx0dGhpcy4jZGIgPSB0aGlzLiNjb25maWcuZGF0YWJhc2U7XG5cdFx0dGhpcy4jY29ubmVjdGlvbiA9IG5ldyBCdW5TcWxpdGVDb25uZWN0aW9uKHRoaXMuI2RiKTtcblx0XHRpZiAodGhpcy4jY29uZmlnLm9uQ3JlYXRlQ29ubmVjdGlvbikgYXdhaXQgdGhpcy4jY29uZmlnLm9uQ3JlYXRlQ29ubmVjdGlvbih0aGlzLiNjb25uZWN0aW9uKTtcblx0fVxuXHRhc3luYyBhY3F1aXJlQ29ubmVjdGlvbigpIHtcblx0XHRhd2FpdCB0aGlzLiNjb25uZWN0aW9uTXV0ZXgubG9jaygpO1xuXHRcdHJldHVybiB0aGlzLiNjb25uZWN0aW9uO1xuXHR9XG5cdGFzeW5jIGJlZ2luVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwiYmVnaW5cIikpO1xuXHR9XG5cdGFzeW5jIGNvbW1pdFRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImNvbW1pdFwiKSk7XG5cdH1cblx0YXN5bmMgcm9sbGJhY2tUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJyb2xsYmFja1wiKSk7XG5cdH1cblx0YXN5bmMgcmVsZWFzZUNvbm5lY3Rpb24oKSB7XG5cdFx0dGhpcy4jY29ubmVjdGlvbk11dGV4LnVubG9jaygpO1xuXHR9XG5cdGFzeW5jIGRlc3Ryb3koKSB7XG5cdFx0dGhpcy4jZGI/LmNsb3NlKCk7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlQ29ubmVjdGlvbiA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0ZXhlY3V0ZVF1ZXJ5KGNvbXBpbGVkUXVlcnkpIHtcblx0XHRjb25zdCB7IHNxbDogc3FsJDEsIHBhcmFtZXRlcnMgfSA9IGNvbXBpbGVkUXVlcnk7XG5cdFx0Y29uc3Qgc3RtdCA9IHRoaXMuI2RiLnByZXBhcmUoc3FsJDEpO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoeyByb3dzOiBzdG10LmFsbChwYXJhbWV0ZXJzKSB9KTtcblx0fVxuXHRhc3luYyAqc3RyZWFtUXVlcnkoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU3RyZWFtaW5nIHF1ZXJ5IGlzIG5vdCBzdXBwb3J0ZWQgYnkgU1FMaXRlIGRyaXZlci5cIik7XG5cdH1cbn07XG52YXIgQ29ubmVjdGlvbk11dGV4ID0gY2xhc3Mge1xuXHQjcHJvbWlzZTtcblx0I3Jlc29sdmU7XG5cdGFzeW5jIGxvY2soKSB7XG5cdFx0d2hpbGUgKHRoaXMuI3Byb21pc2UpIGF3YWl0IHRoaXMuI3Byb21pc2U7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0XHR0aGlzLiNyZXNvbHZlID0gcmVzb2x2ZTtcblx0XHR9KTtcblx0fVxuXHR1bmxvY2soKSB7XG5cdFx0Y29uc3QgcmVzb2x2ZSA9IHRoaXMuI3Jlc29sdmU7XG5cdFx0dGhpcy4jcHJvbWlzZSA9IHZvaWQgMDtcblx0XHR0aGlzLiNyZXNvbHZlID0gdm9pZCAwO1xuXHRcdHJlc29sdmU/LigpO1xuXHR9XG59O1xudmFyIEJ1blNxbGl0ZUludHJvc3BlY3RvciA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0YXN5bmMgZ2V0U2NoZW1hcygpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0YXN5bmMgZ2V0VGFibGVzKG9wdGlvbnMgPSB7IHdpdGhJbnRlcm5hbEt5c2VseVRhYmxlczogZmFsc2UgfSkge1xuXHRcdGxldCBxdWVyeSA9IHRoaXMuI2RiLnNlbGVjdEZyb20oXCJzcWxpdGVfc2NoZW1hXCIpLndoZXJlKFwidHlwZVwiLCBcIj1cIiwgXCJ0YWJsZVwiKS53aGVyZShcIm5hbWVcIiwgXCJub3QgbGlrZVwiLCBcInNxbGl0ZV8lXCIpLnNlbGVjdChcIm5hbWVcIikuJGNhc3RUbygpO1xuXHRcdGlmICghb3B0aW9ucy53aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXMpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoXCJuYW1lXCIsIFwiIT1cIiwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUpLndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUpO1xuXHRcdGNvbnN0IHRhYmxlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodGFibGVzLm1hcCgoeyBuYW1lIH0pID0+IHRoaXMuI2dldFRhYmxlTWV0YWRhdGEobmFtZSkpKTtcblx0fVxuXHRhc3luYyBnZXRNZXRhZGF0YShvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHsgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKSB9O1xuXHR9XG5cdGFzeW5jICNnZXRUYWJsZU1ldGFkYXRhKHRhYmxlKSB7XG5cdFx0Y29uc3QgZGIgPSB0aGlzLiNkYjtcblx0XHRjb25zdCBhdXRvSW5jcmVtZW50Q29sID0gKGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpKVswXT8uc3FsPy5zcGxpdCgvW1xcKFxcKSxdLyk/LmZpbmQoKGl0KSA9PiBpdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYXV0b2luY3JlbWVudFwiKSk/LnNwbGl0KC9cXHMrLyk/LlswXT8ucmVwbGFjZSgvW1wiYF0vZywgXCJcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRhYmxlLFxuXHRcdFx0Y29sdW1uczogKGF3YWl0IGRiLnNlbGVjdEZyb20oc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpKS5zZWxlY3QoW1xuXHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFwibm90bnVsbFwiLFxuXHRcdFx0XHRcImRmbHRfdmFsdWVcIlxuXHRcdFx0XSkuZXhlY3V0ZSgpKS5tYXAoKGNvbCkgPT4gKHtcblx0XHRcdFx0bmFtZTogY29sLm5hbWUsXG5cdFx0XHRcdGRhdGFUeXBlOiBjb2wudHlwZSxcblx0XHRcdFx0aXNOdWxsYWJsZTogIWNvbC5ub3RudWxsLFxuXHRcdFx0XHRpc0F1dG9JbmNyZW1lbnRpbmc6IGNvbC5uYW1lID09PSBhdXRvSW5jcmVtZW50Q29sLFxuXHRcdFx0XHRoYXNEZWZhdWx0VmFsdWU6IGNvbC5kZmx0X3ZhbHVlICE9IG51bGxcblx0XHRcdH0pKSxcblx0XHRcdGlzVmlldzogdHJ1ZVxuXHRcdH07XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlUXVlcnlDb21waWxlciA9IGNsYXNzIGV4dGVuZHMgRGVmYXVsdFF1ZXJ5Q29tcGlsZXIge1xuXHRnZXRDdXJyZW50UGFyYW1ldGVyUGxhY2Vob2xkZXIoKSB7XG5cdFx0cmV0dXJuIFwiP1wiO1xuXHR9XG5cdGdldExlZnRJZGVudGlmaWVyV3JhcHBlcigpIHtcblx0XHRyZXR1cm4gXCJcXFwiXCI7XG5cdH1cblx0Z2V0UmlnaHRJZGVudGlmaWVyV3JhcHBlcigpIHtcblx0XHRyZXR1cm4gXCJcXFwiXCI7XG5cdH1cblx0Z2V0QXV0b0luY3JlbWVudCgpIHtcblx0XHRyZXR1cm4gXCJhdXRvaW5jcmVtZW50XCI7XG5cdH1cbn07XG52YXIgQnVuU3FsaXRlRGlhbGVjdCA9IGNsYXNzIHtcblx0I2NvbmZpZztcblx0Y29uc3RydWN0b3IoY29uZmlnKSB7XG5cdFx0dGhpcy4jY29uZmlnID0geyAuLi5jb25maWcgfTtcblx0fVxuXHRjcmVhdGVEcml2ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcblx0fVxuXHRjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuXHRcdHJldHVybiBuZXcgQnVuU3FsaXRlUXVlcnlDb21waWxlcigpO1xuXHR9XG5cdGNyZWF0ZUFkYXB0ZXIoKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVBZGFwdGVyKCk7XG5cdH1cblx0Y3JlYXRlSW50cm9zcGVjdG9yKGRiKSB7XG5cdFx0cmV0dXJuIG5ldyBCdW5TcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEJ1blNxbGl0ZURpYWxlY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1bi1zcWxpdGUtZGlhbGVjdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* binding */ createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* binding */ getKyselyDatabaseType)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/sqlite/sqlite-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mysql/mysql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/postgres/postgres-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/dialect/mssql/mssql-dialect.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/kysely.js\");\n\n\n//#region src/adapters/kysely-adapter/dialect.ts\nfunction getKyselyDatabaseType(db) {\n\tif (!db) return null;\n\tif (\"dialect\" in db) return getKyselyDatabaseType(db.dialect);\n\tif (\"createDriver\" in db) {\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect) return \"sqlite\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect) return \"mysql\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect) return \"postgres\";\n\t\tif (db instanceof kysely__WEBPACK_IMPORTED_MODULE_3__.MssqlDialect) return \"mssql\";\n\t}\n\tif (\"aggregate\" in db) return \"sqlite\";\n\tif (\"getConnection\" in db) return \"mysql\";\n\tif (\"connect\" in db) return \"postgres\";\n\tif (\"fileControl\" in db) return \"sqlite\";\n\tif (\"open\" in db && \"close\" in db && \"prepare\" in db) return \"sqlite\";\n\treturn null;\n}\nconst createKyselyAdapter = async (config) => {\n\tconst db = config.database;\n\tif (!db) return {\n\t\tkysely: null,\n\t\tdatabaseType: null,\n\t\ttransaction: void 0\n\t};\n\tif (\"db\" in db) return {\n\t\tkysely: db.db,\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tif (\"dialect\" in db) return {\n\t\tkysely: new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect: db.dialect }),\n\t\tdatabaseType: db.type,\n\t\ttransaction: db.transaction\n\t};\n\tlet dialect = void 0;\n\tconst databaseType = getKyselyDatabaseType(db);\n\tif (\"createDriver\" in db) dialect = db;\n\tif (\"aggregate\" in db && !(\"createSession\" in db)) dialect = new kysely__WEBPACK_IMPORTED_MODULE_0__.SqliteDialect({ database: db });\n\tif (\"getConnection\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.MysqlDialect(db);\n\tif (\"connect\" in db) dialect = new kysely__WEBPACK_IMPORTED_MODULE_2__.PostgresDialect({ pool: db });\n\tif (\"fileControl\" in db) {\n\t\tconst { BunSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ./bun-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/bun-sqlite-dialect.mjs\"));\n\t\tdialect = new BunSqliteDialect({ database: db });\n\t}\n\tif (\"createSession\" in db && typeof window === \"undefined\") {\n\t\tlet DatabaseSync = void 0;\n\t\ttry {\n\t\t\tconst nodeSqlite = \"node:sqlite\";\n\t\t\t({DatabaseSync} = await import(\n\t\t\t\t/* @vite-ignore */\n\t\t\t\t/* webpackIgnore: true */\n\t\t\t\tnodeSqlite\n));\n\t\t} catch (error) {\n\t\t\tif (error !== null && typeof error === \"object\" && \"code\" in error && error.code !== \"ERR_UNKNOWN_BUILTIN_MODULE\") throw error;\n\t\t}\n\t\tif (DatabaseSync && db instanceof DatabaseSync) {\n\t\t\tconst { NodeSqliteDialect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ./node-sqlite-dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\"));\n\t\t\tdialect = new NodeSqliteDialect({ database: db });\n\t\t}\n\t}\n\treturn {\n\t\tkysely: dialect ? new kysely__WEBPACK_IMPORTED_MODULE_4__.Kysely({ dialect }) : null,\n\t\tdatabaseType,\n\t\ttransaction: void 0\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRGOztBQUU1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGlEQUFhO0FBQ2pDLG9CQUFvQixnREFBWTtBQUNoQyxvQkFBb0IsbURBQWU7QUFDbkMsb0JBQW9CLGdEQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMENBQU0sR0FBRyxxQkFBcUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFLGlEQUFhLEdBQUcsY0FBYztBQUNoRywwQ0FBMEMsZ0RBQVk7QUFDdEQsb0NBQW9DLG1EQUFlLEdBQUcsVUFBVTtBQUNoRTtBQUNBLFVBQVUsbUJBQW1CLFFBQVEsOE9BQWtDO0FBQ3ZFLG1DQUFtQyxjQUFjO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGNBQWM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvQkFBb0IsUUFBUSxnUEFBbUM7QUFDMUUscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUFNLEdBQUcsU0FBUztBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNzRDtBQUN0RCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBLeXNlbHksIE1zc3FsRGlhbGVjdCwgTXlzcWxEaWFsZWN0LCBQb3N0Z3Jlc0RpYWxlY3QsIFNxbGl0ZURpYWxlY3QgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC50c1xuZnVuY3Rpb24gZ2V0S3lzZWx5RGF0YWJhc2VUeXBlKGRiKSB7XG5cdGlmICghZGIpIHJldHVybiBudWxsO1xuXHRpZiAoXCJkaWFsZWN0XCIgaW4gZGIpIHJldHVybiBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGIuZGlhbGVjdCk7XG5cdGlmIChcImNyZWF0ZURyaXZlclwiIGluIGRiKSB7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgU3FsaXRlRGlhbGVjdCkgcmV0dXJuIFwic3FsaXRlXCI7XG5cdFx0aWYgKGRiIGluc3RhbmNlb2YgTXlzcWxEaWFsZWN0KSByZXR1cm4gXCJteXNxbFwiO1xuXHRcdGlmIChkYiBpbnN0YW5jZW9mIFBvc3RncmVzRGlhbGVjdCkgcmV0dXJuIFwicG9zdGdyZXNcIjtcblx0XHRpZiAoZGIgaW5zdGFuY2VvZiBNc3NxbERpYWxlY3QpIHJldHVybiBcIm1zc3FsXCI7XG5cdH1cblx0aWYgKFwiYWdncmVnYXRlXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRpZiAoXCJnZXRDb25uZWN0aW9uXCIgaW4gZGIpIHJldHVybiBcIm15c3FsXCI7XG5cdGlmIChcImNvbm5lY3RcIiBpbiBkYikgcmV0dXJuIFwicG9zdGdyZXNcIjtcblx0aWYgKFwiZmlsZUNvbnRyb2xcIiBpbiBkYikgcmV0dXJuIFwic3FsaXRlXCI7XG5cdGlmIChcIm9wZW5cIiBpbiBkYiAmJiBcImNsb3NlXCIgaW4gZGIgJiYgXCJwcmVwYXJlXCIgaW4gZGIpIHJldHVybiBcInNxbGl0ZVwiO1xuXHRyZXR1cm4gbnVsbDtcbn1cbmNvbnN0IGNyZWF0ZUt5c2VseUFkYXB0ZXIgPSBhc3luYyAoY29uZmlnKSA9PiB7XG5cdGNvbnN0IGRiID0gY29uZmlnLmRhdGFiYXNlO1xuXHRpZiAoIWRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogbnVsbCxcblx0XHRkYXRhYmFzZVR5cGU6IG51bGwsXG5cdFx0dHJhbnNhY3Rpb246IHZvaWQgMFxuXHR9O1xuXHRpZiAoXCJkYlwiIGluIGRiKSByZXR1cm4ge1xuXHRcdGt5c2VseTogZGIuZGIsXG5cdFx0ZGF0YWJhc2VUeXBlOiBkYi50eXBlLFxuXHRcdHRyYW5zYWN0aW9uOiBkYi50cmFuc2FjdGlvblxuXHR9O1xuXHRpZiAoXCJkaWFsZWN0XCIgaW4gZGIpIHJldHVybiB7XG5cdFx0a3lzZWx5OiBuZXcgS3lzZWx5KHsgZGlhbGVjdDogZGIuZGlhbGVjdCB9KSxcblx0XHRkYXRhYmFzZVR5cGU6IGRiLnR5cGUsXG5cdFx0dHJhbnNhY3Rpb246IGRiLnRyYW5zYWN0aW9uXG5cdH07XG5cdGxldCBkaWFsZWN0ID0gdm9pZCAwO1xuXHRjb25zdCBkYXRhYmFzZVR5cGUgPSBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGIpO1xuXHRpZiAoXCJjcmVhdGVEcml2ZXJcIiBpbiBkYikgZGlhbGVjdCA9IGRiO1xuXHRpZiAoXCJhZ2dyZWdhdGVcIiBpbiBkYiAmJiAhKFwiY3JlYXRlU2Vzc2lvblwiIGluIGRiKSkgZGlhbGVjdCA9IG5ldyBTcWxpdGVEaWFsZWN0KHsgZGF0YWJhc2U6IGRiIH0pO1xuXHRpZiAoXCJnZXRDb25uZWN0aW9uXCIgaW4gZGIpIGRpYWxlY3QgPSBuZXcgTXlzcWxEaWFsZWN0KGRiKTtcblx0aWYgKFwiY29ubmVjdFwiIGluIGRiKSBkaWFsZWN0ID0gbmV3IFBvc3RncmVzRGlhbGVjdCh7IHBvb2w6IGRiIH0pO1xuXHRpZiAoXCJmaWxlQ29udHJvbFwiIGluIGRiKSB7XG5cdFx0Y29uc3QgeyBCdW5TcWxpdGVEaWFsZWN0IH0gPSBhd2FpdCBpbXBvcnQoXCIuL2J1bi1zcWxpdGUtZGlhbGVjdC5tanNcIik7XG5cdFx0ZGlhbGVjdCA9IG5ldyBCdW5TcWxpdGVEaWFsZWN0KHsgZGF0YWJhc2U6IGRiIH0pO1xuXHR9XG5cdGlmIChcImNyZWF0ZVNlc3Npb25cIiBpbiBkYiAmJiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0bGV0IERhdGFiYXNlU3luYyA9IHZvaWQgMDtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgbm9kZVNxbGl0ZSA9IFwibm9kZTpzcWxpdGVcIjtcblx0XHRcdCh7RGF0YWJhc2VTeW5jfSA9IGF3YWl0IGltcG9ydChcblx0XHRcdFx0LyogQHZpdGUtaWdub3JlICovXG5cdFx0XHRcdC8qIHdlYnBhY2tJZ25vcmU6IHRydWUgKi9cblx0XHRcdFx0bm9kZVNxbGl0ZVxuKSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGlmIChlcnJvciAhPT0gbnVsbCAmJiB0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiYgXCJjb2RlXCIgaW4gZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gXCJFUlJfVU5LTk9XTl9CVUlMVElOX01PRFVMRVwiKSB0aHJvdyBlcnJvcjtcblx0XHR9XG5cdFx0aWYgKERhdGFiYXNlU3luYyAmJiBkYiBpbnN0YW5jZW9mIERhdGFiYXNlU3luYykge1xuXHRcdFx0Y29uc3QgeyBOb2RlU3FsaXRlRGlhbGVjdCB9ID0gYXdhaXQgaW1wb3J0KFwiLi9ub2RlLXNxbGl0ZS1kaWFsZWN0Lm1qc1wiKTtcblx0XHRcdGRpYWxlY3QgPSBuZXcgTm9kZVNxbGl0ZURpYWxlY3QoeyBkYXRhYmFzZTogZGIgfSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7XG5cdFx0a3lzZWx5OiBkaWFsZWN0ID8gbmV3IEt5c2VseSh7IGRpYWxlY3QgfSkgOiBudWxsLFxuXHRcdGRhdGFiYXNlVHlwZSxcblx0XHR0cmFuc2FjdGlvbjogdm9pZCAwXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIsIGdldEt5c2VseURhdGFiYXNlVHlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlhbGVjdC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createKyselyAdapter: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter),\n/* harmony export */   getKyselyDatabaseType: () => (/* reexport safe */ _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType),\n/* harmony export */   kyselyAdapter: () => (/* reexport safe */ _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__.kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var _dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _kysely_adapter_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kysely-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkU7QUFDdEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIsIGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gXCIuL2RpYWxlY3QubWpzXCI7XG5pbXBvcnQgeyBreXNlbHlBZGFwdGVyIH0gZnJvbSBcIi4va3lzZWx5LWFkYXB0ZXIubWpzXCI7XG5cbmV4cG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIsIGdldEt5c2VseURhdGFiYXNlVHlwZSwga3lzZWx5QWRhcHRlciB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   kyselyAdapter: () => (/* binding */ kyselyAdapter)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/kysely-adapter/kysely-adapter.ts\nconst kyselyAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst createCustomAdapter = (db$1) => {\n\t\treturn ({ getFieldName, schema, getDefaultFieldName, getDefaultModelName, getFieldAttributes, getModelName }) => {\n\t\t\tconst selectAllJoins = (join) => {\n\t\t\t\tconst allSelects = [];\n\t\t\t\tconst allSelectsStr = [];\n\t\t\t\tif (join) for (const [joinModel, _] of Object.entries(join)) {\n\t\t\t\t\tconst fields = schema[getDefaultModelName(joinModel)]?.fields;\n\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\tif (!fields) continue;\n\t\t\t\t\tfields.id = { type: \"string\" };\n\t\t\t\t\tfor (const [field, fieldAttr] of Object.entries(fields)) {\n\t\t\t\t\t\tallSelects.push((0,kysely__WEBPACK_IMPORTED_MODULE_1__.sql)`${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`join_${joinModelName}`)}.${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(fieldAttr.fieldName || field)} as ${kysely__WEBPACK_IMPORTED_MODULE_1__.sql.ref(`_joined_${joinModelName}_${fieldAttr.fieldName || field}`)}`);\n\t\t\t\t\t\tallSelectsStr.push({\n\t\t\t\t\t\t\tjoinModel,\n\t\t\t\t\t\t\tjoinModelRef: joinModelName,\n\t\t\t\t\t\t\tfieldName: fieldAttr.fieldName || field\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tallSelectsStr,\n\t\t\t\t\tallSelects\n\t\t\t\t};\n\t\t\t};\n\t\t\tconst withReturning = async (values, builder, model, where) => {\n\t\t\t\tlet res;\n\t\t\t\tif (config?.type === \"mysql\") {\n\t\t\t\t\tawait builder.execute();\n\t\t\t\t\tconst field = values.id ? \"id\" : where.length > 0 && where[0]?.field ? where[0].field : \"id\";\n\t\t\t\t\tif (!values.id && where.length === 0) {\n\t\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield\n\t\t\t\t\t\t}), \"desc\").limit(1).executeTakeFirst();\n\t\t\t\t\t\treturn res;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = values[field] || where[0]?.value;\n\t\t\t\t\tres = await db$1.selectFrom(model).selectAll().orderBy(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"desc\").where(getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield\n\t\t\t\t\t}), \"=\", value).limit(1).executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\tres = await builder.outputAll(\"inserted\").executeTakeFirst();\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\t\t\t\tres = await builder.returningAll().executeTakeFirst();\n\t\t\t\treturn res;\n\t\t\t};\n\t\t\tfunction convertWhereClause(model, w) {\n\t\t\t\tif (!w) return {\n\t\t\t\t\tand: null,\n\t\t\t\t\tor: null\n\t\t\t\t};\n\t\t\t\tconst conditions = {\n\t\t\t\t\tand: [],\n\t\t\t\t\tor: []\n\t\t\t\t};\n\t\t\t\tw.forEach((condition) => {\n\t\t\t\t\tconst { field: _field, value: _value, operator = \"=\", connector = \"AND\" } = condition;\n\t\t\t\t\tconst value = _value;\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: _field\n\t\t\t\t\t});\n\t\t\t\t\tconst expr = (eb) => {\n\t\t\t\t\t\tconst f = `${model}.${field}`;\n\t\t\t\t\t\tif (operator.toLowerCase() === \"in\") return eb(f, \"in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator.toLowerCase() === \"not_in\") return eb(f, \"not in\", Array.isArray(value) ? value : [value]);\n\t\t\t\t\t\tif (operator === \"contains\") return eb(f, \"like\", `%${value}%`);\n\t\t\t\t\t\tif (operator === \"starts_with\") return eb(f, \"like\", `${value}%`);\n\t\t\t\t\t\tif (operator === \"ends_with\") return eb(f, \"like\", `%${value}`);\n\t\t\t\t\t\tif (operator === \"eq\") return eb(f, \"=\", value);\n\t\t\t\t\t\tif (operator === \"ne\") return eb(f, \"<>\", value);\n\t\t\t\t\t\tif (operator === \"gt\") return eb(f, \">\", value);\n\t\t\t\t\t\tif (operator === \"gte\") return eb(f, \">=\", value);\n\t\t\t\t\t\tif (operator === \"lt\") return eb(f, \"<\", value);\n\t\t\t\t\t\tif (operator === \"lte\") return eb(f, \"<=\", value);\n\t\t\t\t\t\treturn eb(f, operator, value);\n\t\t\t\t\t};\n\t\t\t\t\tif (connector === \"OR\") conditions.or.push(expr);\n\t\t\t\t\telse conditions.and.push(expr);\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tand: conditions.and.length ? conditions.and : null,\n\t\t\t\t\tor: conditions.or.length ? conditions.or : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction processJoinedResults(rows, joinConfig, allSelectsStr) {\n\t\t\t\tif (!joinConfig || !rows.length) return rows;\n\t\t\t\tconst groupedByMainId = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const currentRow of rows) {\n\t\t\t\t\tconst mainModelFields = {};\n\t\t\t\t\tconst joinedModelFields = {};\n\t\t\t\t\tfor (const [joinModel] of Object.entries(joinConfig)) joinedModelFields[getModelName(joinModel)] = {};\n\t\t\t\t\tfor (const [key, value] of Object.entries(currentRow)) {\n\t\t\t\t\t\tconst keyStr = String(key);\n\t\t\t\t\t\tlet assigned = false;\n\t\t\t\t\t\tfor (const { joinModel, fieldName, joinModelRef } of allSelectsStr) if (keyStr === `_joined_${joinModelRef}_${fieldName}`) {\n\t\t\t\t\t\t\tjoinedModelFields[getModelName(joinModel)][getFieldName({\n\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\tfield: fieldName\n\t\t\t\t\t\t\t})] = value;\n\t\t\t\t\t\t\tassigned = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!assigned) mainModelFields[key] = value;\n\t\t\t\t\t}\n\t\t\t\t\tconst mainId = mainModelFields.id;\n\t\t\t\t\tif (!mainId) continue;\n\t\t\t\t\tif (!groupedByMainId.has(mainId)) {\n\t\t\t\t\t\tconst entry$1 = { ...mainModelFields };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) entry$1[getModelName(joinModel)] = joinAttr.relation === \"one-to-one\" ? null : [];\n\t\t\t\t\t\tgroupedByMainId.set(mainId, entry$1);\n\t\t\t\t\t}\n\t\t\t\t\tconst entry = groupedByMainId.get(mainId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(joinConfig)) {\n\t\t\t\t\t\tconst isUnique = joinAttr.relation === \"one-to-one\";\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tconst joinedObj = joinedModelFields[getModelName(joinModel)];\n\t\t\t\t\t\tconst hasData = joinedObj && Object.keys(joinedObj).length > 0 && Object.values(joinedObj).some((value) => value !== null && value !== void 0);\n\t\t\t\t\t\tif (isUnique) entry[getModelName(joinModel)] = hasData ? joinedObj : null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (Array.isArray(entry[joinModelName]) && hasData) {\n\t\t\t\t\t\t\t\tif (entry[joinModelName].length >= limit) continue;\n\t\t\t\t\t\t\t\tconst idFieldName = getFieldName({\n\t\t\t\t\t\t\t\t\tmodel: joinModel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tconst joinedId = joinedObj[idFieldName];\n\t\t\t\t\t\t\t\tif (joinedId) {\n\t\t\t\t\t\t\t\t\tif (!entry[joinModelName].some((item) => item[idFieldName] === joinedId) && entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t\t} else if (entry[joinModelName].length < limit) entry[joinModelName].push(joinedObj);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst result = Array.from(groupedByMainId.values());\n\t\t\t\tfor (const entry of result) for (const [joinModel, joinAttr] of Object.entries(joinConfig)) if (joinAttr.relation !== \"one-to-one\") {\n\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\tif (Array.isArray(entry[joinModelName])) {\n\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\tif (entry[joinModelName].length > limit) entry[joinModelName] = entry[joinModelName].slice(0, limit);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tasync create({ data, model }) {\n\t\t\t\t\treturn await withReturning(data, db$1.insertInto(model).values(data), model, []);\n\t\t\t\t},\n\t\t\t\tasync findOne({ model, where, select, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res || !Array.isArray(res) || res.length === 0) return null;\n\t\t\t\t\tconst row = res[0];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr)[0];\n\t\t\t\t\treturn row;\n\t\t\t\t},\n\t\t\t\tasync findMany({ model, where, limit, offset, sortBy, join }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom((eb) => {\n\t\t\t\t\t\tlet b = eb.selectFrom(model);\n\t\t\t\t\t\tif (config?.type === \"mssql\") {\n\t\t\t\t\t\t\tif (offset !== void 0) {\n\t\t\t\t\t\t\t\tif (!sortBy) b = b.orderBy(getFieldName({\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tfield: \"id\"\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\tb = b.offset(offset).fetch(limit || 100);\n\t\t\t\t\t\t\t} else if (limit !== void 0) b = b.top(limit);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (limit !== void 0) b = b.limit(limit);\n\t\t\t\t\t\t\tif (offset !== void 0) b = b.offset(offset);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (sortBy?.field) b = b.orderBy(`${getFieldName({\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\t\tif (and) b = b.where((eb$1) => eb$1.and(and.map((expr) => expr(eb$1))));\n\t\t\t\t\t\tif (or) b = b.where((eb$1) => eb$1.or(or.map((expr) => expr(eb$1))));\n\t\t\t\t\t\treturn b.selectAll().as(\"primary\");\n\t\t\t\t\t}).selectAll(\"primary\");\n\t\t\t\t\tif (join) for (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst [_joinModelSchema, joinModelName] = joinModel.includes(\".\") ? joinModel.split(\".\") : [void 0, joinModel];\n\t\t\t\t\t\tquery = query.leftJoin(`${joinModel} as join_${joinModelName}`, (join$1) => join$1.onRef(`join_${joinModelName}.${joinAttr.on.to}`, \"=\", `primary.${joinAttr.on.from}`));\n\t\t\t\t\t}\n\t\t\t\t\tconst { allSelectsStr, allSelects } = selectAllJoins(join);\n\t\t\t\t\tquery = query.select(allSelects);\n\t\t\t\t\tif (sortBy?.field) query = query.orderBy(`${getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t})}`, sortBy.direction);\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (!res) return [];\n\t\t\t\t\tif (join) return processJoinedResults(res, join, allSelectsStr);\n\t\t\t\t\treturn res;\n\t\t\t\t},\n\t\t\t\tasync update({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\treturn await withReturning(values, query, model, where);\n\t\t\t\t},\n\t\t\t\tasync updateMany({ model, where, update: values }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.updateTable(model).set(values);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numUpdatedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\tasync count({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.selectFrom(model).select(db$1.fn.count(\"id\").as(\"count\"));\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = await query.execute();\n\t\t\t\t\tif (typeof res[0].count === \"number\") return res[0].count;\n\t\t\t\t\tif (typeof res[0].count === \"bigint\") return Number(res[0].count);\n\t\t\t\t\treturn parseInt(res[0].count);\n\t\t\t\t},\n\t\t\t\tasync delete({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tawait query.execute();\n\t\t\t\t},\n\t\t\t\tasync deleteMany({ model, where }) {\n\t\t\t\t\tconst { and, or } = convertWhereClause(model, where);\n\t\t\t\t\tlet query = db$1.deleteFrom(model);\n\t\t\t\t\tif (and) query = query.where((eb) => eb.and(and.map((expr) => expr(eb))));\n\t\t\t\t\tif (or) query = query.where((eb) => eb.or(or.map((expr) => expr(eb))));\n\t\t\t\t\tconst res = (await query.executeTakeFirst()).numDeletedRows;\n\t\t\t\t\treturn res > Number.MAX_SAFE_INTEGER ? Number.MAX_SAFE_INTEGER : Number(res);\n\t\t\t\t},\n\t\t\t\toptions: config\n\t\t\t};\n\t\t};\n\t};\n\tlet adapterOptions = null;\n\tadapterOptions = {\n\t\tconfig: {\n\t\t\tadapterId: \"kysely\",\n\t\t\tadapterName: \"Kysely Adapter\",\n\t\t\tusePlural: config?.usePlural,\n\t\t\tdebugLogs: config?.debugLogs,\n\t\t\tsupportsBooleans: config?.type === \"sqlite\" || config?.type === \"mssql\" || config?.type === \"mysql\" || !config?.type ? false : true,\n\t\t\tsupportsDates: config?.type === \"sqlite\" || config?.type === \"mssql\" || !config?.type ? false : true,\n\t\t\tsupportsJSON: config?.type === \"postgres\" ? true : false,\n\t\t\tsupportsArrays: false,\n\t\t\tsupportsUUIDs: config?.type === \"postgres\" ? true : false,\n\t\t\ttransaction: config?.transaction ? (cb) => db.transaction().execute((trx) => {\n\t\t\t\treturn cb((0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)({\n\t\t\t\t\tconfig: adapterOptions.config,\n\t\t\t\t\tadapter: createCustomAdapter(trx)\n\t\t\t\t})(lazyOptions));\n\t\t\t}) : false\n\t\t},\n\t\tadapter: createCustomAdapter(db)\n\t};\n\tconst adapter = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_0__.createAdapterFactory)(adapterOptions);\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapter(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=kysely-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9reXNlbHktYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZCO0FBQ3VDOztBQUVwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0dBQWtHO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0Esc0JBQXNCLDJDQUFHLEdBQUcsdUNBQUcsYUFBYSxjQUFjLEdBQUcsR0FBRyx1Q0FBRyxvQ0FBb0MsS0FBSyx1Q0FBRyxnQkFBZ0IsY0FBYyxHQUFHLDZCQUE2QixHQUFHO0FBQ2hMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrRUFBa0U7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxtQkFBbUIsTUFBTSxHQUFHLE1BQU07QUFDbEM7QUFDQTtBQUNBLDREQUE0RCxNQUFNO0FBQ2xFLDhEQUE4RCxNQUFNO0FBQ3BFLDZEQUE2RCxNQUFNO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixxQ0FBcUMsNENBQTRDLGFBQWEsR0FBRyxVQUFVO0FBQzlIO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixhQUFhO0FBQ2hDO0FBQ0EsS0FBSztBQUNMLG9CQUFvQiw0QkFBNEI7QUFDaEQsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGdDQUFnQyxXQUFXLFVBQVUsY0FBYyxvQ0FBb0MsY0FBYyxHQUFHLGVBQWUsbUJBQW1CLGlCQUFpQjtBQUMzSztBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxxQkFBcUIsMkNBQTJDO0FBQ2hFLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQSxPQUFPLEVBQUU7QUFDVDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLGdDQUFnQyxXQUFXLFVBQVUsY0FBYyxvQ0FBb0MsY0FBYyxHQUFHLGVBQWUsbUJBQW1CLGlCQUFpQjtBQUMzSztBQUNBLGFBQWEsNEJBQTRCO0FBQ3pDO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQSxNQUFNLEVBQUU7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsOEJBQThCO0FBQ2pELGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx1QkFBdUIsOEJBQThCO0FBQ3JELGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGtCQUFrQixjQUFjO0FBQ2hDLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxtQkFBbUIsY0FBYztBQUNqQyxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCLGNBQWM7QUFDckMsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsa0ZBQW9CO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0EsaUJBQWlCLGtGQUFvQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2t5c2VseS1hZGFwdGVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyBjcmVhdGVBZGFwdGVyRmFjdG9yeSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYi9hZGFwdGVyXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIva3lzZWx5LWFkYXB0ZXIudHNcbmNvbnN0IGt5c2VseUFkYXB0ZXIgPSAoZGIsIGNvbmZpZykgPT4ge1xuXHRsZXQgbGF6eU9wdGlvbnMgPSBudWxsO1xuXHRjb25zdCBjcmVhdGVDdXN0b21BZGFwdGVyID0gKGRiJDEpID0+IHtcblx0XHRyZXR1cm4gKHsgZ2V0RmllbGROYW1lLCBzY2hlbWEsIGdldERlZmF1bHRGaWVsZE5hbWUsIGdldERlZmF1bHRNb2RlbE5hbWUsIGdldEZpZWxkQXR0cmlidXRlcywgZ2V0TW9kZWxOYW1lIH0pID0+IHtcblx0XHRcdGNvbnN0IHNlbGVjdEFsbEpvaW5zID0gKGpvaW4pID0+IHtcblx0XHRcdFx0Y29uc3QgYWxsU2VsZWN0cyA9IFtdO1xuXHRcdFx0XHRjb25zdCBhbGxTZWxlY3RzU3RyID0gW107XG5cdFx0XHRcdGlmIChqb2luKSBmb3IgKGNvbnN0IFtqb2luTW9kZWwsIF9dIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGRzID0gc2NoZW1hW2dldERlZmF1bHRNb2RlbE5hbWUoam9pbk1vZGVsKV0/LmZpZWxkcztcblx0XHRcdFx0XHRjb25zdCBbX2pvaW5Nb2RlbFNjaGVtYSwgam9pbk1vZGVsTmFtZV0gPSBqb2luTW9kZWwuaW5jbHVkZXMoXCIuXCIpID8gam9pbk1vZGVsLnNwbGl0KFwiLlwiKSA6IFt2b2lkIDAsIGpvaW5Nb2RlbF07XG5cdFx0XHRcdFx0aWYgKCFmaWVsZHMpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGZpZWxkcy5pZCA9IHsgdHlwZTogXCJzdHJpbmdcIiB9O1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2ZpZWxkLCBmaWVsZEF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGZpZWxkcykpIHtcblx0XHRcdFx0XHRcdGFsbFNlbGVjdHMucHVzaChzcWxgJHtzcWwucmVmKGBqb2luXyR7am9pbk1vZGVsTmFtZX1gKX0uJHtzcWwucmVmKGZpZWxkQXR0ci5maWVsZE5hbWUgfHwgZmllbGQpfSBhcyAke3NxbC5yZWYoYF9qb2luZWRfJHtqb2luTW9kZWxOYW1lfV8ke2ZpZWxkQXR0ci5maWVsZE5hbWUgfHwgZmllbGR9YCl9YCk7XG5cdFx0XHRcdFx0XHRhbGxTZWxlY3RzU3RyLnB1c2goe1xuXHRcdFx0XHRcdFx0XHRqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdGpvaW5Nb2RlbFJlZjogam9pbk1vZGVsTmFtZSxcblx0XHRcdFx0XHRcdFx0ZmllbGROYW1lOiBmaWVsZEF0dHIuZmllbGROYW1lIHx8IGZpZWxkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRhbGxTZWxlY3RzU3RyLFxuXHRcdFx0XHRcdGFsbFNlbGVjdHNcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHRjb25zdCB3aXRoUmV0dXJuaW5nID0gYXN5bmMgKHZhbHVlcywgYnVpbGRlciwgbW9kZWwsIHdoZXJlKSA9PiB7XG5cdFx0XHRcdGxldCByZXM7XG5cdFx0XHRcdGlmIChjb25maWc/LnR5cGUgPT09IFwibXlzcWxcIikge1xuXHRcdFx0XHRcdGF3YWl0IGJ1aWxkZXIuZXhlY3V0ZSgpO1xuXHRcdFx0XHRcdGNvbnN0IGZpZWxkID0gdmFsdWVzLmlkID8gXCJpZFwiIDogd2hlcmUubGVuZ3RoID4gMCAmJiB3aGVyZVswXT8uZmllbGQgPyB3aGVyZVswXS5maWVsZCA6IFwiaWRcIjtcblx0XHRcdFx0XHRpZiAoIXZhbHVlcy5pZCAmJiB3aGVyZS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdHJlcyA9IGF3YWl0IGRiJDEuc2VsZWN0RnJvbShtb2RlbCkuc2VsZWN0QWxsKCkub3JkZXJCeShnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0ZmllbGRcblx0XHRcdFx0XHRcdH0pLCBcImRlc2NcIikubGltaXQoMSkuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNbZmllbGRdIHx8IHdoZXJlWzBdPy52YWx1ZTtcblx0XHRcdFx0XHRyZXMgPSBhd2FpdCBkYiQxLnNlbGVjdEZyb20obW9kZWwpLnNlbGVjdEFsbCgpLm9yZGVyQnkoZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGRcblx0XHRcdFx0XHR9KSwgXCJkZXNjXCIpLndoZXJlKGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdGZpZWxkXG5cdFx0XHRcdFx0fSksIFwiPVwiLCB2YWx1ZSkubGltaXQoMSkuZXhlY3V0ZVRha2VGaXJzdCgpO1xuXHRcdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiKSB7XG5cdFx0XHRcdFx0cmVzID0gYXdhaXQgYnVpbGRlci5vdXRwdXRBbGwoXCJpbnNlcnRlZFwiKS5leGVjdXRlVGFrZUZpcnN0KCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXMgPSBhd2FpdCBidWlsZGVyLnJldHVybmluZ0FsbCgpLmV4ZWN1dGVUYWtlRmlyc3QoKTtcblx0XHRcdFx0cmV0dXJuIHJlcztcblx0XHRcdH07XG5cdFx0XHRmdW5jdGlvbiBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHcpIHtcblx0XHRcdFx0aWYgKCF3KSByZXR1cm4ge1xuXHRcdFx0XHRcdGFuZDogbnVsbCxcblx0XHRcdFx0XHRvcjogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRjb25zdCBjb25kaXRpb25zID0ge1xuXHRcdFx0XHRcdGFuZDogW10sXG5cdFx0XHRcdFx0b3I6IFtdXG5cdFx0XHRcdH07XG5cdFx0XHRcdHcuZm9yRWFjaCgoY29uZGl0aW9uKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgeyBmaWVsZDogX2ZpZWxkLCB2YWx1ZTogX3ZhbHVlLCBvcGVyYXRvciA9IFwiPVwiLCBjb25uZWN0b3IgPSBcIkFORFwiIH0gPSBjb25kaXRpb247XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBfdmFsdWU7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZDogX2ZpZWxkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgZXhwciA9IChlYikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZiA9IGAke21vZGVsfS4ke2ZpZWxkfWA7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IudG9Mb3dlckNhc2UoKSA9PT0gXCJpblwiKSByZXR1cm4gZWIoZiwgXCJpblwiLCBBcnJheS5pc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogW3ZhbHVlXSk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IudG9Mb3dlckNhc2UoKSA9PT0gXCJub3RfaW5cIikgcmV0dXJuIGViKGYsIFwibm90IGluXCIsIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJjb250YWluc1wiKSByZXR1cm4gZWIoZiwgXCJsaWtlXCIsIGAlJHt2YWx1ZX0lYCk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwic3RhcnRzX3dpdGhcIikgcmV0dXJuIGViKGYsIFwibGlrZVwiLCBgJHt2YWx1ZX0lYCk7XG5cdFx0XHRcdFx0XHRpZiAob3BlcmF0b3IgPT09IFwiZW5kc193aXRoXCIpIHJldHVybiBlYihmLCBcImxpa2VcIiwgYCUke3ZhbHVlfWApO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImVxXCIpIHJldHVybiBlYihmLCBcIj1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcIm5lXCIpIHJldHVybiBlYihmLCBcIjw+XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJndFwiKSByZXR1cm4gZWIoZiwgXCI+XCIsIHZhbHVlKTtcblx0XHRcdFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJndGVcIikgcmV0dXJuIGViKGYsIFwiPj1cIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImx0XCIpIHJldHVybiBlYihmLCBcIjxcIiwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0aWYgKG9wZXJhdG9yID09PSBcImx0ZVwiKSByZXR1cm4gZWIoZiwgXCI8PVwiLCB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWIoZiwgb3BlcmF0b3IsIHZhbHVlKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGlmIChjb25uZWN0b3IgPT09IFwiT1JcIikgY29uZGl0aW9ucy5vci5wdXNoKGV4cHIpO1xuXHRcdFx0XHRcdGVsc2UgY29uZGl0aW9ucy5hbmQucHVzaChleHByKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YW5kOiBjb25kaXRpb25zLmFuZC5sZW5ndGggPyBjb25kaXRpb25zLmFuZCA6IG51bGwsXG5cdFx0XHRcdFx0b3I6IGNvbmRpdGlvbnMub3IubGVuZ3RoID8gY29uZGl0aW9ucy5vciA6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGZ1bmN0aW9uIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJvd3MsIGpvaW5Db25maWcsIGFsbFNlbGVjdHNTdHIpIHtcblx0XHRcdFx0aWYgKCFqb2luQ29uZmlnIHx8ICFyb3dzLmxlbmd0aCkgcmV0dXJuIHJvd3M7XG5cdFx0XHRcdGNvbnN0IGdyb3VwZWRCeU1haW5JZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdFx0XHRcdGZvciAoY29uc3QgY3VycmVudFJvdyBvZiByb3dzKSB7XG5cdFx0XHRcdFx0Y29uc3QgbWFpbk1vZGVsRmllbGRzID0ge307XG5cdFx0XHRcdFx0Y29uc3Qgam9pbmVkTW9kZWxGaWVsZHMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWxdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSBqb2luZWRNb2RlbEZpZWxkc1tnZXRNb2RlbE5hbWUoam9pbk1vZGVsKV0gPSB7fTtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjdXJyZW50Um93KSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qga2V5U3RyID0gU3RyaW5nKGtleSk7XG5cdFx0XHRcdFx0XHRsZXQgYXNzaWduZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgeyBqb2luTW9kZWwsIGZpZWxkTmFtZSwgam9pbk1vZGVsUmVmIH0gb2YgYWxsU2VsZWN0c1N0cikgaWYgKGtleVN0ciA9PT0gYF9qb2luZWRfJHtqb2luTW9kZWxSZWZ9XyR7ZmllbGROYW1lfWApIHtcblx0XHRcdFx0XHRcdFx0am9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldW2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0bW9kZWw6IGpvaW5Nb2RlbCxcblx0XHRcdFx0XHRcdFx0XHRmaWVsZDogZmllbGROYW1lXG5cdFx0XHRcdFx0XHRcdH0pXSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhc3NpZ25lZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCFhc3NpZ25lZCkgbWFpbk1vZGVsRmllbGRzW2tleV0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgbWFpbklkID0gbWFpbk1vZGVsRmllbGRzLmlkO1xuXHRcdFx0XHRcdGlmICghbWFpbklkKSBjb250aW51ZTtcblx0XHRcdFx0XHRpZiAoIWdyb3VwZWRCeU1haW5JZC5oYXMobWFpbklkKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZW50cnkkMSA9IHsgLi4ubWFpbk1vZGVsRmllbGRzIH07XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luQ29uZmlnKSkgZW50cnkkMVtnZXRNb2RlbE5hbWUoam9pbk1vZGVsKV0gPSBqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIgPyBudWxsIDogW107XG5cdFx0XHRcdFx0XHRncm91cGVkQnlNYWluSWQuc2V0KG1haW5JZCwgZW50cnkkMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IGVudHJ5ID0gZ3JvdXBlZEJ5TWFpbklkLmdldChtYWluSWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBpc1VuaXF1ZSA9IGpvaW5BdHRyLnJlbGF0aW9uID09PSBcIm9uZS10by1vbmVcIjtcblx0XHRcdFx0XHRcdGNvbnN0IGxpbWl0ID0gam9pbkF0dHIubGltaXQgPz8gMTAwO1xuXHRcdFx0XHRcdFx0Y29uc3Qgam9pbmVkT2JqID0gam9pbmVkTW9kZWxGaWVsZHNbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldO1xuXHRcdFx0XHRcdFx0Y29uc3QgaGFzRGF0YSA9IGpvaW5lZE9iaiAmJiBPYmplY3Qua2V5cyhqb2luZWRPYmopLmxlbmd0aCA+IDAgJiYgT2JqZWN0LnZhbHVlcyhqb2luZWRPYmopLnNvbWUoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKTtcblx0XHRcdFx0XHRcdGlmIChpc1VuaXF1ZSkgZW50cnlbZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCldID0gaGFzRGF0YSA/IGpvaW5lZE9iaiA6IG51bGw7XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShlbnRyeVtqb2luTW9kZWxOYW1lXSkgJiYgaGFzRGF0YSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPj0gbGltaXQpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlkRmllbGROYW1lID0gZ2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdFx0XHRcdG1vZGVsOiBqb2luTW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRmaWVsZDogXCJpZFwiXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgam9pbmVkSWQgPSBqb2luZWRPYmpbaWRGaWVsZE5hbWVdO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChqb2luZWRJZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFlbnRyeVtqb2luTW9kZWxOYW1lXS5zb21lKChpdGVtKSA9PiBpdGVtW2lkRmllbGROYW1lXSA9PT0gam9pbmVkSWQpICYmIGVudHJ5W2pvaW5Nb2RlbE5hbWVdLmxlbmd0aCA8IGxpbWl0KSBlbnRyeVtqb2luTW9kZWxOYW1lXS5wdXNoKGpvaW5lZE9iaik7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChlbnRyeVtqb2luTW9kZWxOYW1lXS5sZW5ndGggPCBsaW1pdCkgZW50cnlbam9pbk1vZGVsTmFtZV0ucHVzaChqb2luZWRPYmopO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IEFycmF5LmZyb20oZ3JvdXBlZEJ5TWFpbklkLnZhbHVlcygpKTtcblx0XHRcdFx0Zm9yIChjb25zdCBlbnRyeSBvZiByZXN1bHQpIGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW5Db25maWcpKSBpZiAoam9pbkF0dHIucmVsYXRpb24gIT09IFwib25lLXRvLW9uZVwiKSB7XG5cdFx0XHRcdFx0Y29uc3Qgam9pbk1vZGVsTmFtZSA9IGdldE1vZGVsTmFtZShqb2luTW9kZWwpO1xuXHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KGVudHJ5W2pvaW5Nb2RlbE5hbWVdKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGltaXQgPSBqb2luQXR0ci5saW1pdCA/PyAxMDA7XG5cdFx0XHRcdFx0XHRpZiAoZW50cnlbam9pbk1vZGVsTmFtZV0ubGVuZ3RoID4gbGltaXQpIGVudHJ5W2pvaW5Nb2RlbE5hbWVdID0gZW50cnlbam9pbk1vZGVsTmFtZV0uc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0YXN5bmMgY3JlYXRlKHsgZGF0YSwgbW9kZWwgfSkge1xuXHRcdFx0XHRcdHJldHVybiBhd2FpdCB3aXRoUmV0dXJuaW5nKGRhdGEsIGRiJDEuaW5zZXJ0SW50byhtb2RlbCkudmFsdWVzKGRhdGEpLCBtb2RlbCwgW10pO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyBmaW5kT25lKHsgbW9kZWwsIHdoZXJlLCBzZWxlY3QsIGpvaW4gfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKChlYikgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGIgPSBlYi5zZWxlY3RGcm9tKG1vZGVsKTtcblx0XHRcdFx0XHRcdGlmIChhbmQpIGIgPSBiLndoZXJlKChlYiQxKSA9PiBlYiQxLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0aWYgKG9yKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIkMSkpKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5zZWxlY3RBbGwoKS5hcyhcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0fSkuc2VsZWN0QWxsKFwicHJpbWFyeVwiKTtcblx0XHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IFtfam9pbk1vZGVsU2NoZW1hLCBqb2luTW9kZWxOYW1lXSA9IGpvaW5Nb2RlbC5pbmNsdWRlcyhcIi5cIikgPyBqb2luTW9kZWwuc3BsaXQoXCIuXCIpIDogW3ZvaWQgMCwgam9pbk1vZGVsXTtcblx0XHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkubGVmdEpvaW4oYCR7am9pbk1vZGVsfSBhcyBqb2luXyR7am9pbk1vZGVsTmFtZX1gLCAoam9pbiQxKSA9PiBqb2luJDEub25SZWYoYGpvaW5fJHtqb2luTW9kZWxOYW1lfS4ke2pvaW5BdHRyLm9uLnRvfWAsIFwiPVwiLCBgcHJpbWFyeS4ke2pvaW5BdHRyLm9uLmZyb219YCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGFsbFNlbGVjdHNTdHIsIGFsbFNlbGVjdHMgfSA9IHNlbGVjdEFsbEpvaW5zKGpvaW4pO1xuXHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkuc2VsZWN0KGFsbFNlbGVjdHMpO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRpZiAoIXJlcyB8fCAhQXJyYXkuaXNBcnJheShyZXMpIHx8IHJlcy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IHJvdyA9IHJlc1swXTtcblx0XHRcdFx0XHRpZiAoam9pbikgcmV0dXJuIHByb2Nlc3NKb2luZWRSZXN1bHRzKHJlcywgam9pbiwgYWxsU2VsZWN0c1N0cilbMF07XG5cdFx0XHRcdFx0cmV0dXJuIHJvdztcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZmluZE1hbnkoeyBtb2RlbCwgd2hlcmUsIGxpbWl0LCBvZmZzZXQsIHNvcnRCeSwgam9pbiB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnNlbGVjdEZyb20oKGViKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgYiA9IGViLnNlbGVjdEZyb20obW9kZWwpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbmZpZz8udHlwZSA9PT0gXCJtc3NxbFwiKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc29ydEJ5KSBiID0gYi5vcmRlckJ5KGdldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCJcblx0XHRcdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0XHRcdFx0YiA9IGIub2Zmc2V0KG9mZnNldCkuZmV0Y2gobGltaXQgfHwgMTAwKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsaW1pdCAhPT0gdm9pZCAwKSBiID0gYi50b3AobGltaXQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKGxpbWl0ICE9PSB2b2lkIDApIGIgPSBiLmxpbWl0KGxpbWl0KTtcblx0XHRcdFx0XHRcdFx0aWYgKG9mZnNldCAhPT0gdm9pZCAwKSBiID0gYi5vZmZzZXQob2Zmc2V0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzb3J0Qnk/LmZpZWxkKSBiID0gYi5vcmRlckJ5KGAke2dldEZpZWxkTmFtZSh7XG5cdFx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0XHRmaWVsZDogc29ydEJ5LmZpZWxkXG5cdFx0XHRcdFx0XHR9KX1gLCBzb3J0QnkuZGlyZWN0aW9uKTtcblx0XHRcdFx0XHRcdGlmIChhbmQpIGIgPSBiLndoZXJlKChlYiQxKSA9PiBlYiQxLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViJDEpKSkpO1xuXHRcdFx0XHRcdFx0aWYgKG9yKSBiID0gYi53aGVyZSgoZWIkMSkgPT4gZWIkMS5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIkMSkpKSk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5zZWxlY3RBbGwoKS5hcyhcInByaW1hcnlcIik7XG5cdFx0XHRcdFx0fSkuc2VsZWN0QWxsKFwicHJpbWFyeVwiKTtcblx0XHRcdFx0XHRpZiAoam9pbikgZm9yIChjb25zdCBbam9pbk1vZGVsLCBqb2luQXR0cl0gb2YgT2JqZWN0LmVudHJpZXMoam9pbikpIHtcblx0XHRcdFx0XHRcdGNvbnN0IFtfam9pbk1vZGVsU2NoZW1hLCBqb2luTW9kZWxOYW1lXSA9IGpvaW5Nb2RlbC5pbmNsdWRlcyhcIi5cIikgPyBqb2luTW9kZWwuc3BsaXQoXCIuXCIpIDogW3ZvaWQgMCwgam9pbk1vZGVsXTtcblx0XHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkubGVmdEpvaW4oYCR7am9pbk1vZGVsfSBhcyBqb2luXyR7am9pbk1vZGVsTmFtZX1gLCAoam9pbiQxKSA9PiBqb2luJDEub25SZWYoYGpvaW5fJHtqb2luTW9kZWxOYW1lfS4ke2pvaW5BdHRyLm9uLnRvfWAsIFwiPVwiLCBgcHJpbWFyeS4ke2pvaW5BdHRyLm9uLmZyb219YCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCB7IGFsbFNlbGVjdHNTdHIsIGFsbFNlbGVjdHMgfSA9IHNlbGVjdEFsbEpvaW5zKGpvaW4pO1xuXHRcdFx0XHRcdHF1ZXJ5ID0gcXVlcnkuc2VsZWN0KGFsbFNlbGVjdHMpO1xuXHRcdFx0XHRcdGlmIChzb3J0Qnk/LmZpZWxkKSBxdWVyeSA9IHF1ZXJ5Lm9yZGVyQnkoYCR7Z2V0RmllbGROYW1lKHtcblx0XHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IHNvcnRCeS5maWVsZFxuXHRcdFx0XHRcdH0pfWAsIHNvcnRCeS5kaXJlY3Rpb24pO1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0XHRpZiAoIXJlcykgcmV0dXJuIFtdO1xuXHRcdFx0XHRcdGlmIChqb2luKSByZXR1cm4gcHJvY2Vzc0pvaW5lZFJlc3VsdHMocmVzLCBqb2luLCBhbGxTZWxlY3RzU3RyKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyB1cGRhdGUoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZTogdmFsdWVzIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEudXBkYXRlVGFibGUobW9kZWwpLnNldCh2YWx1ZXMpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgd2l0aFJldHVybmluZyh2YWx1ZXMsIHF1ZXJ5LCBtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhc3luYyB1cGRhdGVNYW55KHsgbW9kZWwsIHdoZXJlLCB1cGRhdGU6IHZhbHVlcyB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLnVwZGF0ZVRhYmxlKG1vZGVsKS5zZXQodmFsdWVzKTtcblx0XHRcdFx0XHRpZiAoYW5kKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIuYW5kKGFuZC5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGlmIChvcikgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLm9yKG9yLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gKGF3YWl0IHF1ZXJ5LmV4ZWN1dGVUYWtlRmlyc3QoKSkubnVtVXBkYXRlZFJvd3M7XG5cdFx0XHRcdFx0cmV0dXJuIHJlcyA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSID8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgOiBOdW1iZXIocmVzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgY291bnQoeyBtb2RlbCwgd2hlcmUgfSkge1xuXHRcdFx0XHRcdGNvbnN0IHsgYW5kLCBvciB9ID0gY29udmVydFdoZXJlQ2xhdXNlKG1vZGVsLCB3aGVyZSk7XG5cdFx0XHRcdFx0bGV0IHF1ZXJ5ID0gZGIkMS5zZWxlY3RGcm9tKG1vZGVsKS5zZWxlY3QoZGIkMS5mbi5jb3VudChcImlkXCIpLmFzKFwiY291bnRcIikpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBhd2FpdCBxdWVyeS5leGVjdXRlKCk7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNbMF0uY291bnQgPT09IFwibnVtYmVyXCIpIHJldHVybiByZXNbMF0uY291bnQ7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiByZXNbMF0uY291bnQgPT09IFwiYmlnaW50XCIpIHJldHVybiBOdW1iZXIocmVzWzBdLmNvdW50KTtcblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VJbnQocmVzWzBdLmNvdW50KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZGVsZXRlKHsgbW9kZWwsIHdoZXJlIH0pIHtcblx0XHRcdFx0XHRjb25zdCB7IGFuZCwgb3IgfSA9IGNvbnZlcnRXaGVyZUNsYXVzZShtb2RlbCwgd2hlcmUpO1xuXHRcdFx0XHRcdGxldCBxdWVyeSA9IGRiJDEuZGVsZXRlRnJvbShtb2RlbCk7XG5cdFx0XHRcdFx0aWYgKGFuZCkgcXVlcnkgPSBxdWVyeS53aGVyZSgoZWIpID0+IGViLmFuZChhbmQubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRpZiAob3IpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5vcihvci5tYXAoKGV4cHIpID0+IGV4cHIoZWIpKSkpO1xuXHRcdFx0XHRcdGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgZGVsZXRlTWFueSh7IG1vZGVsLCB3aGVyZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgeyBhbmQsIG9yIH0gPSBjb252ZXJ0V2hlcmVDbGF1c2UobW9kZWwsIHdoZXJlKTtcblx0XHRcdFx0XHRsZXQgcXVlcnkgPSBkYiQxLmRlbGV0ZUZyb20obW9kZWwpO1xuXHRcdFx0XHRcdGlmIChhbmQpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoKGViKSA9PiBlYi5hbmQoYW5kLm1hcCgoZXhwcikgPT4gZXhwcihlYikpKSk7XG5cdFx0XHRcdFx0aWYgKG9yKSBxdWVyeSA9IHF1ZXJ5LndoZXJlKChlYikgPT4gZWIub3Iob3IubWFwKChleHByKSA9PiBleHByKGViKSkpKTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSAoYXdhaXQgcXVlcnkuZXhlY3V0ZVRha2VGaXJzdCgpKS5udW1EZWxldGVkUm93cztcblx0XHRcdFx0XHRyZXR1cm4gcmVzID4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgPyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiA6IE51bWJlcihyZXMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRvcHRpb25zOiBjb25maWdcblx0XHRcdH07XG5cdFx0fTtcblx0fTtcblx0bGV0IGFkYXB0ZXJPcHRpb25zID0gbnVsbDtcblx0YWRhcHRlck9wdGlvbnMgPSB7XG5cdFx0Y29uZmlnOiB7XG5cdFx0XHRhZGFwdGVySWQ6IFwia3lzZWx5XCIsXG5cdFx0XHRhZGFwdGVyTmFtZTogXCJLeXNlbHkgQWRhcHRlclwiLFxuXHRcdFx0dXNlUGx1cmFsOiBjb25maWc/LnVzZVBsdXJhbCxcblx0XHRcdGRlYnVnTG9nczogY29uZmlnPy5kZWJ1Z0xvZ3MsXG5cdFx0XHRzdXBwb3J0c0Jvb2xlYW5zOiBjb25maWc/LnR5cGUgPT09IFwic3FsaXRlXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm1zc3FsXCIgfHwgY29uZmlnPy50eXBlID09PSBcIm15c3FsXCIgfHwgIWNvbmZpZz8udHlwZSA/IGZhbHNlIDogdHJ1ZSxcblx0XHRcdHN1cHBvcnRzRGF0ZXM6IGNvbmZpZz8udHlwZSA9PT0gXCJzcWxpdGVcIiB8fCBjb25maWc/LnR5cGUgPT09IFwibXNzcWxcIiB8fCAhY29uZmlnPy50eXBlID8gZmFsc2UgOiB0cnVlLFxuXHRcdFx0c3VwcG9ydHNKU09OOiBjb25maWc/LnR5cGUgPT09IFwicG9zdGdyZXNcIiA/IHRydWUgOiBmYWxzZSxcblx0XHRcdHN1cHBvcnRzQXJyYXlzOiBmYWxzZSxcblx0XHRcdHN1cHBvcnRzVVVJRHM6IGNvbmZpZz8udHlwZSA9PT0gXCJwb3N0Z3Jlc1wiID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb246IGNvbmZpZz8udHJhbnNhY3Rpb24gPyAoY2IpID0+IGRiLnRyYW5zYWN0aW9uKCkuZXhlY3V0ZSgodHJ4KSA9PiB7XG5cdFx0XHRcdHJldHVybiBjYihjcmVhdGVBZGFwdGVyRmFjdG9yeSh7XG5cdFx0XHRcdFx0Y29uZmlnOiBhZGFwdGVyT3B0aW9ucy5jb25maWcsXG5cdFx0XHRcdFx0YWRhcHRlcjogY3JlYXRlQ3VzdG9tQWRhcHRlcih0cngpXG5cdFx0XHRcdH0pKGxhenlPcHRpb25zKSk7XG5cdFx0XHR9KSA6IGZhbHNlXG5cdFx0fSxcblx0XHRhZGFwdGVyOiBjcmVhdGVDdXN0b21BZGFwdGVyKGRiKVxuXHR9O1xuXHRjb25zdCBhZGFwdGVyID0gY3JlYXRlQWRhcHRlckZhY3RvcnkoYWRhcHRlck9wdGlvbnMpO1xuXHRyZXR1cm4gKG9wdGlvbnMpID0+IHtcblx0XHRsYXp5T3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0cmV0dXJuIGFkYXB0ZXIob3B0aW9ucyk7XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGt5c2VseUFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWt5c2VseS1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/kysely-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeSqliteDialect: () => (/* binding */ NodeSqliteDialect)\n/* harmony export */ });\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/compiled-query.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/migration/migrator.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/query-compiler/default-query-compiler.js\");\n\n\n//#region src/adapters/kysely-adapter/node-sqlite-dialect.ts\nvar NodeSqliteAdapter = class {\n\tget supportsCreateIfNotExists() {\n\t\treturn true;\n\t}\n\tget supportsTransactionalDdl() {\n\t\treturn false;\n\t}\n\tget supportsReturning() {\n\t\treturn true;\n\t}\n\tasync acquireMigrationLock() {}\n\tasync releaseMigrationLock() {}\n\tget supportsOutput() {\n\t\treturn true;\n\t}\n};\nvar NodeSqliteDriver = class {\n\t#config;\n\t#connectionMutex = new ConnectionMutex();\n\t#db;\n\t#connection;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tasync init() {\n\t\tthis.#db = this.#config.database;\n\t\tthis.#connection = new NodeSqliteConnection(this.#db);\n\t\tif (this.#config.onCreateConnection) await this.#config.onCreateConnection(this.#connection);\n\t}\n\tasync acquireConnection() {\n\t\tawait this.#connectionMutex.lock();\n\t\treturn this.#connection;\n\t}\n\tasync beginTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"begin\"));\n\t}\n\tasync commitTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"commit\"));\n\t}\n\tasync rollbackTransaction(connection) {\n\t\tawait connection.executeQuery(kysely__WEBPACK_IMPORTED_MODULE_0__.CompiledQuery.raw(\"rollback\"));\n\t}\n\tasync releaseConnection() {\n\t\tthis.#connectionMutex.unlock();\n\t}\n\tasync destroy() {\n\t\tthis.#db?.close();\n\t}\n};\nvar NodeSqliteConnection = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\texecuteQuery(compiledQuery) {\n\t\tconst { sql: sql$1, parameters } = compiledQuery;\n\t\tconst rows = this.#db.prepare(sql$1).all(...parameters);\n\t\treturn Promise.resolve({ rows });\n\t}\n\tasync *streamQuery() {\n\t\tthrow new Error(\"Streaming query is not supported by SQLite driver.\");\n\t}\n};\nvar ConnectionMutex = class {\n\t#promise;\n\t#resolve;\n\tasync lock() {\n\t\twhile (this.#promise) await this.#promise;\n\t\tthis.#promise = new Promise((resolve) => {\n\t\t\tthis.#resolve = resolve;\n\t\t});\n\t}\n\tunlock() {\n\t\tconst resolve = this.#resolve;\n\t\tthis.#promise = void 0;\n\t\tthis.#resolve = void 0;\n\t\tresolve?.();\n\t}\n};\nvar NodeSqliteIntrospector = class {\n\t#db;\n\tconstructor(db) {\n\t\tthis.#db = db;\n\t}\n\tasync getSchemas() {\n\t\treturn [];\n\t}\n\tasync getTables(options = { withInternalKyselyTables: false }) {\n\t\tlet query = this.#db.selectFrom(\"sqlite_schema\").where(\"type\", \"=\", \"table\").where(\"name\", \"not like\", \"sqlite_%\").select(\"name\").$castTo();\n\t\tif (!options.withInternalKyselyTables) query = query.where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_TABLE).where(\"name\", \"!=\", kysely__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_MIGRATION_LOCK_TABLE);\n\t\tconst tables = await query.execute();\n\t\treturn Promise.all(tables.map(({ name }) => this.#getTableMetadata(name)));\n\t}\n\tasync getMetadata(options) {\n\t\treturn { tables: await this.getTables(options) };\n\t}\n\tasync #getTableMetadata(table) {\n\t\tconst db = this.#db;\n\t\tconst autoIncrementCol = (await db.selectFrom(\"sqlite_master\").where(\"name\", \"=\", table).select(\"sql\").$castTo().execute())[0]?.sql?.split(/[\\(\\),]/)?.find((it) => it.toLowerCase().includes(\"autoincrement\"))?.split(/\\s+/)?.[0]?.replace(/[\"`]/g, \"\");\n\t\treturn {\n\t\t\tname: table,\n\t\t\tcolumns: (await db.selectFrom((0,kysely__WEBPACK_IMPORTED_MODULE_2__.sql)`pragma_table_info(${table})`.as(\"table_info\")).select([\n\t\t\t\t\"name\",\n\t\t\t\t\"type\",\n\t\t\t\t\"notnull\",\n\t\t\t\t\"dflt_value\"\n\t\t\t]).execute()).map((col) => ({\n\t\t\t\tname: col.name,\n\t\t\t\tdataType: col.type,\n\t\t\t\tisNullable: !col.notnull,\n\t\t\t\tisAutoIncrementing: col.name === autoIncrementCol,\n\t\t\t\thasDefaultValue: col.dflt_value != null\n\t\t\t})),\n\t\t\tisView: true\n\t\t};\n\t}\n};\nvar NodeSqliteQueryCompiler = class extends kysely__WEBPACK_IMPORTED_MODULE_3__.DefaultQueryCompiler {\n\tgetCurrentParameterPlaceholder() {\n\t\treturn \"?\";\n\t}\n\tgetLeftIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetRightIdentifierWrapper() {\n\t\treturn \"\\\"\";\n\t}\n\tgetAutoIncrement() {\n\t\treturn \"autoincrement\";\n\t}\n};\nvar NodeSqliteDialect = class {\n\t#config;\n\tconstructor(config) {\n\t\tthis.#config = { ...config };\n\t}\n\tcreateDriver() {\n\t\treturn new NodeSqliteDriver(this.#config);\n\t}\n\tcreateQueryCompiler() {\n\t\treturn new NodeSqliteQueryCompiler();\n\t}\n\tcreateAdapter() {\n\t\treturn new NodeSqliteAdapter();\n\t}\n\tcreateIntrospector(db) {\n\t\treturn new NodeSqliteIntrospector(db);\n\t}\n};\n\n//#endregion\n\n//# sourceMappingURL=node-sqlite-dialect.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9reXNlbHktYWRhcHRlci9ub2RlLXNxbGl0ZS1kaWFsZWN0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF5SDs7QUFFekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFhO0FBQzdDO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQWE7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQyxpREFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSx5QkFBeUI7QUFDbkM7QUFDQSwyQkFBMkIsTUFBTTtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUNBQWlDO0FBQzlEO0FBQ0EsMkVBQTJFLDJEQUF1QixzQkFBc0IsZ0VBQTRCO0FBQ3BKO0FBQ0EsbUNBQW1DLE1BQU07QUFDekM7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsMkNBQUcscUJBQXFCLE1BQU07QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsd0RBQW9CO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvbm9kZS1zcWxpdGUtZGlhbGVjdC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcGlsZWRRdWVyeSwgREVGQVVMVF9NSUdSQVRJT05fTE9DS19UQUJMRSwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUsIERlZmF1bHRRdWVyeUNvbXBpbGVyLCBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5cbi8vI3JlZ2lvbiBzcmMvYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvbm9kZS1zcWxpdGUtZGlhbGVjdC50c1xudmFyIE5vZGVTcWxpdGVBZGFwdGVyID0gY2xhc3Mge1xuXHRnZXQgc3VwcG9ydHNDcmVhdGVJZk5vdEV4aXN0cygpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRnZXQgc3VwcG9ydHNUcmFuc2FjdGlvbmFsRGRsKCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRnZXQgc3VwcG9ydHNSZXR1cm5pbmcoKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0YXN5bmMgYWNxdWlyZU1pZ3JhdGlvbkxvY2soKSB7fVxuXHRhc3luYyByZWxlYXNlTWlncmF0aW9uTG9jaygpIHt9XG5cdGdldCBzdXBwb3J0c091dHB1dCgpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufTtcbnZhciBOb2RlU3FsaXRlRHJpdmVyID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHQjY29ubmVjdGlvbk11dGV4ID0gbmV3IENvbm5lY3Rpb25NdXRleCgpO1xuXHQjZGI7XG5cdCNjb25uZWN0aW9uO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGFzeW5jIGluaXQoKSB7XG5cdFx0dGhpcy4jZGIgPSB0aGlzLiNjb25maWcuZGF0YWJhc2U7XG5cdFx0dGhpcy4jY29ubmVjdGlvbiA9IG5ldyBOb2RlU3FsaXRlQ29ubmVjdGlvbih0aGlzLiNkYik7XG5cdFx0aWYgKHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24pIGF3YWl0IHRoaXMuI2NvbmZpZy5vbkNyZWF0ZUNvbm5lY3Rpb24odGhpcy4jY29ubmVjdGlvbik7XG5cdH1cblx0YXN5bmMgYWNxdWlyZUNvbm5lY3Rpb24oKSB7XG5cdFx0YXdhaXQgdGhpcy4jY29ubmVjdGlvbk11dGV4LmxvY2soKTtcblx0XHRyZXR1cm4gdGhpcy4jY29ubmVjdGlvbjtcblx0fVxuXHRhc3luYyBiZWdpblRyYW5zYWN0aW9uKGNvbm5lY3Rpb24pIHtcblx0XHRhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShDb21waWxlZFF1ZXJ5LnJhdyhcImJlZ2luXCIpKTtcblx0fVxuXHRhc3luYyBjb21taXRUcmFuc2FjdGlvbihjb25uZWN0aW9uKSB7XG5cdFx0YXdhaXQgY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoQ29tcGlsZWRRdWVyeS5yYXcoXCJjb21taXRcIikpO1xuXHR9XG5cdGFzeW5jIHJvbGxiYWNrVHJhbnNhY3Rpb24oY29ubmVjdGlvbikge1xuXHRcdGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KENvbXBpbGVkUXVlcnkucmF3KFwicm9sbGJhY2tcIikpO1xuXHR9XG5cdGFzeW5jIHJlbGVhc2VDb25uZWN0aW9uKCkge1xuXHRcdHRoaXMuI2Nvbm5lY3Rpb25NdXRleC51bmxvY2soKTtcblx0fVxuXHRhc3luYyBkZXN0cm95KCkge1xuXHRcdHRoaXMuI2RiPy5jbG9zZSgpO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVDb25uZWN0aW9uID0gY2xhc3Mge1xuXHQjZGI7XG5cdGNvbnN0cnVjdG9yKGRiKSB7XG5cdFx0dGhpcy4jZGIgPSBkYjtcblx0fVxuXHRleGVjdXRlUXVlcnkoY29tcGlsZWRRdWVyeSkge1xuXHRcdGNvbnN0IHsgc3FsOiBzcWwkMSwgcGFyYW1ldGVycyB9ID0gY29tcGlsZWRRdWVyeTtcblx0XHRjb25zdCByb3dzID0gdGhpcy4jZGIucHJlcGFyZShzcWwkMSkuYWxsKC4uLnBhcmFtZXRlcnMpO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoeyByb3dzIH0pO1xuXHR9XG5cdGFzeW5jICpzdHJlYW1RdWVyeSgpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTdHJlYW1pbmcgcXVlcnkgaXMgbm90IHN1cHBvcnRlZCBieSBTUUxpdGUgZHJpdmVyLlwiKTtcblx0fVxufTtcbnZhciBDb25uZWN0aW9uTXV0ZXggPSBjbGFzcyB7XG5cdCNwcm9taXNlO1xuXHQjcmVzb2x2ZTtcblx0YXN5bmMgbG9jaygpIHtcblx0XHR3aGlsZSAodGhpcy4jcHJvbWlzZSkgYXdhaXQgdGhpcy4jcHJvbWlzZTtcblx0XHR0aGlzLiNwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdHRoaXMuI3Jlc29sdmUgPSByZXNvbHZlO1xuXHRcdH0pO1xuXHR9XG5cdHVubG9jaygpIHtcblx0XHRjb25zdCByZXNvbHZlID0gdGhpcy4jcmVzb2x2ZTtcblx0XHR0aGlzLiNwcm9taXNlID0gdm9pZCAwO1xuXHRcdHRoaXMuI3Jlc29sdmUgPSB2b2lkIDA7XG5cdFx0cmVzb2x2ZT8uKCk7XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZUludHJvc3BlY3RvciA9IGNsYXNzIHtcblx0I2RiO1xuXHRjb25zdHJ1Y3RvcihkYikge1xuXHRcdHRoaXMuI2RiID0gZGI7XG5cdH1cblx0YXN5bmMgZ2V0U2NoZW1hcygpIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0YXN5bmMgZ2V0VGFibGVzKG9wdGlvbnMgPSB7IHdpdGhJbnRlcm5hbEt5c2VseVRhYmxlczogZmFsc2UgfSkge1xuXHRcdGxldCBxdWVyeSA9IHRoaXMuI2RiLnNlbGVjdEZyb20oXCJzcWxpdGVfc2NoZW1hXCIpLndoZXJlKFwidHlwZVwiLCBcIj1cIiwgXCJ0YWJsZVwiKS53aGVyZShcIm5hbWVcIiwgXCJub3QgbGlrZVwiLCBcInNxbGl0ZV8lXCIpLnNlbGVjdChcIm5hbWVcIikuJGNhc3RUbygpO1xuXHRcdGlmICghb3B0aW9ucy53aXRoSW50ZXJuYWxLeXNlbHlUYWJsZXMpIHF1ZXJ5ID0gcXVlcnkud2hlcmUoXCJuYW1lXCIsIFwiIT1cIiwgREVGQVVMVF9NSUdSQVRJT05fVEFCTEUpLndoZXJlKFwibmFtZVwiLCBcIiE9XCIsIERFRkFVTFRfTUlHUkFUSU9OX0xPQ0tfVEFCTEUpO1xuXHRcdGNvbnN0IHRhYmxlcyA9IGF3YWl0IHF1ZXJ5LmV4ZWN1dGUoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodGFibGVzLm1hcCgoeyBuYW1lIH0pID0+IHRoaXMuI2dldFRhYmxlTWV0YWRhdGEobmFtZSkpKTtcblx0fVxuXHRhc3luYyBnZXRNZXRhZGF0YShvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHsgdGFibGVzOiBhd2FpdCB0aGlzLmdldFRhYmxlcyhvcHRpb25zKSB9O1xuXHR9XG5cdGFzeW5jICNnZXRUYWJsZU1ldGFkYXRhKHRhYmxlKSB7XG5cdFx0Y29uc3QgZGIgPSB0aGlzLiNkYjtcblx0XHRjb25zdCBhdXRvSW5jcmVtZW50Q29sID0gKGF3YWl0IGRiLnNlbGVjdEZyb20oXCJzcWxpdGVfbWFzdGVyXCIpLndoZXJlKFwibmFtZVwiLCBcIj1cIiwgdGFibGUpLnNlbGVjdChcInNxbFwiKS4kY2FzdFRvKCkuZXhlY3V0ZSgpKVswXT8uc3FsPy5zcGxpdCgvW1xcKFxcKSxdLyk/LmZpbmQoKGl0KSA9PiBpdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYXV0b2luY3JlbWVudFwiKSk/LnNwbGl0KC9cXHMrLyk/LlswXT8ucmVwbGFjZSgvW1wiYF0vZywgXCJcIik7XG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IHRhYmxlLFxuXHRcdFx0Y29sdW1uczogKGF3YWl0IGRiLnNlbGVjdEZyb20oc3FsYHByYWdtYV90YWJsZV9pbmZvKCR7dGFibGV9KWAuYXMoXCJ0YWJsZV9pbmZvXCIpKS5zZWxlY3QoW1xuXHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XCJ0eXBlXCIsXG5cdFx0XHRcdFwibm90bnVsbFwiLFxuXHRcdFx0XHRcImRmbHRfdmFsdWVcIlxuXHRcdFx0XSkuZXhlY3V0ZSgpKS5tYXAoKGNvbCkgPT4gKHtcblx0XHRcdFx0bmFtZTogY29sLm5hbWUsXG5cdFx0XHRcdGRhdGFUeXBlOiBjb2wudHlwZSxcblx0XHRcdFx0aXNOdWxsYWJsZTogIWNvbC5ub3RudWxsLFxuXHRcdFx0XHRpc0F1dG9JbmNyZW1lbnRpbmc6IGNvbC5uYW1lID09PSBhdXRvSW5jcmVtZW50Q29sLFxuXHRcdFx0XHRoYXNEZWZhdWx0VmFsdWU6IGNvbC5kZmx0X3ZhbHVlICE9IG51bGxcblx0XHRcdH0pKSxcblx0XHRcdGlzVmlldzogdHJ1ZVxuXHRcdH07XG5cdH1cbn07XG52YXIgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIgPSBjbGFzcyBleHRlbmRzIERlZmF1bHRRdWVyeUNvbXBpbGVyIHtcblx0Z2V0Q3VycmVudFBhcmFtZXRlclBsYWNlaG9sZGVyKCkge1xuXHRcdHJldHVybiBcIj9cIjtcblx0fVxuXHRnZXRMZWZ0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldFJpZ2h0SWRlbnRpZmllcldyYXBwZXIoKSB7XG5cdFx0cmV0dXJuIFwiXFxcIlwiO1xuXHR9XG5cdGdldEF1dG9JbmNyZW1lbnQoKSB7XG5cdFx0cmV0dXJuIFwiYXV0b2luY3JlbWVudFwiO1xuXHR9XG59O1xudmFyIE5vZGVTcWxpdGVEaWFsZWN0ID0gY2xhc3Mge1xuXHQjY29uZmlnO1xuXHRjb25zdHJ1Y3Rvcihjb25maWcpIHtcblx0XHR0aGlzLiNjb25maWcgPSB7IC4uLmNvbmZpZyB9O1xuXHR9XG5cdGNyZWF0ZURyaXZlcigpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVEcml2ZXIodGhpcy4jY29uZmlnKTtcblx0fVxuXHRjcmVhdGVRdWVyeUNvbXBpbGVyKCkge1xuXHRcdHJldHVybiBuZXcgTm9kZVNxbGl0ZVF1ZXJ5Q29tcGlsZXIoKTtcblx0fVxuXHRjcmVhdGVBZGFwdGVyKCkge1xuXHRcdHJldHVybiBuZXcgTm9kZVNxbGl0ZUFkYXB0ZXIoKTtcblx0fVxuXHRjcmVhdGVJbnRyb3NwZWN0b3IoZGIpIHtcblx0XHRyZXR1cm4gbmV3IE5vZGVTcWxpdGVJbnRyb3NwZWN0b3IoZGIpO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IE5vZGVTcWxpdGVEaWFsZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub2RlLXNxbGl0ZS1kaWFsZWN0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/node-sqlite-dialect.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* reexport safe */ _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _memory_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./memory-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYWRhcHRlcnMvbWVtb3J5LWFkYXB0ZXIvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1lbW9yeUFkYXB0ZXIgfSBmcm9tIFwiLi9tZW1vcnktYWRhcHRlci5tanNcIjtcblxuZXhwb3J0IHsgbWVtb3J5QWRhcHRlciB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   memoryAdapter: () => (/* binding */ memoryAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n//#region src/adapters/memory-adapter/memory-adapter.ts\nconst memoryAdapter = (db, config) => {\n\tlet lazyOptions = null;\n\tconst adapterCreator = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_1__.createAdapterFactory)({\n\t\tconfig: {\n\t\t\tadapterId: \"memory\",\n\t\t\tadapterName: \"Memory Adapter\",\n\t\t\tusePlural: false,\n\t\t\tdebugLogs: config?.debugLogs || false,\n\t\t\tsupportsArrays: true,\n\t\t\tcustomTransformInput(props) {\n\t\t\t\tif ((props.options.advanced?.database?.useNumberId || props.options.advanced?.database?.generateId === \"serial\") && props.field === \"id\" && props.action === \"create\") return db[props.model].length + 1;\n\t\t\t\treturn props.data;\n\t\t\t},\n\t\t\ttransaction: async (cb) => {\n\t\t\t\tconst clone = structuredClone(db);\n\t\t\t\ttry {\n\t\t\t\t\treturn await cb(adapterCreator(lazyOptions));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tObject.keys(db).forEach((key) => {\n\t\t\t\t\t\tdb[key] = clone[key];\n\t\t\t\t\t});\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tadapter: ({ getFieldName, options, getModelName }) => {\n\t\t\tconst applySortToRecords = (records, sortBy, model) => {\n\t\t\t\tif (!sortBy) return records;\n\t\t\t\treturn records.sort((a, b) => {\n\t\t\t\t\tconst field = getFieldName({\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\tfield: sortBy.field\n\t\t\t\t\t});\n\t\t\t\t\tconst aValue = a[field];\n\t\t\t\t\tconst bValue = b[field];\n\t\t\t\t\tlet comparison = 0;\n\t\t\t\t\tif (aValue == null && bValue == null) comparison = 0;\n\t\t\t\t\telse if (aValue == null) comparison = -1;\n\t\t\t\t\telse if (bValue == null) comparison = 1;\n\t\t\t\t\telse if (typeof aValue === \"string\" && typeof bValue === \"string\") comparison = aValue.localeCompare(bValue);\n\t\t\t\t\telse if (aValue instanceof Date && bValue instanceof Date) comparison = aValue.getTime() - bValue.getTime();\n\t\t\t\t\telse if (typeof aValue === \"number\" && typeof bValue === \"number\") comparison = aValue - bValue;\n\t\t\t\t\telse if (typeof aValue === \"boolean\" && typeof bValue === \"boolean\") comparison = aValue === bValue ? 0 : aValue ? 1 : -1;\n\t\t\t\t\telse comparison = String(aValue).localeCompare(String(bValue));\n\t\t\t\t\treturn sortBy.direction === \"asc\" ? comparison : -comparison;\n\t\t\t\t});\n\t\t\t};\n\t\t\tfunction convertWhereClause(where, model, join) {\n\t\t\t\tconst execute = (where$1, model$1) => {\n\t\t\t\t\tconst table = db[model$1];\n\t\t\t\t\tif (!table) {\n\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] Model ${model$1} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\tthrow new Error(`Model ${model$1} not found`);\n\t\t\t\t\t}\n\t\t\t\t\tconst evalClause = (record, clause) => {\n\t\t\t\t\t\tconst { field, value, operator } = clause;\n\t\t\t\t\t\tswitch (operator) {\n\t\t\t\t\t\t\tcase \"in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"not_in\":\n\t\t\t\t\t\t\t\tif (!Array.isArray(value)) throw new Error(\"Value must be an array\");\n\t\t\t\t\t\t\t\treturn !value.includes(record[field]);\n\t\t\t\t\t\t\tcase \"contains\": return record[field].includes(value);\n\t\t\t\t\t\t\tcase \"starts_with\": return record[field].startsWith(value);\n\t\t\t\t\t\t\tcase \"ends_with\": return record[field].endsWith(value);\n\t\t\t\t\t\t\tcase \"ne\": return record[field] !== value;\n\t\t\t\t\t\t\tcase \"gt\": return value != null && Boolean(record[field] > value);\n\t\t\t\t\t\t\tcase \"gte\": return value != null && Boolean(record[field] >= value);\n\t\t\t\t\t\t\tcase \"lt\": return value != null && Boolean(record[field] < value);\n\t\t\t\t\t\t\tcase \"lte\": return value != null && Boolean(record[field] <= value);\n\t\t\t\t\t\t\tdefault: return record[field] === value;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treturn table.filter((record) => {\n\t\t\t\t\t\tif (!where$1.length || where$1.length === 0) return true;\n\t\t\t\t\t\tlet result = evalClause(record, where$1[0]);\n\t\t\t\t\t\tfor (const clause of where$1) {\n\t\t\t\t\t\t\tconst clauseResult = evalClause(record, clause);\n\t\t\t\t\t\t\tif (clause.connector === \"OR\") result = result || clauseResult;\n\t\t\t\t\t\t\telse result = result && clauseResult;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tif (!join) return execute(where, model);\n\t\t\t\tconst baseRecords = execute(where, model);\n\t\t\t\tconst grouped = /* @__PURE__ */ new Map();\n\t\t\t\tconst seenIds = /* @__PURE__ */ new Map();\n\t\t\t\tfor (const baseRecord of baseRecords) {\n\t\t\t\t\tconst baseId = String(baseRecord.id);\n\t\t\t\t\tif (!grouped.has(baseId)) {\n\t\t\t\t\t\tconst nested = { ...baseRecord };\n\t\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nested[joinModelName] = null;\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnested[joinModelName] = [];\n\t\t\t\t\t\t\t\tseenIds.set(`${baseId}-${joinModel}`, /* @__PURE__ */ new Set());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tgrouped.set(baseId, nested);\n\t\t\t\t\t}\n\t\t\t\t\tconst nestedEntry = grouped.get(baseId);\n\t\t\t\t\tfor (const [joinModel, joinAttr] of Object.entries(join)) {\n\t\t\t\t\t\tconst joinModelName = getModelName(joinModel);\n\t\t\t\t\t\tconst joinTable = db[joinModelName];\n\t\t\t\t\t\tif (!joinTable) {\n\t\t\t\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.error(`[MemoryAdapter] JoinOption model ${joinModelName} not found in the DB`, Object.keys(db));\n\t\t\t\t\t\t\tthrow new Error(`JoinOption model ${joinModelName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst matchingRecords = joinTable.filter((joinRecord) => joinRecord[joinAttr.on.to] === baseRecord[joinAttr.on.from]);\n\t\t\t\t\t\tif (joinAttr.relation === \"one-to-one\") nestedEntry[joinModelName] = matchingRecords[0] || null;\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconst seenSet = seenIds.get(`${baseId}-${joinModel}`);\n\t\t\t\t\t\t\tconst limit = joinAttr.limit ?? 100;\n\t\t\t\t\t\t\tlet count = 0;\n\t\t\t\t\t\t\tfor (const matchingRecord of matchingRecords) {\n\t\t\t\t\t\t\t\tif (count >= limit) break;\n\t\t\t\t\t\t\t\tif (!seenSet.has(matchingRecord.id)) {\n\t\t\t\t\t\t\t\t\tnestedEntry[joinModelName].push(matchingRecord);\n\t\t\t\t\t\t\t\t\tseenSet.add(matchingRecord.id);\n\t\t\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Array.from(grouped.values());\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tcreate: async ({ model, data }) => {\n\t\t\t\t\tif (options.advanced?.database?.useNumberId || options.advanced?.database?.generateId === \"serial\") data.id = db[getModelName(model)].length + 1;\n\t\t\t\t\tif (!db[model]) db[model] = [];\n\t\t\t\t\tdb[model].push(data);\n\t\t\t\t\treturn data;\n\t\t\t\t},\n\t\t\t\tfindOne: async ({ model, where, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return null;\n\t\t\t\t\t\treturn resArray[0];\n\t\t\t\t\t}\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tfindMany: async ({ model, where, sortBy, limit, offset, join }) => {\n\t\t\t\t\tconst res = convertWhereClause(where || [], model, join);\n\t\t\t\t\tif (join) {\n\t\t\t\t\t\tconst resArray = res;\n\t\t\t\t\t\tif (!resArray.length) return [];\n\t\t\t\t\t\tapplySortToRecords(resArray, sortBy, model);\n\t\t\t\t\t\tlet paginatedRecords = resArray;\n\t\t\t\t\t\tif (offset !== void 0) paginatedRecords = paginatedRecords.slice(offset);\n\t\t\t\t\t\tif (limit !== void 0) paginatedRecords = paginatedRecords.slice(0, limit);\n\t\t\t\t\t\treturn paginatedRecords;\n\t\t\t\t\t}\n\t\t\t\t\tlet table = applySortToRecords(res, sortBy, model);\n\t\t\t\t\tif (offset !== void 0) table = table.slice(offset);\n\t\t\t\t\tif (limit !== void 0) table = table.slice(0, limit);\n\t\t\t\t\treturn table || [];\n\t\t\t\t},\n\t\t\t\tcount: async ({ model, where }) => {\n\t\t\t\t\tif (where) return convertWhereClause(where, model).length;\n\t\t\t\t\treturn db[model].length;\n\t\t\t\t},\n\t\t\t\tupdate: async ({ model, where, update }) => {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t},\n\t\t\t\tdelete: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tdb[model] = table.filter((record) => !res.includes(record));\n\t\t\t\t},\n\t\t\t\tdeleteMany: async ({ model, where }) => {\n\t\t\t\t\tconst table = db[model];\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tdb[model] = table.filter((record) => {\n\t\t\t\t\t\tif (res.includes(record)) {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn !res.includes(record);\n\t\t\t\t\t});\n\t\t\t\t\treturn count;\n\t\t\t\t},\n\t\t\t\tupdateMany({ model, where, update }) {\n\t\t\t\t\tconst res = convertWhereClause(where, model);\n\t\t\t\t\tres.forEach((record) => {\n\t\t\t\t\t\tObject.assign(record, update);\n\t\t\t\t\t});\n\t\t\t\t\treturn res[0] || null;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n\treturn (options) => {\n\t\tlazyOptions = options;\n\t\treturn adapterCreator(options);\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=memory-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9tZW1vcnktYWRhcHRlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ3FCOztBQUVwRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0ZBQW9CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxjQUFjLHFDQUFxQztBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHlEQUFNLGdDQUFnQyxTQUFTO0FBQ3JELCtCQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQSxjQUFjLHlCQUF5QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLE9BQU8sR0FBRyxVQUFVO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8seURBQU0sMkNBQTJDLGVBQWU7QUFDdkUsMkNBQTJDLGVBQWU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsT0FBTyxHQUFHLFVBQVU7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsYUFBYTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxzQkFBc0Isb0JBQW9CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVCQUF1QiwyQ0FBMkM7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0EsS0FBSztBQUNMLHFCQUFxQixzQkFBc0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMLHFCQUFxQixjQUFjO0FBQ25DO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCx5QkFBeUIsY0FBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxLQUFLO0FBQ0wsaUJBQWlCLHNCQUFzQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9tZW1vcnktYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgY3JlYXRlQWRhcHRlckZhY3RvcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGIvYWRhcHRlclwiO1xuXG4vLyNyZWdpb24gc3JjL2FkYXB0ZXJzL21lbW9yeS1hZGFwdGVyL21lbW9yeS1hZGFwdGVyLnRzXG5jb25zdCBtZW1vcnlBZGFwdGVyID0gKGRiLCBjb25maWcpID0+IHtcblx0bGV0IGxhenlPcHRpb25zID0gbnVsbDtcblx0Y29uc3QgYWRhcHRlckNyZWF0b3IgPSBjcmVhdGVBZGFwdGVyRmFjdG9yeSh7XG5cdFx0Y29uZmlnOiB7XG5cdFx0XHRhZGFwdGVySWQ6IFwibWVtb3J5XCIsXG5cdFx0XHRhZGFwdGVyTmFtZTogXCJNZW1vcnkgQWRhcHRlclwiLFxuXHRcdFx0dXNlUGx1cmFsOiBmYWxzZSxcblx0XHRcdGRlYnVnTG9nczogY29uZmlnPy5kZWJ1Z0xvZ3MgfHwgZmFsc2UsXG5cdFx0XHRzdXBwb3J0c0FycmF5czogdHJ1ZSxcblx0XHRcdGN1c3RvbVRyYW5zZm9ybUlucHV0KHByb3BzKSB7XG5cdFx0XHRcdGlmICgocHJvcHMub3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LnVzZU51bWJlcklkIHx8IHByb3BzLm9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy5nZW5lcmF0ZUlkID09PSBcInNlcmlhbFwiKSAmJiBwcm9wcy5maWVsZCA9PT0gXCJpZFwiICYmIHByb3BzLmFjdGlvbiA9PT0gXCJjcmVhdGVcIikgcmV0dXJuIGRiW3Byb3BzLm1vZGVsXS5sZW5ndGggKyAxO1xuXHRcdFx0XHRyZXR1cm4gcHJvcHMuZGF0YTtcblx0XHRcdH0sXG5cdFx0XHR0cmFuc2FjdGlvbjogYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNsb25lID0gc3RydWN0dXJlZENsb25lKGRiKTtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgY2IoYWRhcHRlckNyZWF0b3IobGF6eU9wdGlvbnMpKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRPYmplY3Qua2V5cyhkYikuZm9yRWFjaCgoa2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRkYltrZXldID0gY2xvbmVba2V5XTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YWRhcHRlcjogKHsgZ2V0RmllbGROYW1lLCBvcHRpb25zLCBnZXRNb2RlbE5hbWUgfSkgPT4ge1xuXHRcdFx0Y29uc3QgYXBwbHlTb3J0VG9SZWNvcmRzID0gKHJlY29yZHMsIHNvcnRCeSwgbW9kZWwpID0+IHtcblx0XHRcdFx0aWYgKCFzb3J0QnkpIHJldHVybiByZWNvcmRzO1xuXHRcdFx0XHRyZXR1cm4gcmVjb3Jkcy5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZmllbGQgPSBnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0XHRmaWVsZDogc29ydEJ5LmZpZWxkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3QgYVZhbHVlID0gYVtmaWVsZF07XG5cdFx0XHRcdFx0Y29uc3QgYlZhbHVlID0gYltmaWVsZF07XG5cdFx0XHRcdFx0bGV0IGNvbXBhcmlzb24gPSAwO1xuXHRcdFx0XHRcdGlmIChhVmFsdWUgPT0gbnVsbCAmJiBiVmFsdWUgPT0gbnVsbCkgY29tcGFyaXNvbiA9IDA7XG5cdFx0XHRcdFx0ZWxzZSBpZiAoYVZhbHVlID09IG51bGwpIGNvbXBhcmlzb24gPSAtMTtcblx0XHRcdFx0XHRlbHNlIGlmIChiVmFsdWUgPT0gbnVsbCkgY29tcGFyaXNvbiA9IDE7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgYlZhbHVlID09PSBcInN0cmluZ1wiKSBjb21wYXJpc29uID0gYVZhbHVlLmxvY2FsZUNvbXBhcmUoYlZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIGlmIChhVmFsdWUgaW5zdGFuY2VvZiBEYXRlICYmIGJWYWx1ZSBpbnN0YW5jZW9mIERhdGUpIGNvbXBhcmlzb24gPSBhVmFsdWUuZ2V0VGltZSgpIC0gYlZhbHVlLmdldFRpbWUoKTtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgYVZhbHVlID09PSBcIm51bWJlclwiICYmIHR5cGVvZiBiVmFsdWUgPT09IFwibnVtYmVyXCIpIGNvbXBhcmlzb24gPSBhVmFsdWUgLSBiVmFsdWU7XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGFWYWx1ZSA9PT0gXCJib29sZWFuXCIgJiYgdHlwZW9mIGJWYWx1ZSA9PT0gXCJib29sZWFuXCIpIGNvbXBhcmlzb24gPSBhVmFsdWUgPT09IGJWYWx1ZSA/IDAgOiBhVmFsdWUgPyAxIDogLTE7XG5cdFx0XHRcdFx0ZWxzZSBjb21wYXJpc29uID0gU3RyaW5nKGFWYWx1ZSkubG9jYWxlQ29tcGFyZShTdHJpbmcoYlZhbHVlKSk7XG5cdFx0XHRcdFx0cmV0dXJuIHNvcnRCeS5kaXJlY3Rpb24gPT09IFwiYXNjXCIgPyBjb21wYXJpc29uIDogLWNvbXBhcmlzb247XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHRcdGZ1bmN0aW9uIGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwsIGpvaW4pIHtcblx0XHRcdFx0Y29uc3QgZXhlY3V0ZSA9ICh3aGVyZSQxLCBtb2RlbCQxKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFibGUgPSBkYlttb2RlbCQxXTtcblx0XHRcdFx0XHRpZiAoIXRhYmxlKSB7XG5cdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoYFtNZW1vcnlBZGFwdGVyXSBNb2RlbCAke21vZGVsJDF9IG5vdCBmb3VuZCBpbiB0aGUgREJgLCBPYmplY3Qua2V5cyhkYikpO1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBNb2RlbCAke21vZGVsJDF9IG5vdCBmb3VuZGApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBldmFsQ2xhdXNlID0gKHJlY29yZCwgY2xhdXNlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCB7IGZpZWxkLCB2YWx1ZSwgb3BlcmF0b3IgfSA9IGNsYXVzZTtcblx0XHRcdFx0XHRcdHN3aXRjaCAob3BlcmF0b3IpIHtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImluXCI6XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgbXVzdCBiZSBhbiBhcnJheVwiKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWUuaW5jbHVkZXMocmVjb3JkW2ZpZWxkXSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJub3RfaW5cIjpcblx0XHRcdFx0XHRcdFx0XHRpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBtdXN0IGJlIGFuIGFycmF5XCIpO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAhdmFsdWUuaW5jbHVkZXMocmVjb3JkW2ZpZWxkXSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJjb250YWluc1wiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5pbmNsdWRlcyh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJzdGFydHNfd2l0aFwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5zdGFydHNXaXRoKHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImVuZHNfd2l0aFwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXS5lbmRzV2l0aCh2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJuZVwiOiByZXR1cm4gcmVjb3JkW2ZpZWxkXSAhPT0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJndFwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPiB2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJndGVcIjogcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgQm9vbGVhbihyZWNvcmRbZmllbGRdID49IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImx0XCI6IHJldHVybiB2YWx1ZSAhPSBudWxsICYmIEJvb2xlYW4ocmVjb3JkW2ZpZWxkXSA8IHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0Y2FzZSBcImx0ZVwiOiByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBCb29sZWFuKHJlY29yZFtmaWVsZF0gPD0gdmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRkZWZhdWx0OiByZXR1cm4gcmVjb3JkW2ZpZWxkXSA9PT0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gdGFibGUuZmlsdGVyKChyZWNvcmQpID0+IHtcblx0XHRcdFx0XHRcdGlmICghd2hlcmUkMS5sZW5ndGggfHwgd2hlcmUkMS5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0bGV0IHJlc3VsdCA9IGV2YWxDbGF1c2UocmVjb3JkLCB3aGVyZSQxWzBdKTtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2xhdXNlIG9mIHdoZXJlJDEpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2xhdXNlUmVzdWx0ID0gZXZhbENsYXVzZShyZWNvcmQsIGNsYXVzZSk7XG5cdFx0XHRcdFx0XHRcdGlmIChjbGF1c2UuY29ubmVjdG9yID09PSBcIk9SXCIpIHJlc3VsdCA9IHJlc3VsdCB8fCBjbGF1c2VSZXN1bHQ7XG5cdFx0XHRcdFx0XHRcdGVsc2UgcmVzdWx0ID0gcmVzdWx0ICYmIGNsYXVzZVJlc3VsdDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGlmICgham9pbikgcmV0dXJuIGV4ZWN1dGUod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0Y29uc3QgYmFzZVJlY29yZHMgPSBleGVjdXRlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdGNvbnN0IGdyb3VwZWQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRcdFx0XHRjb25zdCBzZWVuSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRcdFx0Zm9yIChjb25zdCBiYXNlUmVjb3JkIG9mIGJhc2VSZWNvcmRzKSB7XG5cdFx0XHRcdFx0Y29uc3QgYmFzZUlkID0gU3RyaW5nKGJhc2VSZWNvcmQuaWQpO1xuXHRcdFx0XHRcdGlmICghZ3JvdXBlZC5oYXMoYmFzZUlkKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbmVzdGVkID0geyAuLi5iYXNlUmVjb3JkIH07XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtqb2luTW9kZWwsIGpvaW5BdHRyXSBvZiBPYmplY3QuZW50cmllcyhqb2luKSkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBqb2luTW9kZWxOYW1lID0gZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCk7XG5cdFx0XHRcdFx0XHRcdGlmIChqb2luQXR0ci5yZWxhdGlvbiA9PT0gXCJvbmUtdG8tb25lXCIpIG5lc3RlZFtqb2luTW9kZWxOYW1lXSA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdG5lc3RlZFtqb2luTW9kZWxOYW1lXSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdHNlZW5JZHMuc2V0KGAke2Jhc2VJZH0tJHtqb2luTW9kZWx9YCwgLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGdyb3VwZWQuc2V0KGJhc2VJZCwgbmVzdGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgbmVzdGVkRW50cnkgPSBncm91cGVkLmdldChiYXNlSWQpO1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW2pvaW5Nb2RlbCwgam9pbkF0dHJdIG9mIE9iamVjdC5lbnRyaWVzKGpvaW4pKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luTW9kZWxOYW1lID0gZ2V0TW9kZWxOYW1lKGpvaW5Nb2RlbCk7XG5cdFx0XHRcdFx0XHRjb25zdCBqb2luVGFibGUgPSBkYltqb2luTW9kZWxOYW1lXTtcblx0XHRcdFx0XHRcdGlmICgham9pblRhYmxlKSB7XG5cdFx0XHRcdFx0XHRcdGxvZ2dlci5lcnJvcihgW01lbW9yeUFkYXB0ZXJdIEpvaW5PcHRpb24gbW9kZWwgJHtqb2luTW9kZWxOYW1lfSBub3QgZm91bmQgaW4gdGhlIERCYCwgT2JqZWN0LmtleXMoZGIpKTtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBKb2luT3B0aW9uIG1vZGVsICR7am9pbk1vZGVsTmFtZX0gbm90IGZvdW5kYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjb25zdCBtYXRjaGluZ1JlY29yZHMgPSBqb2luVGFibGUuZmlsdGVyKChqb2luUmVjb3JkKSA9PiBqb2luUmVjb3JkW2pvaW5BdHRyLm9uLnRvXSA9PT0gYmFzZVJlY29yZFtqb2luQXR0ci5vbi5mcm9tXSk7XG5cdFx0XHRcdFx0XHRpZiAoam9pbkF0dHIucmVsYXRpb24gPT09IFwib25lLXRvLW9uZVwiKSBuZXN0ZWRFbnRyeVtqb2luTW9kZWxOYW1lXSA9IG1hdGNoaW5nUmVjb3Jkc1swXSB8fCBudWxsO1xuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNlZW5TZXQgPSBzZWVuSWRzLmdldChgJHtiYXNlSWR9LSR7am9pbk1vZGVsfWApO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaW1pdCA9IGpvaW5BdHRyLmxpbWl0ID8/IDEwMDtcblx0XHRcdFx0XHRcdFx0bGV0IGNvdW50ID0gMDtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBtYXRjaGluZ1JlY29yZCBvZiBtYXRjaGluZ1JlY29yZHMpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY291bnQgPj0gbGltaXQpIGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdGlmICghc2VlblNldC5oYXMobWF0Y2hpbmdSZWNvcmQuaWQpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXN0ZWRFbnRyeVtqb2luTW9kZWxOYW1lXS5wdXNoKG1hdGNoaW5nUmVjb3JkKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNlZW5TZXQuYWRkKG1hdGNoaW5nUmVjb3JkLmlkKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBBcnJheS5mcm9tKGdyb3VwZWQudmFsdWVzKCkpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y3JlYXRlOiBhc3luYyAoeyBtb2RlbCwgZGF0YSB9KSA9PiB7XG5cdFx0XHRcdFx0aWYgKG9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCB8fCBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIikgZGF0YS5pZCA9IGRiW2dldE1vZGVsTmFtZShtb2RlbCldLmxlbmd0aCArIDE7XG5cdFx0XHRcdFx0aWYgKCFkYlttb2RlbF0pIGRiW21vZGVsXSA9IFtdO1xuXHRcdFx0XHRcdGRiW21vZGVsXS5wdXNoKGRhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kT25lOiBhc3luYyAoeyBtb2RlbCwgd2hlcmUsIGpvaW4gfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSwgbW9kZWwsIGpvaW4pO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNBcnJheSA9IHJlcztcblx0XHRcdFx0XHRcdGlmICghcmVzQXJyYXkubGVuZ3RoKSByZXR1cm4gbnVsbDtcblx0XHRcdFx0XHRcdHJldHVybiByZXNBcnJheVswXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRmaW5kTWFueTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlLCBzb3J0QnksIGxpbWl0LCBvZmZzZXQsIGpvaW4gfSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlcyA9IGNvbnZlcnRXaGVyZUNsYXVzZSh3aGVyZSB8fCBbXSwgbW9kZWwsIGpvaW4pO1xuXHRcdFx0XHRcdGlmIChqb2luKSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXNBcnJheSA9IHJlcztcblx0XHRcdFx0XHRcdGlmICghcmVzQXJyYXkubGVuZ3RoKSByZXR1cm4gW107XG5cdFx0XHRcdFx0XHRhcHBseVNvcnRUb1JlY29yZHMocmVzQXJyYXksIHNvcnRCeSwgbW9kZWwpO1xuXHRcdFx0XHRcdFx0bGV0IHBhZ2luYXRlZFJlY29yZHMgPSByZXNBcnJheTtcblx0XHRcdFx0XHRcdGlmIChvZmZzZXQgIT09IHZvaWQgMCkgcGFnaW5hdGVkUmVjb3JkcyA9IHBhZ2luYXRlZFJlY29yZHMuc2xpY2Uob2Zmc2V0KTtcblx0XHRcdFx0XHRcdGlmIChsaW1pdCAhPT0gdm9pZCAwKSBwYWdpbmF0ZWRSZWNvcmRzID0gcGFnaW5hdGVkUmVjb3Jkcy5zbGljZSgwLCBsaW1pdCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFnaW5hdGVkUmVjb3Jkcztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGV0IHRhYmxlID0gYXBwbHlTb3J0VG9SZWNvcmRzKHJlcywgc29ydEJ5LCBtb2RlbCk7XG5cdFx0XHRcdFx0aWYgKG9mZnNldCAhPT0gdm9pZCAwKSB0YWJsZSA9IHRhYmxlLnNsaWNlKG9mZnNldCk7XG5cdFx0XHRcdFx0aWYgKGxpbWl0ICE9PSB2b2lkIDApIHRhYmxlID0gdGFibGUuc2xpY2UoMCwgbGltaXQpO1xuXHRcdFx0XHRcdHJldHVybiB0YWJsZSB8fCBbXTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Y291bnQ6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSB9KSA9PiB7XG5cdFx0XHRcdFx0aWYgKHdoZXJlKSByZXR1cm4gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCkubGVuZ3RoO1xuXHRcdFx0XHRcdHJldHVybiBkYlttb2RlbF0ubGVuZ3RoO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cGRhdGU6IGFzeW5jICh7IG1vZGVsLCB3aGVyZSwgdXBkYXRlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRyZXMuZm9yRWFjaCgocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRPYmplY3QuYXNzaWduKHJlY29yZCwgdXBkYXRlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzWzBdIHx8IG51bGw7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRlbGV0ZTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCB0YWJsZSA9IGRiW21vZGVsXTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRkYlttb2RlbF0gPSB0YWJsZS5maWx0ZXIoKHJlY29yZCkgPT4gIXJlcy5pbmNsdWRlcyhyZWNvcmQpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZGVsZXRlTWFueTogYXN5bmMgKHsgbW9kZWwsIHdoZXJlIH0pID0+IHtcblx0XHRcdFx0XHRjb25zdCB0YWJsZSA9IGRiW21vZGVsXTtcblx0XHRcdFx0XHRjb25zdCByZXMgPSBjb252ZXJ0V2hlcmVDbGF1c2Uod2hlcmUsIG1vZGVsKTtcblx0XHRcdFx0XHRsZXQgY291bnQgPSAwO1xuXHRcdFx0XHRcdGRiW21vZGVsXSA9IHRhYmxlLmZpbHRlcigocmVjb3JkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocmVzLmluY2x1ZGVzKHJlY29yZCkpIHtcblx0XHRcdFx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuICFyZXMuaW5jbHVkZXMocmVjb3JkKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRyZXR1cm4gY291bnQ7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHVwZGF0ZU1hbnkoeyBtb2RlbCwgd2hlcmUsIHVwZGF0ZSB9KSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzID0gY29udmVydFdoZXJlQ2xhdXNlKHdoZXJlLCBtb2RlbCk7XG5cdFx0XHRcdFx0cmVzLmZvckVhY2goKHJlY29yZCkgPT4ge1xuXHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihyZWNvcmQsIHVwZGF0ZSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc1swXSB8fCBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiAob3B0aW9ucykgPT4ge1xuXHRcdGxhenlPcHRpb25zID0gb3B0aW9ucztcblx0XHRyZXR1cm4gYWRhcHRlckNyZWF0b3Iob3B0aW9ucyk7XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IG1lbW9yeUFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1lbW9yeS1hZGFwdGVyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/memory-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/index.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/api/index.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ better_call__WEBPACK_IMPORTED_MODULE_19__.APIError),\n/* harmony export */   accountInfo: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo),\n/* harmony export */   callbackOAuth: () => (/* reexport safe */ _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth),\n/* harmony export */   changeEmail: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail),\n/* harmony export */   changePassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword),\n/* harmony export */   checkEndpointConflicts: () => (/* binding */ checkEndpointConflicts),\n/* harmony export */   createAuthEndpoint: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_20__.createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_20__.createAuthMiddleware),\n/* harmony export */   createEmailVerificationToken: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.createEmailVerificationToken),\n/* harmony export */   deleteUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback),\n/* harmony export */   error: () => (/* reexport safe */ _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error),\n/* harmony export */   formCsrfMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware),\n/* harmony export */   freshSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.freshSessionMiddleware),\n/* harmony export */   getAccessToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken),\n/* harmony export */   getEndpoints: () => (/* binding */ getEndpoints),\n/* harmony export */   getIp: () => (/* reexport safe */ _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp),\n/* harmony export */   getOAuthState: () => (/* reexport safe */ _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__.getOAuthState),\n/* harmony export */   getSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession),\n/* harmony export */   getSessionFromCtx: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx),\n/* harmony export */   linkSocialAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount),\n/* harmony export */   listSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions),\n/* harmony export */   listUserAccounts: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts),\n/* harmony export */   ok: () => (/* reexport safe */ _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok),\n/* harmony export */   optionsMiddleware: () => (/* reexport safe */ _better_auth_core_api__WEBPACK_IMPORTED_MODULE_20__.optionsMiddleware),\n/* harmony export */   originCheck: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* reexport safe */ _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware),\n/* harmony export */   refreshToken: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.requestOnlySessionMiddleware),\n/* harmony export */   requestPasswordReset: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword),\n/* harmony export */   revokeOtherSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession),\n/* harmony export */   revokeSessions: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions),\n/* harmony export */   router: () => (/* binding */ router),\n/* harmony export */   sendVerificationEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmailFn),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* reexport safe */ _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.sessionMiddleware),\n/* harmony export */   setPassword: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword),\n/* harmony export */   signInEmail: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail),\n/* harmony export */   signInSocial: () => (/* reexport safe */ _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial),\n/* harmony export */   signOut: () => (/* reexport safe */ _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut),\n/* harmony export */   signUpEmail: () => (/* reexport safe */ _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail),\n/* harmony export */   unlinkAccount: () => (/* reexport safe */ _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount),\n/* harmony export */   updateUser: () => (/* reexport safe */ _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser),\n/* harmony export */   verifyEmail: () => (/* reexport safe */ _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./middlewares/oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rate-limiter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs\");\n/* harmony import */ var _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./routes/session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./routes/account.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./routes/callback.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./routes/email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./routes/error.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./routes/ok.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./routes/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./routes/sign-in.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./routes/sign-out.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./routes/sign-up.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./routes/update-user.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\");\n/* harmony import */ var _routes_index_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./routes/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs\");\n/* harmony import */ var _to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./to-auth-endpoints.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/index.ts\nfunction checkEndpointConflicts(options, logger$1) {\n\tconst endpointRegistry = /* @__PURE__ */ new Map();\n\toptions.plugins?.forEach((plugin) => {\n\t\tif (plugin.endpoints) {\n\t\t\tfor (const [key, endpoint] of Object.entries(plugin.endpoints)) if (endpoint && \"path\" in endpoint && typeof endpoint.path === \"string\") {\n\t\t\t\tconst path = endpoint.path;\n\t\t\t\tlet methods = [];\n\t\t\t\tif (endpoint.options && \"method\" in endpoint.options) {\n\t\t\t\t\tif (Array.isArray(endpoint.options.method)) methods = endpoint.options.method;\n\t\t\t\t\telse if (typeof endpoint.options.method === \"string\") methods = [endpoint.options.method];\n\t\t\t\t}\n\t\t\t\tif (methods.length === 0) methods = [\"*\"];\n\t\t\t\tif (!endpointRegistry.has(path)) endpointRegistry.set(path, []);\n\t\t\t\tendpointRegistry.get(path).push({\n\t\t\t\t\tpluginId: plugin.id,\n\t\t\t\t\tendpointKey: key,\n\t\t\t\t\tmethods\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\tconst conflicts = [];\n\tfor (const [path, entries] of endpointRegistry.entries()) if (entries.length > 1) {\n\t\tconst methodMap = /* @__PURE__ */ new Map();\n\t\tlet hasConflict = false;\n\t\tfor (const entry of entries) for (const method of entry.methods) {\n\t\t\tif (!methodMap.has(method)) methodMap.set(method, []);\n\t\t\tmethodMap.get(method).push(entry.pluginId);\n\t\t\tif (methodMap.get(method).length > 1) hasConflict = true;\n\t\t\tif (method === \"*\" && entries.length > 1) hasConflict = true;\n\t\t\telse if (method !== \"*\" && methodMap.has(\"*\")) hasConflict = true;\n\t\t}\n\t\tif (hasConflict) {\n\t\t\tconst uniquePlugins = [...new Set(entries.map((e) => e.pluginId))];\n\t\t\tconst conflictingMethods = [];\n\t\t\tfor (const [method, plugins] of methodMap.entries()) if (plugins.length > 1 || method === \"*\" && entries.length > 1 || method !== \"*\" && methodMap.has(\"*\")) conflictingMethods.push(method);\n\t\t\tconflicts.push({\n\t\t\t\tpath,\n\t\t\t\tplugins: uniquePlugins,\n\t\t\t\tconflictingMethods\n\t\t\t});\n\t\t}\n\t}\n\tif (conflicts.length > 0) {\n\t\tconst conflictMessages = conflicts.map((conflict) => `  - \"${conflict.path}\" [${conflict.conflictingMethods.join(\", \")}] used by plugins: ${conflict.plugins.join(\", \")}`).join(\"\\n\");\n\t\tlogger$1.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:\n${conflictMessages}\n\nTo resolve this, you can:\n\t1. Use only one of the conflicting plugins\n\t2. Configure the plugins to use different paths (if supported)\n\t3. Ensure plugins use different HTTP methods for the same path\n`);\n\t}\n}\nfunction getEndpoints(ctx, options) {\n\tconst pluginEndpoints = options.plugins?.reduce((acc, plugin) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t...plugin.endpoints\n\t\t};\n\t}, {}) ?? {};\n\tconst middlewares = options.plugins?.map((plugin) => plugin.middlewares?.map((m) => {\n\t\tconst middleware = (async (context) => {\n\t\t\tconst authContext = await ctx;\n\t\t\treturn m.middleware({\n\t\t\t\t...context,\n\t\t\t\tcontext: {\n\t\t\t\t\t...authContext,\n\t\t\t\t\t...context.context\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\tmiddleware.options = m.middleware.options;\n\t\treturn {\n\t\t\tpath: m.path,\n\t\t\tmiddleware\n\t\t};\n\t})).filter((plugin) => plugin !== void 0).flat() || [];\n\treturn {\n\t\tapi: (0,_to_auth_endpoints_mjs__WEBPACK_IMPORTED_MODULE_17__.toAuthEndpoints)({\n\t\t\tsignInSocial: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInSocial)(),\n\t\t\tcallbackOAuth: _routes_callback_mjs__WEBPACK_IMPORTED_MODULE_7__.callbackOAuth,\n\t\t\tgetSession: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSession)(),\n\t\t\tsignOut: _routes_sign_out_mjs__WEBPACK_IMPORTED_MODULE_13__.signOut,\n\t\t\tsignUpEmail: (0,_routes_sign_up_mjs__WEBPACK_IMPORTED_MODULE_14__.signUpEmail)(),\n\t\t\tsignInEmail: (0,_routes_sign_in_mjs__WEBPACK_IMPORTED_MODULE_12__.signInEmail)(),\n\t\t\tresetPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.resetPassword,\n\t\t\tverifyPassword: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.verifyPassword,\n\t\t\tverifyEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.verifyEmail,\n\t\t\tsendVerificationEmail: _routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_8__.sendVerificationEmail,\n\t\t\tchangeEmail: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changeEmail,\n\t\t\tchangePassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.changePassword,\n\t\t\tsetPassword: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.setPassword,\n\t\t\tupdateUser: (0,_routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.updateUser)(),\n\t\t\tdeleteUser: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUser,\n\t\t\trequestPasswordReset: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordReset,\n\t\t\trequestPasswordResetCallback: _routes_password_mjs__WEBPACK_IMPORTED_MODULE_11__.requestPasswordResetCallback,\n\t\t\tlistSessions: (0,_routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.listSessions)(),\n\t\t\trevokeSession: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSession,\n\t\t\trevokeSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeSessions,\n\t\t\trevokeOtherSessions: _routes_session_mjs__WEBPACK_IMPORTED_MODULE_5__.revokeOtherSessions,\n\t\t\tlinkSocialAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.linkSocialAccount,\n\t\t\tlistUserAccounts: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.listUserAccounts,\n\t\t\tdeleteUserCallback: _routes_update_user_mjs__WEBPACK_IMPORTED_MODULE_15__.deleteUserCallback,\n\t\t\tunlinkAccount: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.unlinkAccount,\n\t\t\trefreshToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.refreshToken,\n\t\t\tgetAccessToken: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.getAccessToken,\n\t\t\taccountInfo: _routes_account_mjs__WEBPACK_IMPORTED_MODULE_6__.accountInfo,\n\t\t\t...pluginEndpoints,\n\t\t\tok: _routes_ok_mjs__WEBPACK_IMPORTED_MODULE_10__.ok,\n\t\t\terror: _routes_error_mjs__WEBPACK_IMPORTED_MODULE_9__.error\n\t\t}, ctx),\n\t\tmiddlewares\n\t};\n}\nconst router = (ctx, options) => {\n\tconst { api, middlewares } = getEndpoints(ctx, options);\n\tconst basePath = new URL(ctx.baseURL).pathname;\n\treturn (0,better_call__WEBPACK_IMPORTED_MODULE_19__.createRouter)(api, {\n\t\trouterContext: ctx,\n\t\topenapi: { disabled: true },\n\t\tbasePath,\n\t\trouterMiddleware: [{\n\t\t\tpath: \"/**\",\n\t\t\tmiddleware: _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.originCheckMiddleware\n\t\t}, ...middlewares],\n\t\tallowedMediaTypes: [\"application/json\"],\n\t\tskipTrailingSlashes: options.advanced?.skipTrailingSlashes ?? false,\n\t\tasync onRequest(req) {\n\t\t\tconst disabledPaths = ctx.options.disabledPaths || [];\n\t\t\tconst pathname = new URL(req.url).pathname.replace(/\\/+$/, \"\") || \"/\";\n\t\t\tconst normalizedPath = basePath === \"/\" ? pathname : pathname.startsWith(basePath) ? pathname.slice(basePath.length).replace(/\\/+$/, \"\") || \"/\" : pathname;\n\t\t\tif (disabledPaths.includes(normalizedPath)) return new Response(\"Not Found\", { status: 404 });\n\t\t\tlet currentRequest = req;\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onRequest) {\n\t\t\t\tconst response = await plugin.onRequest(currentRequest, ctx);\n\t\t\t\tif (response && \"response\" in response) return response.response;\n\t\t\t\tif (response && \"request\" in response) currentRequest = response.request;\n\t\t\t}\n\t\t\tconst rateLimitResponse = await (0,_rate_limiter_index_mjs__WEBPACK_IMPORTED_MODULE_4__.onRequestRateLimit)(currentRequest, ctx);\n\t\t\tif (rateLimitResponse) return rateLimitResponse;\n\t\t\treturn currentRequest;\n\t\t},\n\t\tasync onResponse(res) {\n\t\t\tfor (const plugin of ctx.options.plugins || []) if (plugin.onResponse) {\n\t\t\t\tconst response = await plugin.onResponse(res, ctx);\n\t\t\t\tif (response) return response.response;\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\tonError(e) {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_19__.APIError && e.status === \"FOUND\") return;\n\t\t\tif (options.onAPIError?.throw) throw e;\n\t\t\tif (options.onAPIError?.onError) {\n\t\t\t\toptions.onAPIError.onError(e, ctx);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst optLogLevel = options.logger?.level;\n\t\t\tconst log = optLogLevel === \"error\" || optLogLevel === \"warn\" || optLogLevel === \"debug\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_18__.logger : void 0;\n\t\t\tif (options.logger?.disabled !== true) {\n\t\t\t\tif (e && typeof e === \"object\" && \"message\" in e && typeof e.message === \"string\") {\n\t\t\t\t\tif (e.message.includes(\"no column\") || e.message.includes(\"column\") || e.message.includes(\"relation\") || e.message.includes(\"table\") || e.message.includes(\"does not exist\")) {\n\t\t\t\t\t\tctx.logger?.error(e.message);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_19__.APIError) {\n\t\t\t\t\tif (e.status === \"INTERNAL_SERVER_ERROR\") ctx.logger.error(e.status, e);\n\t\t\t\t\tlog?.error(e.message);\n\t\t\t\t} else ctx.logger?.error(e && typeof e === \"object\" && \"name\" in e ? e.name : \"\", e);\n\t\t\t}\n\t\t}\n\t});\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDSTtBQUNnRDtBQUN2RTtBQUM2QjtBQUM4SztBQUN2RztBQUMvRTtBQUNzRjtBQUNqRztBQUNOO0FBQ3FGO0FBQ3pEO0FBQ2pCO0FBQ0c7QUFDNkU7QUFDcEc7QUFDOEI7QUFDWDtBQUM4QjtBQUN1Qjs7QUFFcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsK0RBQStELGNBQWMsS0FBSyx1Q0FBdUMscUJBQXFCLDRCQUE0QjtBQUMxSztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLElBQUk7QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxPQUFPLHdFQUFlO0FBQ3RCLGlCQUFpQixrRUFBWTtBQUM3QixnQkFBZ0I7QUFDaEIsZUFBZSwrREFBVTtBQUN6QixVQUFVO0FBQ1YsZ0JBQWdCLGlFQUFXO0FBQzNCLGdCQUFnQixpRUFBVztBQUMzQixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCx3QkFBd0I7QUFDeEIsY0FBYztBQUNkLGlCQUFpQjtBQUNqQixjQUFjO0FBQ2QsZUFBZSxvRUFBVTtBQUN6QixhQUFhO0FBQ2IsdUJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQixpQkFBaUIsaUVBQVk7QUFDN0IsZ0JBQWdCO0FBQ2hCLGlCQUFpQjtBQUNqQixzQkFBc0I7QUFDdEIsb0JBQW9CO0FBQ3BCLG1CQUFtQjtBQUNuQixxQkFBcUI7QUFDckIsZ0JBQWdCO0FBQ2hCLGVBQWU7QUFDZixpQkFBaUI7QUFDakIsY0FBYztBQUNkO0FBQ0EsS0FBSztBQUNMLFFBQVE7QUFDUixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFtQjtBQUM1QjtBQUNBLFFBQVEsMERBQVk7QUFDcEI7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdGQUFxQjtBQUNwQyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGLGFBQWE7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLDJFQUFrQjtBQUNyRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLG9CQUFvQixrREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsMERBQU07QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0RBQVU7QUFDL0I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ2kwQjtBQUNqMEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IGdldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9vYXV0aC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9IGZyb20gXCIuL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBvblJlcXVlc3RSYXRlTGltaXQgfSBmcm9tIFwiLi9yYXRlLWxpbWl0ZXIvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlzdFNlc3Npb25zLCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUsIHNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vcm91dGVzL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBhY2NvdW50SW5mbywgZ2V0QWNjZXNzVG9rZW4sIGxpbmtTb2NpYWxBY2NvdW50LCBsaXN0VXNlckFjY291bnRzLCByZWZyZXNoVG9rZW4sIHVubGlua0FjY291bnQgfSBmcm9tIFwiLi9yb3V0ZXMvYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrT0F1dGggfSBmcm9tIFwiLi9yb3V0ZXMvY2FsbGJhY2subWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9IGZyb20gXCIuL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBlcnJvciB9IGZyb20gXCIuL3JvdXRlcy9lcnJvci5tanNcIjtcbmltcG9ydCB7IG9rIH0gZnJvbSBcIi4vcm91dGVzL29rLm1qc1wiO1xuaW1wb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH0gZnJvbSBcIi4vcm91dGVzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgc2lnbkluRW1haWwsIHNpZ25JblNvY2lhbCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLWluLm1qc1wiO1xuaW1wb3J0IHsgc2lnbk91dCB9IGZyb20gXCIuL3JvdXRlcy9zaWduLW91dC5tanNcIjtcbmltcG9ydCB7IHNpZ25VcEVtYWlsIH0gZnJvbSBcIi4vcm91dGVzL3NpZ24tdXAubWpzXCI7XG5pbXBvcnQgeyBjaGFuZ2VFbWFpbCwgY2hhbmdlUGFzc3dvcmQsIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgc2V0UGFzc3dvcmQsIHVwZGF0ZVVzZXIgfSBmcm9tIFwiLi9yb3V0ZXMvdXBkYXRlLXVzZXIubWpzXCI7XG5pbXBvcnQgXCIuL3JvdXRlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHRvQXV0aEVuZHBvaW50cyB9IGZyb20gXCIuL3RvLWF1dGgtZW5kcG9pbnRzLm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IsIEFQSUVycm9yIGFzIEFQSUVycm9yJDEsIGNyZWF0ZVJvdXRlciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50LCBjcmVhdGVBdXRoTWlkZGxld2FyZSwgb3B0aW9uc01pZGRsZXdhcmUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL2luZGV4LnRzXG5mdW5jdGlvbiBjaGVja0VuZHBvaW50Q29uZmxpY3RzKG9wdGlvbnMsIGxvZ2dlciQxKSB7XG5cdGNvbnN0IGVuZHBvaW50UmVnaXN0cnkgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuXHRvcHRpb25zLnBsdWdpbnM/LmZvckVhY2goKHBsdWdpbikgPT4ge1xuXHRcdGlmIChwbHVnaW4uZW5kcG9pbnRzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IFtrZXksIGVuZHBvaW50XSBvZiBPYmplY3QuZW50cmllcyhwbHVnaW4uZW5kcG9pbnRzKSkgaWYgKGVuZHBvaW50ICYmIFwicGF0aFwiIGluIGVuZHBvaW50ICYmIHR5cGVvZiBlbmRwb2ludC5wYXRoID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGNvbnN0IHBhdGggPSBlbmRwb2ludC5wYXRoO1xuXHRcdFx0XHRsZXQgbWV0aG9kcyA9IFtdO1xuXHRcdFx0XHRpZiAoZW5kcG9pbnQub3B0aW9ucyAmJiBcIm1ldGhvZFwiIGluIGVuZHBvaW50Lm9wdGlvbnMpIHtcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShlbmRwb2ludC5vcHRpb25zLm1ldGhvZCkpIG1ldGhvZHMgPSBlbmRwb2ludC5vcHRpb25zLm1ldGhvZDtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgZW5kcG9pbnQub3B0aW9ucy5tZXRob2QgPT09IFwic3RyaW5nXCIpIG1ldGhvZHMgPSBbZW5kcG9pbnQub3B0aW9ucy5tZXRob2RdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChtZXRob2RzLmxlbmd0aCA9PT0gMCkgbWV0aG9kcyA9IFtcIipcIl07XG5cdFx0XHRcdGlmICghZW5kcG9pbnRSZWdpc3RyeS5oYXMocGF0aCkpIGVuZHBvaW50UmVnaXN0cnkuc2V0KHBhdGgsIFtdKTtcblx0XHRcdFx0ZW5kcG9pbnRSZWdpc3RyeS5nZXQocGF0aCkucHVzaCh7XG5cdFx0XHRcdFx0cGx1Z2luSWQ6IHBsdWdpbi5pZCxcblx0XHRcdFx0XHRlbmRwb2ludEtleToga2V5LFxuXHRcdFx0XHRcdG1ldGhvZHNcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0Y29uc3QgY29uZmxpY3RzID0gW107XG5cdGZvciAoY29uc3QgW3BhdGgsIGVudHJpZXNdIG9mIGVuZHBvaW50UmVnaXN0cnkuZW50cmllcygpKSBpZiAoZW50cmllcy5sZW5ndGggPiAxKSB7XG5cdFx0Y29uc3QgbWV0aG9kTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHRsZXQgaGFzQ29uZmxpY3QgPSBmYWxzZTtcblx0XHRmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIGZvciAoY29uc3QgbWV0aG9kIG9mIGVudHJ5Lm1ldGhvZHMpIHtcblx0XHRcdGlmICghbWV0aG9kTWFwLmhhcyhtZXRob2QpKSBtZXRob2RNYXAuc2V0KG1ldGhvZCwgW10pO1xuXHRcdFx0bWV0aG9kTWFwLmdldChtZXRob2QpLnB1c2goZW50cnkucGx1Z2luSWQpO1xuXHRcdFx0aWYgKG1ldGhvZE1hcC5nZXQobWV0aG9kKS5sZW5ndGggPiAxKSBoYXNDb25mbGljdCA9IHRydWU7XG5cdFx0XHRpZiAobWV0aG9kID09PSBcIipcIiAmJiBlbnRyaWVzLmxlbmd0aCA+IDEpIGhhc0NvbmZsaWN0ID0gdHJ1ZTtcblx0XHRcdGVsc2UgaWYgKG1ldGhvZCAhPT0gXCIqXCIgJiYgbWV0aG9kTWFwLmhhcyhcIipcIikpIGhhc0NvbmZsaWN0ID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKGhhc0NvbmZsaWN0KSB7XG5cdFx0XHRjb25zdCB1bmlxdWVQbHVnaW5zID0gWy4uLm5ldyBTZXQoZW50cmllcy5tYXAoKGUpID0+IGUucGx1Z2luSWQpKV07XG5cdFx0XHRjb25zdCBjb25mbGljdGluZ01ldGhvZHMgPSBbXTtcblx0XHRcdGZvciAoY29uc3QgW21ldGhvZCwgcGx1Z2luc10gb2YgbWV0aG9kTWFwLmVudHJpZXMoKSkgaWYgKHBsdWdpbnMubGVuZ3RoID4gMSB8fCBtZXRob2QgPT09IFwiKlwiICYmIGVudHJpZXMubGVuZ3RoID4gMSB8fCBtZXRob2QgIT09IFwiKlwiICYmIG1ldGhvZE1hcC5oYXMoXCIqXCIpKSBjb25mbGljdGluZ01ldGhvZHMucHVzaChtZXRob2QpO1xuXHRcdFx0Y29uZmxpY3RzLnB1c2goe1xuXHRcdFx0XHRwYXRoLFxuXHRcdFx0XHRwbHVnaW5zOiB1bmlxdWVQbHVnaW5zLFxuXHRcdFx0XHRjb25mbGljdGluZ01ldGhvZHNcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRpZiAoY29uZmxpY3RzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBjb25mbGljdE1lc3NhZ2VzID0gY29uZmxpY3RzLm1hcCgoY29uZmxpY3QpID0+IGAgIC0gXCIke2NvbmZsaWN0LnBhdGh9XCIgWyR7Y29uZmxpY3QuY29uZmxpY3RpbmdNZXRob2RzLmpvaW4oXCIsIFwiKX1dIHVzZWQgYnkgcGx1Z2luczogJHtjb25mbGljdC5wbHVnaW5zLmpvaW4oXCIsIFwiKX1gKS5qb2luKFwiXFxuXCIpO1xuXHRcdGxvZ2dlciQxLmVycm9yKGBFbmRwb2ludCBwYXRoIGNvbmZsaWN0cyBkZXRlY3RlZCEgTXVsdGlwbGUgcGx1Z2lucyBhcmUgdHJ5aW5nIHRvIHVzZSB0aGUgc2FtZSBlbmRwb2ludCBwYXRocyB3aXRoIGNvbmZsaWN0aW5nIEhUVFAgbWV0aG9kczpcbiR7Y29uZmxpY3RNZXNzYWdlc31cblxuVG8gcmVzb2x2ZSB0aGlzLCB5b3UgY2FuOlxuXHQxLiBVc2Ugb25seSBvbmUgb2YgdGhlIGNvbmZsaWN0aW5nIHBsdWdpbnNcblx0Mi4gQ29uZmlndXJlIHRoZSBwbHVnaW5zIHRvIHVzZSBkaWZmZXJlbnQgcGF0aHMgKGlmIHN1cHBvcnRlZClcblx0My4gRW5zdXJlIHBsdWdpbnMgdXNlIGRpZmZlcmVudCBIVFRQIG1ldGhvZHMgZm9yIHRoZSBzYW1lIHBhdGhcbmApO1xuXHR9XG59XG5mdW5jdGlvbiBnZXRFbmRwb2ludHMoY3R4LCBvcHRpb25zKSB7XG5cdGNvbnN0IHBsdWdpbkVuZHBvaW50cyA9IG9wdGlvbnMucGx1Z2lucz8ucmVkdWNlKChhY2MsIHBsdWdpbikgPT4ge1xuXHRcdHJldHVybiB7XG5cdFx0XHQuLi5hY2MsXG5cdFx0XHQuLi5wbHVnaW4uZW5kcG9pbnRzXG5cdFx0fTtcblx0fSwge30pID8/IHt9O1xuXHRjb25zdCBtaWRkbGV3YXJlcyA9IG9wdGlvbnMucGx1Z2lucz8ubWFwKChwbHVnaW4pID0+IHBsdWdpbi5taWRkbGV3YXJlcz8ubWFwKChtKSA9PiB7XG5cdFx0Y29uc3QgbWlkZGxld2FyZSA9IChhc3luYyAoY29udGV4dCkgPT4ge1xuXHRcdFx0Y29uc3QgYXV0aENvbnRleHQgPSBhd2FpdCBjdHg7XG5cdFx0XHRyZXR1cm4gbS5taWRkbGV3YXJlKHtcblx0XHRcdFx0Li4uY29udGV4dCxcblx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdC4uLmF1dGhDb250ZXh0LFxuXHRcdFx0XHRcdC4uLmNvbnRleHQuY29udGV4dFxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRtaWRkbGV3YXJlLm9wdGlvbnMgPSBtLm1pZGRsZXdhcmUub3B0aW9ucztcblx0XHRyZXR1cm4ge1xuXHRcdFx0cGF0aDogbS5wYXRoLFxuXHRcdFx0bWlkZGxld2FyZVxuXHRcdH07XG5cdH0pKS5maWx0ZXIoKHBsdWdpbikgPT4gcGx1Z2luICE9PSB2b2lkIDApLmZsYXQoKSB8fCBbXTtcblx0cmV0dXJuIHtcblx0XHRhcGk6IHRvQXV0aEVuZHBvaW50cyh7XG5cdFx0XHRzaWduSW5Tb2NpYWw6IHNpZ25JblNvY2lhbCgpLFxuXHRcdFx0Y2FsbGJhY2tPQXV0aCxcblx0XHRcdGdldFNlc3Npb246IGdldFNlc3Npb24oKSxcblx0XHRcdHNpZ25PdXQsXG5cdFx0XHRzaWduVXBFbWFpbDogc2lnblVwRW1haWwoKSxcblx0XHRcdHNpZ25JbkVtYWlsOiBzaWduSW5FbWFpbCgpLFxuXHRcdFx0cmVzZXRQYXNzd29yZCxcblx0XHRcdHZlcmlmeVBhc3N3b3JkLFxuXHRcdFx0dmVyaWZ5RW1haWwsXG5cdFx0XHRzZW5kVmVyaWZpY2F0aW9uRW1haWwsXG5cdFx0XHRjaGFuZ2VFbWFpbCxcblx0XHRcdGNoYW5nZVBhc3N3b3JkLFxuXHRcdFx0c2V0UGFzc3dvcmQsXG5cdFx0XHR1cGRhdGVVc2VyOiB1cGRhdGVVc2VyKCksXG5cdFx0XHRkZWxldGVVc2VyLFxuXHRcdFx0cmVxdWVzdFBhc3N3b3JkUmVzZXQsXG5cdFx0XHRyZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLFxuXHRcdFx0bGlzdFNlc3Npb25zOiBsaXN0U2Vzc2lvbnMoKSxcblx0XHRcdHJldm9rZVNlc3Npb24sXG5cdFx0XHRyZXZva2VTZXNzaW9ucyxcblx0XHRcdHJldm9rZU90aGVyU2Vzc2lvbnMsXG5cdFx0XHRsaW5rU29jaWFsQWNjb3VudCxcblx0XHRcdGxpc3RVc2VyQWNjb3VudHMsXG5cdFx0XHRkZWxldGVVc2VyQ2FsbGJhY2ssXG5cdFx0XHR1bmxpbmtBY2NvdW50LFxuXHRcdFx0cmVmcmVzaFRva2VuLFxuXHRcdFx0Z2V0QWNjZXNzVG9rZW4sXG5cdFx0XHRhY2NvdW50SW5mbyxcblx0XHRcdC4uLnBsdWdpbkVuZHBvaW50cyxcblx0XHRcdG9rLFxuXHRcdFx0ZXJyb3Jcblx0XHR9LCBjdHgpLFxuXHRcdG1pZGRsZXdhcmVzXG5cdH07XG59XG5jb25zdCByb3V0ZXIgPSAoY3R4LCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHsgYXBpLCBtaWRkbGV3YXJlcyB9ID0gZ2V0RW5kcG9pbnRzKGN0eCwgb3B0aW9ucyk7XG5cdGNvbnN0IGJhc2VQYXRoID0gbmV3IFVSTChjdHguYmFzZVVSTCkucGF0aG5hbWU7XG5cdHJldHVybiBjcmVhdGVSb3V0ZXIoYXBpLCB7XG5cdFx0cm91dGVyQ29udGV4dDogY3R4LFxuXHRcdG9wZW5hcGk6IHsgZGlzYWJsZWQ6IHRydWUgfSxcblx0XHRiYXNlUGF0aCxcblx0XHRyb3V0ZXJNaWRkbGV3YXJlOiBbe1xuXHRcdFx0cGF0aDogXCIvKipcIixcblx0XHRcdG1pZGRsZXdhcmU6IG9yaWdpbkNoZWNrTWlkZGxld2FyZVxuXHRcdH0sIC4uLm1pZGRsZXdhcmVzXSxcblx0XHRhbGxvd2VkTWVkaWFUeXBlczogW1wiYXBwbGljYXRpb24vanNvblwiXSxcblx0XHRza2lwVHJhaWxpbmdTbGFzaGVzOiBvcHRpb25zLmFkdmFuY2VkPy5za2lwVHJhaWxpbmdTbGFzaGVzID8/IGZhbHNlLFxuXHRcdGFzeW5jIG9uUmVxdWVzdChyZXEpIHtcblx0XHRcdGNvbnN0IGRpc2FibGVkUGF0aHMgPSBjdHgub3B0aW9ucy5kaXNhYmxlZFBhdGhzIHx8IFtdO1xuXHRcdFx0Y29uc3QgcGF0aG5hbWUgPSBuZXcgVVJMKHJlcS51cmwpLnBhdGhuYW1lLnJlcGxhY2UoL1xcLyskLywgXCJcIikgfHwgXCIvXCI7XG5cdFx0XHRjb25zdCBub3JtYWxpemVkUGF0aCA9IGJhc2VQYXRoID09PSBcIi9cIiA/IHBhdGhuYW1lIDogcGF0aG5hbWUuc3RhcnRzV2l0aChiYXNlUGF0aCkgPyBwYXRobmFtZS5zbGljZShiYXNlUGF0aC5sZW5ndGgpLnJlcGxhY2UoL1xcLyskLywgXCJcIikgfHwgXCIvXCIgOiBwYXRobmFtZTtcblx0XHRcdGlmIChkaXNhYmxlZFBhdGhzLmluY2x1ZGVzKG5vcm1hbGl6ZWRQYXRoKSkgcmV0dXJuIG5ldyBSZXNwb25zZShcIk5vdCBGb3VuZFwiLCB7IHN0YXR1czogNDA0IH0pO1xuXHRcdFx0bGV0IGN1cnJlbnRSZXF1ZXN0ID0gcmVxO1xuXHRcdFx0Zm9yIChjb25zdCBwbHVnaW4gb2YgY3R4Lm9wdGlvbnMucGx1Z2lucyB8fCBbXSkgaWYgKHBsdWdpbi5vblJlcXVlc3QpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXF1ZXN0KGN1cnJlbnRSZXF1ZXN0LCBjdHgpO1xuXHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgXCJyZXNwb25zZVwiIGluIHJlc3BvbnNlKSByZXR1cm4gcmVzcG9uc2UucmVzcG9uc2U7XG5cdFx0XHRcdGlmIChyZXNwb25zZSAmJiBcInJlcXVlc3RcIiBpbiByZXNwb25zZSkgY3VycmVudFJlcXVlc3QgPSByZXNwb25zZS5yZXF1ZXN0O1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmF0ZUxpbWl0UmVzcG9uc2UgPSBhd2FpdCBvblJlcXVlc3RSYXRlTGltaXQoY3VycmVudFJlcXVlc3QsIGN0eCk7XG5cdFx0XHRpZiAocmF0ZUxpbWl0UmVzcG9uc2UpIHJldHVybiByYXRlTGltaXRSZXNwb25zZTtcblx0XHRcdHJldHVybiBjdXJyZW50UmVxdWVzdDtcblx0XHR9LFxuXHRcdGFzeW5jIG9uUmVzcG9uc2UocmVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSBpZiAocGx1Z2luLm9uUmVzcG9uc2UpIHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBwbHVnaW4ub25SZXNwb25zZShyZXMsIGN0eCk7XG5cdFx0XHRcdGlmIChyZXNwb25zZSkgcmV0dXJuIHJlc3BvbnNlLnJlc3BvbnNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlcztcblx0XHR9LFxuXHRcdG9uRXJyb3IoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciQxICYmIGUuc3RhdHVzID09PSBcIkZPVU5EXCIpIHJldHVybjtcblx0XHRcdGlmIChvcHRpb25zLm9uQVBJRXJyb3I/LnRocm93KSB0aHJvdyBlO1xuXHRcdFx0aWYgKG9wdGlvbnMub25BUElFcnJvcj8ub25FcnJvcikge1xuXHRcdFx0XHRvcHRpb25zLm9uQVBJRXJyb3Iub25FcnJvcihlLCBjdHgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBvcHRMb2dMZXZlbCA9IG9wdGlvbnMubG9nZ2VyPy5sZXZlbDtcblx0XHRcdGNvbnN0IGxvZyA9IG9wdExvZ0xldmVsID09PSBcImVycm9yXCIgfHwgb3B0TG9nTGV2ZWwgPT09IFwid2FyblwiIHx8IG9wdExvZ0xldmVsID09PSBcImRlYnVnXCIgPyBsb2dnZXIgOiB2b2lkIDA7XG5cdFx0XHRpZiAob3B0aW9ucy5sb2dnZXI/LmRpc2FibGVkICE9PSB0cnVlKSB7XG5cdFx0XHRcdGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIFwibWVzc2FnZVwiIGluIGUgJiYgdHlwZW9mIGUubWVzc2FnZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdGlmIChlLm1lc3NhZ2UuaW5jbHVkZXMoXCJubyBjb2x1bW5cIikgfHwgZS5tZXNzYWdlLmluY2x1ZGVzKFwiY29sdW1uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInJlbGF0aW9uXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcInRhYmxlXCIpIHx8IGUubWVzc2FnZS5pbmNsdWRlcyhcImRvZXMgbm90IGV4aXN0XCIpKSB7XG5cdFx0XHRcdFx0XHRjdHgubG9nZ2VyPy5lcnJvcihlLm1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEFQSUVycm9yJDEpIHtcblx0XHRcdFx0XHRpZiAoZS5zdGF0dXMgPT09IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpIGN0eC5sb2dnZXIuZXJyb3IoZS5zdGF0dXMsIGUpO1xuXHRcdFx0XHRcdGxvZz8uZXJyb3IoZS5tZXNzYWdlKTtcblx0XHRcdFx0fSBlbHNlIGN0eC5sb2dnZXI/LmVycm9yKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgXCJuYW1lXCIgaW4gZSA/IGUubmFtZSA6IFwiXCIsIGUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFQSUVycm9yLCBhY2NvdW50SW5mbywgY2FsbGJhY2tPQXV0aCwgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBjaGVja0VuZHBvaW50Q29uZmxpY3RzLCBjcmVhdGVBdXRoRW5kcG9pbnQsIGNyZWF0ZUF1dGhNaWRkbGV3YXJlLCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIGVycm9yLCBmb3JtQ3NyZk1pZGRsZXdhcmUsIGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldEFjY2Vzc1Rva2VuLCBnZXRFbmRwb2ludHMsIGdldElwLCBnZXRPQXV0aFN0YXRlLCBnZXRTZXNzaW9uLCBnZXRTZXNzaW9uRnJvbUN0eCwgbGlua1NvY2lhbEFjY291bnQsIGxpc3RTZXNzaW9ucywgbGlzdFVzZXJBY2NvdW50cywgb2ssIG9wdGlvbnNNaWRkbGV3YXJlLCBvcmlnaW5DaGVjaywgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlLCByZWZyZXNoVG9rZW4sIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJlcXVlc3RQYXNzd29yZFJlc2V0LCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrLCByZXNldFBhc3N3b3JkLCByZXZva2VPdGhlclNlc3Npb25zLCByZXZva2VTZXNzaW9uLCByZXZva2VTZXNzaW9ucywgcm91dGVyLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUsIHNldFBhc3N3b3JkLCBzaWduSW5FbWFpbCwgc2lnbkluU29jaWFsLCBzaWduT3V0LCBzaWduVXBFbWFpbCwgdW5saW5rQWNjb3VudCwgdXBkYXRlVXNlciwgdmVyaWZ5RW1haWwsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7OztBQUE0QztBQUNnRCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi9vYXV0aC5tanNcIjtcbmltcG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9IGZyb20gXCIuL29yaWdpbi1jaGVjay5tanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/oauth.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOAuthState: () => (/* binding */ getOAuthState),\n/* harmony export */   setOAuthState: () => (/* binding */ setOAuthState)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/api/middlewares/oauth.ts\nconst { get: getOAuthState, set: setOAuthState } = (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.defineRequestState)(() => null);\n\n//#endregion\n\n//# sourceMappingURL=oauth.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvb2F1dGgubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErRDs7QUFFL0Q7QUFDQSxRQUFRLHlDQUF5QyxFQUFFLDZFQUFrQjs7QUFFckU7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL21pZGRsZXdhcmVzL29hdXRoLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWZpbmVSZXF1ZXN0U3RhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9taWRkbGV3YXJlcy9vYXV0aC50c1xuY29uc3QgeyBnZXQ6IGdldE9BdXRoU3RhdGUsIHNldDogc2V0T0F1dGhTdGF0ZSB9ID0gZGVmaW5lUmVxdWVzdFN0YXRlKCgpID0+IG51bGwpO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldE9BdXRoU3RhdGUsIHNldE9BdXRoU3RhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9hdXRoLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/middlewares/origin-check.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formCsrfMiddleware: () => (/* binding */ formCsrfMiddleware),\n/* harmony export */   originCheck: () => (/* binding */ originCheck),\n/* harmony export */   originCheckMiddleware: () => (/* binding */ originCheckMiddleware)\n/* harmony export */ });\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n//#region src/api/middlewares/origin-check.ts\n/**\n* Checks if CSRF should be skipped for backward compatibility.\n* Previously, disableOriginCheck also disabled CSRF checks.\n* This maintains that behavior when disableCSRFCheck isn't explicitly set.\n*/\nfunction shouldSkipCSRFForBackwardCompat(ctx) {\n\treturn ctx.context.skipOriginCheck && ctx.context.options.advanced?.disableCSRFCheck === void 0;\n}\n/**\n* Logs deprecation warning for users relying on coupled behavior.\n* Only logs if user explicitly set disableOriginCheck (not test environment default).\n*/\nconst logBackwardCompatWarning = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.deprecate)(function logBackwardCompatWarning$1() {}, \"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config.\");\n/**\n* A middleware to validate callbackURL and origin against trustedOrigins.\n* Also handles CSRF protection using Fetch Metadata for first-login scenarios.\n*/\nconst originCheckMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (ctx.request?.method === \"GET\" || ctx.request?.method === \"OPTIONS\" || ctx.request?.method === \"HEAD\" || !ctx.request) return;\n\tawait validateOrigin(ctx);\n\tif (ctx.context.skipOriginCheck) return;\n\tconst { body, query } = ctx;\n\tconst callbackURL = body?.callbackURL || query?.callbackURL;\n\tconst redirectURL = body?.redirectTo;\n\tconst errorCallbackURL = body?.errorCallbackURL;\n\tconst newUserCallbackURL = body?.newUserCallbackURL;\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tcallbackURL && validateURL(callbackURL, \"callbackURL\");\n\tredirectURL && validateURL(redirectURL, \"redirectURL\");\n\terrorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n\tnewUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tif (ctx.context.skipOriginCheck) return;\n\tconst callbackURL = getValue(ctx);\n\tconst validateURL = (url, label) => {\n\t\tif (!url) return;\n\t\tif (!ctx.context.isTrustedOrigin(url, { allowRelativePaths: label !== \"origin\" })) {\n\t\t\tctx.context.logger.error(`Invalid ${label}: ${url}`);\n\t\t\tctx.context.logger.info(`If it's a valid URL, please add ${url} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${ctx.context.trustedOrigins}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n\t\t}\n\t};\n\tconst callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n\tfor (const url of callbacks) validateURL(url, \"callbackURL\");\n});\n/**\n* Validates origin header against trusted origins.\n* @param ctx - The endpoint context\n* @param forceValidate - If true, always validate origin regardless of cookies/skip flags\n*/\nasync function validateOrigin(ctx, forceValidate = false) {\n\tconst headers = ctx.request?.headers;\n\tif (!headers || !ctx.request) return;\n\tconst originHeader = headers.get(\"origin\") || headers.get(\"referer\") || \"\";\n\tconst useCookies = headers.has(\"cookie\");\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) {\n\t\tctx.context.options.advanced?.disableOriginCheck === true && logBackwardCompatWarning();\n\t\treturn;\n\t}\n\tif (!(forceValidate || useCookies)) return;\n\tif (!originHeader || originHeader === \"null\") throw new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.MISSING_OR_NULL_ORIGIN });\n\tconst trustedOrigins = Array.isArray(ctx.context.options.trustedOrigins) ? ctx.context.trustedOrigins : [...ctx.context.trustedOrigins, ...(await ctx.context.options.trustedOrigins?.(ctx.request))?.filter((v) => Boolean(v)) || []];\n\tif (!trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_0__.matchesOriginPattern)(originHeader, origin))) {\n\t\tctx.context.logger.error(`Invalid origin: ${originHeader}`);\n\t\tctx.context.logger.info(`If it's a valid URL, please add ${originHeader} to trustedOrigins in your auth config\\n`, `Current list of trustedOrigins: ${trustedOrigins}`);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: \"Invalid origin\" });\n\t}\n}\n/**\n* Middleware for CSRF protection using Fetch Metadata headers.\n* This prevents cross-site navigation login attacks while supporting progressive enhancement.\n*/\nconst formCsrfMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_4__.createAuthMiddleware)(async (ctx) => {\n\tif (!ctx.request) return;\n\tawait validateFormCsrf(ctx);\n});\n/**\n* Validates CSRF protection for first-login scenarios using Fetch Metadata headers.\n* This prevents cross-site form submission attacks while supporting progressive enhancement.\n*/\nasync function validateFormCsrf(ctx) {\n\tconst req = ctx.request;\n\tif (!req) return;\n\tif (ctx.context.skipCSRFCheck) return;\n\tif (shouldSkipCSRFForBackwardCompat(ctx)) return;\n\tconst headers = req.headers;\n\tif (headers.has(\"cookie\")) return await validateOrigin(ctx);\n\tconst site = headers.get(\"Sec-Fetch-Site\");\n\tconst mode = headers.get(\"Sec-Fetch-Mode\");\n\tconst dest = headers.get(\"Sec-Fetch-Dest\");\n\tif (Boolean(site && site.trim() || mode && mode.trim() || dest && dest.trim())) {\n\t\tif (site === \"cross-site\" && mode === \"navigate\") {\n\t\t\tctx.context.logger.error(\"Blocked cross-site navigation login attempt (CSRF protection)\", {\n\t\t\t\tsecFetchSite: site,\n\t\t\t\tsecFetchMode: mode,\n\t\t\t\tsecFetchDest: dest\n\t\t\t});\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_3__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BASE_ERROR_CODES.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED });\n\t\t}\n\t\treturn await validateOrigin(ctx, true);\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=origin-check.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRTtBQUNYO0FBQ1A7QUFDYjtBQUNzQjs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsa0VBQVMseUNBQXlDO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJFQUFvQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxTQUFTLGNBQWM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHdDQUF3QztBQUNsRix1Q0FBdUMsTUFBTSxJQUFJLElBQUk7QUFDckQsOERBQThELEtBQUssNkVBQTZFLDJCQUEyQjtBQUMzSyxhQUFhLGlEQUFRLGdCQUFnQixvQkFBb0IsTUFBTSxHQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQ0FBa0MsMkVBQW9CO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsd0NBQXdDO0FBQ2xGLHVDQUF1QyxNQUFNLElBQUksSUFBSTtBQUNyRCw4REFBOEQsS0FBSyw2RUFBNkUsMkJBQTJCO0FBQzNLLGFBQWEsaURBQVEsZ0JBQWdCLG9CQUFvQixNQUFNLEdBQUc7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHlCQUF5QjtBQUNuSTtBQUNBLHNDQUFzQywrRUFBb0I7QUFDMUQsOENBQThDLGFBQWE7QUFDM0QsNkRBQTZELGNBQWMsNkVBQTZFLGVBQWU7QUFDdkssWUFBWSxpREFBUSxnQkFBZ0IsMkJBQTJCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwyRUFBb0I7QUFDL0M7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWEsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLHNDQUFzQztBQUNwRztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNrRTtBQUNsRSIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9IGZyb20gXCIuLi8uLi9hdXRoL3RydXN0ZWQtb3JpZ2lucy5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCB7IGRlcHJlY2F0ZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2sudHNcbi8qKlxuKiBDaGVja3MgaWYgQ1NSRiBzaG91bGQgYmUgc2tpcHBlZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cbiogUHJldmlvdXNseSwgZGlzYWJsZU9yaWdpbkNoZWNrIGFsc28gZGlzYWJsZWQgQ1NSRiBjaGVja3MuXG4qIFRoaXMgbWFpbnRhaW5zIHRoYXQgYmVoYXZpb3Igd2hlbiBkaXNhYmxlQ1NSRkNoZWNrIGlzbid0IGV4cGxpY2l0bHkgc2V0LlxuKi9cbmZ1bmN0aW9uIHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSB7XG5cdHJldHVybiBjdHguY29udGV4dC5za2lwT3JpZ2luQ2hlY2sgJiYgY3R4LmNvbnRleHQub3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZUNTUkZDaGVjayA9PT0gdm9pZCAwO1xufVxuLyoqXG4qIExvZ3MgZGVwcmVjYXRpb24gd2FybmluZyBmb3IgdXNlcnMgcmVseWluZyBvbiBjb3VwbGVkIGJlaGF2aW9yLlxuKiBPbmx5IGxvZ3MgaWYgdXNlciBleHBsaWNpdGx5IHNldCBkaXNhYmxlT3JpZ2luQ2hlY2sgKG5vdCB0ZXN0IGVudmlyb25tZW50IGRlZmF1bHQpLlxuKi9cbmNvbnN0IGxvZ0JhY2t3YXJkQ29tcGF0V2FybmluZyA9IGRlcHJlY2F0ZShmdW5jdGlvbiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmckMSgpIHt9LCBcImRpc2FibGVPcmlnaW5DaGVjazogdHJ1ZSBjdXJyZW50bHkgYWxzbyBkaXNhYmxlcyBDU1JGIGNoZWNrcy4gSW4gYSBmdXR1cmUgdmVyc2lvbiwgZGlzYWJsZU9yaWdpbkNoZWNrIHdpbGwgT05MWSBkaXNhYmxlIFVSTCB2YWxpZGF0aW9uLiBUbyBrZWVwIENTUkYgZGlzYWJsZWQsIGFkZCBkaXNhYmxlQ1NSRkNoZWNrOiB0cnVlIHRvIHlvdXIgY29uZmlnLlwiKTtcbi8qKlxuKiBBIG1pZGRsZXdhcmUgdG8gdmFsaWRhdGUgY2FsbGJhY2tVUkwgYW5kIG9yaWdpbiBhZ2FpbnN0IHRydXN0ZWRPcmlnaW5zLlxuKiBBbHNvIGhhbmRsZXMgQ1NSRiBwcm90ZWN0aW9uIHVzaW5nIEZldGNoIE1ldGFkYXRhIGZvciBmaXJzdC1sb2dpbiBzY2VuYXJpb3MuXG4qL1xuY29uc3Qgb3JpZ2luQ2hlY2tNaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoY3R4LnJlcXVlc3Q/Lm1ldGhvZCA9PT0gXCJHRVRcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIk9QVElPTlNcIiB8fCBjdHgucmVxdWVzdD8ubWV0aG9kID09PSBcIkhFQURcIiB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0YXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4KTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCB7IGJvZHksIHF1ZXJ5IH0gPSBjdHg7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYm9keT8uY2FsbGJhY2tVUkwgfHwgcXVlcnk/LmNhbGxiYWNrVVJMO1xuXHRjb25zdCByZWRpcmVjdFVSTCA9IGJvZHk/LnJlZGlyZWN0VG87XG5cdGNvbnN0IGVycm9yQ2FsbGJhY2tVUkwgPSBib2R5Py5lcnJvckNhbGxiYWNrVVJMO1xuXHRjb25zdCBuZXdVc2VyQ2FsbGJhY2tVUkwgPSBib2R5Py5uZXdVc2VyQ2FsbGJhY2tVUkw7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y2FsbGJhY2tVUkwgJiYgdmFsaWRhdGVVUkwoY2FsbGJhY2tVUkwsIFwiY2FsbGJhY2tVUkxcIik7XG5cdHJlZGlyZWN0VVJMICYmIHZhbGlkYXRlVVJMKHJlZGlyZWN0VVJMLCBcInJlZGlyZWN0VVJMXCIpO1xuXHRlcnJvckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKGVycm9yQ2FsbGJhY2tVUkwsIFwiZXJyb3JDYWxsYmFja1VSTFwiKTtcblx0bmV3VXNlckNhbGxiYWNrVVJMICYmIHZhbGlkYXRlVVJMKG5ld1VzZXJDYWxsYmFja1VSTCwgXCJuZXdVc2VyQ2FsbGJhY2tVUkxcIik7XG59KTtcbmNvbnN0IG9yaWdpbkNoZWNrID0gKGdldFZhbHVlKSA9PiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LnJlcXVlc3QpIHJldHVybjtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBPcmlnaW5DaGVjaykgcmV0dXJuO1xuXHRjb25zdCBjYWxsYmFja1VSTCA9IGdldFZhbHVlKGN0eCk7XG5cdGNvbnN0IHZhbGlkYXRlVVJMID0gKHVybCwgbGFiZWwpID0+IHtcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xuXHRcdGlmICghY3R4LmNvbnRleHQuaXNUcnVzdGVkT3JpZ2luKHVybCwgeyBhbGxvd1JlbGF0aXZlUGF0aHM6IGxhYmVsICE9PSBcIm9yaWdpblwiIH0pKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoYEludmFsaWQgJHtsYWJlbH06ICR7dXJsfWApO1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmluZm8oYElmIGl0J3MgYSB2YWxpZCBVUkwsIHBsZWFzZSBhZGQgJHt1cmx9IHRvIHRydXN0ZWRPcmlnaW5zIGluIHlvdXIgYXV0aCBjb25maWdcXG5gLCBgQ3VycmVudCBsaXN0IG9mIHRydXN0ZWRPcmlnaW5zOiAke2N0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogYEludmFsaWQgJHtsYWJlbH1gIH0pO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgY2FsbGJhY2tzID0gQXJyYXkuaXNBcnJheShjYWxsYmFja1VSTCkgPyBjYWxsYmFja1VSTCA6IFtjYWxsYmFja1VSTF07XG5cdGZvciAoY29uc3QgdXJsIG9mIGNhbGxiYWNrcykgdmFsaWRhdGVVUkwodXJsLCBcImNhbGxiYWNrVVJMXCIpO1xufSk7XG4vKipcbiogVmFsaWRhdGVzIG9yaWdpbiBoZWFkZXIgYWdhaW5zdCB0cnVzdGVkIG9yaWdpbnMuXG4qIEBwYXJhbSBjdHggLSBUaGUgZW5kcG9pbnQgY29udGV4dFxuKiBAcGFyYW0gZm9yY2VWYWxpZGF0ZSAtIElmIHRydWUsIGFsd2F5cyB2YWxpZGF0ZSBvcmlnaW4gcmVnYXJkbGVzcyBvZiBjb29raWVzL3NraXAgZmxhZ3NcbiovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZU9yaWdpbihjdHgsIGZvcmNlVmFsaWRhdGUgPSBmYWxzZSkge1xuXHRjb25zdCBoZWFkZXJzID0gY3R4LnJlcXVlc3Q/LmhlYWRlcnM7XG5cdGlmICghaGVhZGVycyB8fCAhY3R4LnJlcXVlc3QpIHJldHVybjtcblx0Y29uc3Qgb3JpZ2luSGVhZGVyID0gaGVhZGVycy5nZXQoXCJvcmlnaW5cIikgfHwgaGVhZGVycy5nZXQoXCJyZWZlcmVyXCIpIHx8IFwiXCI7XG5cdGNvbnN0IHVzZUNvb2tpZXMgPSBoZWFkZXJzLmhhcyhcImNvb2tpZVwiKTtcblx0aWYgKGN0eC5jb250ZXh0LnNraXBDU1JGQ2hlY2spIHJldHVybjtcblx0aWYgKHNob3VsZFNraXBDU1JGRm9yQmFja3dhcmRDb21wYXQoY3R4KSkge1xuXHRcdGN0eC5jb250ZXh0Lm9wdGlvbnMuYWR2YW5jZWQ/LmRpc2FibGVPcmlnaW5DaGVjayA9PT0gdHJ1ZSAmJiBsb2dCYWNrd2FyZENvbXBhdFdhcm5pbmcoKTtcblx0XHRyZXR1cm47XG5cdH1cblx0aWYgKCEoZm9yY2VWYWxpZGF0ZSB8fCB1c2VDb29raWVzKSkgcmV0dXJuO1xuXHRpZiAoIW9yaWdpbkhlYWRlciB8fCBvcmlnaW5IZWFkZXIgPT09IFwibnVsbFwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLk1JU1NJTkdfT1JfTlVMTF9PUklHSU4gfSk7XG5cdGNvbnN0IHRydXN0ZWRPcmlnaW5zID0gQXJyYXkuaXNBcnJheShjdHguY29udGV4dC5vcHRpb25zLnRydXN0ZWRPcmlnaW5zKSA/IGN0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zIDogWy4uLmN0eC5jb250ZXh0LnRydXN0ZWRPcmlnaW5zLCAuLi4oYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy50cnVzdGVkT3JpZ2lucz8uKGN0eC5yZXF1ZXN0KSk/LmZpbHRlcigodikgPT4gQm9vbGVhbih2KSkgfHwgW11dO1xuXHRpZiAoIXRydXN0ZWRPcmlnaW5zLnNvbWUoKG9yaWdpbikgPT4gbWF0Y2hlc09yaWdpblBhdHRlcm4ob3JpZ2luSGVhZGVyLCBvcmlnaW4pKSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihgSW52YWxpZCBvcmlnaW46ICR7b3JpZ2luSGVhZGVyfWApO1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKGBJZiBpdCdzIGEgdmFsaWQgVVJMLCBwbGVhc2UgYWRkICR7b3JpZ2luSGVhZGVyfSB0byB0cnVzdGVkT3JpZ2lucyBpbiB5b3VyIGF1dGggY29uZmlnXFxuYCwgYEN1cnJlbnQgbGlzdCBvZiB0cnVzdGVkT3JpZ2luczogJHt0cnVzdGVkT3JpZ2luc31gKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBcIkludmFsaWQgb3JpZ2luXCIgfSk7XG5cdH1cbn1cbi8qKlxuKiBNaWRkbGV3YXJlIGZvciBDU1JGIHByb3RlY3Rpb24gdXNpbmcgRmV0Y2ggTWV0YWRhdGEgaGVhZGVycy5cbiogVGhpcyBwcmV2ZW50cyBjcm9zcy1zaXRlIG5hdmlnYXRpb24gbG9naW4gYXR0YWNrcyB3aGlsZSBzdXBwb3J0aW5nIHByb2dyZXNzaXZlIGVuaGFuY2VtZW50LlxuKi9cbmNvbnN0IGZvcm1Dc3JmTWlkZGxld2FyZSA9IGNyZWF0ZUF1dGhNaWRkbGV3YXJlKGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHgucmVxdWVzdCkgcmV0dXJuO1xuXHRhd2FpdCB2YWxpZGF0ZUZvcm1Dc3JmKGN0eCk7XG59KTtcbi8qKlxuKiBWYWxpZGF0ZXMgQ1NSRiBwcm90ZWN0aW9uIGZvciBmaXJzdC1sb2dpbiBzY2VuYXJpb3MgdXNpbmcgRmV0Y2ggTWV0YWRhdGEgaGVhZGVycy5cbiogVGhpcyBwcmV2ZW50cyBjcm9zcy1zaXRlIGZvcm0gc3VibWlzc2lvbiBhdHRhY2tzIHdoaWxlIHN1cHBvcnRpbmcgcHJvZ3Jlc3NpdmUgZW5oYW5jZW1lbnQuXG4qL1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVGb3JtQ3NyZihjdHgpIHtcblx0Y29uc3QgcmVxID0gY3R4LnJlcXVlc3Q7XG5cdGlmICghcmVxKSByZXR1cm47XG5cdGlmIChjdHguY29udGV4dC5za2lwQ1NSRkNoZWNrKSByZXR1cm47XG5cdGlmIChzaG91bGRTa2lwQ1NSRkZvckJhY2t3YXJkQ29tcGF0KGN0eCkpIHJldHVybjtcblx0Y29uc3QgaGVhZGVycyA9IHJlcS5oZWFkZXJzO1xuXHRpZiAoaGVhZGVycy5oYXMoXCJjb29raWVcIikpIHJldHVybiBhd2FpdCB2YWxpZGF0ZU9yaWdpbihjdHgpO1xuXHRjb25zdCBzaXRlID0gaGVhZGVycy5nZXQoXCJTZWMtRmV0Y2gtU2l0ZVwiKTtcblx0Y29uc3QgbW9kZSA9IGhlYWRlcnMuZ2V0KFwiU2VjLUZldGNoLU1vZGVcIik7XG5cdGNvbnN0IGRlc3QgPSBoZWFkZXJzLmdldChcIlNlYy1GZXRjaC1EZXN0XCIpO1xuXHRpZiAoQm9vbGVhbihzaXRlICYmIHNpdGUudHJpbSgpIHx8IG1vZGUgJiYgbW9kZS50cmltKCkgfHwgZGVzdCAmJiBkZXN0LnRyaW0oKSkpIHtcblx0XHRpZiAoc2l0ZSA9PT0gXCJjcm9zcy1zaXRlXCIgJiYgbW9kZSA9PT0gXCJuYXZpZ2F0ZVwiKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJCbG9ja2VkIGNyb3NzLXNpdGUgbmF2aWdhdGlvbiBsb2dpbiBhdHRlbXB0IChDU1JGIHByb3RlY3Rpb24pXCIsIHtcblx0XHRcdFx0c2VjRmV0Y2hTaXRlOiBzaXRlLFxuXHRcdFx0XHRzZWNGZXRjaE1vZGU6IG1vZGUsXG5cdFx0XHRcdHNlY0ZldGNoRGVzdDogZGVzdFxuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJGT1JCSURERU5cIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkNST1NTX1NJVEVfTkFWSUdBVElPTl9MT0dJTl9CTE9DS0VEIH0pO1xuXHRcdH1cblx0XHRyZXR1cm4gYXdhaXQgdmFsaWRhdGVPcmlnaW4oY3R4LCB0cnVlKTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZvcm1Dc3JmTWlkZGxld2FyZSwgb3JpZ2luQ2hlY2ssIG9yaWdpbkNoZWNrTWlkZGxld2FyZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3JpZ2luLWNoZWNrLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/rate-limiter/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   onRequestRateLimit: () => (/* binding */ onRequestRateLimit)\n/* harmony export */ });\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/wildcard.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//#region src/api/rate-limiter/index.ts\nfunction shouldRateLimit(max, window, rateLimitData) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn now - rateLimitData.lastRequest < windowInMs && rateLimitData.count >= max;\n}\nfunction rateLimitResponse(retryAfter) {\n\treturn new Response(JSON.stringify({ message: \"Too many requests. Please try again later.\" }), {\n\t\tstatus: 429,\n\t\tstatusText: \"Too Many Requests\",\n\t\theaders: { \"X-Retry-After\": retryAfter.toString() }\n\t});\n}\nfunction getRetryAfter(lastRequest, window) {\n\tconst now = Date.now();\n\tconst windowInMs = window * 1e3;\n\treturn Math.ceil((lastRequest + windowInMs - now) / 1e3);\n}\nfunction createDBStorage(ctx) {\n\tconst model = \"rateLimit\";\n\tconst db = ctx.adapter;\n\treturn {\n\t\tget: async (key) => {\n\t\t\tconst data = (await db.findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"key\",\n\t\t\t\t\tvalue: key\n\t\t\t\t}]\n\t\t\t}))[0];\n\t\t\tif (typeof data?.lastRequest === \"bigint\") data.lastRequest = Number(data.lastRequest);\n\t\t\treturn data;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\ttry {\n\t\t\t\tif (_update) await db.updateMany({\n\t\t\t\t\tmodel,\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tfield: \"key\",\n\t\t\t\t\t\tvalue: key\n\t\t\t\t\t}],\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\telse await db.create({\n\t\t\t\t\tmodel,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tcount: value.count,\n\t\t\t\t\t\tlastRequest: value.lastRequest\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tctx.logger.error(\"Error setting rate limit\", e);\n\t\t\t}\n\t\t}\n\t};\n}\nconst memory = /* @__PURE__ */ new Map();\nfunction getRateLimitStorage(ctx, rateLimitSettings) {\n\tif (ctx.options.rateLimit?.customStorage) return ctx.options.rateLimit.customStorage;\n\tconst storage = ctx.rateLimit.storage;\n\tif (storage === \"secondary-storage\") return {\n\t\tget: async (key) => {\n\t\t\tconst data = await ctx.options.secondaryStorage?.get(key);\n\t\t\treturn data ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(data) : void 0;\n\t\t},\n\t\tset: async (key, value, _update) => {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tawait ctx.options.secondaryStorage?.set?.(key, JSON.stringify(value), ttl);\n\t\t}\n\t};\n\telse if (storage === \"memory\") return {\n\t\tasync get(key) {\n\t\t\tconst entry = memory.get(key);\n\t\t\tif (!entry) return;\n\t\t\tif (Date.now() >= entry.expiresAt) {\n\t\t\t\tmemory.delete(key);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn entry.data;\n\t\t},\n\t\tasync set(key, value, _update) {\n\t\t\tconst ttl = rateLimitSettings?.window ?? ctx.options.rateLimit?.window ?? 10;\n\t\t\tconst expiresAt = Date.now() + ttl * 1e3;\n\t\t\tmemory.set(key, {\n\t\t\t\tdata: value,\n\t\t\t\texpiresAt\n\t\t\t});\n\t\t}\n\t};\n\treturn createDBStorage(ctx);\n}\nasync function onRequestRateLimit(req, ctx) {\n\tif (!ctx.rateLimit.enabled) return;\n\tconst path = new URL(req.url).pathname.replace(ctx.options.basePath || \"/api/auth\", \"\").replace(/\\/+$/, \"\");\n\tlet window = ctx.rateLimit.window;\n\tlet max = ctx.rateLimit.max;\n\tconst ip = (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_0__.getIp)(req, ctx.options);\n\tif (!ip) return;\n\tconst key = ip + path;\n\tconst specialRule = getDefaultSpecialRules().find((rule) => rule.pathMatcher(path));\n\tif (specialRule) {\n\t\twindow = specialRule.window;\n\t\tmax = specialRule.max;\n\t}\n\tfor (const plugin of ctx.options.plugins || []) if (plugin.rateLimit) {\n\t\tconst matchedRule = plugin.rateLimit.find((rule) => rule.pathMatcher(path));\n\t\tif (matchedRule) {\n\t\t\twindow = matchedRule.window;\n\t\t\tmax = matchedRule.max;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (ctx.rateLimit.customRules) {\n\t\tconst _path = Object.keys(ctx.rateLimit.customRules).find((p) => {\n\t\t\tif (p.includes(\"*\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(p)(path);\n\t\t\treturn p === path;\n\t\t});\n\t\tif (_path) {\n\t\t\tconst customRule = ctx.rateLimit.customRules[_path];\n\t\t\tconst resolved = typeof customRule === \"function\" ? await customRule(req) : customRule;\n\t\t\tif (resolved) {\n\t\t\t\twindow = resolved.window;\n\t\t\t\tmax = resolved.max;\n\t\t\t}\n\t\t\tif (resolved === false) return;\n\t\t}\n\t}\n\tconst storage = getRateLimitStorage(ctx, { window });\n\tconst data = await storage.get(key);\n\tconst now = Date.now();\n\tif (!data) await storage.set(key, {\n\t\tkey,\n\t\tcount: 1,\n\t\tlastRequest: now\n\t});\n\telse {\n\t\tconst timeSinceLastRequest = now - data.lastRequest;\n\t\tif (shouldRateLimit(max, window, data)) return rateLimitResponse(getRetryAfter(data.lastRequest, window));\n\t\telse if (timeSinceLastRequest > window * 1e3) await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t\telse await storage.set(key, {\n\t\t\t...data,\n\t\t\tcount: data.count + 1,\n\t\t\tlastRequest: now\n\t\t}, true);\n\t}\n}\nfunction getDefaultSpecialRules() {\n\treturn [{\n\t\tpathMatcher(path) {\n\t\t\treturn path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path.startsWith(\"/change-password\") || path.startsWith(\"/change-email\");\n\t\t},\n\t\twindow: 10,\n\t\tmax: 3\n\t}];\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcmF0ZS1saW1pdGVyL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ0U7QUFDRDs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsdURBQXVEO0FBQzdGO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsc0VBQWE7QUFDOUIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0VBQUs7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixrRUFBYTtBQUM1QztBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxRQUFRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUM4QjtBQUM5QiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcmF0ZS1saW1pdGVyL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRJcCB9IGZyb20gXCIuLi8uLi91dGlscy9nZXQtcmVxdWVzdC1pcC5tanNcIjtcbmltcG9ydCB7IHdpbGRjYXJkTWF0Y2ggfSBmcm9tIFwiLi4vLi4vdXRpbHMvd2lsZGNhcmQubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JhdGUtbGltaXRlci9pbmRleC50c1xuZnVuY3Rpb24gc2hvdWxkUmF0ZUxpbWl0KG1heCwgd2luZG93LCByYXRlTGltaXREYXRhKSB7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdGNvbnN0IHdpbmRvd0luTXMgPSB3aW5kb3cgKiAxZTM7XG5cdHJldHVybiBub3cgLSByYXRlTGltaXREYXRhLmxhc3RSZXF1ZXN0IDwgd2luZG93SW5NcyAmJiByYXRlTGltaXREYXRhLmNvdW50ID49IG1heDtcbn1cbmZ1bmN0aW9uIHJhdGVMaW1pdFJlc3BvbnNlKHJldHJ5QWZ0ZXIpIHtcblx0cmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IFwiVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIgfSksIHtcblx0XHRzdGF0dXM6IDQyOSxcblx0XHRzdGF0dXNUZXh0OiBcIlRvbyBNYW55IFJlcXVlc3RzXCIsXG5cdFx0aGVhZGVyczogeyBcIlgtUmV0cnktQWZ0ZXJcIjogcmV0cnlBZnRlci50b1N0cmluZygpIH1cblx0fSk7XG59XG5mdW5jdGlvbiBnZXRSZXRyeUFmdGVyKGxhc3RSZXF1ZXN0LCB3aW5kb3cpIHtcblx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0Y29uc3Qgd2luZG93SW5NcyA9IHdpbmRvdyAqIDFlMztcblx0cmV0dXJuIE1hdGguY2VpbCgobGFzdFJlcXVlc3QgKyB3aW5kb3dJbk1zIC0gbm93KSAvIDFlMyk7XG59XG5mdW5jdGlvbiBjcmVhdGVEQlN0b3JhZ2UoY3R4KSB7XG5cdGNvbnN0IG1vZGVsID0gXCJyYXRlTGltaXRcIjtcblx0Y29uc3QgZGIgPSBjdHguYWRhcHRlcjtcblx0cmV0dXJuIHtcblx0XHRnZXQ6IGFzeW5jIChrZXkpID0+IHtcblx0XHRcdGNvbnN0IGRhdGEgPSAoYXdhaXQgZGIuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0dmFsdWU6IGtleVxuXHRcdFx0XHR9XVxuXHRcdFx0fSkpWzBdO1xuXHRcdFx0aWYgKHR5cGVvZiBkYXRhPy5sYXN0UmVxdWVzdCA9PT0gXCJiaWdpbnRcIikgZGF0YS5sYXN0UmVxdWVzdCA9IE51bWJlcihkYXRhLmxhc3RSZXF1ZXN0KTtcblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH0sXG5cdFx0c2V0OiBhc3luYyAoa2V5LCB2YWx1ZSwgX3VwZGF0ZSkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKF91cGRhdGUpIGF3YWl0IGRiLnVwZGF0ZU1hbnkoe1xuXHRcdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0ZmllbGQ6IFwia2V5XCIsXG5cdFx0XHRcdFx0XHR2YWx1ZToga2V5XG5cdFx0XHRcdFx0fV0sXG5cdFx0XHRcdFx0dXBkYXRlOiB7XG5cdFx0XHRcdFx0XHRjb3VudDogdmFsdWUuY291bnQsXG5cdFx0XHRcdFx0XHRsYXN0UmVxdWVzdDogdmFsdWUubGFzdFJlcXVlc3Rcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRlbHNlIGF3YWl0IGRiLmNyZWF0ZSh7XG5cdFx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0Y291bnQ6IHZhbHVlLmNvdW50LFxuXHRcdFx0XHRcdFx0bGFzdFJlcXVlc3Q6IHZhbHVlLmxhc3RSZXF1ZXN0XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y3R4LmxvZ2dlci5lcnJvcihcIkVycm9yIHNldHRpbmcgcmF0ZSBsaW1pdFwiLCBlKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5jb25zdCBtZW1vcnkgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuZnVuY3Rpb24gZ2V0UmF0ZUxpbWl0U3RvcmFnZShjdHgsIHJhdGVMaW1pdFNldHRpbmdzKSB7XG5cdGlmIChjdHgub3B0aW9ucy5yYXRlTGltaXQ/LmN1c3RvbVN0b3JhZ2UpIHJldHVybiBjdHgub3B0aW9ucy5yYXRlTGltaXQuY3VzdG9tU3RvcmFnZTtcblx0Y29uc3Qgc3RvcmFnZSA9IGN0eC5yYXRlTGltaXQuc3RvcmFnZTtcblx0aWYgKHN0b3JhZ2UgPT09IFwic2Vjb25kYXJ5LXN0b3JhZ2VcIikgcmV0dXJuIHtcblx0XHRnZXQ6IGFzeW5jIChrZXkpID0+IHtcblx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBjdHgub3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlPy5nZXQoa2V5KTtcblx0XHRcdHJldHVybiBkYXRhID8gc2FmZUpTT05QYXJzZShkYXRhKSA6IHZvaWQgMDtcblx0XHR9LFxuXHRcdHNldDogYXN5bmMgKGtleSwgdmFsdWUsIF91cGRhdGUpID0+IHtcblx0XHRcdGNvbnN0IHR0bCA9IHJhdGVMaW1pdFNldHRpbmdzPy53aW5kb3cgPz8gY3R4Lm9wdGlvbnMucmF0ZUxpbWl0Py53aW5kb3cgPz8gMTA7XG5cdFx0XHRhd2FpdCBjdHgub3B0aW9ucy5zZWNvbmRhcnlTdG9yYWdlPy5zZXQ/LihrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSwgdHRsKTtcblx0XHR9XG5cdH07XG5cdGVsc2UgaWYgKHN0b3JhZ2UgPT09IFwibWVtb3J5XCIpIHJldHVybiB7XG5cdFx0YXN5bmMgZ2V0KGtleSkge1xuXHRcdFx0Y29uc3QgZW50cnkgPSBtZW1vcnkuZ2V0KGtleSk7XG5cdFx0XHRpZiAoIWVudHJ5KSByZXR1cm47XG5cdFx0XHRpZiAoRGF0ZS5ub3coKSA+PSBlbnRyeS5leHBpcmVzQXQpIHtcblx0XHRcdFx0bWVtb3J5LmRlbGV0ZShrZXkpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZW50cnkuZGF0YTtcblx0XHR9LFxuXHRcdGFzeW5jIHNldChrZXksIHZhbHVlLCBfdXBkYXRlKSB7XG5cdFx0XHRjb25zdCB0dGwgPSByYXRlTGltaXRTZXR0aW5ncz8ud2luZG93ID8/IGN0eC5vcHRpb25zLnJhdGVMaW1pdD8ud2luZG93ID8/IDEwO1xuXHRcdFx0Y29uc3QgZXhwaXJlc0F0ID0gRGF0ZS5ub3coKSArIHR0bCAqIDFlMztcblx0XHRcdG1lbW9yeS5zZXQoa2V5LCB7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLFxuXHRcdFx0XHRleHBpcmVzQXRcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNyZWF0ZURCU3RvcmFnZShjdHgpO1xufVxuYXN5bmMgZnVuY3Rpb24gb25SZXF1ZXN0UmF0ZUxpbWl0KHJlcSwgY3R4KSB7XG5cdGlmICghY3R4LnJhdGVMaW1pdC5lbmFibGVkKSByZXR1cm47XG5cdGNvbnN0IHBhdGggPSBuZXcgVVJMKHJlcS51cmwpLnBhdGhuYW1lLnJlcGxhY2UoY3R4Lm9wdGlvbnMuYmFzZVBhdGggfHwgXCIvYXBpL2F1dGhcIiwgXCJcIikucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0bGV0IHdpbmRvdyA9IGN0eC5yYXRlTGltaXQud2luZG93O1xuXHRsZXQgbWF4ID0gY3R4LnJhdGVMaW1pdC5tYXg7XG5cdGNvbnN0IGlwID0gZ2V0SXAocmVxLCBjdHgub3B0aW9ucyk7XG5cdGlmICghaXApIHJldHVybjtcblx0Y29uc3Qga2V5ID0gaXAgKyBwYXRoO1xuXHRjb25zdCBzcGVjaWFsUnVsZSA9IGdldERlZmF1bHRTcGVjaWFsUnVsZXMoKS5maW5kKChydWxlKSA9PiBydWxlLnBhdGhNYXRjaGVyKHBhdGgpKTtcblx0aWYgKHNwZWNpYWxSdWxlKSB7XG5cdFx0d2luZG93ID0gc3BlY2lhbFJ1bGUud2luZG93O1xuXHRcdG1heCA9IHNwZWNpYWxSdWxlLm1heDtcblx0fVxuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBjdHgub3B0aW9ucy5wbHVnaW5zIHx8IFtdKSBpZiAocGx1Z2luLnJhdGVMaW1pdCkge1xuXHRcdGNvbnN0IG1hdGNoZWRSdWxlID0gcGx1Z2luLnJhdGVMaW1pdC5maW5kKChydWxlKSA9PiBydWxlLnBhdGhNYXRjaGVyKHBhdGgpKTtcblx0XHRpZiAobWF0Y2hlZFJ1bGUpIHtcblx0XHRcdHdpbmRvdyA9IG1hdGNoZWRSdWxlLndpbmRvdztcblx0XHRcdG1heCA9IG1hdGNoZWRSdWxlLm1heDtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHRpZiAoY3R4LnJhdGVMaW1pdC5jdXN0b21SdWxlcykge1xuXHRcdGNvbnN0IF9wYXRoID0gT2JqZWN0LmtleXMoY3R4LnJhdGVMaW1pdC5jdXN0b21SdWxlcykuZmluZCgocCkgPT4ge1xuXHRcdFx0aWYgKHAuaW5jbHVkZXMoXCIqXCIpKSByZXR1cm4gd2lsZGNhcmRNYXRjaChwKShwYXRoKTtcblx0XHRcdHJldHVybiBwID09PSBwYXRoO1xuXHRcdH0pO1xuXHRcdGlmIChfcGF0aCkge1xuXHRcdFx0Y29uc3QgY3VzdG9tUnVsZSA9IGN0eC5yYXRlTGltaXQuY3VzdG9tUnVsZXNbX3BhdGhdO1xuXHRcdFx0Y29uc3QgcmVzb2x2ZWQgPSB0eXBlb2YgY3VzdG9tUnVsZSA9PT0gXCJmdW5jdGlvblwiID8gYXdhaXQgY3VzdG9tUnVsZShyZXEpIDogY3VzdG9tUnVsZTtcblx0XHRcdGlmIChyZXNvbHZlZCkge1xuXHRcdFx0XHR3aW5kb3cgPSByZXNvbHZlZC53aW5kb3c7XG5cdFx0XHRcdG1heCA9IHJlc29sdmVkLm1heDtcblx0XHRcdH1cblx0XHRcdGlmIChyZXNvbHZlZCA9PT0gZmFsc2UpIHJldHVybjtcblx0XHR9XG5cdH1cblx0Y29uc3Qgc3RvcmFnZSA9IGdldFJhdGVMaW1pdFN0b3JhZ2UoY3R4LCB7IHdpbmRvdyB9KTtcblx0Y29uc3QgZGF0YSA9IGF3YWl0IHN0b3JhZ2UuZ2V0KGtleSk7XG5cdGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cdGlmICghZGF0YSkgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG5cdFx0a2V5LFxuXHRcdGNvdW50OiAxLFxuXHRcdGxhc3RSZXF1ZXN0OiBub3dcblx0fSk7XG5cdGVsc2Uge1xuXHRcdGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gZGF0YS5sYXN0UmVxdWVzdDtcblx0XHRpZiAoc2hvdWxkUmF0ZUxpbWl0KG1heCwgd2luZG93LCBkYXRhKSkgcmV0dXJuIHJhdGVMaW1pdFJlc3BvbnNlKGdldFJldHJ5QWZ0ZXIoZGF0YS5sYXN0UmVxdWVzdCwgd2luZG93KSk7XG5cdFx0ZWxzZSBpZiAodGltZVNpbmNlTGFzdFJlcXVlc3QgPiB3aW5kb3cgKiAxZTMpIGF3YWl0IHN0b3JhZ2Uuc2V0KGtleSwge1xuXHRcdFx0Li4uZGF0YSxcblx0XHRcdGNvdW50OiAxLFxuXHRcdFx0bGFzdFJlcXVlc3Q6IG5vd1xuXHRcdH0sIHRydWUpO1xuXHRcdGVsc2UgYXdhaXQgc3RvcmFnZS5zZXQoa2V5LCB7XG5cdFx0XHQuLi5kYXRhLFxuXHRcdFx0Y291bnQ6IGRhdGEuY291bnQgKyAxLFxuXHRcdFx0bGFzdFJlcXVlc3Q6IG5vd1xuXHRcdH0sIHRydWUpO1xuXHR9XG59XG5mdW5jdGlvbiBnZXREZWZhdWx0U3BlY2lhbFJ1bGVzKCkge1xuXHRyZXR1cm4gW3tcblx0XHRwYXRoTWF0Y2hlcihwYXRoKSB7XG5cdFx0XHRyZXR1cm4gcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24taW5cIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL3NpZ24tdXBcIikgfHwgcGF0aC5zdGFydHNXaXRoKFwiL2NoYW5nZS1wYXNzd29yZFwiKSB8fCBwYXRoLnN0YXJ0c1dpdGgoXCIvY2hhbmdlLWVtYWlsXCIpO1xuXHRcdH0sXG5cdFx0d2luZG93OiAxMCxcblx0XHRtYXg6IDNcblx0fV07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb25SZXF1ZXN0UmF0ZUxpbWl0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/rate-limiter/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/account.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountInfo: () => (/* binding */ accountInfo),\n/* harmony export */   getAccessToken: () => (/* binding */ getAccessToken),\n/* harmony export */   linkSocialAccount: () => (/* binding */ linkSocialAccount),\n/* harmony export */   listUserAccounts: () => (/* binding */ listUserAccounts),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken),\n/* harmony export */   unlinkAccount: () => (/* binding */ unlinkAccount)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/account.ts\nconst listUserAccounts = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/list-accounts\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserAccounts\",\n\t\tdescription: \"List all accounts linked to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\tproviderId: { type: \"string\" },\n\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccountId: { type: \"string\" },\n\t\t\t\t\t\tuserId: { type: \"string\" },\n\t\t\t\t\t\tscopes: {\n\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\titems: { type: \"string\" }\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\"providerId\",\n\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\"updatedAt\",\n\t\t\t\t\t\t\"accountId\",\n\t\t\t\t\t\t\"userId\",\n\t\t\t\t\t\t\"scopes\"\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst accounts = await c.context.internalAdapter.findAccounts(session.user.id);\n\treturn c.json(accounts.map((a) => {\n\t\tconst { scope, ...parsed } = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseAccountOutput)(c.context.options, a);\n\t\treturn {\n\t\t\t...parsed,\n\t\t\tscopes: scope?.split(\",\") || []\n\t\t};\n\t}));\n});\nconst linkSocialAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/link-social\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after the user has signed in\" }).optional(),\n\t\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_7__.SocialProviderListEnum,\n\t\tidToken: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).optional()\n\t\t}).optional(),\n\t\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().optional(),\n\t\tscopes: zod__WEBPACK_IMPORTED_MODULE_9__.array(zod__WEBPACK_IMPORTED_MODULE_9__.string()).meta({ description: \"Additional scopes to request from the provider\" }).optional(),\n\t\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to if there is an error during the link process\" }).optional(),\n\t\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_9__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\t\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_9__.record(zod__WEBPACK_IMPORTED_MODULE_9__.string(), zod__WEBPACK_IMPORTED_MODULE_9__.any()).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Link a social account to the user\",\n\t\toperationId: \"linkSocialAccount\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\turl: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The authorization URL to redirect the user to\"\n\t\t\t\t\t},\n\t\t\t\t\tredirect: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the user should be redirected to the authorization URL\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: { type: \"boolean\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"redirect\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (c) => {\n\tconst session = c.context.session;\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst linkingUserInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!linkingUserInfo || !linkingUserInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tconst linkingUserId = String(linkingUserInfo.user.id);\n\t\tif (!linkingUserInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tif ((await c.context.internalAdapter.findAccounts(session.user.id)).find((a) => a.providerId === provider.id && a.accountId === linkingUserId)) return c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - linking not allowed\" });\n\t\tif (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"UNAUTHORIZED\", { message: \"Account not linked - different emails not allowed\" });\n\t\ttry {\n\t\t\tawait c.context.internalAdapter.createAccount({\n\t\t\t\tuserId: session.user.id,\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: linkingUserId,\n\t\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\t\tidToken: token,\n\t\t\t\trefreshToken: c.body.idToken.refreshToken,\n\t\t\t\tscope: c.body.idToken.scopes?.join(\",\")\n\t\t\t});\n\t\t} catch {\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"EXPECTATION_FAILED\", { message: \"Account not linked - unable to create account\" });\n\t\t}\n\t\tif (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) try {\n\t\t\tawait c.context.internalAdapter.updateUser(session.user.id, {\n\t\t\t\tname: linkingUserInfo.user?.name,\n\t\t\t\timage: linkingUserInfo.user?.image\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Could not update user - \" + e.toString());\n\t\t}\n\t\treturn c.json({\n\t\t\turl: \"\",\n\t\t\tstatus: true,\n\t\t\tredirect: false\n\t\t});\n\t}\n\tconst state = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_2__.generateState)(c, {\n\t\tuserId: session.user.id,\n\t\temail: session.user.email\n\t}, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate: state.state,\n\t\tcodeVerifier: state.codeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst unlinkAccount = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/unlink-account\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string(),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.freshSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Unlink an account\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId } = ctx.body;\n\tconst accounts = await ctx.context.internalAdapter.findAccounts(ctx.context.session.user.id);\n\tif (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT });\n\tconst accountExist = accounts.find((account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId);\n\tif (!accountExist) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_5__.BASE_ERROR_CODES.ACCOUNT_NOT_FOUND });\n\tawait ctx.context.internalAdapter.deleteAccount(accountExist.id);\n\treturn ctx.json({ status: true });\n});\nconst getAccessToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/get-access-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Get a valid access token, doing a refresh if needed\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"A Valid access token\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body || {};\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw ctx.error(\"UNAUTHORIZED\");\n\tif (!ctx.context.socialProviders.find((p) => p.id === providerId)) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} is not supported.` });\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tlet account = void 0;\n\tif (accountData && providerId === accountData.providerId && (!accountId || accountData.id === accountId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\ttry {\n\t\tlet newTokens = null;\n\t\tconst accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n\t\tif (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n\t\t\tconst refreshToken$1 = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.refreshToken, ctx.context);\n\t\t\tnewTokens = await provider.refreshAccessToken(refreshToken$1);\n\t\t\tconst updatedData = {\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.accessToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(newTokens.refreshToken, ctx.context),\n\t\t\t\trefreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n\t\t\t};\n\t\t\tlet updatedAccount = null;\n\t\t\tif (account.id) updatedAccount = await ctx.context.internalAdapter.updateAccount(account.id, updatedData);\n\t\t\tif (ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t\t...account,\n\t\t\t\t...updatedAccount ?? updatedData\n\t\t\t});\n\t\t}\n\t\tconst accessTokenExpiresAt = (() => {\n\t\t\tif (newTokens?.accessTokenExpiresAt) {\n\t\t\t\tif (typeof newTokens.accessTokenExpiresAt === \"string\") return new Date(newTokens.accessTokenExpiresAt);\n\t\t\t\treturn newTokens.accessTokenExpiresAt;\n\t\t\t}\n\t\t\tif (account.accessTokenExpiresAt) {\n\t\t\t\tif (typeof account.accessTokenExpiresAt === \"string\") return new Date(account.accessTokenExpiresAt);\n\t\t\t\treturn account.accessTokenExpiresAt;\n\t\t\t}\n\t\t})();\n\t\tconst tokens = {\n\t\t\taccessToken: newTokens?.accessToken ?? await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(account.accessToken ?? \"\", ctx.context),\n\t\t\taccessTokenExpiresAt,\n\t\t\tscopes: account.scope?.split(\",\") ?? [],\n\t\t\tidToken: newTokens?.idToken ?? account.idToken ?? void 0\n\t\t};\n\t\treturn ctx.json(tokens);\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to get a valid access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst refreshToken = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/refresh-token\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tproviderId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider ID for the OAuth provider\" }),\n\t\taccountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The account ID associated with the refresh token\" }).optional(),\n\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The user ID associated with the account\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\tdescription: \"Refresh the access token using a refresh token\",\n\t\tresponses: {\n\t\t\t200: {\n\t\t\t\tdescription: \"Access token refreshed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttokenType: { type: \"string\" },\n\t\t\t\t\t\tidToken: { type: \"string\" },\n\t\t\t\t\t\taccessToken: { type: \"string\" },\n\t\t\t\t\t\trefreshToken: { type: \"string\" },\n\t\t\t\t\t\taccessTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\trefreshTokenExpiresAt: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tformat: \"date-time\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t400: { description: \"Invalid refresh token or provider configuration\" }\n\t\t}\n\t} }\n}, async (ctx) => {\n\tconst { providerId, accountId, userId } = ctx.body;\n\tconst req = ctx.request;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_4__.getSessionFromCtx)(ctx);\n\tif (req && !session) throw ctx.error(\"UNAUTHORIZED\");\n\tconst resolvedUserId = session?.user?.id || userId;\n\tif (!resolvedUserId) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Either userId or session is required` });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} not found.` });\n\tif (!provider.refreshAccessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: `Provider ${providerId} does not support token refreshing.` });\n\tlet account = void 0;\n\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\tif (accountData && (!providerId || providerId === accountData?.providerId)) account = accountData;\n\telse account = (await ctx.context.internalAdapter.findAccounts(resolvedUserId)).find((acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId);\n\tif (!account) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tlet refreshToken$1 = void 0;\n\tif (accountData && providerId === accountData.providerId) refreshToken$1 = accountData.refreshToken ?? void 0;\n\telse refreshToken$1 = account.refreshToken ?? void 0;\n\tif (!refreshToken$1) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Refresh token not found\" });\n\ttry {\n\t\tconst decryptedRefreshToken = await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.decryptOAuthToken)(refreshToken$1, ctx.context);\n\t\tconst tokens = await provider.refreshAccessToken(decryptedRefreshToken);\n\t\tif (account.id) {\n\t\t\tconst updateData = {\n\t\t\t\t...account || {},\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\t\tidToken: tokens.idToken || account.idToken\n\t\t\t};\n\t\t\tawait ctx.context.internalAdapter.updateAccount(account.id, updateData);\n\t\t}\n\t\tif (accountData && providerId === accountData.providerId && ctx.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.setAccountCookie)(ctx, {\n\t\t\t...accountData,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.accessToken, ctx.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_3__.setTokenUtil)(tokens.refreshToken, ctx.context),\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || accountData.scope,\n\t\t\tidToken: tokens.idToken || accountData.idToken\n\t\t});\n\t\treturn ctx.json({\n\t\t\taccessToken: tokens.accessToken,\n\t\t\trefreshToken: tokens.refreshToken,\n\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\tscope: tokens.scopes?.join(\",\") || account.scope,\n\t\t\tidToken: tokens.idToken || account.idToken,\n\t\t\tproviderId: account.providerId,\n\t\t\taccountId: account.accountId\n\t\t});\n\t} catch (error) {\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", {\n\t\t\tmessage: \"Failed to refresh access token\",\n\t\t\tcause: error\n\t\t});\n\t}\n});\nconst accountInfoQuerySchema = zod__WEBPACK_IMPORTED_MODULE_9__.optional(zod__WEBPACK_IMPORTED_MODULE_9__.object({ accountId: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The provider given account id for which to get the account info\" }).optional() }));\nconst accountInfo = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/account-info\", {\n\tmethod: \"GET\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_4__.sessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Get the account info provided by the provider\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: { type: \"string\" },\n\t\t\t\t\t\t\tname: { type: \"string\" },\n\t\t\t\t\t\t\temail: { type: \"string\" },\n\t\t\t\t\t\t\timage: { type: \"string\" },\n\t\t\t\t\t\t\temailVerified: { type: \"boolean\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"id\", \"emailVerified\"]\n\t\t\t\t\t},\n\t\t\t\t\tdata: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {},\n\t\t\t\t\t\tadditionalProperties: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"data\"],\n\t\t\t\tadditionalProperties: false\n\t\t\t} } }\n\t\t} }\n\t} },\n\tquery: accountInfoQuerySchema\n}, async (ctx) => {\n\tconst providedAccountId = ctx.query?.accountId;\n\tlet account = void 0;\n\tif (!providedAccountId) {\n\t\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\t\tconst accountData = await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_1__.getAccountCookie)(ctx);\n\t\t\tif (accountData) account = accountData;\n\t\t}\n\t} else {\n\t\tconst accountData = await ctx.context.internalAdapter.findAccount(providedAccountId);\n\t\tif (accountData) account = accountData;\n\t}\n\tif (!account || account.userId !== ctx.context.session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Account not found\" });\n\tconst provider = ctx.context.socialProviders.find((p) => p.id === account.providerId);\n\tif (!provider) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `Provider account provider is ${account.providerId} but it is not configured` });\n\tconst tokens = await getAccessToken({\n\t\t...ctx,\n\t\tmethod: \"POST\",\n\t\tbody: {\n\t\t\taccountId: account.id,\n\t\t\tproviderId: account.providerId\n\t\t},\n\t\treturnHeaders: false,\n\t\treturnStatus: false\n\t});\n\tif (!tokens.accessToken) throw new better_call__WEBPACK_IMPORTED_MODULE_6__.APIError(\"BAD_REQUEST\", { message: \"Access token not found\" });\n\tconst info = await provider.getUserInfo({\n\t\t...tokens,\n\t\taccessToken: tokens.accessToken\n\t});\n\treturn ctx.json(info);\n});\n\n//#endregion\n\n//# sourceMappingURL=account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2FjY291bnQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUQ7QUFDNEI7QUFDOUI7QUFDa0I7QUFDb0I7QUFDbEM7QUFDbEM7QUFDYztBQUNxQztBQUNqQjs7QUFFM0Q7QUFDQSx5QkFBeUIseUVBQWtCO0FBQzNDO0FBQ0EsT0FBTywyREFBaUI7QUFDeEIsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0JBQWdCO0FBQzVCLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxtQkFBbUIsZ0JBQWdCO0FBQ25DLGdCQUFnQixnQkFBZ0I7QUFDaEM7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxVQUFVLG1CQUFtQixFQUFFLGtFQUFrQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsMEJBQTBCLHlFQUFrQjtBQUM1QztBQUNBO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGVBQWUsdUNBQVEsVUFBVSxvRUFBb0U7QUFDckcsWUFBWSxzRkFBc0I7QUFDbEMsV0FBVyx1Q0FBUTtBQUNuQixVQUFVLHVDQUFRO0FBQ2xCLFVBQVUsdUNBQVE7QUFDbEIsZ0JBQWdCLHVDQUFRO0FBQ3hCLGlCQUFpQix1Q0FBUTtBQUN6QixXQUFXLHNDQUFPLENBQUMsdUNBQVE7QUFDM0IsR0FBRztBQUNILGlCQUFpQix3Q0FBUztBQUMxQixVQUFVLHNDQUFPLENBQUMsdUNBQVEsV0FBVywrREFBK0Q7QUFDcEcsb0JBQW9CLHVDQUFRLFVBQVUsb0ZBQW9GO0FBQzFILG1CQUFtQix3Q0FBUyxVQUFVLDRHQUE0RztBQUNsSixrQkFBa0IsdUNBQVEsQ0FBQyx1Q0FBUSxJQUFJLG9DQUFLO0FBQzVDLEVBQUU7QUFDRixPQUFPLDJEQUFpQjtBQUN4QixhQUFhO0FBQ2I7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLGVBQWU7QUFDZixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Esb0dBQW9HLDJCQUEyQjtBQUMvSCxZQUFZLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLDJCQUEyQjtBQUMxRyxhQUFhLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDdkY7QUFDQSxVQUFVLGVBQWU7QUFDekI7QUFDQSxnREFBZ0QsMkJBQTJCO0FBQzNFLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLGdCQUFnQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdURBQXVELDJCQUEyQjtBQUNsRixhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiwwQkFBMEI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELDJCQUEyQjtBQUMvRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQix1QkFBdUI7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw4TUFBOE0saURBQVEsbUJBQW1CLHFEQUFxRDtBQUM5UiwrSUFBK0ksaURBQVEsbUJBQW1CLDhEQUE4RDtBQUN4TztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKLGFBQWEsaURBQVEseUJBQXlCLDBEQUEwRDtBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQkFBcUIsZ0VBQWE7QUFDbEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLFlBQVksWUFBWTtBQUM1RDtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0Qsc0JBQXNCLHlFQUFrQjtBQUN4QztBQUNBLE9BQU8sdUNBQVE7QUFDZixjQUFjLHVDQUFRO0FBQ3RCLGFBQWEsdUNBQVE7QUFDckIsRUFBRTtBQUNGLE9BQU8sZ0VBQXNCO0FBQzdCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCLFVBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsd0JBQXdCO0FBQ2pDO0FBQ0EseUdBQXlHLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQ0FBZ0M7QUFDNUw7QUFDQSw4QkFBOEIsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNyRztBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCx1QkFBdUIseUVBQWtCO0FBQ3pDO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGNBQWMsdUNBQVEsVUFBVSx1REFBdUQ7QUFDdkYsYUFBYSx1Q0FBUSxVQUFVLGlFQUFpRTtBQUNoRyxVQUFVLHVDQUFRLFVBQVUsd0RBQXdEO0FBQ3BGLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDLHFCQUFxQixnQkFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVU7QUFDVjtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsZ0NBQWdDO0FBQ3pDO0FBQ0EsdUJBQXVCLCtEQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQSw4RUFBOEUsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLG9CQUFvQjtBQUM3SiwyQkFBMkIsNEVBQWdCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixpREFBUSxrQkFBa0IsOEJBQThCO0FBQ2pGO0FBQ0EsMEJBQTBCLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxhQUFhO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLG9FQUFpQjtBQUNqRDtBQUNBO0FBQ0EsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0Esd0JBQXdCLCtEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELDRFQUFnQjtBQUM5RTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsZ0RBQWdELG9FQUFpQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRCxxQkFBcUIseUVBQWtCO0FBQ3ZDO0FBQ0EsT0FBTyx1Q0FBUTtBQUNmLGNBQWMsdUNBQVEsVUFBVSx1REFBdUQ7QUFDdkYsYUFBYSx1Q0FBUSxVQUFVLGlFQUFpRTtBQUNoRyxVQUFVLHVDQUFRLFVBQVUsd0RBQXdEO0FBQ3BGLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQyxpQkFBaUIsZ0JBQWdCO0FBQ2pDLHFCQUFxQixnQkFBZ0I7QUFDckMsc0JBQXNCLGdCQUFnQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLFVBQVU7QUFDVjtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVMsZ0NBQWdDO0FBQ3pDO0FBQ0EsdUJBQXVCLCtEQUFpQjtBQUN4QztBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLGtCQUFrQixpREFBaUQ7QUFDM0c7QUFDQSwwQkFBMEIsaURBQVEsa0JBQWtCLHFCQUFxQixZQUFZLGFBQWE7QUFDbEcsNkNBQTZDLGlEQUFRLGtCQUFrQixxQkFBcUIsWUFBWSxxQ0FBcUM7QUFDN0k7QUFDQSwyQkFBMkIsNEVBQWdCO0FBQzNDO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsa0JBQWtCLG9DQUFvQztBQUM5RjtBQUNBLHNDQUFzQyxvRUFBaUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLHVCQUF1QiwrREFBWTtBQUNuQyx3QkFBd0IsK0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSEFBcUgsNEVBQWdCO0FBQ3JJO0FBQ0Esc0JBQXNCLCtEQUFZO0FBQ2xDLHVCQUF1QiwrREFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsR0FBRztBQUNILFlBQVksaURBQVE7QUFDcEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRCwrQkFBK0IseUNBQVUsQ0FBQyx1Q0FBUSxHQUFHLFdBQVcsdUNBQVEsVUFBVSxnRkFBZ0YsY0FBYztBQUNoTCxvQkFBb0IseUVBQWtCO0FBQ3RDO0FBQ0EsT0FBTywyREFBaUI7QUFDeEIsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWUsZ0JBQWdCO0FBQy9CLGdCQUFnQixnQkFBZ0I7QUFDaEMsZ0JBQWdCLGdCQUFnQjtBQUNoQyx3QkFBd0I7QUFDeEIsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0RUFBZ0I7QUFDN0M7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsaURBQVEsa0JBQWtCLDhCQUE4QjtBQUNuSTtBQUNBLDBCQUEwQixpREFBUSw0QkFBNEIseUNBQXlDLG9CQUFvQiwyQkFBMkI7QUFDdEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0Ysb0NBQW9DLGlEQUFRLGtCQUFrQixtQ0FBbUM7QUFDakc7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDtBQUN5RztBQUN6RyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2FjY291bnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlQWNjb3VudE91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRBY2NvdW50Q29va2llLCBzZXRBY2NvdW50Q29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvc2Vzc2lvbi1zdG9yZS5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3RhdGUgfSBmcm9tIFwiLi4vLi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgZGVjcnlwdE9BdXRoVG9rZW4sIHNldFRva2VuVXRpbCB9IGZyb20gXCIuLi8uLi9vYXV0aDIvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBmcmVzaFNlc3Npb25NaWRkbGV3YXJlLCBnZXRTZXNzaW9uRnJvbUN0eCwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0IHsgU29jaWFsUHJvdmlkZXJMaXN0RW51bSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9zb2NpYWwtcHJvdmlkZXJzXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXBpL3JvdXRlcy9hY2NvdW50LnRzXG5jb25zdCBsaXN0VXNlckFjY291bnRzID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2xpc3QtYWNjb3VudHNcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImxpc3RVc2VyQWNjb3VudHNcIixcblx0XHRkZXNjcmlwdGlvbjogXCJMaXN0IGFsbCBhY2NvdW50cyBsaW5rZWQgdG8gdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJhcnJheVwiLFxuXHRcdFx0XHRpdGVtczoge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0cHJvdmlkZXJJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGFjY291bnRJZDogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHR1c2VySWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0c2NvcGVzOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYXJyYXlcIixcblx0XHRcdFx0XHRcdFx0aXRlbXM6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJpZFwiLFxuXHRcdFx0XHRcdFx0XCJwcm92aWRlcklkXCIsXG5cdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIixcblx0XHRcdFx0XHRcdFwiYWNjb3VudElkXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJJZFwiLFxuXHRcdFx0XHRcdFx0XCJzY29wZXNcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYy5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFjY291bnRzID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKTtcblx0cmV0dXJuIGMuanNvbihhY2NvdW50cy5tYXAoKGEpID0+IHtcblx0XHRjb25zdCB7IHNjb3BlLCAuLi5wYXJzZWQgfSA9IHBhcnNlQWNjb3VudE91dHB1dChjLmNvbnRleHQub3B0aW9ucywgYSk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdC4uLnBhcnNlZCxcblx0XHRcdHNjb3Blczogc2NvcGU/LnNwbGl0KFwiLFwiKSB8fCBbXVxuXHRcdH07XG5cdH0pKTtcbn0pO1xuY29uc3QgbGlua1NvY2lhbEFjY291bnQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvbGluay1zb2NpYWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIHRoZSB1c2VyIGhhcyBzaWduZWQgaW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHByb3ZpZGVyOiBTb2NpYWxQcm92aWRlckxpc3RFbnVtLFxuXHRcdGlkVG9rZW46IHoub2JqZWN0KHtcblx0XHRcdHRva2VuOiB6LnN0cmluZygpLFxuXHRcdFx0bm9uY2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0XHRyZWZyZXNoVG9rZW46IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRcdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG5cdFx0fSkub3B0aW9uYWwoKSxcblx0XHRyZXF1ZXN0U2lnblVwOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuXHRcdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQWRkaXRpb25hbCBzY29wZXMgdG8gcmVxdWVzdCBmcm9tIHRoZSBwcm92aWRlclwiIH0pLm9wdGlvbmFsKCksXG5cdFx0ZXJyb3JDYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0byBpZiB0aGVyZSBpcyBhbiBlcnJvciBkdXJpbmcgdGhlIGxpbmsgcHJvY2Vzc1wiIH0pLm9wdGlvbmFsKCksXG5cdFx0ZGlzYWJsZVJlZGlyZWN0OiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRGlzYWJsZSBhdXRvbWF0aWMgcmVkaXJlY3Rpb24gdG8gdGhlIHByb3ZpZGVyLiBVc2VmdWwgZm9yIGhhbmRsaW5nIHRoZSByZWRpcmVjdGlvbiB5b3Vyc2VsZlwiIH0pLm9wdGlvbmFsKCksXG5cdFx0YWRkaXRpb25hbERhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkxpbmsgYSBzb2NpYWwgYWNjb3VudCB0byB0aGUgdXNlclwiLFxuXHRcdG9wZXJhdGlvbklkOiBcImxpbmtTb2NpYWxBY2NvdW50XCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR1cmw6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgYXV0aG9yaXphdGlvbiBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG9cIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVkaXJlY3Q6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSB1c2VyIHNob3VsZCBiZSByZWRpcmVjdGVkIHRvIHRoZSBhdXRob3JpemF0aW9uIFVSTFwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wicmVkaXJlY3RcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGMpID0+IHtcblx0Y29uc3Qgc2Vzc2lvbiA9IGMuY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5ib2R5LnByb3ZpZGVyKTtcblx0aWYgKCFwcm92aWRlcikge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQcm92aWRlciBub3QgZm91bmQuIE1ha2Ugc3VyZSB0byBhZGQgdGhlIHByb3ZpZGVyIGluIHlvdXIgYXV0aCBjb25maWdcIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuUFJPVklERVJfTk9UX0ZPVU5EIH0pO1xuXHR9XG5cdGlmIChjLmJvZHkuaWRUb2tlbikge1xuXHRcdGlmICghcHJvdmlkZXIudmVyaWZ5SWRUb2tlbikge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIGRvZXMgbm90IHN1cHBvcnQgaWQgdG9rZW4gdmVyaWZpY2F0aW9uXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSURfVE9LRU5fTk9UX1NVUFBPUlRFRCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyB0b2tlbiwgbm9uY2UgfSA9IGMuYm9keS5pZFRva2VuO1xuXHRcdGlmICghYXdhaXQgcHJvdmlkZXIudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSW52YWxpZCBpZCB0b2tlblwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfVE9LRU4gfSk7XG5cdFx0fVxuXHRcdGNvbnN0IGxpbmtpbmdVc2VySW5mbyA9IGF3YWl0IHByb3ZpZGVyLmdldFVzZXJJbmZvKHtcblx0XHRcdGlkVG9rZW46IHRva2VuLFxuXHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW5cblx0XHR9KTtcblx0XHRpZiAoIWxpbmtpbmdVc2VySW5mbyB8fCAhbGlua2luZ1VzZXJJbmZvPy51c2VyKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGdldCB1c2VyIGluZm9cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbGlua2luZ1VzZXJJZCA9IFN0cmluZyhsaW5raW5nVXNlckluZm8udXNlci5pZCk7XG5cdFx0aWYgKCFsaW5raW5nVXNlckluZm8udXNlci5lbWFpbCkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVzZXIgZW1haWwgbm90IGZvdW5kXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuVVNFUl9FTUFJTF9OT1RfRk9VTkQgfSk7XG5cdFx0fVxuXHRcdGlmICgoYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYSkgPT4gYS5wcm92aWRlcklkID09PSBwcm92aWRlci5pZCAmJiBhLmFjY291bnRJZCA9PT0gbGlua2luZ1VzZXJJZCkpIHJldHVybiBjLmpzb24oe1xuXHRcdFx0dXJsOiBcIlwiLFxuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0cmVkaXJlY3Q6IGZhbHNlXG5cdFx0fSk7XG5cdFx0aWYgKCEoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnMpPy5pbmNsdWRlcyhwcm92aWRlci5pZCkgJiYgIWxpbmtpbmdVc2VySW5mby51c2VyLmVtYWlsVmVyaWZpZWQgfHwgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmVuYWJsZWQgPT09IGZhbHNlKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGxpbmtlZCAtIGxpbmtpbmcgbm90IGFsbG93ZWRcIiB9KTtcblx0XHRpZiAobGlua2luZ1VzZXJJbmZvLnVzZXIuZW1haWwgIT09IHNlc3Npb24udXNlci5lbWFpbCAmJiBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uYWxsb3dEaWZmZXJlbnRFbWFpbHMgIT09IHRydWUpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gZGlmZmVyZW50IGVtYWlscyBub3QgYWxsb3dlZFwiIH0pO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZUFjY291bnQoe1xuXHRcdFx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdFx0cHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG5cdFx0XHRcdGFjY291bnRJZDogbGlua2luZ1VzZXJJZCxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBjLmJvZHkuaWRUb2tlbi5yZWZyZXNoVG9rZW4sXG5cdFx0XHRcdHNjb3BlOiBjLmJvZHkuaWRUb2tlbi5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkVYUEVDVEFUSU9OX0ZBSUxFRFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgbGlua2VkIC0gdW5hYmxlIHRvIGNyZWF0ZSBhY2NvdW50XCIgfSk7XG5cdFx0fVxuXHRcdGlmIChjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8udXBkYXRlVXNlckluZm9PbkxpbmsgPT09IHRydWUpIHRyeSB7XG5cdFx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoc2Vzc2lvbi51c2VyLmlkLCB7XG5cdFx0XHRcdG5hbWU6IGxpbmtpbmdVc2VySW5mby51c2VyPy5uYW1lLFxuXHRcdFx0XHRpbWFnZTogbGlua2luZ1VzZXJJbmZvLnVzZXI/LmltYWdlXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgdXBkYXRlIHVzZXIgLSBcIiArIGUudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHRcdHJldHVybiBjLmpzb24oe1xuXHRcdFx0dXJsOiBcIlwiLFxuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0cmVkaXJlY3Q6IGZhbHNlXG5cdFx0fSk7XG5cdH1cblx0Y29uc3Qgc3RhdGUgPSBhd2FpdCBnZW5lcmF0ZVN0YXRlKGMsIHtcblx0XHR1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRlbWFpbDogc2Vzc2lvbi51c2VyLmVtYWlsXG5cdH0sIGMuYm9keS5hZGRpdGlvbmFsRGF0YSk7XG5cdGNvbnN0IHVybCA9IGF3YWl0IHByb3ZpZGVyLmNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuXHRcdHN0YXRlOiBzdGF0ZS5zdGF0ZSxcblx0XHRjb2RlVmVyaWZpZXI6IHN0YXRlLmNvZGVWZXJpZmllcixcblx0XHRyZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YCxcblx0XHRzY29wZXM6IGMuYm9keS5zY29wZXNcblx0fSk7XG5cdGlmICghYy5ib2R5LmRpc2FibGVSZWRpcmVjdCkgYy5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCB1cmwudG9TdHJpbmcoKSk7XG5cdHJldHVybiBjLmpzb24oe1xuXHRcdHVybDogdXJsLnRvU3RyaW5nKCksXG5cdFx0cmVkaXJlY3Q6ICFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0XG5cdH0pO1xufSk7XG5jb25zdCB1bmxpbmtBY2NvdW50ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3VubGluay1hY2NvdW50XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW2ZyZXNoU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiVW5saW5rIGFuIGFjY291bnRcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBwcm92aWRlcklkLCBhY2NvdW50SWQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBhY2NvdW50cyA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKTtcblx0aWYgKGFjY291bnRzLmxlbmd0aCA9PT0gMSAmJiAhY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uYWxsb3dVbmxpbmtpbmdBbGwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fVU5MSU5LX0xBU1RfQUNDT1VOVCB9KTtcblx0Y29uc3QgYWNjb3VudEV4aXN0ID0gYWNjb3VudHMuZmluZCgoYWNjb3VudCkgPT4gYWNjb3VudElkID8gYWNjb3VudC5hY2NvdW50SWQgPT09IGFjY291bnRJZCAmJiBhY2NvdW50LnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQgOiBhY2NvdW50LnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnRFeGlzdCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkFDQ09VTlRfTk9UX0ZPVU5EIH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlQWNjb3VudChhY2NvdW50RXhpc3QuaWQpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcbmNvbnN0IGdldEFjY2Vzc1Rva2VuID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2dldC1hY2Nlc3MtdG9rZW5cIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0cHJvdmlkZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHByb3ZpZGVyIElEIGZvciB0aGUgT0F1dGggcHJvdmlkZXJcIiB9KSxcblx0XHRhY2NvdW50SWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBhY2NvdW50IElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVmcmVzaCB0b2tlblwiIH0pLm9wdGlvbmFsKCksXG5cdFx0dXNlcklkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIGFjY291bnRcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiR2V0IGEgdmFsaWQgYWNjZXNzIHRva2VuLCBkb2luZyBhIHJlZnJlc2ggaWYgbmVlZGVkXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHQyMDA6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQSBWYWxpZCBhY2Nlc3MgdG9rZW5cIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHRva2VuVHlwZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRpZFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0sXG5cdFx0XHQ0MDA6IHsgZGVzY3JpcHRpb246IFwiSW52YWxpZCByZWZyZXNoIHRva2VuIG9yIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb25cIiB9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgeyBwcm92aWRlcklkLCBhY2NvdW50SWQsIHVzZXJJZCB9ID0gY3R4LmJvZHkgfHwge307XG5cdGNvbnN0IHJlcSA9IGN0eC5yZXF1ZXN0O1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKHJlcSAmJiAhc2Vzc2lvbikgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRjb25zdCByZXNvbHZlZFVzZXJJZCA9IHNlc3Npb24/LnVzZXI/LmlkIHx8IHVzZXJJZDtcblx0aWYgKCFyZXNvbHZlZFVzZXJJZCkgdGhyb3cgY3R4LmVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRpZiAoIWN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBpcyBub3Qgc3VwcG9ydGVkLmAgfSk7XG5cdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRsZXQgYWNjb3VudCA9IHZvaWQgMDtcblx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQgJiYgKCFhY2NvdW50SWQgfHwgYWNjb3VudERhdGEuaWQgPT09IGFjY291bnRJZCkpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0ZWxzZSBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMocmVzb2x2ZWRVc2VySWQpKS5maW5kKChhY2MpID0+IGFjY291bnRJZCA/IGFjYy5pZCA9PT0gYWNjb3VudElkICYmIGFjYy5wcm92aWRlcklkID09PSBwcm92aWRlcklkIDogYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIWFjY291bnQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJBY2NvdW50IG5vdCBmb3VuZFwiIH0pO1xuXHRjb25zdCBwcm92aWRlciA9IGN0eC5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBwcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBub3QgZm91bmQuYCB9KTtcblx0dHJ5IHtcblx0XHRsZXQgbmV3VG9rZW5zID0gbnVsbDtcblx0XHRjb25zdCBhY2Nlc3NUb2tlbkV4cGlyZWQgPSBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0ICYmIG5ldyBEYXRlKGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkgPCA1ZTM7XG5cdFx0aWYgKGFjY291bnQucmVmcmVzaFRva2VuICYmIGFjY2Vzc1Rva2VuRXhwaXJlZCAmJiBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4pIHtcblx0XHRcdGNvbnN0IHJlZnJlc2hUb2tlbiQxID0gYXdhaXQgZGVjcnlwdE9BdXRoVG9rZW4oYWNjb3VudC5yZWZyZXNoVG9rZW4sIGN0eC5jb250ZXh0KTtcblx0XHRcdG5ld1Rva2VucyA9IGF3YWl0IHByb3ZpZGVyLnJlZnJlc2hBY2Nlc3NUb2tlbihyZWZyZXNoVG9rZW4kMSk7XG5cdFx0XHRjb25zdCB1cGRhdGVkRGF0YSA9IHtcblx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChuZXdUb2tlbnMuYWNjZXNzVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwobmV3VG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IG5ld1Rva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXRcblx0XHRcdH07XG5cdFx0XHRsZXQgdXBkYXRlZEFjY291bnQgPSBudWxsO1xuXHRcdFx0aWYgKGFjY291bnQuaWQpIHVwZGF0ZWRBY2NvdW50ID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoYWNjb3VudC5pZCwgdXBkYXRlZERhdGEpO1xuXHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGN0eCwge1xuXHRcdFx0XHQuLi5hY2NvdW50LFxuXHRcdFx0XHQuLi51cGRhdGVkQWNjb3VudCA/PyB1cGRhdGVkRGF0YVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gKCgpID0+IHtcblx0XHRcdGlmIChuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbmV3VG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0ID09PSBcInN0cmluZ1wiKSByZXR1cm4gbmV3IERhdGUobmV3VG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0KTtcblx0XHRcdFx0cmV0dXJuIG5ld1Rva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdDtcblx0XHRcdH1cblx0XHRcdGlmIChhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0KSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIG5ldyBEYXRlKGFjY291bnQuYWNjZXNzVG9rZW5FeHBpcmVzQXQpO1xuXHRcdFx0XHRyZXR1cm4gYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdDtcblx0XHRcdH1cblx0XHR9KSgpO1xuXHRcdGNvbnN0IHRva2VucyA9IHtcblx0XHRcdGFjY2Vzc1Rva2VuOiBuZXdUb2tlbnM/LmFjY2Vzc1Rva2VuID8/IGF3YWl0IGRlY3J5cHRPQXV0aFRva2VuKGFjY291bnQuYWNjZXNzVG9rZW4gPz8gXCJcIiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRzY29wZXM6IGFjY291bnQuc2NvcGU/LnNwbGl0KFwiLFwiKSA/PyBbXSxcblx0XHRcdGlkVG9rZW46IG5ld1Rva2Vucz8uaWRUb2tlbiA/PyBhY2NvdW50LmlkVG9rZW4gPz8gdm9pZCAwXG5cdFx0fTtcblx0XHRyZXR1cm4gY3R4Lmpzb24odG9rZW5zKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byBnZXQgYSB2YWxpZCBhY2Nlc3MgdG9rZW5cIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pO1xuXHR9XG59KTtcbmNvbnN0IHJlZnJlc2hUb2tlbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZWZyZXNoLXRva2VuXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdHByb3ZpZGVySWQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwcm92aWRlciBJRCBmb3IgdGhlIE9BdXRoIHByb3ZpZGVyXCIgfSksXG5cdFx0YWNjb3VudElkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgYWNjb3VudCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZnJlc2ggdG9rZW5cIiB9KS5vcHRpb25hbCgpLFxuXHRcdHVzZXJJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBhY2NvdW50XCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJlZnJlc2ggdGhlIGFjY2VzcyB0b2tlbiB1c2luZyBhIHJlZnJlc2ggdG9rZW5cIixcblx0XHRyZXNwb25zZXM6IHtcblx0XHRcdDIwMDoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJBY2Nlc3MgdG9rZW4gcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdFx0dG9rZW5UeXBlOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGlkVG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0YWNjZXNzVG9rZW46IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0cmVmcmVzaFRva2VuOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGZvcm1hdDogXCJkYXRlLXRpbWVcIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0NDAwOiB7IGRlc2NyaXB0aW9uOiBcIkludmFsaWQgcmVmcmVzaCB0b2tlbiBvciBwcm92aWRlciBjb25maWd1cmF0aW9uXCIgfVxuXHRcdH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcHJvdmlkZXJJZCwgYWNjb3VudElkLCB1c2VySWQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCByZXEgPSBjdHgucmVxdWVzdDtcblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmIChyZXEgJiYgIXNlc3Npb24pIHRocm93IGN0eC5lcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0Y29uc3QgcmVzb2x2ZWRVc2VySWQgPSBzZXNzaW9uPy51c2VyPy5pZCB8fCB1c2VySWQ7XG5cdGlmICghcmVzb2x2ZWRVc2VySWQpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogYEVpdGhlciB1c2VySWQgb3Igc2Vzc2lvbiBpcyByZXF1aXJlZGAgfSk7XG5cdGNvbnN0IHByb3ZpZGVyID0gY3R4LmNvbnRleHQuc29jaWFsUHJvdmlkZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IHByb3ZpZGVySWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGBQcm92aWRlciAke3Byb3ZpZGVySWR9IG5vdCBmb3VuZC5gIH0pO1xuXHRpZiAoIXByb3ZpZGVyLnJlZnJlc2hBY2Nlc3NUb2tlbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBgUHJvdmlkZXIgJHtwcm92aWRlcklkfSBkb2VzIG5vdCBzdXBwb3J0IHRva2VuIHJlZnJlc2hpbmcuYCB9KTtcblx0bGV0IGFjY291bnQgPSB2b2lkIDA7XG5cdGNvbnN0IGFjY291bnREYXRhID0gYXdhaXQgZ2V0QWNjb3VudENvb2tpZShjdHgpO1xuXHRpZiAoYWNjb3VudERhdGEgJiYgKCFwcm92aWRlcklkIHx8IHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhPy5wcm92aWRlcklkKSkgYWNjb3VudCA9IGFjY291bnREYXRhO1xuXHRlbHNlIGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhyZXNvbHZlZFVzZXJJZCkpLmZpbmQoKGFjYykgPT4gYWNjb3VudElkID8gYWNjLmlkID09PSBhY2NvdW50SWQgJiYgYWNjLnByb3ZpZGVySWQgPT09IHByb3ZpZGVySWQgOiBhY2MucHJvdmlkZXJJZCA9PT0gcHJvdmlkZXJJZCk7XG5cdGlmICghYWNjb3VudCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkFjY291bnQgbm90IGZvdW5kXCIgfSk7XG5cdGxldCByZWZyZXNoVG9rZW4kMSA9IHZvaWQgMDtcblx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQpIHJlZnJlc2hUb2tlbiQxID0gYWNjb3VudERhdGEucmVmcmVzaFRva2VuID8/IHZvaWQgMDtcblx0ZWxzZSByZWZyZXNoVG9rZW4kMSA9IGFjY291bnQucmVmcmVzaFRva2VuID8/IHZvaWQgMDtcblx0aWYgKCFyZWZyZXNoVG9rZW4kMSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlJlZnJlc2ggdG9rZW4gbm90IGZvdW5kXCIgfSk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZGVjcnlwdGVkUmVmcmVzaFRva2VuID0gYXdhaXQgZGVjcnlwdE9BdXRoVG9rZW4ocmVmcmVzaFRva2VuJDEsIGN0eC5jb250ZXh0KTtcblx0XHRjb25zdCB0b2tlbnMgPSBhd2FpdCBwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW4oZGVjcnlwdGVkUmVmcmVzaFRva2VuKTtcblx0XHRpZiAoYWNjb3VudC5pZCkge1xuXHRcdFx0Y29uc3QgdXBkYXRlRGF0YSA9IHtcblx0XHRcdFx0Li4uYWNjb3VudCB8fCB7fSxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMuYWNjZXNzVG9rZW4sIGN0eC5jb250ZXh0KSxcblx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgY3R4LmNvbnRleHQpLFxuXHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50LnNjb3BlLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbnMuaWRUb2tlbiB8fCBhY2NvdW50LmlkVG9rZW5cblx0XHRcdH07XG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChhY2NvdW50LmlkLCB1cGRhdGVEYXRhKTtcblx0XHR9XG5cdFx0aWYgKGFjY291bnREYXRhICYmIHByb3ZpZGVySWQgPT09IGFjY291bnREYXRhLnByb3ZpZGVySWQgJiYgY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIGF3YWl0IHNldEFjY291bnRDb29raWUoY3R4LCB7XG5cdFx0XHQuLi5hY2NvdW50RGF0YSxcblx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjdHguY29udGV4dCksXG5cdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpIHx8IGFjY291bnREYXRhLnNjb3BlLFxuXHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudERhdGEuaWRUb2tlblxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuLFxuXHRcdFx0cmVmcmVzaFRva2VuOiB0b2tlbnMucmVmcmVzaFRva2VuLFxuXHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogdG9rZW5zLnJlZnJlc2hUb2tlbkV4cGlyZXNBdCxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKSB8fCBhY2NvdW50LnNjb3BlLFxuXHRcdFx0aWRUb2tlbjogdG9rZW5zLmlkVG9rZW4gfHwgYWNjb3VudC5pZFRva2VuLFxuXHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0YWNjb3VudElkOiBhY2NvdW50LmFjY291bnRJZFxuXHRcdH0pO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHtcblx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJlZnJlc2ggYWNjZXNzIHRva2VuXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KTtcblx0fVxufSk7XG5jb25zdCBhY2NvdW50SW5mb1F1ZXJ5U2NoZW1hID0gei5vcHRpb25hbCh6Lm9iamVjdCh7IGFjY291bnRJZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHByb3ZpZGVyIGdpdmVuIGFjY291bnQgaWQgZm9yIHdoaWNoIHRvIGdldCB0aGUgYWNjb3VudCBpbmZvXCIgfSkub3B0aW9uYWwoKSB9KSk7XG5jb25zdCBhY2NvdW50SW5mbyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9hY2NvdW50LWluZm9cIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIkdldCB0aGUgYWNjb3VudCBpbmZvIHByb3ZpZGVkIGJ5IHRoZSBwcm92aWRlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0aWQ6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdFx0ZW1haWw6IHsgdHlwZTogXCJzdHJpbmdcIiB9LFxuXHRcdFx0XHRcdFx0XHRpbWFnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHsgdHlwZTogXCJib29sZWFuXCIgfVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJpZFwiLCBcImVtYWlsVmVyaWZpZWRcIl1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7fSxcblx0XHRcdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiLCBcImRhdGFcIl0sXG5cdFx0XHRcdGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9LFxuXHRxdWVyeTogYWNjb3VudEluZm9RdWVyeVNjaGVtYVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBwcm92aWRlZEFjY291bnRJZCA9IGN0eC5xdWVyeT8uYWNjb3VudElkO1xuXHRsZXQgYWNjb3VudCA9IHZvaWQgMDtcblx0aWYgKCFwcm92aWRlZEFjY291bnRJZCkge1xuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnN0b3JlQWNjb3VudENvb2tpZSkge1xuXHRcdFx0Y29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBnZXRBY2NvdW50Q29va2llKGN0eCk7XG5cdFx0XHRpZiAoYWNjb3VudERhdGEpIGFjY291bnQgPSBhY2NvdW50RGF0YTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgYWNjb3VudERhdGEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnQocHJvdmlkZWRBY2NvdW50SWQpO1xuXHRcdGlmIChhY2NvdW50RGF0YSkgYWNjb3VudCA9IGFjY291bnREYXRhO1xuXHR9XG5cdGlmICghYWNjb3VudCB8fCBhY2NvdW50LnVzZXJJZCAhPT0gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjb3VudCBub3QgZm91bmRcIiB9KTtcblx0Y29uc3QgcHJvdmlkZXIgPSBjdHguY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYWNjb3VudC5wcm92aWRlcklkKTtcblx0aWYgKCFwcm92aWRlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYFByb3ZpZGVyIGFjY291bnQgcHJvdmlkZXIgaXMgJHthY2NvdW50LnByb3ZpZGVySWR9IGJ1dCBpdCBpcyBub3QgY29uZmlndXJlZGAgfSk7XG5cdGNvbnN0IHRva2VucyA9IGF3YWl0IGdldEFjY2Vzc1Rva2VuKHtcblx0XHQuLi5jdHgsXG5cdFx0bWV0aG9kOiBcIlBPU1RcIixcblx0XHRib2R5OiB7XG5cdFx0XHRhY2NvdW50SWQ6IGFjY291bnQuaWQsXG5cdFx0XHRwcm92aWRlcklkOiBhY2NvdW50LnByb3ZpZGVySWRcblx0XHR9LFxuXHRcdHJldHVybkhlYWRlcnM6IGZhbHNlLFxuXHRcdHJldHVyblN0YXR1czogZmFsc2Vcblx0fSk7XG5cdGlmICghdG9rZW5zLmFjY2Vzc1Rva2VuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQWNjZXNzIHRva2VuIG5vdCBmb3VuZFwiIH0pO1xuXHRjb25zdCBpbmZvID0gYXdhaXQgcHJvdmlkZXIuZ2V0VXNlckluZm8oe1xuXHRcdC4uLnRva2Vucyxcblx0XHRhY2Nlc3NUb2tlbjogdG9rZW5zLmFjY2Vzc1Rva2VuXG5cdH0pO1xuXHRyZXR1cm4gY3R4Lmpzb24oaW5mbyk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBhY2NvdW50SW5mbywgZ2V0QWNjZXNzVG9rZW4sIGxpbmtTb2NpYWxBY2NvdW50LCBsaXN0VXNlckFjY291bnRzLCByZWZyZXNoVG9rZW4sIHVubGlua0FjY291bnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY291bnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/callback.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   callbackOAuth: () => (/* binding */ callbackOAuth)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../oauth2/utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/callback.ts\nconst schema = zod__WEBPACK_IMPORTED_MODULE_7__.object({\n\tcode: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tdevice_id: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\terror_description: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tstate: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional(),\n\tuser: zod__WEBPACK_IMPORTED_MODULE_7__.string().optional()\n});\nconst callbackOAuth = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_6__.createAuthEndpoint)(\"/callback/:id\", {\n\tmethod: [\"GET\", \"POST\"],\n\toperationId: \"handleOAuthCallback\",\n\tbody: schema.optional(),\n\tquery: schema.optional(),\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_4__.HIDE_METADATA,\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"]\n\t}\n}, async (c) => {\n\tlet queryOrBody;\n\tconst defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (c.method === \"POST\") {\n\t\tconst postData = c.body ? schema.parse(c.body) : {};\n\t\tconst queryData = c.query ? schema.parse(c.query) : {};\n\t\tconst mergedData = schema.parse({\n\t\t\t...postData,\n\t\t\t...queryData\n\t\t});\n\t\tconst params = new URLSearchParams();\n\t\tfor (const [key, value] of Object.entries(mergedData)) if (value !== void 0 && value !== null) params.set(key, String(value));\n\t\tconst redirectURL = `${c.context.baseURL}/callback/${c.params.id}?${params.toString()}`;\n\t\tthrow c.redirect(redirectURL);\n\t}\n\ttry {\n\t\tif (c.method === \"GET\") queryOrBody = schema.parse(c.query);\n\t\telse if (c.method === \"POST\") queryOrBody = schema.parse(c.body);\n\t\telse throw new Error(\"Unsupported method\");\n\t} catch (e) {\n\t\tc.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n\t\tthrow c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n\t}\n\tconst { code, error, state, error_description, device_id } = queryOrBody;\n\tif (!state) {\n\t\tc.context.logger.error(\"State not found\", error);\n\t\tconst url = `${defaultErrorURL}${defaultErrorURL.includes(\"?\") ? \"&\" : \"?\"}state=state_not_found`;\n\t\tthrow c.redirect(url);\n\t}\n\tconst { codeVerifier, callbackURL, link, errorURL, newUserURL, requestSignUp } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_1__.parseState)(c);\n\tfunction redirectOnError(error$1, description) {\n\t\tconst baseURL = errorURL ?? defaultErrorURL;\n\t\tconst params = new URLSearchParams({ error: error$1 });\n\t\tif (description) params.set(\"error_description\", description);\n\t\tconst url = `${baseURL}${baseURL.includes(\"?\") ? \"&\" : \"?\"}${params.toString()}`;\n\t\tthrow c.redirect(url);\n\t}\n\tif (error) redirectOnError(error, error_description);\n\tif (!code) {\n\t\tc.context.logger.error(\"Code not found\");\n\t\tthrow redirectOnError(\"no_code\");\n\t}\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.params.id);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Oauth provider with id\", c.params.id, \"not found\");\n\t\tthrow redirectOnError(\"oauth_provider_not_found\");\n\t}\n\tlet tokens;\n\ttry {\n\t\ttokens = await provider.validateAuthorizationCode({\n\t\t\tcode,\n\t\t\tcodeVerifier,\n\t\t\tdeviceId: device_id,\n\t\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`\n\t\t});\n\t} catch (e) {\n\t\tc.context.logger.error(\"\", e);\n\t\tthrow redirectOnError(\"invalid_code\");\n\t}\n\tconst userInfo = await provider.getUserInfo({\n\t\t...tokens,\n\t\tuser: c.body?.user ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(c.body.user) : void 0\n\t}).then((res) => res?.user);\n\tif (!userInfo) {\n\t\tc.context.logger.error(\"Unable to get user info\");\n\t\treturn redirectOnError(\"unable_to_get_user_info\");\n\t}\n\tif (!callbackURL) {\n\t\tc.context.logger.error(\"No callback URL found\");\n\t\tthrow redirectOnError(\"no_callback_url\");\n\t}\n\tif (link) {\n\t\tif (!(c.context.options.account?.accountLinking?.trustedProviders)?.includes(provider.id) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\tc.context.logger.error(\"Unable to link account - untrusted provider\");\n\t\t\treturn redirectOnError(\"unable_to_link_account\");\n\t\t}\n\t\tif (userInfo.email !== link.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) return redirectOnError(\"email_doesn't_match\");\n\t\tconst existingAccount = await c.context.internalAdapter.findAccount(String(userInfo.id));\n\t\tif (existingAccount) {\n\t\t\tif (existingAccount.userId.toString() !== link.userId.toString()) return redirectOnError(\"account_already_linked_to_different_user\");\n\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\t\tidToken: tokens.idToken,\n\t\t\t\taccessTokenExpiresAt: tokens.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n\t\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\tawait c.context.internalAdapter.updateAccount(existingAccount.id, updateData);\n\t\t} else if (!await c.context.internalAdapter.createAccount({\n\t\t\tuserId: link.userId,\n\t\t\tproviderId: provider.id,\n\t\t\taccountId: String(userInfo.id),\n\t\t\t...tokens,\n\t\t\taccessToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.accessToken, c.context),\n\t\t\trefreshToken: await (0,_oauth2_utils_mjs__WEBPACK_IMPORTED_MODULE_2__.setTokenUtil)(tokens.refreshToken, c.context),\n\t\t\tscope: tokens.scopes?.join(\",\")\n\t\t})) return redirectOnError(\"unable_to_link_account\");\n\t\tlet toRedirectTo$1;\n\t\ttry {\n\t\t\ttoRedirectTo$1 = callbackURL.toString();\n\t\t} catch {\n\t\t\ttoRedirectTo$1 = callbackURL;\n\t\t}\n\t\tthrow c.redirect(toRedirectTo$1);\n\t}\n\tif (!userInfo.email) {\n\t\tc.context.logger.error(\"Provider did not return email. This could be due to misconfiguration in the provider settings.\");\n\t\treturn redirectOnError(\"email_not_found\");\n\t}\n\tconst accountData = {\n\t\tproviderId: provider.id,\n\t\taccountId: String(userInfo.id),\n\t\t...tokens,\n\t\tscope: tokens.scopes?.join(\",\")\n\t};\n\tconst result = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_3__.handleOAuthUserInfo)(c, {\n\t\tuserInfo: {\n\t\t\t...userInfo,\n\t\t\tid: String(userInfo.id),\n\t\t\temail: userInfo.email,\n\t\t\tname: userInfo.name || userInfo.email\n\t\t},\n\t\taccount: accountData,\n\t\tcallbackURL,\n\t\tdisableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n\t\toverrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n\t});\n\tif (result.error) {\n\t\tc.context.logger.error(result.error.split(\" \").join(\"_\"));\n\t\treturn redirectOnError(result.error.split(\" \").join(\"_\"));\n\t}\n\tconst { session, user } = result.data;\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.setSessionCookie)(c, {\n\t\tsession,\n\t\tuser\n\t});\n\tlet toRedirectTo;\n\ttry {\n\t\ttoRedirectTo = (result.isRegister ? newUserURL || callbackURL : callbackURL).toString();\n\t} catch {\n\t\ttoRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n\t}\n\tthrow c.redirect(toRedirectTo);\n});\n\n//#endregion\n\n//# sourceMappingURL=callback.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2NhbGxiYWNrLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBMkQ7QUFDUDtBQUNFO0FBQ2M7QUFDTjtBQUNOO0FBQy9CO0FBQ2tDOztBQUUzRDtBQUNBLGVBQWUsdUNBQVE7QUFDdkIsT0FBTyx1Q0FBUTtBQUNmLFFBQVEsdUNBQVE7QUFDaEIsWUFBWSx1Q0FBUTtBQUNwQixvQkFBb0IsdUNBQVE7QUFDNUIsUUFBUSx1Q0FBUTtBQUNoQixPQUFPLHVDQUFRO0FBQ2YsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssbUVBQWE7QUFDbEI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHNFQUFzRSxrQkFBa0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSx5QkFBeUIsa0JBQWtCLFlBQVksWUFBWSxHQUFHLGtCQUFrQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxzQkFBc0IsZ0JBQWdCO0FBQ3RDO0FBQ0EsU0FBUyxtREFBbUQ7QUFDNUQ7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0IsRUFBRSwwQ0FBMEM7QUFDN0U7QUFDQTtBQUNBLFNBQVMsdUVBQXVFLFFBQVEsNkRBQVU7QUFDbEc7QUFDQTtBQUNBLHVDQUF1QyxnQkFBZ0I7QUFDdkQ7QUFDQSxpQkFBaUIsUUFBUSxFQUFFLGtDQUFrQyxFQUFFLGtCQUFrQjtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0JBQWtCLFlBQVksWUFBWTtBQUM3RCxHQUFHO0FBQ0gsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0VBQWE7QUFDcEMsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwrREFBWTtBQUNuQyx3QkFBd0IsK0RBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsK0RBQVk7QUFDbEMsdUJBQXVCLCtEQUFZO0FBQ25DO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZFQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnQkFBZ0I7QUFDekIsT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUN5QjtBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2NhbGxiYWNrLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0YXRlIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IHNldFRva2VuVXRpbCB9IGZyb20gXCIuLi8uLi9vYXV0aDIvdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9saW5rLWFjY291bnQubWpzXCI7XG5pbXBvcnQgeyBISURFX01FVEFEQVRBIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL2NhbGxiYWNrLnRzXG5jb25zdCBzY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZXJyb3I6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0ZGV2aWNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdGVycm9yX2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHN0YXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdHVzZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5jb25zdCBjYWxsYmFja09BdXRoID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2NhbGxiYWNrLzppZFwiLCB7XG5cdG1ldGhvZDogW1wiR0VUXCIsIFwiUE9TVFwiXSxcblx0b3BlcmF0aW9uSWQ6IFwiaGFuZGxlT0F1dGhDYWxsYmFja1wiLFxuXHRib2R5OiBzY2hlbWEub3B0aW9uYWwoKSxcblx0cXVlcnk6IHNjaGVtYS5vcHRpb25hbCgpLFxuXHRtZXRhZGF0YToge1xuXHRcdC4uLkhJREVfTUVUQURBVEEsXG5cdFx0YWxsb3dlZE1lZGlhVHlwZXM6IFtcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIl1cblx0fVxufSwgYXN5bmMgKGMpID0+IHtcblx0bGV0IHF1ZXJ5T3JCb2R5O1xuXHRjb25zdCBkZWZhdWx0RXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRpZiAoYy5tZXRob2QgPT09IFwiUE9TVFwiKSB7XG5cdFx0Y29uc3QgcG9zdERhdGEgPSBjLmJvZHkgPyBzY2hlbWEucGFyc2UoYy5ib2R5KSA6IHt9O1xuXHRcdGNvbnN0IHF1ZXJ5RGF0YSA9IGMucXVlcnkgPyBzY2hlbWEucGFyc2UoYy5xdWVyeSkgOiB7fTtcblx0XHRjb25zdCBtZXJnZWREYXRhID0gc2NoZW1hLnBhcnNlKHtcblx0XHRcdC4uLnBvc3REYXRhLFxuXHRcdFx0Li4ucXVlcnlEYXRhXG5cdFx0fSk7XG5cdFx0Y29uc3QgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG1lcmdlZERhdGEpKSBpZiAodmFsdWUgIT09IHZvaWQgMCAmJiB2YWx1ZSAhPT0gbnVsbCkgcGFyYW1zLnNldChrZXksIFN0cmluZyh2YWx1ZSkpO1xuXHRcdGNvbnN0IHJlZGlyZWN0VVJMID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7Yy5wYXJhbXMuaWR9PyR7cGFyYW1zLnRvU3RyaW5nKCl9YDtcblx0XHR0aHJvdyBjLnJlZGlyZWN0KHJlZGlyZWN0VVJMKTtcblx0fVxuXHR0cnkge1xuXHRcdGlmIChjLm1ldGhvZCA9PT0gXCJHRVRcIikgcXVlcnlPckJvZHkgPSBzY2hlbWEucGFyc2UoYy5xdWVyeSk7XG5cdFx0ZWxzZSBpZiAoYy5tZXRob2QgPT09IFwiUE9TVFwiKSBxdWVyeU9yQm9keSA9IHNjaGVtYS5wYXJzZShjLmJvZHkpO1xuXHRcdGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgbWV0aG9kXCIpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIklOVkFMSURfQ0FMTEJBQ0tfUkVRVUVTVFwiLCBlKTtcblx0XHR0aHJvdyBjLnJlZGlyZWN0KGAke2RlZmF1bHRFcnJvclVSTH0/ZXJyb3I9aW52YWxpZF9jYWxsYmFja19yZXF1ZXN0YCk7XG5cdH1cblx0Y29uc3QgeyBjb2RlLCBlcnJvciwgc3RhdGUsIGVycm9yX2Rlc2NyaXB0aW9uLCBkZXZpY2VfaWQgfSA9IHF1ZXJ5T3JCb2R5O1xuXHRpZiAoIXN0YXRlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlN0YXRlIG5vdCBmb3VuZFwiLCBlcnJvcik7XG5cdFx0Y29uc3QgdXJsID0gYCR7ZGVmYXVsdEVycm9yVVJMfSR7ZGVmYXVsdEVycm9yVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9c3RhdGU9c3RhdGVfbm90X2ZvdW5kYDtcblx0XHR0aHJvdyBjLnJlZGlyZWN0KHVybCk7XG5cdH1cblx0Y29uc3QgeyBjb2RlVmVyaWZpZXIsIGNhbGxiYWNrVVJMLCBsaW5rLCBlcnJvclVSTCwgbmV3VXNlclVSTCwgcmVxdWVzdFNpZ25VcCB9ID0gYXdhaXQgcGFyc2VTdGF0ZShjKTtcblx0ZnVuY3Rpb24gcmVkaXJlY3RPbkVycm9yKGVycm9yJDEsIGRlc2NyaXB0aW9uKSB7XG5cdFx0Y29uc3QgYmFzZVVSTCA9IGVycm9yVVJMID8/IGRlZmF1bHRFcnJvclVSTDtcblx0XHRjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHsgZXJyb3I6IGVycm9yJDEgfSk7XG5cdFx0aWYgKGRlc2NyaXB0aW9uKSBwYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgZGVzY3JpcHRpb24pO1xuXHRcdGNvbnN0IHVybCA9IGAke2Jhc2VVUkx9JHtiYXNlVVJMLmluY2x1ZGVzKFwiP1wiKSA/IFwiJlwiIDogXCI/XCJ9JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xuXHRcdHRocm93IGMucmVkaXJlY3QodXJsKTtcblx0fVxuXHRpZiAoZXJyb3IpIHJlZGlyZWN0T25FcnJvcihlcnJvciwgZXJyb3JfZGVzY3JpcHRpb24pO1xuXHRpZiAoIWNvZGUpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ29kZSBub3QgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibm9fY29kZVwiKTtcblx0fVxuXHRjb25zdCBwcm92aWRlciA9IGMuY29udGV4dC5zb2NpYWxQcm92aWRlcnMuZmluZCgocCkgPT4gcC5pZCA9PT0gYy5wYXJhbXMuaWQpO1xuXHRpZiAoIXByb3ZpZGVyKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIk9hdXRoIHByb3ZpZGVyIHdpdGggaWRcIiwgYy5wYXJhbXMuaWQsIFwibm90IGZvdW5kXCIpO1xuXHRcdHRocm93IHJlZGlyZWN0T25FcnJvcihcIm9hdXRoX3Byb3ZpZGVyX25vdF9mb3VuZFwiKTtcblx0fVxuXHRsZXQgdG9rZW5zO1xuXHR0cnkge1xuXHRcdHRva2VucyA9IGF3YWl0IHByb3ZpZGVyLnZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuXHRcdFx0Y29kZSxcblx0XHRcdGNvZGVWZXJpZmllcixcblx0XHRcdGRldmljZUlkOiBkZXZpY2VfaWQsXG5cdFx0XHRyZWRpcmVjdFVSSTogYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2NhbGxiYWNrLyR7cHJvdmlkZXIuaWR9YFxuXHRcdH0pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlwiLCBlKTtcblx0XHR0aHJvdyByZWRpcmVjdE9uRXJyb3IoXCJpbnZhbGlkX2NvZGVcIik7XG5cdH1cblx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0Li4udG9rZW5zLFxuXHRcdHVzZXI6IGMuYm9keT8udXNlciA/IHNhZmVKU09OUGFyc2UoYy5ib2R5LnVzZXIpIDogdm9pZCAwXG5cdH0pLnRoZW4oKHJlcykgPT4gcmVzPy51c2VyKTtcblx0aWYgKCF1c2VySW5mbykge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVbmFibGUgdG8gZ2V0IHVzZXIgaW5mb1wiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2dldF91c2VyX2luZm9cIik7XG5cdH1cblx0aWYgKCFjYWxsYmFja1VSTCkge1xuXHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJObyBjYWxsYmFjayBVUkwgZm91bmRcIik7XG5cdFx0dGhyb3cgcmVkaXJlY3RPbkVycm9yKFwibm9fY2FsbGJhY2tfdXJsXCIpO1xuXHR9XG5cdGlmIChsaW5rKSB7XG5cdFx0aWYgKCEoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnMpPy5pbmNsdWRlcyhwcm92aWRlci5pZCkgJiYgIXVzZXJJbmZvLmVtYWlsVmVyaWZpZWQgfHwgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmVuYWJsZWQgPT09IGZhbHNlKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVW5hYmxlIHRvIGxpbmsgYWNjb3VudCAtIHVudHJ1c3RlZCBwcm92aWRlclwiKTtcblx0XHRcdHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1bmFibGVfdG9fbGlua19hY2NvdW50XCIpO1xuXHRcdH1cblx0XHRpZiAodXNlckluZm8uZW1haWwgIT09IGxpbmsuZW1haWwgJiYgYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93RGlmZmVyZW50RW1haWxzICE9PSB0cnVlKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfZG9lc24ndF9tYXRjaFwiKTtcblx0XHRjb25zdCBleGlzdGluZ0FjY291bnQgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50KFN0cmluZyh1c2VySW5mby5pZCkpO1xuXHRcdGlmIChleGlzdGluZ0FjY291bnQpIHtcblx0XHRcdGlmIChleGlzdGluZ0FjY291bnQudXNlcklkLnRvU3RyaW5nKCkgIT09IGxpbmsudXNlcklkLnRvU3RyaW5nKCkpIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJhY2NvdW50X2FscmVhZHlfbGlua2VkX3RvX2RpZmZlcmVudF91c2VyXCIpO1xuXHRcdFx0Y29uc3QgdXBkYXRlRGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh7XG5cdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbCh0b2tlbnMucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiB0b2tlbnMuaWRUb2tlbixcblx0XHRcdFx0YWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHRva2Vucy5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0cmVmcmVzaFRva2VuRXhwaXJlc0F0OiB0b2tlbnMucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogdG9rZW5zLnNjb3Blcz8uam9pbihcIixcIilcblx0XHRcdH0pLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHZvaWQgMCkpO1xuXHRcdFx0YXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVBY2NvdW50KGV4aXN0aW5nQWNjb3VudC5pZCwgdXBkYXRlRGF0YSk7XG5cdFx0fSBlbHNlIGlmICghYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogbGluay51c2VySWQsXG5cdFx0XHRwcm92aWRlcklkOiBwcm92aWRlci5pZCxcblx0XHRcdGFjY291bnRJZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHRcdC4uLnRva2Vucyxcblx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLmFjY2Vzc1Rva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwodG9rZW5zLnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdHNjb3BlOiB0b2tlbnMuc2NvcGVzPy5qb2luKFwiLFwiKVxuXHRcdH0pKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hYmxlX3RvX2xpbmtfYWNjb3VudFwiKTtcblx0XHRsZXQgdG9SZWRpcmVjdFRvJDE7XG5cdFx0dHJ5IHtcblx0XHRcdHRvUmVkaXJlY3RUbyQxID0gY2FsbGJhY2tVUkwudG9TdHJpbmcoKTtcblx0XHR9IGNhdGNoIHtcblx0XHRcdHRvUmVkaXJlY3RUbyQxID0gY2FsbGJhY2tVUkw7XG5cdFx0fVxuXHRcdHRocm93IGMucmVkaXJlY3QodG9SZWRpcmVjdFRvJDEpO1xuXHR9XG5cdGlmICghdXNlckluZm8uZW1haWwpIHtcblx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgZGlkIG5vdCByZXR1cm4gZW1haWwuIFRoaXMgY291bGQgYmUgZHVlIHRvIG1pc2NvbmZpZ3VyYXRpb24gaW4gdGhlIHByb3ZpZGVyIHNldHRpbmdzLlwiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiZW1haWxfbm90X2ZvdW5kXCIpO1xuXHR9XG5cdGNvbnN0IGFjY291bnREYXRhID0ge1xuXHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdGFjY291bnRJZDogU3RyaW5nKHVzZXJJbmZvLmlkKSxcblx0XHQuLi50b2tlbnMsXG5cdFx0c2NvcGU6IHRva2Vucy5zY29wZXM/LmpvaW4oXCIsXCIpXG5cdH07XG5cdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZU9BdXRoVXNlckluZm8oYywge1xuXHRcdHVzZXJJbmZvOiB7XG5cdFx0XHQuLi51c2VySW5mbyxcblx0XHRcdGlkOiBTdHJpbmcodXNlckluZm8uaWQpLFxuXHRcdFx0ZW1haWw6IHVzZXJJbmZvLmVtYWlsLFxuXHRcdFx0bmFtZTogdXNlckluZm8ubmFtZSB8fCB1c2VySW5mby5lbWFpbFxuXHRcdH0sXG5cdFx0YWNjb3VudDogYWNjb3VudERhdGEsXG5cdFx0Y2FsbGJhY2tVUkwsXG5cdFx0ZGlzYWJsZVNpZ25VcDogcHJvdmlkZXIuZGlzYWJsZUltcGxpY2l0U2lnblVwICYmICFyZXF1ZXN0U2lnblVwIHx8IHByb3ZpZGVyLm9wdGlvbnM/LmRpc2FibGVTaWduVXAsXG5cdFx0b3ZlcnJpZGVVc2VySW5mbzogcHJvdmlkZXIub3B0aW9ucz8ub3ZlcnJpZGVVc2VySW5mb09uU2lnbkluXG5cdH0pO1xuXHRpZiAocmVzdWx0LmVycm9yKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihyZXN1bHQuZXJyb3Iuc3BsaXQoXCIgXCIpLmpvaW4oXCJfXCIpKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKHJlc3VsdC5lcnJvci5zcGxpdChcIiBcIikuam9pbihcIl9cIikpO1xuXHR9XG5cdGNvbnN0IHsgc2Vzc2lvbiwgdXNlciB9ID0gcmVzdWx0LmRhdGE7XG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoYywge1xuXHRcdHNlc3Npb24sXG5cdFx0dXNlclxuXHR9KTtcblx0bGV0IHRvUmVkaXJlY3RUbztcblx0dHJ5IHtcblx0XHR0b1JlZGlyZWN0VG8gPSAocmVzdWx0LmlzUmVnaXN0ZXIgPyBuZXdVc2VyVVJMIHx8IGNhbGxiYWNrVVJMIDogY2FsbGJhY2tVUkwpLnRvU3RyaW5nKCk7XG5cdH0gY2F0Y2gge1xuXHRcdHRvUmVkaXJlY3RUbyA9IHJlc3VsdC5pc1JlZ2lzdGVyID8gbmV3VXNlclVSTCB8fCBjYWxsYmFja1VSTCA6IGNhbGxiYWNrVVJMO1xuXHR9XG5cdHRocm93IGMucmVkaXJlY3QodG9SZWRpcmVjdFRvKTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNhbGxiYWNrT0F1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbGxiYWNrLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/email-verification.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createEmailVerificationToken: () => (/* binding */ createEmailVerificationToken),\n/* harmony export */   sendVerificationEmail: () => (/* binding */ sendVerificationEmail),\n/* harmony export */   sendVerificationEmailFn: () => (/* binding */ sendVerificationEmailFn),\n/* harmony export */   verifyEmail: () => (/* binding */ verifyEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose_errors__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose/errors */ \"(rsc)/./node_modules/jose/dist/webapi/util/errors.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/email-verification.ts\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600, extraPayload) {\n\treturn await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.signJWT)({\n\t\temail: email.toLowerCase(),\n\t\tupdateTo,\n\t\t...extraPayload\n\t}, secret, expiresIn);\n}\n/**\n* A function to send a verification email to the user\n*/\nasync function sendVerificationEmailFn(ctx, user) {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await createEmailVerificationToken(ctx.context.secret, user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser,\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n}\nconst sendVerificationEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/send-verification-email\", {\n\tmethod: \"POST\",\n\toperationId: \"sendVerificationEmail\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email to send the verification email to\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to use for email verification callback\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"sendVerificationEmail\",\n\t\tdescription: \"Send a verification email to the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\temail: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The email to send the verification email to\",\n\t\t\t\t\texample: \"user@example.com\"\n\t\t\t\t},\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The URL to use for email verification callback\",\n\t\t\t\t\texample: \"https://example.com/callback\",\n\t\t\t\t\tnullable: true\n\t\t\t\t}\n\t\t\t},\n\t\t\trequired: [\"email\"]\n\t\t} } } },\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was sent successfully\",\n\t\t\t\t\t\texample: true\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"400\": {\n\t\t\t\tdescription: \"Bad Request\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"Error message\",\n\t\t\t\t\t\texample: \"Verification email isn't enabled\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst { email } = ctx.body;\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\tif (!session) {\n\t\tconst user = await ctx.context.internalAdapter.findUserByEmail(email);\n\t\tif (!user) {\n\t\t\tawait createEmailVerificationToken(ctx.context.secret, email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\treturn ctx.json({ status: true });\n\t\t}\n\t\tawait sendVerificationEmailFn(ctx, user.user);\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (session?.user.email !== email) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_MISMATCH });\n\tif (session?.user.emailVerified) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.EMAIL_ALREADY_VERIFIED });\n\tawait sendVerificationEmailFn(ctx, session.user);\n\treturn ctx.json({ status: true });\n});\nconst verifyEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-email\", {\n\tmethod: \"GET\",\n\toperationId: \"verifyEmail\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to verify the email\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Verify the email of the user\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The token to verify the email\",\n\t\t\trequired: true,\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\tdescription: \"The URL to redirect to after email verification\",\n\t\t\trequired: false,\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t},\n\t\t\t\t\tstatus: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the email was verified successfully\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\", \"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tfunction redirectOnError(error) {\n\t\tif (ctx.query.callbackURL) {\n\t\t\tif (ctx.query.callbackURL.includes(\"?\")) throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n\t\t\tthrow ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"UNAUTHORIZED\", { message: error });\n\t}\n\tconst { token } = ctx.query;\n\tlet jwt;\n\ttry {\n\t\tjwt = await (0,jose__WEBPACK_IMPORTED_MODULE_10__.jwtVerify)(token, new TextEncoder().encode(ctx.context.secret), { algorithms: [\"HS256\"] });\n\t} catch (e) {\n\t\tif (e instanceof jose_errors__WEBPACK_IMPORTED_MODULE_11__.JWTExpired) return redirectOnError(\"token_expired\");\n\t\treturn redirectOnError(\"invalid_token\");\n\t}\n\tconst parsed = zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email(),\n\t\tupdateTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional(),\n\t\trequestType: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional()\n\t}).parse(jwt.payload);\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(parsed.email);\n\tif (!user) return redirectOnError(\"user_not_found\");\n\tif (parsed.updateTo) {\n\t\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (session && session.user.email !== parsed.email) return redirectOnError(\"unauthorized\");\n\t\tswitch (parsed.requestType) {\n\t\t\tcase \"change-email-confirmation\": {\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.email, parsed.updateTo, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`;\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...user.user,\n\t\t\t\t\t\temail: parsed.updateTo\n\t\t\t\t\t},\n\t\t\t\t\turl,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({ status: true });\n\t\t\t}\n\t\t\tcase \"change-email-verification\": {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: true\n\t\t\t\t});\n\t\t\t\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser$1, ctx.request);\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tlet activeSession = session;\n\t\t\t\tif (!activeSession) {\n\t\t\t\t\tconst newSession = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\t\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\t\t\t\tactiveSession = {\n\t\t\t\t\t\tsession: newSession,\n\t\t\t\t\t\tuser: user.user\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst updatedUser$1 = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, {\n\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\temailVerified: false\n\t\t\t\t});\n\t\t\t\tconst newToken = await createEmailVerificationToken(ctx.context.secret, parsed.updateTo);\n\t\t\t\tconst updateCallbackURL = ctx.query.callbackURL ? encodeURIComponent(ctx.query.callbackURL) : encodeURIComponent(\"/\");\n\t\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser: updatedUser$1,\n\t\t\t\t\turl: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${updateCallbackURL}`,\n\t\t\t\t\ttoken: newToken\n\t\t\t\t}, ctx.request));\n\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\t\tsession: activeSession.session,\n\t\t\t\t\tuser: {\n\t\t\t\t\t\t...activeSession.user,\n\t\t\t\t\t\temail: parsed.updateTo,\n\t\t\t\t\t\temailVerified: false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\t\t\treturn ctx.json({\n\t\t\t\t\tstatus: true,\n\t\t\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, updatedUser$1)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tif (user.user.emailVerified) {\n\t\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tuser: null\n\t\t});\n\t}\n\tif (ctx.context.options.emailVerification?.beforeEmailVerification) await ctx.context.options.emailVerification.beforeEmailVerification(user.user, ctx.request);\n\tif (ctx.context.options.emailVerification?.onEmailVerification) await ctx.context.options.emailVerification.onEmailVerification(user.user, ctx.request);\n\tconst updatedUser = await ctx.context.internalAdapter.updateUserByEmail(parsed.email, { emailVerified: true });\n\tif (ctx.context.options.emailVerification?.afterEmailVerification) await ctx.context.options.emailVerification.afterEmailVerification(updatedUser, ctx.request);\n\tif (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n\t\tconst currentSession = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionFromCtx)(ctx);\n\t\tif (!currentSession || currentSession.user.email !== parsed.email) {\n\t\t\tconst session = await ctx.context.internalAdapter.createSession(user.user.id);\n\t\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Failed to create session\" });\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\t\tsession,\n\t\t\t\tuser: {\n\t\t\t\t\t...user.user,\n\t\t\t\t\temailVerified: true\n\t\t\t\t}\n\t\t\t});\n\t\t} else await (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.setSessionCookie)(ctx, {\n\t\t\tsession: currentSession.session,\n\t\t\tuser: {\n\t\t\t\t...currentSession.user,\n\t\t\t\temailVerified: true\n\t\t\t}\n\t\t});\n\t}\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL);\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tuser: null\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=email-verification.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2VtYWlsLXZlcmlmaWNhdGlvbi5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRDtBQUNRO0FBQzVCO0FBQ2E7QUFDWTtBQUNUO0FBQ1M7QUFDbEM7QUFDYztBQUNvQjtBQUMxQjtBQUNROztBQUV6QztBQUNBO0FBQ0EsY0FBYyx3REFBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQiw2Q0FBNkM7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQixzQkFBc0IsTUFBTSxlQUFlLFlBQVk7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSw4QkFBOEIseUVBQWtCO0FBQ2hEO0FBQ0E7QUFDQSxPQUFPLHVDQUFRO0FBQ2YsU0FBUyxzQ0FBTyxVQUFVLDREQUE0RDtBQUN0RixlQUFlLHVDQUFRLFVBQVUsK0RBQStEO0FBQ2hHLEVBQUU7QUFDRixhQUFhO0FBQ2I7QUFDQTtBQUNBLGlCQUFpQixXQUFXLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDZDQUE2QztBQUNuRjtBQUNBLFNBQVMsUUFBUTtBQUNqQix1QkFBdUIsK0RBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGNBQWM7QUFDbkM7QUFDQTtBQUNBLG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0EsOENBQThDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixpQkFBaUI7QUFDbEgsNENBQTRDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQix5QkFBeUI7QUFDeEg7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0Qsb0JBQW9CLHlFQUFrQjtBQUN0QztBQUNBO0FBQ0EsUUFBUSx1Q0FBUTtBQUNoQixTQUFTLHVDQUFRLFVBQVUsOENBQThDO0FBQ3pFLGVBQWUsdUNBQVEsVUFBVSxnRUFBZ0U7QUFDakcsRUFBRTtBQUNGLE9BQU8sMEVBQVc7QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsR0FBRztBQUNILGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGtFQUFrRSxzQkFBc0IsU0FBUyxNQUFNO0FBQ3ZHLHlCQUF5QixzQkFBc0IsU0FBUyxNQUFNO0FBQzlEO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsZ0JBQWdCO0FBQ3ZEO0FBQ0EsU0FBUyxRQUFRO0FBQ2pCO0FBQ0E7QUFDQSxjQUFjLGdEQUFTLHdEQUF3RCx1QkFBdUI7QUFDdEcsR0FBRztBQUNILG1CQUFtQixvREFBVTtBQUM3QjtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUFRO0FBQ3hCLFNBQVMsc0NBQU87QUFDaEIsWUFBWSx1Q0FBUTtBQUNwQixlQUFlLHVDQUFRO0FBQ3ZCLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0RBQWlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLCtKQUErSiwwQ0FBMEM7QUFDek07QUFDQSxtQkFBbUIsb0JBQW9CLHNCQUFzQixTQUFTLGVBQWUsa0JBQWtCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxzQkFBc0IsY0FBYztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLGlEQUFRLDRCQUE0QixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsVUFBVSxvRUFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0RBQWU7QUFDMUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLDJCQUEyQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxvQkFBb0Isc0JBQXNCLFNBQVMsZUFBZSxrQkFBa0I7QUFDakc7QUFDQSxLQUFLO0FBQ0wsVUFBVSxvRUFBZ0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFdBQVcsK0RBQWU7QUFDMUIsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EseUZBQXlGLHFCQUFxQjtBQUM5RztBQUNBO0FBQ0EsK0JBQStCLCtEQUFpQjtBQUNoRDtBQUNBO0FBQ0EsMkJBQTJCLGlEQUFRLDRCQUE0QixxQ0FBcUM7QUFDcEcsU0FBUyxvRUFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJLFdBQVcsb0VBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ3FHO0FBQ3JHIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi4vLi4vZGIvc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgb3JpZ2luQ2hlY2sgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IFwiLi4vbWlkZGxld2FyZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzaWduSldUIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgeyBzZXRTZXNzaW9uQ29va2llIH0gZnJvbSBcIi4uLy4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uRnJvbUN0eCB9IGZyb20gXCIuL3Nlc3Npb24ubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVBdXRoRW5kcG9pbnQgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvYXBpXCI7XG5pbXBvcnQgeyBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0IHsgSldURXhwaXJlZCB9IGZyb20gXCJqb3NlL2Vycm9yc1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvZW1haWwtdmVyaWZpY2F0aW9uLnRzXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKHNlY3JldCwgZW1haWwsIHVwZGF0ZVRvLCBleHBpcmVzSW4gPSAzNjAwLCBleHRyYVBheWxvYWQpIHtcblx0cmV0dXJuIGF3YWl0IHNpZ25KV1Qoe1xuXHRcdGVtYWlsOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdHVwZGF0ZVRvLFxuXHRcdC4uLmV4dHJhUGF5bG9hZFxuXHR9LCBzZWNyZXQsIGV4cGlyZXNJbik7XG59XG4vKipcbiogQSBmdW5jdGlvbiB0byBzZW5kIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIHRoZSB1c2VyXG4qL1xuYXN5bmMgZnVuY3Rpb24gc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyKSB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHVzZXIuZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSBjdHguYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHguYm9keS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHR1c2VyLFxuXHRcdHVybCxcblx0XHR0b2tlblxuXHR9LCBjdHgucmVxdWVzdCkpO1xufVxuY29uc3Qgc2VuZFZlcmlmaWNhdGlvbkVtYWlsID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NlbmQtdmVyaWZpY2F0aW9uLWVtYWlsXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2VuZFZlcmlmaWNhdGlvbkVtYWlsXCIsXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRlbWFpbDogei5lbWFpbCgpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgZW1haWwgdG8gc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGVtYWlsIHRvXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gdXNlIGZvciBlbWFpbCB2ZXJpZmljYXRpb24gY2FsbGJhY2tcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0b3BlcmF0aW9uSWQ6IFwic2VuZFZlcmlmaWNhdGlvbkVtYWlsXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiU2VuZCBhIHZlcmlmaWNhdGlvbiBlbWFpbCB0byB0aGUgdXNlclwiLFxuXHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIHRvIHNlbmQgdGhlIHZlcmlmaWNhdGlvbiBlbWFpbCB0b1wiLFxuXHRcdFx0XHRcdGV4YW1wbGU6IFwidXNlckBleGFtcGxlLmNvbVwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNhbGxiYWNrVVJMOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHVzZSBmb3IgZW1haWwgdmVyaWZpY2F0aW9uIGNhbGxiYWNrXCIsXG5cdFx0XHRcdFx0ZXhhbXBsZTogXCJodHRwczovL2V4YW1wbGUuY29tL2NhbGxiYWNrXCIsXG5cdFx0XHRcdFx0bnVsbGFibGU6IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHJlcXVpcmVkOiBbXCJlbWFpbFwiXVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgc3RhdHVzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgZW1haWwgd2FzIHNlbnQgc3VjY2Vzc2Z1bGx5XCIsXG5cdFx0XHRcdFx0XHRleGFtcGxlOiB0cnVlXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9LFxuXHRcdFx0XCI0MDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJCYWQgUmVxdWVzdFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyBtZXNzYWdlOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiRXJyb3IgbWVzc2FnZVwiLFxuXHRcdFx0XHRcdFx0ZXhhbXBsZTogXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZFwiXG5cdFx0XHRcdFx0fSB9XG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9XG5cdFx0fVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJWZXJpZmljYXRpb24gZW1haWwgaXNuJ3QgZW5hYmxlZC5cIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkXCIgfSk7XG5cdH1cblx0Y29uc3QgeyBlbWFpbCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24pIHtcblx0XHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCk7XG5cdFx0aWYgKCF1c2VyKSB7XG5cdFx0XHRhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgZW1haWwsIHZvaWQgMCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0XHR9XG5cdFx0YXdhaXQgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4oY3R4LCB1c2VyLnVzZXIpO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoc2Vzc2lvbj8udXNlci5lbWFpbCAhPT0gZW1haWwpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9NSVNNQVRDSCB9KTtcblx0aWYgKHNlc3Npb24/LnVzZXIuZW1haWxWZXJpZmllZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX0FMUkVBRFlfVkVSSUZJRUQgfSk7XG5cdGF3YWl0IHNlbmRWZXJpZmljYXRpb25FbWFpbEZuKGN0eCwgc2Vzc2lvbi51c2VyKTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5jb25zdCB2ZXJpZnlFbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi92ZXJpZnktZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG9wZXJhdGlvbklkOiBcInZlcmlmeUVtYWlsXCIsXG5cdHF1ZXJ5OiB6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byB2ZXJpZnkgdGhlIGVtYWlsXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgdGhlIGVtYWlsIG9mIHRoZSB1c2VyXCIsXG5cdFx0cGFyYW1ldGVyczogW3tcblx0XHRcdG5hbWU6IFwidG9rZW5cIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gdmVyaWZ5IHRoZSBlbWFpbFwiLFxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fSwge1xuXHRcdFx0bmFtZTogXCJjYWxsYmFja1VSTFwiLFxuXHRcdFx0aW46IFwicXVlcnlcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgZW1haWwgdmVyaWZpY2F0aW9uXCIsXG5cdFx0XHRyZXF1aXJlZDogZmFsc2UsXG5cdFx0XHRzY2hlbWE6IHsgdHlwZTogXCJzdHJpbmdcIiB9XG5cdFx0fV0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN0YXR1czoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIGVtYWlsIHdhcyB2ZXJpZmllZCBzdWNjZXNzZnVsbHlcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInVzZXJcIiwgXCJzdGF0dXNcIl1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRmdW5jdGlvbiByZWRpcmVjdE9uRXJyb3IoZXJyb3IpIHtcblx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB7XG5cdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMLmluY2x1ZGVzKFwiP1wiKSkgdGhyb3cgY3R4LnJlZGlyZWN0KGAke2N0eC5xdWVyeS5jYWxsYmFja1VSTH0mZXJyb3I9JHtlcnJvcn1gKTtcblx0XHRcdHRocm93IGN0eC5yZWRpcmVjdChgJHtjdHgucXVlcnkuY2FsbGJhY2tVUkx9P2Vycm9yPSR7ZXJyb3J9YCk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IGVycm9yIH0pO1xuXHR9XG5cdGNvbnN0IHsgdG9rZW4gfSA9IGN0eC5xdWVyeTtcblx0bGV0IGp3dDtcblx0dHJ5IHtcblx0XHRqd3QgPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjdHguY29udGV4dC5zZWNyZXQpLCB7IGFsZ29yaXRobXM6IFtcIkhTMjU2XCJdIH0pO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKGUgaW5zdGFuY2VvZiBKV1RFeHBpcmVkKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidG9rZW5fZXhwaXJlZFwiKTtcblx0XHRyZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwiaW52YWxpZF90b2tlblwiKTtcblx0fVxuXHRjb25zdCBwYXJzZWQgPSB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouZW1haWwoKSxcblx0XHR1cGRhdGVUbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRcdHJlcXVlc3RUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKClcblx0fSkucGFyc2Uoand0LnBheWxvYWQpO1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChwYXJzZWQuZW1haWwpO1xuXHRpZiAoIXVzZXIpIHJldHVybiByZWRpcmVjdE9uRXJyb3IoXCJ1c2VyX25vdF9mb3VuZFwiKTtcblx0aWYgKHBhcnNlZC51cGRhdGVUbykge1xuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRcdGlmIChzZXNzaW9uICYmIHNlc3Npb24udXNlci5lbWFpbCAhPT0gcGFyc2VkLmVtYWlsKSByZXR1cm4gcmVkaXJlY3RPbkVycm9yKFwidW5hdXRob3JpemVkXCIpO1xuXHRcdHN3aXRjaCAocGFyc2VkLnJlcXVlc3RUeXBlKSB7XG5cdFx0XHRjYXNlIFwiY2hhbmdlLWVtYWlsLWNvbmZpcm1hdGlvblwiOiB7XG5cdFx0XHRcdGNvbnN0IG5ld1Rva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHBhcnNlZC5lbWFpbCwgcGFyc2VkLnVwZGF0ZVRvLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4sIHsgcmVxdWVzdFR5cGU6IFwiY2hhbmdlLWVtYWlsLXZlcmlmaWNhdGlvblwiIH0pO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVDYWxsYmFja1VSTCA9IGN0eC5xdWVyeS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHgucXVlcnkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7bmV3VG9rZW59JmNhbGxiYWNrVVJMPSR7dXBkYXRlQ2FsbGJhY2tVUkx9YDtcblx0XHRcdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4udXNlci51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUb1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dXJsLFxuXHRcdFx0XHRcdHRva2VuOiBuZXdUb2tlblxuXHRcdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHRcdFx0fVxuXHRcdFx0Y2FzZSBcImNoYW5nZS1lbWFpbC12ZXJpZmljYXRpb25cIjoge1xuXHRcdFx0XHRsZXQgYWN0aXZlU2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdGlmICghYWN0aXZlU2Vzc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0XHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0XHRcdFx0YWN0aXZlU2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiB1c2VyLnVzZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLm9uRW1haWxWZXJpZmljYXRpb24odXNlci51c2VyLCBjdHgucmVxdWVzdCk7XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7XG5cdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKHVwZGF0ZWRVc2VyJDEsIGN0eC5yZXF1ZXN0KTtcblx0XHRcdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdFx0XHRzZXNzaW9uOiBhY3RpdmVTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0dXNlcjoge1xuXHRcdFx0XHRcdFx0Li4uYWN0aXZlU2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyJDEpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDoge1xuXHRcdFx0XHRsZXQgYWN0aXZlU2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0XHRcdGlmICghYWN0aXZlU2Vzc2lvbikge1xuXHRcdFx0XHRcdGNvbnN0IG5ld1Nlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQpO1xuXHRcdFx0XHRcdGlmICghbmV3U2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fQ1JFQVRFX1NFU1NJT04gfSk7XG5cdFx0XHRcdFx0YWN0aXZlU2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IG5ld1Nlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiB1c2VyLnVzZXJcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnN0IHVwZGF0ZWRVc2VyJDEgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7XG5cdFx0XHRcdFx0ZW1haWw6IHBhcnNlZC51cGRhdGVUbyxcblx0XHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y29uc3QgbmV3VG9rZW4gPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgcGFyc2VkLnVwZGF0ZVRvKTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlQ2FsbGJhY2tVUkwgPSBjdHgucXVlcnkuY2FsbGJhY2tVUkwgPyBlbmNvZGVVUklDb21wb25lbnQoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSA6IGVuY29kZVVSSUNvbXBvbmVudChcIi9cIik7XG5cdFx0XHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kVmVyaWZpY2F0aW9uRW1haWwpIGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHRcdHVzZXI6IHVwZGF0ZWRVc2VyJDEsXG5cdFx0XHRcdFx0dXJsOiBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHtuZXdUb2tlbn0mY2FsbGJhY2tVUkw9JHt1cGRhdGVDYWxsYmFja1VSTH1gLFxuXHRcdFx0XHRcdHRva2VuOiBuZXdUb2tlblxuXHRcdFx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRcdHNlc3Npb246IGFjdGl2ZVNlc3Npb24uc2Vzc2lvbixcblx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHQuLi5hY3RpdmVTZXNzaW9uLnVzZXIsXG5cdFx0XHRcdFx0XHRlbWFpbDogcGFyc2VkLnVwZGF0ZVRvLFxuXHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDogZmFsc2Vcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRcdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdFx0XHRzdGF0dXM6IHRydWUsXG5cdFx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHVwZGF0ZWRVc2VyJDEpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRpZiAodXNlci51c2VyLmVtYWlsVmVyaWZpZWQpIHtcblx0XHRpZiAoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKSB0aHJvdyBjdHgucmVkaXJlY3QoY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0c3RhdHVzOiB0cnVlLFxuXHRcdFx0dXNlcjogbnVsbFxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbikgYXdhaXQgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5iZWZvcmVFbWFpbFZlcmlmaWNhdGlvbih1c2VyLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/Lm9uRW1haWxWZXJpZmljYXRpb24pIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24ub25FbWFpbFZlcmlmaWNhdGlvbih1c2VyLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlckJ5RW1haWwocGFyc2VkLmVtYWlsLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5hZnRlckVtYWlsVmVyaWZpY2F0aW9uKSBhd2FpdCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLmFmdGVyRW1haWxWZXJpZmljYXRpb24odXBkYXRlZFVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmF1dG9TaWduSW5BZnRlclZlcmlmaWNhdGlvbikge1xuXHRcdGNvbnN0IGN1cnJlbnRTZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0XHRpZiAoIWN1cnJlbnRTZXNzaW9uIHx8IGN1cnJlbnRTZXNzaW9uLnVzZXIuZW1haWwgIT09IHBhcnNlZC5lbWFpbCkge1xuXHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHVzZXIudXNlci5pZCk7XG5cdFx0XHRpZiAoIXNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCIgfSk7XG5cdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRzZXNzaW9uLFxuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0Li4udXNlci51c2VyLFxuXHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHRydWVcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0XHRzZXNzaW9uOiBjdXJyZW50U2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0dXNlcjoge1xuXHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB0cnVlXG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3RhdHVzOiB0cnVlLFxuXHRcdHVzZXI6IG51bGxcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuLCBzZW5kVmVyaWZpY2F0aW9uRW1haWwsIHNlbmRWZXJpZmljYXRpb25FbWFpbEZuLCB2ZXJpZnlFbWFpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1haWwtdmVyaWZpY2F0aW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/error.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   error: () => (/* binding */ error)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/api/routes/error.ts\nfunction sanitize(input) {\n\treturn input.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g, \"&amp;\");\n}\nconst html = (options, code = \"Unknown\", description = null) => {\n\tconst custom = options.onAPIError?.customizeDefaultErrorPage;\n\treturn `<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>Error</title>\n    <style>\n      * {\n        box-sizing: border-box;\n      }\n      body {\n        font-family: ${custom?.font?.defaultFamily || \"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif\"};\n        background: ${custom?.colors?.background || \"var(--background)\"};\n        color: var(--foreground);\n        margin: 0;\n      }\n      :root,\n      :host {\n        --spacing: 0.25rem;\n        --container-md: 28rem;\n        --text-sm: ${custom?.size?.textSm || \"0.875rem\"};\n        --text-sm--line-height: calc(1.25 / 0.875);\n        --text-2xl: ${custom?.size?.text2xl || \"1.5rem\"};\n        --text-2xl--line-height: calc(2 / 1.5);\n        --text-4xl: ${custom?.size?.text4xl || \"2.25rem\"};\n        --text-4xl--line-height: calc(2.5 / 2.25);\n        --text-6xl: ${custom?.size?.text6xl || \"3rem\"};\n        --text-6xl--line-height: 1;\n        --font-weight-medium: 500;\n        --font-weight-semibold: 600;\n        --font-weight-bold: 700;\n        --default-transition-duration: 150ms;\n        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n        --radius: ${custom?.size?.radiusSm || \"0.625rem\"};\n        --default-mono-font-family: ${custom?.font?.monoFamily || \"var(--font-geist-mono)\"};\n        --primary: ${custom?.colors?.primary || \"black\"};\n        --primary-foreground: ${custom?.colors?.primaryForeground || \"white\"};\n        --background: ${custom?.colors?.background || \"white\"};\n        --foreground: ${custom?.colors?.foreground || \"oklch(0.271 0 0)\"};\n        --border: ${custom?.colors?.border || \"oklch(0.89 0 0)\"};\n        --destructive: ${custom?.colors?.destructive || \"oklch(0.55 0.15 25.723)\"};\n        --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.545 0 0)\"};\n        --corner-border: ${custom?.colors?.cornerBorder || \"#404040\"};\n      }\n\n      button, .btn {\n        cursor: pointer;\n        background: none;\n        border: none;\n        color: inherit;\n        font: inherit;\n        transition: all var(--default-transition-duration)\n          var(--default-transition-timing-function);\n      }\n      button:hover, .btn:hover {\n        opacity: 0.8;\n      }\n\n      @media (prefers-color-scheme: dark) {\n        :root,\n        :host {\n          --primary: ${custom?.colors?.primary || \"white\"};\n          --primary-foreground: ${custom?.colors?.primaryForeground || \"black\"};\n          --background: ${custom?.colors?.background || \"oklch(0.15 0 0)\"};\n          --foreground: ${custom?.colors?.foreground || \"oklch(0.98 0 0)\"};\n          --border: ${custom?.colors?.border || \"oklch(0.27 0 0)\"};\n          --destructive: ${custom?.colors?.destructive || \"oklch(0.65 0.15 25.723)\"};\n          --muted-foreground: ${custom?.colors?.mutedForeground || \"oklch(0.65 0 0)\"};\n          --corner-border: ${custom?.colors?.cornerBorder || \"#a0a0a0\"};\n        }\n      }\n      @media (max-width: 640px) {\n        :root, :host {\n          --text-6xl: 2.5rem;\n          --text-2xl: 1.25rem;\n          --text-sm: 0.8125rem;\n        }\n      }\n      @media (max-width: 480px) {\n        :root, :host {\n          --text-6xl: 2rem;\n          --text-2xl: 1.125rem;\n        }\n      }\n    </style>\n  </head>\n  <body style=\"width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;\">\n    <div\n        style=\"\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            gap: 1.5rem;\n            position: relative;\n            width: 100%;\n            min-height: 100vh;\n            padding: 1rem;\n        \"\n        >\n${custom?.disableBackgroundGrid ? \"\" : `\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          background-image: linear-gradient(to right, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px),\n            linear-gradient(to bottom, ${custom?.colors?.gridColor || \"var(--border)\"} 1px, transparent 1px);\n          background-size: 40px 40px;\n          opacity: 0.6;\n          pointer-events: none;\n          width: 100vw;\n          height: 100vh;\n        \"\n      ></div>\n      <div\n        style=\"\n          position: absolute;\n          inset: 0;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: ${custom?.colors?.background || \"var(--background)\"};\n          mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);\n          pointer-events: none;\n        \"\n      ></div>\n`}\n\n<div\n  style=\"\n    position: relative;\n    z-index: 10;\n    border: 2px solid var(--border);\n    background: ${custom?.colors?.cardBackground || \"var(--background)\"};\n    padding: 1.5rem;\n    max-width: 42rem;\n    width: 100%;\n  \"\n>\n    ${custom?.disableCornerDecorations ? \"\" : `\n        <!-- Corner decorations -->\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            top: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-top: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>\n  \n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            left: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-left: 4px solid var(--corner-border);\n          \"\n        ></div>\n        <div\n          style=\"\n            position: absolute;\n            bottom: -2px;\n            right: -2px;\n            width: 2rem;\n            height: 2rem;\n            border-bottom: 4px solid var(--corner-border);\n            border-right: 4px solid var(--corner-border);\n          \"\n        ></div>`}\n\n        <div style=\"text-align: center; margin-bottom: 1.5rem;\">\n          <div style=\"margin-bottom: 1.5rem;\">\n            <div\n              style=\"\n                display: inline-block;\n                border: 2px solid ${custom?.disableTitleBorder ? \"transparent\" : custom?.colors?.titleBorder || \"var(--destructive)\"};\n                padding: 0.375rem 1rem;\n              \"\n            >\n              <h1\n                style=\"\n                  font-size: var(--text-6xl);\n                  font-weight: var(--font-weight-semibold);\n                  color: ${custom?.colors?.titleColor || \"var(--foreground)\"};\n                  letter-spacing: -0.02em;\n                  margin: 0;\n                \"\n              >\n                ERROR\n              </h1>\n            </div>\n            <div\n              style=\"\n                height: 2px;\n                background-color: var(--border);\n                width: calc(100% + 3rem);\n                margin-left: -1.5rem;\n                margin-top: 1.5rem;\n              \"\n            ></div>\n          </div>\n\n          <h2\n            style=\"\n              font-size: var(--text-2xl);\n              font-weight: var(--font-weight-semibold);\n              color: var(--foreground);\n              margin: 0 0 1rem;\n            \"\n          >\n            Something went wrong\n          </h2>\n\n          <div\n            style=\"\n                display: inline-flex;\n                align-items: center;\n                gap: 0.5rem;\n                border: 2px solid var(--border);\n                background-color: var(--muted);\n                padding: 0.375rem 0.75rem;\n                margin: 0 0 1rem;\n                flex-wrap: wrap;\n                justify-content: center;\n            \"\n            >\n            <span\n                style=\"\n                font-size: 0.75rem;\n                color: var(--muted-foreground);\n                font-weight: var(--font-weight-semibold);\n                \"\n            >\n                CODE:\n            </span>\n            <span\n                style=\"\n                font-size: var(--text-sm);\n                font-family: var(--default-mono-font-family, monospace);\n                color: var(--foreground);\n                word-break: break-all;\n                \"\n            >\n                ${sanitize(code)}\n            </span>\n            </div>\n\n          <p\n            style=\"\n              color: var(--muted-foreground);\n              max-width: 28rem;\n              margin: 0 auto;\n              font-size: var(--text-sm);\n              line-height: 1.5;\n              text-wrap: pretty;\n            \"\n          >\n            ${!description ? `We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/errors/${encodeURIComponent(code)}' target='_blank' rel=\"noopener noreferrer\" style='color: var(--foreground); text-decoration: underline;'>here</a>.` : description}\n          </p>\n        </div>\n\n        <div\n          style=\"\n            display: flex;\n            gap: 0.75rem;\n            margin-top: 1.5rem;\n            justify-content: center;\n            flex-wrap: wrap;\n          \"\n        >\n          <a\n            href=\"/\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: var(--primary);\n                color: var(--primary-foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Go Home\n            </div>\n          </a>\n          <a\n            href=\"https://better-auth.com/docs/errors/${encodeURIComponent(code)}?askai=${encodeURIComponent(`What does the error code ${code} mean?`)}\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style=\"\n              text-decoration: none;\n            \"\n          >\n            <div\n              style=\"\n                border: 2px solid var(--border);\n                background: transparent;\n                color: var(--foreground);\n                padding: 0.5rem 1rem;\n                border-radius: 0;\n                white-space: nowrap;\n              \"\n              class=\"btn\"\n            >\n              Ask AI\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>`;\n};\nconst error = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthEndpoint)(\"/error\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Displays an error page\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"text/html\": { schema: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The HTML content of the error page\"\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst url = new URL(c.request?.url || \"\");\n\tconst unsanitizedCode = url.searchParams.get(\"error\") || \"UNKNOWN\";\n\tconst unsanitizedDescription = url.searchParams.get(\"error_description\") || null;\n\tconst safeCode = /^[\\'A-Za-z0-9_-]+$/.test(unsanitizedCode || \"\") ? unsanitizedCode : \"UNKNOWN\";\n\tconst safeDescription = unsanitizedDescription ? sanitize(unsanitizedDescription) : null;\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.set(\"error\", safeCode);\n\tif (unsanitizedDescription) queryParams.set(\"error_description\", unsanitizedDescription);\n\tconst options = c.context.options;\n\tconst errorURL = options.onAPIError?.errorURL;\n\tif (errorURL) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `${errorURL}${errorURL.includes(\"?\") ? \"&\" : \"?\"}${queryParams.toString()}` }\n\t});\n\tif (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.isProduction && !options.onAPIError?.customizeDefaultErrorPage) return new Response(null, {\n\t\tstatus: 302,\n\t\theaders: { Location: `/?${queryParams.toString()}` }\n\t});\n\treturn new Response(html(c.context.options, safeCode, safeDescription), { headers: { \"Content-Type\": \"text/html\" } });\n});\n\n//#endregion\n\n//# sourceMappingURL=error.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2Vycm9yLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThEO0FBQ1Q7QUFDTTs7QUFFM0Q7QUFDQTtBQUNBLGlDQUFpQyxzQkFBc0Isd0JBQXdCLHVCQUF1QixvQkFBb0IsSUFBSSxJQUFJLE1BQU0sS0FBSyxnQkFBZ0IsU0FBUyxXQUFXO0FBQ2pMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixzQ0FBc0M7QUFDdEMscUJBQXFCO0FBQ3JCLGdDQUFnQztBQUNoQyx3QkFBd0I7QUFDeEIsd0JBQXdCO0FBQ3hCLG9CQUFvQjtBQUNwQix5QkFBeUI7QUFDekIsOEJBQThCO0FBQzlCLDJCQUEyQjtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCLGtDQUFrQztBQUNsQywwQkFBMEI7QUFDMUIsMEJBQTBCO0FBQzFCLHNCQUFzQjtBQUN0QiwyQkFBMkI7QUFDM0IsZ0NBQWdDO0FBQ2hDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG1CQUFtQixvQkFBb0IsaUJBQWlCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDhDQUE4QztBQUN0Ryx5Q0FBeUMsOENBQThDO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3Q0FBd0Msc0JBQXNCO0FBQzlELDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMscU5BQXFOLHlCQUF5Qiw2RUFBNkUsMkJBQTJCO0FBQ3BXO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELHlCQUF5QixTQUFTLCtDQUErQyxNQUFNLFFBQVE7QUFDdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUVBQWtCO0FBQ2hDO0FBQ0E7QUFDQSxLQUFLLG1FQUFhO0FBQ2xCO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLGVBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsYUFBYSxTQUFTLEVBQUUsbUNBQW1DLEVBQUUsdUJBQXVCO0FBQ2pHLEVBQUU7QUFDRixLQUFLLCtEQUFZO0FBQ2pCO0FBQ0EsYUFBYSxlQUFlLHVCQUF1QjtBQUNuRCxFQUFFO0FBQ0YsMkVBQTJFLFdBQVcsK0JBQStCO0FBQ3JILENBQUM7O0FBRUQ7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9lcnJvci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuLi8uLi91dGlscy9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9kdWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvZXJyb3IudHNcbmZ1bmN0aW9uIHNhbml0aXplKGlucHV0KSB7XG5cdHJldHVybiBpbnB1dC5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC9cIi9nLCBcIiZxdW90O1wiKS5yZXBsYWNlKC8nL2csIFwiJiMzOTtcIikucmVwbGFjZSgvJig/IWFtcDt8bHQ7fGd0O3xxdW90O3wjMzk7fCN4WzAtOWEtZkEtRl0rO3wjWzAtOV0rOykvZywgXCImYW1wO1wiKTtcbn1cbmNvbnN0IGh0bWwgPSAob3B0aW9ucywgY29kZSA9IFwiVW5rbm93blwiLCBkZXNjcmlwdGlvbiA9IG51bGwpID0+IHtcblx0Y29uc3QgY3VzdG9tID0gb3B0aW9ucy5vbkFQSUVycm9yPy5jdXN0b21pemVEZWZhdWx0RXJyb3JQYWdlO1xuXHRyZXR1cm4gYDwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG4gIDxoZWFkPlxuICAgIDxtZXRhIGNoYXJzZXQ9XCJVVEYtOFwiIC8+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIiAvPlxuICAgIDx0aXRsZT5FcnJvcjwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgKiB7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICB9XG4gICAgICBib2R5IHtcbiAgICAgICAgZm9udC1mYW1pbHk6ICR7Y3VzdG9tPy5mb250Py5kZWZhdWx0RmFtaWx5IHx8IFwiLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sICdIZWx2ZXRpY2EgTmV1ZScsIEFyaWFsLCBzYW5zLXNlcmlmXCJ9O1xuICAgICAgICBiYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwidmFyKC0tYmFja2dyb3VuZClcIn07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1mb3JlZ3JvdW5kKTtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgfVxuICAgICAgOnJvb3QsXG4gICAgICA6aG9zdCB7XG4gICAgICAgIC0tc3BhY2luZzogMC4yNXJlbTtcbiAgICAgICAgLS1jb250YWluZXItbWQ6IDI4cmVtO1xuICAgICAgICAtLXRleHQtc206ICR7Y3VzdG9tPy5zaXplPy50ZXh0U20gfHwgXCIwLjg3NXJlbVwifTtcbiAgICAgICAgLS10ZXh0LXNtLS1saW5lLWhlaWdodDogY2FsYygxLjI1IC8gMC44NzUpO1xuICAgICAgICAtLXRleHQtMnhsOiAke2N1c3RvbT8uc2l6ZT8udGV4dDJ4bCB8fCBcIjEuNXJlbVwifTtcbiAgICAgICAgLS10ZXh0LTJ4bC0tbGluZS1oZWlnaHQ6IGNhbGMoMiAvIDEuNSk7XG4gICAgICAgIC0tdGV4dC00eGw6ICR7Y3VzdG9tPy5zaXplPy50ZXh0NHhsIHx8IFwiMi4yNXJlbVwifTtcbiAgICAgICAgLS10ZXh0LTR4bC0tbGluZS1oZWlnaHQ6IGNhbGMoMi41IC8gMi4yNSk7XG4gICAgICAgIC0tdGV4dC02eGw6ICR7Y3VzdG9tPy5zaXplPy50ZXh0NnhsIHx8IFwiM3JlbVwifTtcbiAgICAgICAgLS10ZXh0LTZ4bC0tbGluZS1oZWlnaHQ6IDE7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtbWVkaXVtOiA1MDA7XG4gICAgICAgIC0tZm9udC13ZWlnaHQtc2VtaWJvbGQ6IDYwMDtcbiAgICAgICAgLS1mb250LXdlaWdodC1ib2xkOiA3MDA7XG4gICAgICAgIC0tZGVmYXVsdC10cmFuc2l0aW9uLWR1cmF0aW9uOiAxNTBtcztcbiAgICAgICAgLS1kZWZhdWx0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO1xuICAgICAgICAtLXJhZGl1czogJHtjdXN0b20/LnNpemU/LnJhZGl1c1NtIHx8IFwiMC42MjVyZW1cIn07XG4gICAgICAgIC0tZGVmYXVsdC1tb25vLWZvbnQtZmFtaWx5OiAke2N1c3RvbT8uZm9udD8ubW9ub0ZhbWlseSB8fCBcInZhcigtLWZvbnQtZ2Vpc3QtbW9ubylcIn07XG4gICAgICAgIC0tcHJpbWFyeTogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeSB8fCBcImJsYWNrXCJ9O1xuICAgICAgICAtLXByaW1hcnktZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeUZvcmVncm91bmQgfHwgXCJ3aGl0ZVwifTtcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5iYWNrZ3JvdW5kIHx8IFwid2hpdGVcIn07XG4gICAgICAgIC0tZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uZm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuMjcxIDAgMClcIn07XG4gICAgICAgIC0tYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5ib3JkZXIgfHwgXCJva2xjaCgwLjg5IDAgMClcIn07XG4gICAgICAgIC0tZGVzdHJ1Y3RpdmU6ICR7Y3VzdG9tPy5jb2xvcnM/LmRlc3RydWN0aXZlIHx8IFwib2tsY2goMC41NSAwLjE1IDI1LjcyMylcIn07XG4gICAgICAgIC0tbXV0ZWQtZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ubXV0ZWRGb3JlZ3JvdW5kIHx8IFwib2tsY2goMC41NDUgMCAwKVwifTtcbiAgICAgICAgLS1jb3JuZXItYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5jb3JuZXJCb3JkZXIgfHwgXCIjNDA0MDQwXCJ9O1xuICAgICAgfVxuXG4gICAgICBidXR0b24sIC5idG4ge1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgY29sb3I6IGluaGVyaXQ7XG4gICAgICAgIGZvbnQ6IGluaGVyaXQ7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCB2YXIoLS1kZWZhdWx0LXRyYW5zaXRpb24tZHVyYXRpb24pXG4gICAgICAgICAgdmFyKC0tZGVmYXVsdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbik7XG4gICAgICB9XG4gICAgICBidXR0b246aG92ZXIsIC5idG46aG92ZXIge1xuICAgICAgICBvcGFjaXR5OiAwLjg7XG4gICAgICB9XG5cbiAgICAgIEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgICAgICAgOnJvb3QsXG4gICAgICAgIDpob3N0IHtcbiAgICAgICAgICAtLXByaW1hcnk6ICR7Y3VzdG9tPy5jb2xvcnM/LnByaW1hcnkgfHwgXCJ3aGl0ZVwifTtcbiAgICAgICAgICAtLXByaW1hcnktZm9yZWdyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8ucHJpbWFyeUZvcmVncm91bmQgfHwgXCJibGFja1wifTtcbiAgICAgICAgICAtLWJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmJhY2tncm91bmQgfHwgXCJva2xjaCgwLjE1IDAgMClcIn07XG4gICAgICAgICAgLS1mb3JlZ3JvdW5kOiAke2N1c3RvbT8uY29sb3JzPy5mb3JlZ3JvdW5kIHx8IFwib2tsY2goMC45OCAwIDApXCJ9O1xuICAgICAgICAgIC0tYm9yZGVyOiAke2N1c3RvbT8uY29sb3JzPy5ib3JkZXIgfHwgXCJva2xjaCgwLjI3IDAgMClcIn07XG4gICAgICAgICAgLS1kZXN0cnVjdGl2ZTogJHtjdXN0b20/LmNvbG9ycz8uZGVzdHJ1Y3RpdmUgfHwgXCJva2xjaCgwLjY1IDAuMTUgMjUuNzIzKVwifTtcbiAgICAgICAgICAtLW11dGVkLWZvcmVncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/Lm11dGVkRm9yZWdyb3VuZCB8fCBcIm9rbGNoKDAuNjUgMCAwKVwifTtcbiAgICAgICAgICAtLWNvcm5lci1ib3JkZXI6ICR7Y3VzdG9tPy5jb2xvcnM/LmNvcm5lckJvcmRlciB8fCBcIiNhMGEwYTBcIn07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2NDBweCkge1xuICAgICAgICA6cm9vdCwgOmhvc3Qge1xuICAgICAgICAgIC0tdGV4dC02eGw6IDIuNXJlbTtcbiAgICAgICAgICAtLXRleHQtMnhsOiAxLjI1cmVtO1xuICAgICAgICAgIC0tdGV4dC1zbTogMC44MTI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBAbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcbiAgICAgICAgOnJvb3QsIDpob3N0IHtcbiAgICAgICAgICAtLXRleHQtNnhsOiAycmVtO1xuICAgICAgICAgIC0tdGV4dC0yeGw6IDEuMTI1cmVtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgPC9zdHlsZT5cbiAgPC9oZWFkPlxuICA8Ym9keSBzdHlsZT1cIndpZHRoOiAxMDB2dzsgbWluLWhlaWdodDogMTAwdmg7IG92ZXJmbG93LXg6IGhpZGRlbjsgb3ZlcmZsb3cteTogYXV0bztcIj5cbiAgICA8ZGl2XG4gICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGdhcDogMS41cmVtO1xuICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgIFwiXG4gICAgICAgID5cbiR7Y3VzdG9tPy5kaXNhYmxlQmFja2dyb3VuZEdyaWQgPyBcIlwiIDogYFxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBpbnNldDogMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICR7Y3VzdG9tPy5jb2xvcnM/LmdyaWRDb2xvciB8fCBcInZhcigtLWJvcmRlcilcIn0gMXB4LCB0cmFuc3BhcmVudCAxcHgpLFxuICAgICAgICAgICAgbGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwgJHtjdXN0b20/LmNvbG9ycz8uZ3JpZENvbG9yIHx8IFwidmFyKC0tYm9yZGVyKVwifSAxcHgsIHRyYW5zcGFyZW50IDFweCk7XG4gICAgICAgICAgYmFja2dyb3VuZC1zaXplOiA0MHB4IDQwcHg7XG4gICAgICAgICAgb3BhY2l0eTogMC42O1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgIHdpZHRoOiAxMDB2dztcbiAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICBcIlxuICAgICAgPjwvZGl2PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBpbnNldDogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHtjdXN0b20/LmNvbG9ycz8uYmFja2dyb3VuZCB8fCBcInZhcigtLWJhY2tncm91bmQpXCJ9O1xuICAgICAgICAgIG1hc2staW1hZ2U6IHJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGF0IGNlbnRlciwgdHJhbnNwYXJlbnQgMjAlLCBibGFjayk7XG4gICAgICAgICAgLXdlYmtpdC1tYXNrLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBjZW50ZXIsIHRyYW5zcGFyZW50IDIwJSwgYmxhY2spO1xuICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBcIlxuICAgICAgPjwvZGl2PlxuYH1cblxuPGRpdlxuICBzdHlsZT1cIlxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB6LWluZGV4OiAxMDtcbiAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO1xuICAgIGJhY2tncm91bmQ6ICR7Y3VzdG9tPy5jb2xvcnM/LmNhcmRCYWNrZ3JvdW5kIHx8IFwidmFyKC0tYmFja2dyb3VuZClcIn07XG4gICAgcGFkZGluZzogMS41cmVtO1xuICAgIG1heC13aWR0aDogNDJyZW07XG4gICAgd2lkdGg6IDEwMCU7XG4gIFwiXG4+XG4gICAgJHtjdXN0b20/LmRpc2FibGVDb3JuZXJEZWNvcmF0aW9ucyA/IFwiXCIgOiBgXG4gICAgICAgIDwhLS0gQ29ybmVyIGRlY29yYXRpb25zIC0tPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogLTJweDtcbiAgICAgICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgICAgICB3aWR0aDogMnJlbTtcbiAgICAgICAgICAgIGhlaWdodDogMnJlbTtcbiAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHRvcDogLTJweDtcbiAgICAgICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICBcIlxuICAgICAgICA+PC9kaXY+XG4gIFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogLTJweDtcbiAgICAgICAgICAgIGxlZnQ6IC0ycHg7XG4gICAgICAgICAgICB3aWR0aDogMnJlbTtcbiAgICAgICAgICAgIGhlaWdodDogMnJlbTtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogLTJweDtcbiAgICAgICAgICAgIHJpZ2h0OiAtMnB4O1xuICAgICAgICAgICAgd2lkdGg6IDJyZW07XG4gICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiA0cHggc29saWQgdmFyKC0tY29ybmVyLWJvcmRlcik7XG4gICAgICAgICAgICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB2YXIoLS1jb3JuZXItYm9yZGVyKTtcbiAgICAgICAgICBcIlxuICAgICAgICA+PC9kaXY+YH1cblxuICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxLjVyZW07XCI+XG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDEuNXJlbTtcIj5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgJHtjdXN0b20/LmRpc2FibGVUaXRsZUJvcmRlciA/IFwidHJhbnNwYXJlbnRcIiA6IGN1c3RvbT8uY29sb3JzPy50aXRsZUJvcmRlciB8fCBcInZhcigtLWRlc3RydWN0aXZlKVwifTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbSAxcmVtO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8aDFcbiAgICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiB2YXIoLS10ZXh0LTZ4bCk7XG4gICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaWJvbGQpO1xuICAgICAgICAgICAgICAgICAgY29sb3I6ICR7Y3VzdG9tPy5jb2xvcnM/LnRpdGxlQ29sb3IgfHwgXCJ2YXIoLS1mb3JlZ3JvdW5kKVwifTtcbiAgICAgICAgICAgICAgICAgIGxldHRlci1zcGFjaW5nOiAtMC4wMmVtO1xuICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICBFUlJPUlxuICAgICAgICAgICAgICA8L2gxPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlICsgM3JlbSk7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC0xLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMS41cmVtO1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGgyXG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtMnhsKTtcbiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IHZhcigtLWZvbnQtd2VpZ2h0LXNlbWlib2xkKTtcbiAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICBtYXJnaW46IDAgMCAxcmVtO1xuICAgICAgICAgICAgXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBTb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgICAgIDwvaDI+XG5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgdmFyKC0tYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1tdXRlZCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC4zNzVyZW0gMC43NXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAxcmVtO1xuICAgICAgICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjc1cmVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1tdXRlZC1mb3JlZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogdmFyKC0tZm9udC13ZWlnaHQtc2VtaWJvbGQpO1xuICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgQ09ERTpcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtc20pO1xuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1kZWZhdWx0LW1vbm8tZm9udC1mYW1pbHksIG1vbm9zcGFjZSk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICR7c2FuaXRpemUoY29kZSl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxwXG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tbXV0ZWQtZm9yZWdyb3VuZCk7XG4gICAgICAgICAgICAgIG1heC13aWR0aDogMjhyZW07XG4gICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgICBmb250LXNpemU6IHZhcigtLXRleHQtc20pO1xuICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgICAgICB0ZXh0LXdyYXA6IHByZXR0eTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgJHshZGVzY3JpcHRpb24gPyBgV2UgZW5jb3VudGVyZWQgYW4gdW5leHBlY3RlZCBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBvciByZXR1cm4gdG8gdGhlIGhvbWUgcGFnZS4gSWYgeW91J3JlIGEgZGV2ZWxvcGVyLCB5b3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IgPGEgaHJlZj0naHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9lcnJvcnMvJHtlbmNvZGVVUklDb21wb25lbnQoY29kZSl9JyB0YXJnZXQ9J19ibGFuaycgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiIHN0eWxlPSdjb2xvcjogdmFyKC0tZm9yZWdyb3VuZCk7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyc+aGVyZTwvYT4uYCA6IGRlc2NyaXB0aW9ufVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZ2FwOiAwLjc1cmVtO1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMS41cmVtO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgICAgXCJcbiAgICAgICAgPlxuICAgICAgICAgIDxhXG4gICAgICAgICAgICBocmVmPVwiL1wiXG4gICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgICAgICAgICBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgc3R5bGU9XCJcbiAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1ib3JkZXIpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBHbyBIb21lXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGhyZWY9XCJodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL2Vycm9ycy8ke2VuY29kZVVSSUNvbXBvbmVudChjb2RlKX0/YXNrYWk9JHtlbmNvZGVVUklDb21wb25lbnQoYFdoYXQgZG9lcyB0aGUgZXJyb3IgY29kZSAke2NvZGV9IG1lYW4/YCl9XCJcbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIHN0eWxlPVwiXG4gICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT1cIlxuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWZvcmVncm91bmQpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbSAxcmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBBc2sgQUlcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9ib2R5PlxuPC9odG1sPmA7XG59O1xuY29uc3QgZXJyb3IgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvZXJyb3JcIiwge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdG1ldGFkYXRhOiB7XG5cdFx0Li4uSElERV9NRVRBREFUQSxcblx0XHRvcGVuYXBpOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJEaXNwbGF5cyBhbiBlcnJvciBwYWdlXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJ0ZXh0L2h0bWxcIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIGVycm9yIHBhZ2VcIlxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoYykgPT4ge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGMucmVxdWVzdD8udXJsIHx8IFwiXCIpO1xuXHRjb25zdCB1bnNhbml0aXplZENvZGUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yXCIpIHx8IFwiVU5LTk9XTlwiO1xuXHRjb25zdCB1bnNhbml0aXplZERlc2NyaXB0aW9uID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvcl9kZXNjcmlwdGlvblwiKSB8fCBudWxsO1xuXHRjb25zdCBzYWZlQ29kZSA9IC9eW1xcJ0EtWmEtejAtOV8tXSskLy50ZXN0KHVuc2FuaXRpemVkQ29kZSB8fCBcIlwiKSA/IHVuc2FuaXRpemVkQ29kZSA6IFwiVU5LTk9XTlwiO1xuXHRjb25zdCBzYWZlRGVzY3JpcHRpb24gPSB1bnNhbml0aXplZERlc2NyaXB0aW9uID8gc2FuaXRpemUodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgOiBudWxsO1xuXHRjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcblx0cXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JcIiwgc2FmZUNvZGUpO1xuXHRpZiAodW5zYW5pdGl6ZWREZXNjcmlwdGlvbikgcXVlcnlQYXJhbXMuc2V0KFwiZXJyb3JfZGVzY3JpcHRpb25cIiwgdW5zYW5pdGl6ZWREZXNjcmlwdGlvbik7XG5cdGNvbnN0IG9wdGlvbnMgPSBjLmNvbnRleHQub3B0aW9ucztcblx0Y29uc3QgZXJyb3JVUkwgPSBvcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMO1xuXHRpZiAoZXJyb3JVUkwpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAke2Vycm9yVVJMfSR7ZXJyb3JVUkwuaW5jbHVkZXMoXCI/XCIpID8gXCImXCIgOiBcIj9cIn0ke3F1ZXJ5UGFyYW1zLnRvU3RyaW5nKCl9YCB9XG5cdH0pO1xuXHRpZiAoaXNQcm9kdWN0aW9uICYmICFvcHRpb25zLm9uQVBJRXJyb3I/LmN1c3RvbWl6ZURlZmF1bHRFcnJvclBhZ2UpIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge1xuXHRcdHN0YXR1czogMzAyLFxuXHRcdGhlYWRlcnM6IHsgTG9jYXRpb246IGAvPyR7cXVlcnlQYXJhbXMudG9TdHJpbmcoKX1gIH1cblx0fSk7XG5cdHJldHVybiBuZXcgUmVzcG9uc2UoaHRtbChjLmNvbnRleHQub3B0aW9ucywgc2FmZUNvZGUsIHNhZmVEZXNjcmlwdGlvbiksIHsgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcInRleHQvaHRtbFwiIH0gfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBlcnJvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3IubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/index.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _account_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./account.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/account.mjs\");\n/* harmony import */ var _callback_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./callback.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/callback.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./error.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/error.mjs\");\n/* harmony import */ var _ok_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ok.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\");\n/* harmony import */ var _sign_in_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./sign-in.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\");\n/* harmony import */ var _sign_out_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./sign-out.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\");\n/* harmony import */ var _sign_up_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./sign-up.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\");\n/* harmony import */ var _update_user_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./update-user.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBcU87QUFDdkc7QUFDL0U7QUFDc0Y7QUFDakc7QUFDTjtBQUNxRjtBQUN6RDtBQUNqQjtBQUNHO0FBQzZFIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldFNlc3Npb24sIGdldFNlc3Npb25Gcm9tQ3R4LCBsaXN0U2Vzc2lvbnMsIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJldm9rZU90aGVyU2Vzc2lvbnMsIHJldm9rZVNlc3Npb24sIHJldm9rZVNlc3Npb25zLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgYWNjb3VudEluZm8sIGdldEFjY2Vzc1Rva2VuLCBsaW5rU29jaWFsQWNjb3VudCwgbGlzdFVzZXJBY2NvdW50cywgcmVmcmVzaFRva2VuLCB1bmxpbmtBY2NvdW50IH0gZnJvbSBcIi4vYWNjb3VudC5tanNcIjtcbmltcG9ydCB7IGNhbGxiYWNrT0F1dGggfSBmcm9tIFwiLi9jYWxsYmFjay5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4sIHNlbmRWZXJpZmljYXRpb25FbWFpbCwgc2VuZFZlcmlmaWNhdGlvbkVtYWlsRm4sIHZlcmlmeUVtYWlsIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZXJyb3IgfSBmcm9tIFwiLi9lcnJvci5tanNcIjtcbmltcG9ydCB7IG9rIH0gZnJvbSBcIi4vb2subWpzXCI7XG5pbXBvcnQgeyByZXF1ZXN0UGFzc3dvcmRSZXNldCwgcmVxdWVzdFBhc3N3b3JkUmVzZXRDYWxsYmFjaywgcmVzZXRQYXNzd29yZCwgdmVyaWZ5UGFzc3dvcmQgfSBmcm9tIFwiLi9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfSBmcm9tIFwiLi9zaWduLWluLm1qc1wiO1xuaW1wb3J0IHsgc2lnbk91dCB9IGZyb20gXCIuL3NpZ24tb3V0Lm1qc1wiO1xuaW1wb3J0IHsgc2lnblVwRW1haWwgfSBmcm9tIFwiLi9zaWduLXVwLm1qc1wiO1xuaW1wb3J0IHsgY2hhbmdlRW1haWwsIGNoYW5nZVBhc3N3b3JkLCBkZWxldGVVc2VyLCBkZWxldGVVc2VyQ2FsbGJhY2ssIHNldFBhc3N3b3JkLCB1cGRhdGVVc2VyIH0gZnJvbSBcIi4vdXBkYXRlLXVzZXIubWpzXCI7XG5cbmV4cG9ydCB7ICB9OyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/ok.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ok: () => (/* binding */ ok)\n/* harmony export */ });\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/ok.ts\nconst ok = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/ok\", {\n\tmethod: \"GET\",\n\tmetadata: {\n\t\t..._utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_0__.HIDE_METADATA,\n\t\topenapi: {\n\t\t\tdescription: \"Check if the API is working\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"API is working\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { ok: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the API is working\"\n\t\t\t\t\t} },\n\t\t\t\t\trequired: [\"ok\"]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn ctx.json({ ok: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=ok.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL29rLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7QUFDSDs7QUFFM0Q7QUFDQSxXQUFXLHlFQUFrQjtBQUM3QjtBQUNBO0FBQ0EsS0FBSyxtRUFBYTtBQUNsQjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELG1CQUFtQixVQUFVO0FBQzdCLENBQUM7O0FBRUQ7QUFDYztBQUNkIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvb2subWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaGlkZS1tZXRhZGF0YS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL29rLnRzXG5jb25zdCBvayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9va1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0bWV0YWRhdGE6IHtcblx0XHQuLi5ISURFX01FVEFEQVRBLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIkNoZWNrIGlmIHRoZSBBUEkgaXMgd29ya2luZ1wiLFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiQVBJIGlzIHdvcmtpbmdcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgb2s6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBBUEkgaXMgd29ya2luZ1wiXG5cdFx0XHRcdFx0fSB9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJva1wiXVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSB9XG5cdFx0fVxuXHR9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHJldHVybiBjdHguanNvbih7IG9rOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgb2sgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9rLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/ok.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/password.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   requestPasswordReset: () => (/* binding */ requestPasswordReset),\n/* harmony export */   requestPasswordResetCallback: () => (/* binding */ requestPasswordResetCallback),\n/* harmony export */   resetPassword: () => (/* binding */ resetPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/password.ts\nfunction redirectError(ctx, callbackURL, query) {\n\tconst url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n\tconst url = new URL(callbackURL, ctx.baseURL);\n\tif (query) Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n\treturn url.href;\n}\nconst requestPasswordReset = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/request-password-reset\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_9__.email().meta({ description: \"The email address of the user to send a password reset email to\" }),\n\t\tredirectTo: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"requestPasswordReset\",\n\t\tdescription: \"Send a password reset email to the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tstatus: { type: \"boolean\" },\n\t\t\t\t\tmessage: { type: \"string\" }\n\t\t\t\t}\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n\t\tctx.context.logger.error(\"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: \"Reset password isn't enabled\" });\n\t}\n\tconst { email, redirectTo } = ctx.body;\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\t/**\n\t\t* We simulate the verification token generation and the database lookup\n\t\t* to mitigate timing attacks.\n\t\t*/\n\t\t(0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\t\tawait ctx.context.internalAdapter.findVerificationValue(\"dummy-verification-token\");\n\t\tctx.context.logger.error(\"Reset Password: User not found\", { email });\n\t\treturn ctx.json({\n\t\t\tstatus: true,\n\t\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t\t});\n\t}\n\tconst expiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || 3600 * 1, \"sec\");\n\tconst verificationToken = (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_4__.generateId)(24);\n\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\tvalue: user.user.id,\n\t\tidentifier: `reset-password:${verificationToken}`,\n\t\texpiresAt\n\t});\n\tconst callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n\tconst url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailAndPassword.sendResetPassword({\n\t\tuser: user.user,\n\t\turl,\n\t\ttoken: verificationToken\n\t}, ctx.request));\n\treturn ctx.json({\n\t\tstatus: true,\n\t\tmessage: \"If this email exists in our system, check your email for the reset link\"\n\t});\n});\nconst requestPasswordResetCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password/:token\", {\n\tmethod: \"GET\",\n\toperationId: \"forgetPasswordCallback\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ callbackURL: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The URL to redirect the user to reset their password\" }) }),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPasswordCallback\",\n\t\tdescription: \"Redirects the user to the callback URL with the token\",\n\t\tparameters: [{\n\t\t\tname: \"token\",\n\t\t\tin: \"path\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The token to reset the password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}, {\n\t\t\tname: \"callbackURL\",\n\t\t\tin: \"query\",\n\t\t\trequired: true,\n\t\t\tdescription: \"The URL to redirect the user to reset their password\",\n\t\t\tschema: { type: \"string\" }\n\t\t}],\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { token: { type: \"string\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { token } = ctx.params;\n\tconst { callbackURL } = ctx.query;\n\tif (!token || !callbackURL) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(`reset-password:${token}`);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw ctx.redirect(redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" }));\n\tthrow ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n});\nconst resetPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/reset-password\", {\n\tmethod: \"POST\",\n\toperationId: \"resetPassword\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_9__.object({ token: zod__WEBPACK_IMPORTED_MODULE_9__.string().optional() }).optional(),\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The new password to set\" }),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The token to reset the password\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"resetPassword\",\n\t\tdescription: \"Reset the password for a user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token || ctx.query?.token;\n\tif (!token) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst { newPassword } = ctx.body;\n\tconst minLength = ctx.context.password?.config.minPasswordLength;\n\tconst maxLength = ctx.context.password?.config.maxPasswordLength;\n\tif (newPassword.length < minLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\tif (newPassword.length > maxLength) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\tconst id = `reset-password:${token}`;\n\tconst verification = await ctx.context.internalAdapter.findVerificationValue(id);\n\tif (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst userId = verification.value;\n\tconst hashedPassword = await ctx.context.password.hash(newPassword);\n\tif (!(await ctx.context.internalAdapter.findAccounts(userId)).find((ac) => ac.providerId === \"credential\")) await ctx.context.internalAdapter.createAccount({\n\t\tuserId,\n\t\tproviderId: \"credential\",\n\t\tpassword: hashedPassword,\n\t\taccountId: userId\n\t});\n\telse await ctx.context.internalAdapter.updatePassword(userId, hashedPassword);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n\tif (ctx.context.options.emailAndPassword?.onPasswordReset) {\n\t\tconst user = await ctx.context.internalAdapter.findUserById(userId);\n\t\tif (user) await ctx.context.options.emailAndPassword.onPasswordReset({ user }, ctx.request);\n\t}\n\tif (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) await ctx.context.internalAdapter.deleteSessions(userId);\n\treturn ctx.json({ status: true });\n});\nconst verifyPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_8__.createAuthEndpoint)(\"/verify-password\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_9__.object({ password: zod__WEBPACK_IMPORTED_MODULE_9__.string().meta({ description: \"The password to verify\" }) }),\n\tmetadata: {\n\t\tscope: \"server\",\n\t\topenapi: {\n\t\t\toperationId: \"verifyPassword\",\n\t\t\tdescription: \"Verify the current user's password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { status: { type: \"boolean\" } }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t},\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_3__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { password } = ctx.body;\n\tconst session = ctx.context.session;\n\tif (!await (0,_utils_password_mjs__WEBPACK_IMPORTED_MODULE_5__.validatePassword)(ctx, {\n\t\tpassword,\n\t\tuserId: session.user.id\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_7__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_6__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3Bhc3N3b3JkLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUErQztBQUNlO0FBQzVCO0FBQ3lCO0FBQ1I7QUFDUztBQUNEO0FBQ2xDO0FBQ2M7QUFDb0I7O0FBRTNEO0FBQ0E7QUFDQSwwRUFBMEUsWUFBWTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHlFQUFrQjtBQUMvQztBQUNBLE9BQU8sdUNBQVE7QUFDZixTQUFTLHNDQUFPLFVBQVUsZ0ZBQWdGO0FBQzFHLGNBQWMsdUNBQVEsVUFBVSxvUUFBb1E7QUFDcFMsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBLGVBQWUsaUJBQWlCO0FBQ2hDLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IseUNBQXlDO0FBQy9FO0FBQ0EsU0FBUyxvQkFBb0I7QUFDN0IseUVBQXlFLHVCQUF1QjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSw0REFBVTtBQUNaO0FBQ0EsK0RBQStELE9BQU87QUFDdEU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLHdEQUFPO0FBQzFCLDJCQUEyQiw0REFBVTtBQUNyQztBQUNBO0FBQ0EsZ0NBQWdDLGtCQUFrQjtBQUNsRDtBQUNBLEVBQUU7QUFDRjtBQUNBLGdCQUFnQixvQkFBb0Isa0JBQWtCLGtCQUFrQixlQUFlLFlBQVk7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCxxQ0FBcUMseUVBQWtCO0FBQ3ZEO0FBQ0E7QUFDQSxRQUFRLHVDQUFRLEdBQUcsYUFBYSx1Q0FBUSxVQUFVLHFFQUFxRSxHQUFHO0FBQzFILE9BQU8sMEVBQVc7QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixHQUFHO0FBQ0gsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsU0FBUztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxRQUFRO0FBQ2pCLFNBQVMsY0FBYztBQUN2QiwwRkFBMEYsd0JBQXdCO0FBQ2xILGdHQUFnRyxNQUFNO0FBQ3RHLHdJQUF3SSx3QkFBd0I7QUFDaEssaUVBQWlFLE9BQU87QUFDeEUsQ0FBQztBQUNELHNCQUFzQix5RUFBa0I7QUFDeEM7QUFDQTtBQUNBLFFBQVEsdUNBQVEsR0FBRyxPQUFPLHVDQUFRLGVBQWU7QUFDakQsT0FBTyx1Q0FBUTtBQUNmLGVBQWUsdUNBQVEsVUFBVSx3Q0FBd0M7QUFDekUsU0FBUyx1Q0FBUSxVQUFVLGdEQUFnRDtBQUMzRSxFQUFFO0FBQ0YsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGtCQUFrQixVQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLHVCQUF1QixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsZ0JBQWdCO0FBQzFGLFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0EsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDdkgsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDdEgsOEJBQThCLE1BQU07QUFDcEM7QUFDQSxxRkFBcUYsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN4SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSxNQUFNO0FBQy9FO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQyxDQUFDO0FBQ0QsdUJBQXVCLHlFQUFrQjtBQUN6QztBQUNBLE9BQU8sdUNBQVEsR0FBRyxVQUFVLHVDQUFRLFVBQVUsdUNBQXVDLEdBQUc7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLE9BQU8sb0VBQTBCO0FBQ2pDLENBQUM7QUFDRCxTQUFTLFdBQVc7QUFDcEI7QUFDQSxZQUFZLHFFQUFnQjtBQUM1QjtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDckYsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQzs7QUFFRDtBQUM2RjtBQUM3RiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3Bhc3N3b3JkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBvcmlnaW5DaGVjayB9IGZyb20gXCIuLi9taWRkbGV3YXJlcy9vcmlnaW4tY2hlY2subWpzXCI7XG5pbXBvcnQgXCIuLi9taWRkbGV3YXJlcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IHNlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlIH0gZnJvbSBcIi4vc2Vzc2lvbi5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlSWQgfSBmcm9tIFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZVBhc3N3b3JkIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvcGFzc3dvcmQudHNcbmZ1bmN0aW9uIHJlZGlyZWN0RXJyb3IoY3R4LCBjYWxsYmFja1VSTCwgcXVlcnkpIHtcblx0Y29uc3QgdXJsID0gY2FsbGJhY2tVUkwgPyBuZXcgVVJMKGNhbGxiYWNrVVJMLCBjdHguYmFzZVVSTCkgOiBuZXcgVVJMKGAke2N0eC5iYXNlVVJMfS9lcnJvcmApO1xuXHRpZiAocXVlcnkpIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KS5mb3JFYWNoKChbaywgdl0pID0+IHVybC5zZWFyY2hQYXJhbXMuc2V0KGssIHYpKTtcblx0cmV0dXJuIHVybC5ocmVmO1xufVxuZnVuY3Rpb24gcmVkaXJlY3RDYWxsYmFjayhjdHgsIGNhbGxiYWNrVVJMLCBxdWVyeSkge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGNhbGxiYWNrVVJMLCBjdHguYmFzZVVSTCk7XG5cdGlmIChxdWVyeSkgT2JqZWN0LmVudHJpZXMocXVlcnkpLmZvckVhY2goKFtrLCB2XSkgPT4gdXJsLnNlYXJjaFBhcmFtcy5zZXQoaywgdikpO1xuXHRyZXR1cm4gdXJsLmhyZWY7XG59XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXF1ZXN0LXBhc3N3b3JkLXJlc2V0XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdGVtYWlsOiB6LmVtYWlsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyIHRvIHNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0b1wiIH0pLFxuXHRcdHJlZGlyZWN0VG86IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmQuIElmIHRoZSB0b2tlbiBpc24ndCB2YWxpZCBvciBleHBpcmVkLCBpdCdsbCBiZSByZWRpcmVjdGVkIHdpdGggYSBxdWVyeSBwYXJhbWV0ZXIgYD9lcnJvcj1JTlZBTElEX1RPS0VOYC4gSWYgdGhlIHRva2VuIGlzIHZhbGlkLCBpdCdsbCBiZSByZWRpcmVjdGVkIHdpdGggYSBxdWVyeSBwYXJhbWV0ZXIgYD90b2tlbj1WQUxJRF9UT0tFTlwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXF1ZXN0UGFzc3dvcmRSZXNldFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlNlbmQgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0c3RhdHVzOiB7IHR5cGU6IFwiYm9vbGVhblwiIH0sXG5cdFx0XHRcdFx0bWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHRcdFx0fVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5zZW5kUmVzZXRQYXNzd29yZCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlJlc2V0IHBhc3N3b3JkIGlzbid0IGVuYWJsZWQuUGxlYXNlIHBhc3MgYW4gZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZCBmdW5jdGlvbiBpbiB5b3VyIGF1dGggY29uZmlnIVwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiUmVzZXQgcGFzc3dvcmQgaXNuJ3QgZW5hYmxlZFwiIH0pO1xuXHR9XG5cdGNvbnN0IHsgZW1haWwsIHJlZGlyZWN0VG8gfSA9IGN0eC5ib2R5O1xuXHRjb25zdCB1c2VyID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRVc2VyQnlFbWFpbChlbWFpbCwgeyBpbmNsdWRlQWNjb3VudHM6IHRydWUgfSk7XG5cdGlmICghdXNlcikge1xuXHRcdC8qKlxuXHRcdCogV2Ugc2ltdWxhdGUgdGhlIHZlcmlmaWNhdGlvbiB0b2tlbiBnZW5lcmF0aW9uIGFuZCB0aGUgZGF0YWJhc2UgbG9va3VwXG5cdFx0KiB0byBtaXRpZ2F0ZSB0aW1pbmcgYXR0YWNrcy5cblx0XHQqL1xuXHRcdGdlbmVyYXRlSWQoMjQpO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVmVyaWZpY2F0aW9uVmFsdWUoXCJkdW1teS12ZXJpZmljYXRpb24tdG9rZW5cIik7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUmVzZXQgUGFzc3dvcmQ6IFVzZXIgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHN0YXR1czogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IFwiSWYgdGhpcyBlbWFpbCBleGlzdHMgaW4gb3VyIHN5c3RlbSwgY2hlY2sgeW91ciBlbWFpbCBmb3IgdGhlIHJlc2V0IGxpbmtcIlxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IGV4cGlyZXNBdCA9IGdldERhdGUoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlc2V0UGFzc3dvcmRUb2tlbkV4cGlyZXNJbiB8fCAzNjAwICogMSwgXCJzZWNcIik7XG5cdGNvbnN0IHZlcmlmaWNhdGlvblRva2VuID0gZ2VuZXJhdGVJZCgyNCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVWZXJpZmljYXRpb25WYWx1ZSh7XG5cdFx0dmFsdWU6IHVzZXIudXNlci5pZCxcblx0XHRpZGVudGlmaWVyOiBgcmVzZXQtcGFzc3dvcmQ6JHt2ZXJpZmljYXRpb25Ub2tlbn1gLFxuXHRcdGV4cGlyZXNBdFxuXHR9KTtcblx0Y29uc3QgY2FsbGJhY2tVUkwgPSByZWRpcmVjdFRvID8gZW5jb2RlVVJJQ29tcG9uZW50KHJlZGlyZWN0VG8pIDogXCJcIjtcblx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vcmVzZXQtcGFzc3dvcmQvJHt2ZXJpZmljYXRpb25Ub2tlbn0/Y2FsbGJhY2tVUkw9JHtjYWxsYmFja1VSTH1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5zZW5kUmVzZXRQYXNzd29yZCh7XG5cdFx0dXNlcjogdXNlci51c2VyLFxuXHRcdHVybCxcblx0XHR0b2tlbjogdmVyaWZpY2F0aW9uVG9rZW5cblx0fSwgY3R4LnJlcXVlc3QpKTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzdGF0dXM6IHRydWUsXG5cdFx0bWVzc2FnZTogXCJJZiB0aGlzIGVtYWlsIGV4aXN0cyBpbiBvdXIgc3lzdGVtLCBjaGVjayB5b3VyIGVtYWlsIGZvciB0aGUgcmVzZXQgbGlua1wiXG5cdH0pO1xufSk7XG5jb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldENhbGxiYWNrID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jlc2V0LXBhc3N3b3JkLzp0b2tlblwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwiZm9yZ2V0UGFzc3dvcmRDYWxsYmFja1wiLFxuXHRxdWVyeTogei5vYmplY3QoeyBjYWxsYmFja1VSTDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIFVSTCB0byByZWRpcmVjdCB0aGUgdXNlciB0byByZXNldCB0aGVpciBwYXNzd29yZFwiIH0pIH0pLFxuXHR1c2U6IFtvcmlnaW5DaGVjaygoY3R4KSA9PiBjdHgucXVlcnkuY2FsbGJhY2tVUkwpXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInJlc2V0UGFzc3dvcmRDYWxsYmFja1wiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIlJlZGlyZWN0cyB0aGUgdXNlciB0byB0aGUgY2FsbGJhY2sgVVJMIHdpdGggdGhlIHRva2VuXCIsXG5cdFx0cGFyYW1ldGVyczogW3tcblx0XHRcdG5hbWU6IFwidG9rZW5cIixcblx0XHRcdGluOiBcInBhdGhcIixcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHJlc2V0IHRoZSBwYXNzd29yZFwiLFxuXHRcdFx0c2NoZW1hOiB7IHR5cGU6IFwic3RyaW5nXCIgfVxuXHRcdH0sIHtcblx0XHRcdG5hbWU6IFwiY2FsbGJhY2tVUkxcIixcblx0XHRcdGluOiBcInF1ZXJ5XCIsXG5cdFx0XHRyZXF1aXJlZDogdHJ1ZSxcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gcmVkaXJlY3QgdGhlIHVzZXIgdG8gcmVzZXQgdGhlaXIgcGFzc3dvcmRcIixcblx0XHRcdHNjaGVtYTogeyB0eXBlOiBcInN0cmluZ1wiIH1cblx0XHR9XSxcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyB0b2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgdG9rZW4gfSA9IGN0eC5wYXJhbXM7XG5cdGNvbnN0IHsgY2FsbGJhY2tVUkwgfSA9IGN0eC5xdWVyeTtcblx0aWYgKCF0b2tlbiB8fCAhY2FsbGJhY2tVUkwpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyBlcnJvcjogXCJJTlZBTElEX1RPS0VOXCIgfSkpO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGByZXNldC1wYXNzd29yZDoke3Rva2VufWApO1xuXHRpZiAoIXZlcmlmaWNhdGlvbiB8fCB2ZXJpZmljYXRpb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHRocm93IGN0eC5yZWRpcmVjdChyZWRpcmVjdEVycm9yKGN0eC5jb250ZXh0LCBjYWxsYmFja1VSTCwgeyBlcnJvcjogXCJJTlZBTElEX1RPS0VOXCIgfSkpO1xuXHR0aHJvdyBjdHgucmVkaXJlY3QocmVkaXJlY3RDYWxsYmFjayhjdHguY29udGV4dCwgY2FsbGJhY2tVUkwsIHsgdG9rZW4gfSkpO1xufSk7XG5jb25zdCByZXNldFBhc3N3b3JkID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jlc2V0LXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwicmVzZXRQYXNzd29yZFwiLFxuXHRxdWVyeTogei5vYmplY3QoeyB0b2tlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pLm9wdGlvbmFsKCksXG5cdGJvZHk6IHoub2JqZWN0KHtcblx0XHRuZXdQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBwYXNzd29yZCB0byBzZXRcIiB9KSxcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHJlc2V0IHRoZSBwYXNzd29yZFwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJyZXNldFBhc3N3b3JkXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiUmVzZXQgdGhlIHBhc3N3b3JkIGZvciBhIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHsgdHlwZTogXCJib29sZWFuXCIgfSB9XG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgdG9rZW4gPSBjdHguYm9keS50b2tlbiB8fCBjdHgucXVlcnk/LnRva2VuO1xuXHRpZiAoIXRva2VuKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgeyBuZXdQYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IG1pbkxlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkPy5jb25maWcubWluUGFzc3dvcmRMZW5ndGg7XG5cdGNvbnN0IG1heExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkPy5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCBtaW5MZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhMZW5ndGgpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0Y29uc3QgaWQgPSBgcmVzZXQtcGFzc3dvcmQ6JHt0b2tlbn1gO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGlkKTtcblx0aWYgKCF2ZXJpZmljYXRpb24gfHwgdmVyaWZpY2F0aW9uLmV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0Y29uc3QgdXNlcklkID0gdmVyaWZpY2F0aW9uLnZhbHVlO1xuXHRjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLmhhc2gobmV3UGFzc3dvcmQpO1xuXHRpZiAoIShhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHVzZXJJZCkpLmZpbmQoKGFjKSA9PiBhYy5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIikpIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVBY2NvdW50KHtcblx0XHR1c2VySWQsXG5cdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0cGFzc3dvcmQ6IGhhc2hlZFBhc3N3b3JkLFxuXHRcdGFjY291bnRJZDogdXNlcklkXG5cdH0pO1xuXHRlbHNlIGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVQYXNzd29yZCh1c2VySWQsIGhhc2hlZFBhc3N3b3JkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHZlcmlmaWNhdGlvbi5pZCk7XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/Lm9uUGFzc3dvcmRSZXNldCkge1xuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUlkKHVzZXJJZCk7XG5cdFx0aWYgKHVzZXIpIGF3YWl0IGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxBbmRQYXNzd29yZC5vblBhc3N3b3JkUmVzZXQoeyB1c2VyIH0sIGN0eC5yZXF1ZXN0KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5yZXZva2VTZXNzaW9uc09uUGFzc3dvcmRSZXNldCkgYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHVzZXJJZCk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdmVyaWZ5LXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0Ym9keTogei5vYmplY3QoeyBwYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHBhc3N3b3JkIHRvIHZlcmlmeVwiIH0pIH0pLFxuXHRtZXRhZGF0YToge1xuXHRcdHNjb3BlOiBcInNlcnZlclwiLFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInZlcmlmeVBhc3N3b3JkXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJWZXJpZnkgdGhlIGN1cnJlbnQgdXNlcidzIHBhc3N3b3JkXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdXG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgcGFzc3dvcmQgfSA9IGN0eC5ib2R5O1xuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKCFhd2FpdCB2YWxpZGF0ZVBhc3N3b3JkKGN0eCwge1xuXHRcdHBhc3N3b3JkLFxuXHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9QQVNTV09SRCB9KTtcblx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xufSk7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgcmVxdWVzdFBhc3N3b3JkUmVzZXQsIHJlcXVlc3RQYXNzd29yZFJlc2V0Q2FsbGJhY2ssIHJlc2V0UGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/session.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   freshSessionMiddleware: () => (/* binding */ freshSessionMiddleware),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionFromCtx: () => (/* binding */ getSessionFromCtx),\n/* harmony export */   listSessions: () => (/* binding */ listSessions),\n/* harmony export */   requestOnlySessionMiddleware: () => (/* binding */ requestOnlySessionMiddleware),\n/* harmony export */   revokeOtherSessions: () => (/* binding */ revokeOtherSessions),\n/* harmony export */   revokeSession: () => (/* binding */ revokeSession),\n/* harmony export */   revokeSessions: () => (/* binding */ revokeSessions),\n/* harmony export */   sensitiveSessionMiddleware: () => (/* binding */ sensitiveSessionMiddleware),\n/* harmony export */   sessionMiddleware: () => (/* binding */ sessionMiddleware)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/session.ts\nconst getSession = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/get-session\", {\n\tmethod: \"GET\",\n\toperationId: \"getSession\",\n\tquery: _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getSessionQuerySchema,\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"getSession\",\n\t\tdescription: \"Get the current session\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tnullable: true,\n\t\t\t\tproperties: {\n\t\t\t\t\tsession: { $ref: \"#/components/schemas/Session\" },\n\t\t\t\t\tuser: { $ref: \"#/components/schemas/User\" }\n\t\t\t\t},\n\t\t\t\trequired: [\"session\", \"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\t\tif (!sessionCookieToken) return null;\n\t\tconst sessionDataCookie = (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_5__.getChunkedCookie)(ctx, ctx.context.authCookies.sessionData.name);\n\t\tlet sessionDataPayload = null;\n\t\tif (sessionDataCookie) {\n\t\t\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\t\t\tif (strategy === \"jwe\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.symmetricDecodeJWT)(sessionDataCookie, ctx.context.secret, \"better-auth-session\");\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else if (strategy === \"jwt\") {\n\t\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyJWT)(sessionDataCookie, ctx.context.secret);\n\t\t\t\tif (payload && payload.session && payload.user) sessionDataPayload = {\n\t\t\t\t\tsession: {\n\t\t\t\t\t\tsession: payload.session,\n\t\t\t\t\t\tuser: payload.user,\n\t\t\t\t\t\tupdatedAt: payload.updatedAt,\n\t\t\t\t\t\tversion: payload.version\n\t\t\t\t\t},\n\t\t\t\t\texpiresAt: payload.exp ? payload.exp * 1e3 : Date.now()\n\t\t\t\t};\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_12__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_11__.base64Url.decode(sessionDataCookie)));\n\t\t\t\tif (parsed) if (await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_13__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(ctx.context.secret, JSON.stringify({\n\t\t\t\t\t...parsed.session,\n\t\t\t\t\texpiresAt: parsed.expiresAt\n\t\t\t\t}), parsed.signature)) sessionDataPayload = parsed;\n\t\t\t\telse {\n\t\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\t\treturn ctx.json(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst dontRememberMe = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\t\t/**\n\t\t* If session data is present in the cookie, check if it should be used or refreshed\n\t\t*/\n\t\tif (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n\t\t\tconst session$1 = sessionDataPayload.session;\n\t\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\t\tlet expectedVersion = \"1\";\n\t\t\tif (versionConfig) {\n\t\t\t\tif (typeof versionConfig === \"string\") expectedVersion = versionConfig;\n\t\t\t\telse if (typeof versionConfig === \"function\") {\n\t\t\t\t\tconst result = versionConfig(session$1.session, session$1.user);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((session$1.version || \"1\") !== expectedVersion) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\telse {\n\t\t\t\tconst cachedSessionExpiresAt = new Date(session$1.session.expiresAt);\n\t\t\t\tif (sessionDataPayload.expiresAt < Date.now() || cachedSessionExpiresAt < /* @__PURE__ */ new Date()) (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.expireCookie)(ctx, ctx.context.authCookies.sessionData);\n\t\t\t\telse {\n\t\t\t\t\tconst cookieRefreshCache = ctx.context.sessionConfig.cookieRefreshCache;\n\t\t\t\t\tif (cookieRefreshCache === false) {\n\t\t\t\t\t\tctx.context.session = session$1;\n\t\t\t\t\t\tconst parsedSession$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedUser$2 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedSession$2,\n\t\t\t\t\t\t\tuser: parsedUser$2\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (sessionDataPayload.expiresAt - Date.now() < cookieRefreshCache.updateAge * 1e3) {\n\t\t\t\t\t\tconst newExpiresAt = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.options.session?.cookieCache?.maxAge || 300, \"sec\");\n\t\t\t\t\t\tconst refreshedSession = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\t\t\texpiresAt: newExpiresAt\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: session$1.user,\n\t\t\t\t\t\t\tupdatedAt: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, refreshedSession, false);\n\t\t\t\t\t\tconst parsedRefreshedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.session,\n\t\t\t\t\t\t\texpiresAt: new Date(refreshedSession.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.session.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst parsedRefreshedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t\t...refreshedSession.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(refreshedSession.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(refreshedSession.user.updatedAt)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\t\tsession: parsedRefreshedSession,\n\t\t\t\t\t\t\tuser: parsedRefreshedUser\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.session,\n\t\t\t\t\t\texpiresAt: new Date(session$1.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(session$1.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.session.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, {\n\t\t\t\t\t\t...session$1.user,\n\t\t\t\t\t\tcreatedAt: new Date(session$1.user.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(session$1.user.updatedAt)\n\t\t\t\t\t});\n\t\t\t\t\tctx.context.session = {\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t};\n\t\t\t\t\treturn ctx.json({\n\t\t\t\t\t\tsession: parsedSession$1,\n\t\t\t\t\t\tuser: parsedUser$1\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n\t\tctx.context.session = session;\n\t\tif (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\tif (session)\n /**\n\t\t\t* if session expired clean up the session\n\t\t\t*/\n\t\t\tawait ctx.context.internalAdapter.deleteSession(session.session.token);\n\t\t\treturn ctx.json(null);\n\t\t}\n\t\t/**\n\t\t* We don't need to update the session if the user doesn't want to be remembered\n\t\t* or if the session refresh is disabled\n\t\t*/\n\t\tif (dontRememberMe || ctx.query?.disableRefresh) {\n\t\t\tconst parsedSession$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedSession$1,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tconst expiresIn = ctx.context.sessionConfig.expiresIn;\n\t\tconst updateAge = ctx.context.sessionConfig.updateAge;\n\t\tif (session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3 <= Date.now() && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n\t\t\tconst updatedSession = await ctx.context.internalAdapter.updateSession(session.session.token, {\n\t\t\t\texpiresAt: (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(ctx.context.sessionConfig.expiresIn, \"sec\"),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t});\n\t\t\tif (!updatedSession) {\n\t\t\t\t/**\n\t\t\t\t* Handle case where session update fails (e.g., concurrent deletion)\n\t\t\t\t*/\n\t\t\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.deleteSessionCookie)(ctx);\n\t\t\t\treturn ctx.json(null, { status: 401 });\n\t\t\t}\n\t\t\tconst maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n\t\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setSessionCookie)(ctx, {\n\t\t\t\tsession: updatedSession,\n\t\t\t\tuser: session.user\n\t\t\t}, false, { maxAge });\n\t\t\tconst parsedUpdatedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, updatedSession);\n\t\t\tconst parsedUser$1 = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\t\treturn ctx.json({\n\t\t\t\tsession: parsedUpdatedSession,\n\t\t\t\tuser: parsedUser$1\n\t\t\t});\n\t\t}\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_6__.setCookieCache)(ctx, session, !!dontRememberMe);\n\t\tconst parsedSession = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session.session);\n\t\tconst parsedUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\treturn ctx.json({\n\t\t\tsession: parsedSession,\n\t\t\tuser: parsedUser\n\t\t});\n\t} catch (error) {\n\t\tctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t}\n});\nconst getSessionFromCtx = async (ctx, config) => {\n\tif (ctx.context.session) return ctx.context.session;\n\tconst session = await getSession()({\n\t\t...ctx,\n\t\tasResponse: false,\n\t\theaders: ctx.headers,\n\t\treturnHeaders: false,\n\t\treturnStatus: false,\n\t\tquery: {\n\t\t\t...config,\n\t\t\t...ctx.query\n\t\t}\n\t}).catch((e) => {\n\t\treturn null;\n\t});\n\tctx.context.session = session;\n\treturn session;\n};\n/**\n* The middleware forces the endpoint to require a valid session.\n*/\nconst sessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session and ignores cookie cache.\n* This should be used for sensitive operations like password changes, account deletion, etc.\n* to ensure that revoked sessions cannot be used even if they're still cached in cookies.\n*/\nconst sensitiveSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx, { disableCookieCache: true });\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware allows you to call the endpoint on the client if session is valid.\n* However, if called on the server, no session is required.\n*/\nconst requestOnlySessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session && (ctx.request || ctx.headers)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\treturn { session };\n});\n/**\n* This middleware forces the endpoint to require a valid session,\n* as well as making sure the session is fresh before proceeding.\n*\n* Session freshness check will be skipped if the session config's freshAge\n* is set to 0\n*/\nconst freshSessionMiddleware = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthMiddleware)(async (ctx) => {\n\tconst session = await getSessionFromCtx(ctx);\n\tif (!session?.session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tif (ctx.context.sessionConfig.freshAge === 0) return { session };\n\tconst freshAge = ctx.context.sessionConfig.freshAge;\n\tconst lastUpdated = new Date(session.session.updatedAt || session.session.createdAt).getTime();\n\tif (!(Date.now() - lastUpdated < freshAge * 1e3)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"FORBIDDEN\", { message: \"Session is not fresh\" });\n\treturn { session };\n});\n/**\n* user active sessions list\n*/\nconst listSessions = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/list-sessions\", {\n\tmethod: \"GET\",\n\toperationId: \"listUserSessions\",\n\tuse: [sessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"listUserSessions\",\n\t\tdescription: \"List all active sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"array\",\n\t\t\t\titems: { $ref: \"#/components/schemas/Session\" }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tconst activeSessions = (await ctx.context.internalAdapter.listSessions(ctx.context.session.user.id)).filter((session) => {\n\t\t\treturn session.expiresAt > /* @__PURE__ */ new Date();\n\t\t});\n\t\treturn ctx.json(activeSessions.map((session) => (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseSessionOutput)(ctx.context.options, session)));\n\t} catch (e) {\n\t\tctx.context.logger.error(e);\n\t\tthrow ctx.error(\"INTERNAL_SERVER_ERROR\");\n\t}\n});\n/**\n* revoke a single session\n*/\nconst revokeSession = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-session\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_14__.object({ token: zod__WEBPACK_IMPORTED_MODULE_14__.string().meta({ description: \"The token to revoke\" }) }),\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke a single session\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: { token: {\n\t\t\t\ttype: \"string\",\n\t\t\t\tdescription: \"The token to revoke\"\n\t\t\t} },\n\t\t\trequired: [\"token\"]\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if the session was revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst token = ctx.body.token;\n\tif ((await ctx.context.internalAdapter.findSession(token))?.session.userId === ctx.context.session.user.id) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(token);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\n/**\n* revoke all user sessions\n*/\nconst revokeSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-sessions\", {\n\tmethod: \"POST\",\n\tuse: [sensitiveSessionMiddleware],\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all sessions for the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\ttry {\n\t\tawait ctx.context.internalAdapter.deleteSessions(ctx.context.session.user.id);\n\t} catch (error) {\n\t\tctx.context.logger.error(error && typeof error === \"object\" && \"name\" in error ? error.name : \"\", error);\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\");\n\t}\n\treturn ctx.json({ status: true });\n});\nconst revokeOtherSessions = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/revoke-other-sessions\", {\n\tmethod: \"POST\",\n\trequireHeaders: true,\n\tuse: [sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\tdescription: \"Revoke all other sessions for the user except the current one\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { status: {\n\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\tdescription: \"Indicates if all other sessions were revoked successfully\"\n\t\t\t\t} },\n\t\t\t\trequired: [\"status\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst session = ctx.context.session;\n\tif (!session.user) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNAUTHORIZED\");\n\tconst otherSessions = (await ctx.context.internalAdapter.listSessions(session.user.id)).filter((session$1) => {\n\t\treturn session$1.expiresAt > /* @__PURE__ */ new Date();\n\t}).filter((session$1) => session$1.token !== ctx.context.session.session.token);\n\tawait Promise.all(otherSessions.map((session$1) => ctx.context.internalAdapter.deleteSession(session$1.token)));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=session.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3Nlc3Npb24ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0M7QUFDMkI7QUFDOUM7QUFDeUM7QUFDckM7QUFDMEQ7QUFDb0I7QUFDbkQ7QUFDSDtBQUMvQjtBQUNjO0FBQzBDO0FBQzNCO0FBQ0g7QUFDRTs7QUFFckQ7QUFDQSx5QkFBeUIsMEVBQWtCO0FBQzNDO0FBQ0E7QUFDQSxRQUFRLDZFQUFxQjtBQUM3QjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNDQUFzQztBQUN0RCxhQUFhO0FBQ2IsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0RUFBZ0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsbUVBQWtCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdFQUFZO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCLDBEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxLQUFLLGdFQUFZO0FBQ2pCO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsbUJBQW1CLHNFQUFhLENBQUMsOERBQU0sUUFBUSxpRUFBUztBQUN4RCwwQkFBMEIsb0VBQVU7QUFDcEM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUssZ0VBQVk7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsZ0VBQVk7QUFDbkU7QUFDQTtBQUNBLDBHQUEwRyxnRUFBWTtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixrRUFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsMkJBQTJCLCtEQUFlO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLDJCQUEyQix3REFBTztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtFQUFjO0FBQzFCLHFDQUFxQyxrRUFBa0I7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1Asa0NBQWtDLCtEQUFlO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLDZCQUE2QixrRUFBa0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sMEJBQTBCLCtEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLHVFQUFtQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQWtCO0FBQzdDLHdCQUF3QiwrREFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0RBQU87QUFDdEI7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVFQUFtQjtBQUN2Qiw0QkFBNEIsYUFBYTtBQUN6QztBQUNBO0FBQ0EsU0FBUyxvRUFBZ0I7QUFDekI7QUFDQTtBQUNBLElBQUksV0FBVyxRQUFRO0FBQ3ZCLGdDQUFnQyxrRUFBa0I7QUFDbEQsd0JBQXdCLCtEQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLFFBQVEsa0VBQWM7QUFDdEIsd0JBQXdCLGtFQUFrQjtBQUMxQyxxQkFBcUIsK0RBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEdBQUc7QUFDSDtBQUNBLFlBQVksaURBQVEsNEJBQTRCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNqRztBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDRFQUFvQjtBQUM5QztBQUNBLGtDQUFrQyxpREFBUTtBQUMxQyxVQUFVO0FBQ1YsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQW9CO0FBQ3ZELGdEQUFnRCwwQkFBMEI7QUFDMUUsa0NBQWtDLGlEQUFRO0FBQzFDLFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEVBQW9CO0FBQ3pEO0FBQ0Esa0VBQWtFLGlEQUFRO0FBQzFFLFVBQVU7QUFDVixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNEVBQW9CO0FBQ25EO0FBQ0Esa0NBQWtDLGlEQUFRO0FBQzFDLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0EsNkRBQTZELGlEQUFRLGdCQUFnQixpQ0FBaUM7QUFDdEgsVUFBVTtBQUNWLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMEVBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQSxjQUFjLHNCQUFzQjtBQUNwQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtEQUFrRCxrRUFBa0I7QUFDcEUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsMEVBQWtCO0FBQ3hDO0FBQ0EsT0FBTyx3Q0FBUSxHQUFHLE9BQU8sd0NBQVEsVUFBVSxvQ0FBb0MsR0FBRztBQUNsRjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsaUJBQWlCLFdBQVcsc0JBQXNCO0FBQ2xEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxTQUFTO0FBQ1QsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwwRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7QUFDRCw0QkFBNEIsMEVBQWtCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSw4QkFBOEIsaURBQVE7QUFDdEM7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLG1CQUFtQixjQUFjO0FBQ2pDLENBQUM7O0FBRUQ7QUFDZ047QUFDaE4iLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zZXNzaW9uLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXREYXRlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL2RhdGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNlc3Npb25PdXRwdXQsIHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9kYi9pbmRleC5tanNcIjtcbmltcG9ydCB7IHN5bW1ldHJpY0RlY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4uLy4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgXCIuLi8uLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRDaHVua2VkQ29va2llLCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgfSBmcm9tIFwiLi4vLi4vY29va2llcy9zZXNzaW9uLXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgZGVsZXRlU2Vzc2lvbkNvb2tpZSwgZXhwaXJlQ29va2llLCBzZXRDb29raWVDYWNoZSwgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgc2FmZUpTT05QYXJzZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiO1xuaW1wb3J0ICogYXMgeiBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCJiZXR0ZXItY2FsbFwiO1xuaW1wb3J0IHsgY3JlYXRlQXV0aEVuZHBvaW50LCBjcmVhdGVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcbmltcG9ydCB7IGJhc2U2NFVybCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvYmFzZTY0XCI7XG5pbXBvcnQgeyBiaW5hcnkgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2JpbmFyeVwiO1xuaW1wb3J0IHsgY3JlYXRlSE1BQyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvdXRpbHMvaG1hY1wiO1xuXG4vLyNyZWdpb24gc3JjL2FwaS9yb3V0ZXMvc2Vzc2lvbi50c1xuY29uc3QgZ2V0U2Vzc2lvbiA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9nZXQtc2Vzc2lvblwiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0b3BlcmF0aW9uSWQ6IFwiZ2V0U2Vzc2lvblwiLFxuXHRxdWVyeTogZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImdldFNlc3Npb25cIixcblx0XHRkZXNjcmlwdGlvbjogXCJHZXQgdGhlIGN1cnJlbnQgc2Vzc2lvblwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRudWxsYWJsZTogdHJ1ZSxcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHNlc3Npb246IHsgJHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9TZXNzaW9uXCIgfSxcblx0XHRcdFx0XHR1c2VyOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiIH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInNlc3Npb25cIiwgXCJ1c2VyXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0dHJ5IHtcblx0XHRjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRcdGlmICghc2Vzc2lvbkNvb2tpZVRva2VuKSByZXR1cm4gbnVsbDtcblx0XHRjb25zdCBzZXNzaW9uRGF0YUNvb2tpZSA9IGdldENodW5rZWRDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lKTtcblx0XHRsZXQgc2Vzc2lvbkRhdGFQYXlsb2FkID0gbnVsbDtcblx0XHRpZiAoc2Vzc2lvbkRhdGFDb29raWUpIHtcblx0XHRcdGNvbnN0IHN0cmF0ZWd5ID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uc3RyYXRlZ3kgfHwgXCJjb21wYWN0XCI7XG5cdFx0XHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIHtcblx0XHRcdFx0Y29uc3QgcGF5bG9hZCA9IGF3YWl0IHN5bW1ldHJpY0RlY29kZUpXVChzZXNzaW9uRGF0YUNvb2tpZSwgY3R4LmNvbnRleHQuc2VjcmV0LCBcImJldHRlci1hdXRoLXNlc3Npb25cIik7XG5cdFx0XHRcdGlmIChwYXlsb2FkICYmIHBheWxvYWQuc2Vzc2lvbiAmJiBwYXlsb2FkLnVzZXIpIHNlc3Npb25EYXRhUGF5bG9hZCA9IHtcblx0XHRcdFx0XHRzZXNzaW9uOiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHR1c2VyOiBwYXlsb2FkLnVzZXIsXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHBheWxvYWQudXBkYXRlZEF0LFxuXHRcdFx0XHRcdFx0dmVyc2lvbjogcGF5bG9hZC52ZXJzaW9uXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBheWxvYWQuZXhwID8gcGF5bG9hZC5leHAgKiAxZTMgOiBEYXRlLm5vdygpXG5cdFx0XHRcdH07XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwiand0XCIpIHtcblx0XHRcdFx0Y29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeUpXVChzZXNzaW9uRGF0YUNvb2tpZSwgY3R4LmNvbnRleHQuc2VjcmV0KTtcblx0XHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikgc2Vzc2lvbkRhdGFQYXlsb2FkID0ge1xuXHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHBheWxvYWQuc2Vzc2lvbixcblx0XHRcdFx0XHRcdHVzZXI6IHBheWxvYWQudXNlcixcblx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogcGF5bG9hZC51cGRhdGVkQXQsXG5cdFx0XHRcdFx0XHR2ZXJzaW9uOiBwYXlsb2FkLnZlcnNpb25cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGV4cGlyZXNBdDogcGF5bG9hZC5leHAgPyBwYXlsb2FkLmV4cCAqIDFlMyA6IERhdGUubm93KClcblx0XHRcdFx0fTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0ZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0XHRcdHJldHVybiBjdHguanNvbihudWxsKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgcGFyc2VkID0gc2FmZUpTT05QYXJzZShiaW5hcnkuZGVjb2RlKGJhc2U2NFVybC5kZWNvZGUoc2Vzc2lvbkRhdGFDb29raWUpKSk7XG5cdFx0XHRcdGlmIChwYXJzZWQpIGlmIChhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShjdHguY29udGV4dC5zZWNyZXQsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHQuLi5wYXJzZWQuc2Vzc2lvbixcblx0XHRcdFx0XHRleHBpcmVzQXQ6IHBhcnNlZC5leHBpcmVzQXRcblx0XHRcdFx0fSksIHBhcnNlZC5zaWduYXR1cmUpKSBzZXNzaW9uRGF0YVBheWxvYWQgPSBwYXJzZWQ7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGV4cGlyZUNvb2tpZShjdHgsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhKTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgZG9udFJlbWVtYmVyTWUgPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmRvbnRSZW1lbWJlclRva2VuLm5hbWUsIGN0eC5jb250ZXh0LnNlY3JldCk7XG5cdFx0LyoqXG5cdFx0KiBJZiBzZXNzaW9uIGRhdGEgaXMgcHJlc2VudCBpbiB0aGUgY29va2llLCBjaGVjayBpZiBpdCBzaG91bGQgYmUgdXNlZCBvciByZWZyZXNoZWRcblx0XHQqL1xuXHRcdGlmIChzZXNzaW9uRGF0YVBheWxvYWQ/LnNlc3Npb24gJiYgY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCAmJiAhY3R4LnF1ZXJ5Py5kaXNhYmxlQ29va2llQ2FjaGUpIHtcblx0XHRcdGNvbnN0IHNlc3Npb24kMSA9IHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uO1xuXHRcdFx0Y29uc3QgdmVyc2lvbkNvbmZpZyA9IGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnZlcnNpb247XG5cdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRpZiAodmVyc2lvbkNvbmZpZykge1xuXHRcdFx0XHRpZiAodHlwZW9mIHZlcnNpb25Db25maWcgPT09IFwic3RyaW5nXCIpIGV4cGVjdGVkVmVyc2lvbiA9IHZlcnNpb25Db25maWc7XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiB2ZXJzaW9uQ29uZmlnID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSB2ZXJzaW9uQ29uZmlnKHNlc3Npb24kMS5zZXNzaW9uLCBzZXNzaW9uJDEudXNlcik7XG5cdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKChzZXNzaW9uJDEudmVyc2lvbiB8fCBcIjFcIikgIT09IGV4cGVjdGVkVmVyc2lvbikgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IGNhY2hlZFNlc3Npb25FeHBpcmVzQXQgPSBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5leHBpcmVzQXQpO1xuXHRcdFx0XHRpZiAoc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdCA8IERhdGUubm93KCkgfHwgY2FjaGVkU2Vzc2lvbkV4cGlyZXNBdCA8IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSBleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YSk7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGNvb2tpZVJlZnJlc2hDYWNoZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuY29va2llUmVmcmVzaENhY2hlO1xuXHRcdFx0XHRcdGlmIChjb29raWVSZWZyZXNoQ2FjaGUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbiQxO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQyID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdGV4cGlyZXNBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkVXNlciQyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUoc2Vzc2lvbiQxLnVzZXIuY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBuZXcgRGF0ZShzZXNzaW9uJDEudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQyXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25EYXRhUGF5bG9hZC5leHBpcmVzQXQgLSBEYXRlLm5vdygpIDwgY29va2llUmVmcmVzaENhY2hlLnVwZGF0ZUFnZSAqIDFlMykge1xuXHRcdFx0XHRcdFx0Y29uc3QgbmV3RXhwaXJlc0F0ID0gZ2V0RGF0ZShjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5tYXhBZ2UgfHwgMzAwLCBcInNlY1wiKTtcblx0XHRcdFx0XHRcdGNvbnN0IHJlZnJlc2hlZFNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHtcblx0XHRcdFx0XHRcdFx0XHQuLi5zZXNzaW9uJDEuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ld0V4cGlyZXNBdFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBzZXNzaW9uJDEudXNlcixcblx0XHRcdFx0XHRcdFx0dXBkYXRlZEF0OiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0YXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCByZWZyZXNoZWRTZXNzaW9uLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRSZWZyZXNoZWRTZXNzaW9uID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucmVmcmVzaGVkU2Vzc2lvbi5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHJlZnJlc2hlZFNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZFJlZnJlc2hlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0XHQuLi5yZWZyZXNoZWRTZXNzaW9uLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocmVmcmVzaGVkU2Vzc2lvbi51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocmVmcmVzaGVkU2Vzc2lvbi51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y3R4LmNvbnRleHQuc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkUmVmcmVzaGVkU2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkUmVmcmVzaGVkVXNlclxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHBhcnNlZFJlZnJlc2hlZFNlc3Npb24sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlZFJlZnJlc2hlZFVzZXJcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBwYXJzZWRTZXNzaW9uJDEgPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmV4cGlyZXNBdCksXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS5zZXNzaW9uLnVwZGF0ZWRBdClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0Li4uc2Vzc2lvbiQxLnVzZXIsXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHNlc3Npb24kMS51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRjdHguY29udGV4dC5zZXNzaW9uID0ge1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkU2Vzc2lvbiQxLFxuXHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdFx0XHRcdFx0c2Vzc2lvbjogcGFyc2VkU2Vzc2lvbiQxLFxuXHRcdFx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kU2Vzc2lvbihzZXNzaW9uQ29va2llVG9rZW4pO1xuXHRcdGN0eC5jb250ZXh0LnNlc3Npb24gPSBzZXNzaW9uO1xuXHRcdGlmICghc2Vzc2lvbiB8fCBzZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0IDwgLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCkpIHtcblx0XHRcdGRlbGV0ZVNlc3Npb25Db29raWUoY3R4KTtcblx0XHRcdGlmIChzZXNzaW9uKVxuIC8qKlxuXHRcdFx0KiBpZiBzZXNzaW9uIGV4cGlyZWQgY2xlYW4gdXAgdGhlIHNlc3Npb25cblx0XHRcdCovXG5cdFx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRcdFx0cmV0dXJuIGN0eC5qc29uKG51bGwpO1xuXHRcdH1cblx0XHQvKipcblx0XHQqIFdlIGRvbid0IG5lZWQgdG8gdXBkYXRlIHRoZSBzZXNzaW9uIGlmIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCB0byBiZSByZW1lbWJlcmVkXG5cdFx0KiBvciBpZiB0aGUgc2Vzc2lvbiByZWZyZXNoIGlzIGRpc2FibGVkXG5cdFx0Ki9cblx0XHRpZiAoZG9udFJlbWVtYmVyTWUgfHwgY3R4LnF1ZXJ5Py5kaXNhYmxlUmVmcmVzaCkge1xuXHRcdFx0Y29uc3QgcGFyc2VkU2Vzc2lvbiQxID0gcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24uc2Vzc2lvbik7XG5cdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24kMSxcblx0XHRcdFx0dXNlcjogcGFyc2VkVXNlciQxXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Y29uc3QgZXhwaXJlc0luID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy5leHBpcmVzSW47XG5cdFx0Y29uc3QgdXBkYXRlQWdlID0gY3R4LmNvbnRleHQuc2Vzc2lvbkNvbmZpZy51cGRhdGVBZ2U7XG5cdFx0aWYgKHNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gZXhwaXJlc0luICogMWUzICsgdXBkYXRlQWdlICogMWUzIDw9IERhdGUubm93KCkgJiYgKCFjdHgucXVlcnk/LmRpc2FibGVSZWZyZXNoIHx8ICFjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmRpc2FibGVTZXNzaW9uUmVmcmVzaCkpIHtcblx0XHRcdGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0gYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVNlc3Npb24oc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCB7XG5cdFx0XHRcdGV4cGlyZXNBdDogZ2V0RGF0ZShjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmV4cGlyZXNJbiwgXCJzZWNcIiksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCF1cGRhdGVkU2Vzc2lvbikge1xuXHRcdFx0XHQvKipcblx0XHRcdFx0KiBIYW5kbGUgY2FzZSB3aGVyZSBzZXNzaW9uIHVwZGF0ZSBmYWlscyAoZS5nLiwgY29uY3VycmVudCBkZWxldGlvbilcblx0XHRcdFx0Ki9cblx0XHRcdFx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRcdFx0XHRyZXR1cm4gY3R4Lmpzb24obnVsbCwgeyBzdGF0dXM6IDQwMSB9KTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IG1heEFnZSA9ICh1cGRhdGVkU2Vzc2lvbi5leHBpcmVzQXQudmFsdWVPZigpIC0gRGF0ZS5ub3coKSkgLyAxZTM7XG5cdFx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0XHRzZXNzaW9uOiB1cGRhdGVkU2Vzc2lvbixcblx0XHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyXG5cdFx0XHR9LCBmYWxzZSwgeyBtYXhBZ2UgfSk7XG5cdFx0XHRjb25zdCBwYXJzZWRVcGRhdGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCB1cGRhdGVkU2Vzc2lvbik7XG5cdFx0XHRjb25zdCBwYXJzZWRVc2VyJDEgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0XHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlZFVwZGF0ZWRTZXNzaW9uLFxuXHRcdFx0XHR1c2VyOiBwYXJzZWRVc2VyJDFcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRhd2FpdCBzZXRDb29raWVDYWNoZShjdHgsIHNlc3Npb24sICEhZG9udFJlbWVtYmVyTWUpO1xuXHRcdGNvbnN0IHBhcnNlZFNlc3Npb24gPSBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi5zZXNzaW9uKTtcblx0XHRjb25zdCBwYXJzZWRVc2VyID0gcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIHNlc3Npb24udXNlcik7XG5cdFx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHNlc3Npb246IHBhcnNlZFNlc3Npb24sXG5cdFx0XHR1c2VyOiBwYXJzZWRVc2VyXG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIGVycm9yKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfU0VTU0lPTiB9KTtcblx0fVxufSk7XG5jb25zdCBnZXRTZXNzaW9uRnJvbUN0eCA9IGFzeW5jIChjdHgsIGNvbmZpZykgPT4ge1xuXHRpZiAoY3R4LmNvbnRleHQuc2Vzc2lvbikgcmV0dXJuIGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKCkoe1xuXHRcdC4uLmN0eCxcblx0XHRhc1Jlc3BvbnNlOiBmYWxzZSxcblx0XHRoZWFkZXJzOiBjdHguaGVhZGVycyxcblx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZSxcblx0XHRyZXR1cm5TdGF0dXM6IGZhbHNlLFxuXHRcdHF1ZXJ5OiB7XG5cdFx0XHQuLi5jb25maWcsXG5cdFx0XHQuLi5jdHgucXVlcnlcblx0XHR9XG5cdH0pLmNhdGNoKChlKSA9PiB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0pO1xuXHRjdHguY29udGV4dC5zZXNzaW9uID0gc2Vzc2lvbjtcblx0cmV0dXJuIHNlc3Npb247XG59O1xuLyoqXG4qIFRoZSBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24uXG4qL1xuY29uc3Qgc2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24gYW5kIGlnbm9yZXMgY29va2llIGNhY2hlLlxuKiBUaGlzIHNob3VsZCBiZSB1c2VkIGZvciBzZW5zaXRpdmUgb3BlcmF0aW9ucyBsaWtlIHBhc3N3b3JkIGNoYW5nZXMsIGFjY291bnQgZGVsZXRpb24sIGV0Yy5cbiogdG8gZW5zdXJlIHRoYXQgcmV2b2tlZCBzZXNzaW9ucyBjYW5ub3QgYmUgdXNlZCBldmVuIGlmIHRoZXkncmUgc3RpbGwgY2FjaGVkIGluIGNvb2tpZXMuXG4qL1xuY29uc3Qgc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgsIHsgZGlzYWJsZUNvb2tpZUNhY2hlOiB0cnVlIH0pO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGFsbG93cyB5b3UgdG8gY2FsbCB0aGUgZW5kcG9pbnQgb24gdGhlIGNsaWVudCBpZiBzZXNzaW9uIGlzIHZhbGlkLlxuKiBIb3dldmVyLCBpZiBjYWxsZWQgb24gdGhlIHNlcnZlciwgbm8gc2Vzc2lvbiBpcyByZXF1aXJlZC5cbiovXG5jb25zdCByZXF1ZXN0T25seVNlc3Npb25NaWRkbGV3YXJlID0gY3JlYXRlQXV0aE1pZGRsZXdhcmUoYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbkZyb21DdHgoY3R4KTtcblx0aWYgKCFzZXNzaW9uPy5zZXNzaW9uICYmIChjdHgucmVxdWVzdCB8fCBjdHguaGVhZGVycykpIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogVGhpcyBtaWRkbGV3YXJlIGZvcmNlcyB0aGUgZW5kcG9pbnQgdG8gcmVxdWlyZSBhIHZhbGlkIHNlc3Npb24sXG4qIGFzIHdlbGwgYXMgbWFraW5nIHN1cmUgdGhlIHNlc3Npb24gaXMgZnJlc2ggYmVmb3JlIHByb2NlZWRpbmcuXG4qXG4qIFNlc3Npb24gZnJlc2huZXNzIGNoZWNrIHdpbGwgYmUgc2tpcHBlZCBpZiB0aGUgc2Vzc2lvbiBjb25maWcncyBmcmVzaEFnZVxuKiBpcyBzZXQgdG8gMFxuKi9cbmNvbnN0IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUgPSBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbUN0eChjdHgpO1xuXHRpZiAoIXNlc3Npb24/LnNlc3Npb24pIHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiKTtcblx0aWYgKGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgPT09IDApIHJldHVybiB7IHNlc3Npb24gfTtcblx0Y29uc3QgZnJlc2hBZ2UgPSBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlO1xuXHRjb25zdCBsYXN0VXBkYXRlZCA9IG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQgfHwgc2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCkuZ2V0VGltZSgpO1xuXHRpZiAoIShEYXRlLm5vdygpIC0gbGFzdFVwZGF0ZWQgPCBmcmVzaEFnZSAqIDFlMykpIHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IFwiU2Vzc2lvbiBpcyBub3QgZnJlc2hcIiB9KTtcblx0cmV0dXJuIHsgc2Vzc2lvbiB9O1xufSk7XG4vKipcbiogdXNlciBhY3RpdmUgc2Vzc2lvbnMgbGlzdFxuKi9cbmNvbnN0IGxpc3RTZXNzaW9ucyA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9saXN0LXNlc3Npb25zXCIsIHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRvcGVyYXRpb25JZDogXCJsaXN0VXNlclNlc3Npb25zXCIsXG5cdHVzZTogW3Nlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJsaXN0VXNlclNlc3Npb25zXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiTGlzdCBhbGwgYWN0aXZlIHNlc3Npb25zIGZvciB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcImFycmF5XCIsXG5cdFx0XHRcdGl0ZW1zOiB7ICRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvU2Vzc2lvblwiIH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHR0cnkge1xuXHRcdGNvbnN0IGFjdGl2ZVNlc3Npb25zID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saXN0U2Vzc2lvbnMoY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmlkKSkuZmlsdGVyKChzZXNzaW9uKSA9PiB7XG5cdFx0XHRyZXR1cm4gc2Vzc2lvbi5leHBpcmVzQXQgPiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oYWN0aXZlU2Vzc2lvbnMubWFwKChzZXNzaW9uKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbikpKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihlKTtcblx0XHR0aHJvdyBjdHguZXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIik7XG5cdH1cbn0pO1xuLyoqXG4qIHJldm9rZSBhIHNpbmdsZSBzZXNzaW9uXG4qL1xuY29uc3QgcmV2b2tlU2Vzc2lvbiA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utc2Vzc2lvblwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgdG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXZva2VcIiB9KSB9KSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdGRlc2NyaXB0aW9uOiBcIlJldm9rZSBhIHNpbmdsZSBzZXNzaW9uXCIsXG5cdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRwcm9wZXJ0aWVzOiB7IHRva2VuOiB7XG5cdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB0b2tlbiB0byByZXZva2VcIlxuXHRcdFx0fSB9LFxuXHRcdFx0cmVxdWlyZWQ6IFtcInRva2VuXCJdXG5cdFx0fSB9IH0gfSxcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczogeyBzdGF0dXM6IHtcblx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJbmRpY2F0ZXMgaWYgdGhlIHNlc3Npb24gd2FzIHJldm9rZWQgc3VjY2Vzc2Z1bGx5XCJcblx0XHRcdFx0fSB9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1wic3RhdHVzXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0Y29uc3QgdG9rZW4gPSBjdHguYm9keS50b2tlbjtcblx0aWYgKChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFNlc3Npb24odG9rZW4pKT8uc2Vzc2lvbi51c2VySWQgPT09IGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCkgdHJ5IHtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbih0b2tlbik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlcnJvciA/IGVycm9yLm5hbWUgOiBcIlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuLyoqXG4qIHJldm9rZSBhbGwgdXNlciBzZXNzaW9uc1xuKi9cbmNvbnN0IHJldm9rZVNlc3Npb25zID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3Jldm9rZS1zZXNzaW9uc1wiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0cmVxdWlyZUhlYWRlcnM6IHRydWUsXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJSZXZva2UgYWxsIHNlc3Npb25zIGZvciB0aGUgdXNlclwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiBhbGwgc2Vzc2lvbnMgd2VyZSByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdHRyeSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5pZCk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKGVycm9yICYmIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJiBcIm5hbWVcIiBpbiBlcnJvciA/IGVycm9yLm5hbWUgOiBcIlwiLCBlcnJvcik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIpO1xuXHR9XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgcmV2b2tlT3RoZXJTZXNzaW9ucyA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9yZXZva2Utb3RoZXItc2Vzc2lvbnNcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRtZXRhZGF0YTogeyBvcGVuYXBpOiB7XG5cdFx0ZGVzY3JpcHRpb246IFwiUmV2b2tlIGFsbCBvdGhlciBzZXNzaW9ucyBmb3IgdGhlIHVzZXIgZXhjZXB0IHRoZSBjdXJyZW50IG9uZVwiLFxuXHRcdHJlc3BvbnNlczogeyBcIjIwMFwiOiB7XG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzXCIsXG5cdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRwcm9wZXJ0aWVzOiB7IHN0YXR1czoge1xuXHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiBhbGwgb3RoZXIgc2Vzc2lvbnMgd2VyZSByZXZva2VkIHN1Y2Nlc3NmdWxseVwiXG5cdFx0XHRcdH0gfSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRpZiAoIXNlc3Npb24udXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIpO1xuXHRjb25zdCBvdGhlclNlc3Npb25zID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5saXN0U2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKSkuZmlsdGVyKChzZXNzaW9uJDEpID0+IHtcblx0XHRyZXR1cm4gc2Vzc2lvbiQxLmV4cGlyZXNBdCA+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuXHR9KS5maWx0ZXIoKHNlc3Npb24kMSkgPT4gc2Vzc2lvbiQxLnRva2VuICE9PSBjdHguY29udGV4dC5zZXNzaW9uLnNlc3Npb24udG9rZW4pO1xuXHRhd2FpdCBQcm9taXNlLmFsbChvdGhlclNlc3Npb25zLm1hcCgoc2Vzc2lvbiQxKSA9PiBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbihzZXNzaW9uJDEudG9rZW4pKSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGZyZXNoU2Vzc2lvbk1pZGRsZXdhcmUsIGdldFNlc3Npb24sIGdldFNlc3Npb25Gcm9tQ3R4LCBsaXN0U2Vzc2lvbnMsIHJlcXVlc3RPbmx5U2Vzc2lvbk1pZGRsZXdhcmUsIHJldm9rZU90aGVyU2Vzc2lvbnMsIHJldm9rZVNlc3Npb24sIHJldm9rZVNlc3Npb25zLCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-in.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signInEmail: () => (/* binding */ signInEmail),\n/* harmony export */   signInSocial: () => (/* binding */ signInSocial)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../oauth2/link-account.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-in.ts\nconst socialSignInBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to after the user has signed in\" }).optional(),\n\tnewUserCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional(),\n\terrorCallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to redirect to if an error happens\" }).optional(),\n\tprovider: _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_9__.SocialProviderListEnum,\n\tdisableRedirect: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\" }).optional(),\n\tidToken: zod__WEBPACK_IMPORTED_MODULE_11__.optional(zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"ID token from the provider\" }),\n\t\tnonce: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Nonce used to generate the token\" }).optional(),\n\t\taccessToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Access token from the provider\" }).optional(),\n\t\trefreshToken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Refresh token from the provider\" }).optional(),\n\t\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_11__.number().meta({ description: \"Expiry date of the token\" }).optional()\n\t})),\n\tscopes: zod__WEBPACK_IMPORTED_MODULE_11__.array(zod__WEBPACK_IMPORTED_MODULE_11__.string()).meta({ description: \"Array of scopes to request from the provider. This will override the default scopes passed.\" }).optional(),\n\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\" }).optional(),\n\tloginHint: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The login hint to use for the authorization code request\" }).optional(),\n\tadditionalData: zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string(), zod__WEBPACK_IMPORTED_MODULE_11__.any()).optional().meta({ description: \"Additional data to be passed through the OAuth flow\" })\n});\nconst signInSocial = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/social\", {\n\tmethod: \"POST\",\n\toperationId: \"socialSignIn\",\n\tbody: socialSignInBodySchema,\n\tmetadata: {\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\tdescription: \"Sign in with a social provider\",\n\t\t\toperationId: \"socialSignIn\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\ttoken: { type: \"string\" },\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: { type: \"string\" },\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (c) => {\n\tconst provider = c.context.socialProviders.find((p) => p.id === c.body.provider);\n\tif (!provider) {\n\t\tc.context.logger.error(\"Provider not found. Make sure to add the provider in your auth config\", { provider: c.body.provider });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PROVIDER_NOT_FOUND });\n\t}\n\tif (c.body.idToken) {\n\t\tif (!provider.verifyIdToken) {\n\t\t\tc.context.logger.error(\"Provider does not support id token verification\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED });\n\t\t}\n\t\tconst { token, nonce } = c.body.idToken;\n\t\tif (!await provider.verifyIdToken(token, nonce)) {\n\t\t\tc.context.logger.error(\"Invalid id token\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_TOKEN });\n\t\t}\n\t\tconst userInfo = await provider.getUserInfo({\n\t\t\tidToken: token,\n\t\t\taccessToken: c.body.idToken.accessToken,\n\t\t\trefreshToken: c.body.idToken.refreshToken\n\t\t});\n\t\tif (!userInfo || !userInfo?.user) {\n\t\t\tc.context.logger.error(\"Failed to get user info\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\t\t}\n\t\tif (!userInfo.user.email) {\n\t\t\tc.context.logger.error(\"User email not found\", { provider: c.body.provider });\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND });\n\t\t}\n\t\tconst data = await (0,_oauth2_link_account_mjs__WEBPACK_IMPORTED_MODULE_4__.handleOAuthUserInfo)(c, {\n\t\t\tuserInfo: {\n\t\t\t\t...userInfo.user,\n\t\t\t\temail: userInfo.user.email,\n\t\t\t\tid: String(userInfo.user.id),\n\t\t\t\tname: userInfo.user.name || \"\",\n\t\t\t\timage: userInfo.user.image,\n\t\t\t\temailVerified: userInfo.user.emailVerified || false\n\t\t\t},\n\t\t\taccount: {\n\t\t\t\tproviderId: provider.id,\n\t\t\t\taccountId: String(userInfo.user.id),\n\t\t\t\taccessToken: c.body.idToken.accessToken\n\t\t\t},\n\t\t\tcallbackURL: c.body.callbackURL,\n\t\t\tdisableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n\t\t});\n\t\tif (data.error) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: data.error });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(c, data.data);\n\t\treturn c.json({\n\t\t\tredirect: false,\n\t\t\ttoken: data.data.session.token,\n\t\t\turl: void 0,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(c.context.options, data.data.user)\n\t\t});\n\t}\n\tconst { codeVerifier, state } = await (0,_oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_3__.generateState)(c, void 0, c.body.additionalData);\n\tconst url = await provider.createAuthorizationURL({\n\t\tstate,\n\t\tcodeVerifier,\n\t\tredirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n\t\tscopes: c.body.scopes,\n\t\tloginHint: c.body.loginHint\n\t});\n\tif (!c.body.disableRedirect) c.setHeader(\"Location\", url.toString());\n\treturn c.json({\n\t\turl: url.toString(),\n\t\tredirect: !c.body.disableRedirect\n\t});\n});\nconst signInEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/sign-in/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signInEmail\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.formCsrfMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\temail: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Email of the user\" }),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Password of the user\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Callback URL to use as a redirect for email verification\" }).optional(),\n\t\trememberMe: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"If this is false, the session will not be remembered. Default is `true`.\" }).default(true).optional()\n\t}),\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signInEmail\",\n\t\t\tdescription: \"Sign in with email and password\",\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success - Returns either session details or redirect URL\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tdescription: \"Session response when idToken is provided\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tredirect: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tenum: [false]\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: \"Session token\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\n\t\t\t\t\t\t\"redirect\",\n\t\t\t\t\t\t\"token\",\n\t\t\t\t\t\t\"user\"\n\t\t\t\t\t]\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tif (!ctx.context.options?.emailAndPassword?.enabled) {\n\t\tctx.context.logger.error(\"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password is not enabled\" });\n\t}\n\tconst { email, password } = ctx.body;\n\tif (!zod__WEBPACK_IMPORTED_MODULE_11__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\tconst user = await ctx.context.internalAdapter.findUserByEmail(email, { includeAccounts: true });\n\tif (!user) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"User not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst credentialAccount = user.accounts.find((a) => a.providerId === \"credential\");\n\tif (!credentialAccount) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Credential account not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tconst currentPassword = credentialAccount?.password;\n\tif (!currentPassword) {\n\t\tawait ctx.context.password.hash(password);\n\t\tctx.context.logger.error(\"Password not found\", { email });\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (!await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword\n\t})) {\n\t\tctx.context.logger.error(\"Invalid password\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD });\n\t}\n\tif (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n\t\tif (!ctx.context.options?.emailVerification?.sendVerificationEmail) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t\tif (ctx.context.options?.emailVerification?.sendOnSignIn) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_5__.createEmailVerificationToken)(ctx.context.secret, user.user.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = ctx.body.callbackURL ? encodeURIComponent(ctx.body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: user.user,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"FORBIDDEN\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.EMAIL_NOT_VERIFIED });\n\t}\n\tconst session = await ctx.context.internalAdapter.createSession(user.user.id, ctx.body.rememberMe === false);\n\tif (!session) {\n\t\tctx.context.logger.error(\"Failed to create session\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNAUTHORIZED\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t}\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_2__.setSessionCookie)(ctx, {\n\t\tsession,\n\t\tuser: user.user\n\t}, ctx.body.rememberMe === false);\n\tif (ctx.body.callbackURL) ctx.setHeader(\"Location\", ctx.body.callbackURL);\n\treturn ctx.json({\n\t\tredirect: !!ctx.body.callbackURL,\n\t\ttoken: session.token,\n\t\turl: ctx.body.callbackURL,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, user.user)\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-in.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24taW4ubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXNEO0FBQ2U7QUFDVjtBQUNKO0FBQ2E7QUFDSTtBQUN6QztBQUM0QjtBQUNsQztBQUNjO0FBQ3FDO0FBQ2pCOztBQUUzRDtBQUNBLCtCQUErQix3Q0FBUTtBQUN2QyxjQUFjLHdDQUFRLFVBQVUseUVBQXlFO0FBQ3pHLHFCQUFxQix3Q0FBUTtBQUM3QixtQkFBbUIsd0NBQVEsVUFBVSxnRUFBZ0U7QUFDckcsV0FBVyxzRkFBc0I7QUFDakMsa0JBQWtCLHlDQUFTLFVBQVUsNEdBQTRHO0FBQ2pKLFVBQVUsMENBQVUsQ0FBQyx3Q0FBUTtBQUM3QixTQUFTLHdDQUFRLFVBQVUsMkNBQTJDO0FBQ3RFLFNBQVMsd0NBQVEsVUFBVSxpREFBaUQ7QUFDNUUsZUFBZSx3Q0FBUSxVQUFVLCtDQUErQztBQUNoRixnQkFBZ0Isd0NBQVEsVUFBVSxnREFBZ0Q7QUFDbEYsYUFBYSx3Q0FBUSxVQUFVLHlDQUF5QztBQUN4RSxFQUFFO0FBQ0YsU0FBUyx1Q0FBTyxDQUFDLHdDQUFRLFdBQVcsNEdBQTRHO0FBQ2hKLGdCQUFnQix5Q0FBUyxVQUFVLHdHQUF3RztBQUMzSSxZQUFZLHdDQUFRLFVBQVUseUVBQXlFO0FBQ3ZHLGlCQUFpQix3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUssc0JBQXNCLG9FQUFvRTtBQUNySSxDQUFDO0FBQ0QsMkJBQTJCLDBFQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLG9HQUFvRywyQkFBMkI7QUFDL0gsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSwyQkFBMkI7QUFDMUcsYUFBYSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IseUJBQXlCO0FBQ3ZGO0FBQ0EsVUFBVSxlQUFlO0FBQ3pCO0FBQ0EsZ0RBQWdELDJCQUEyQjtBQUMzRSxhQUFhLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHVEQUF1RCwyQkFBMkI7QUFDbEYsYUFBYSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsMEJBQTBCO0FBQzNGO0FBQ0E7QUFDQSxvREFBb0QsMkJBQTJCO0FBQy9FLGFBQWEsaURBQVEsbUJBQW1CLFNBQVMscUVBQWdCLHVCQUF1QjtBQUN4RjtBQUNBLHFCQUFxQiw2RUFBbUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsaURBQVEsbUJBQW1CLHFCQUFxQjtBQUM1RSxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNIO0FBQ0EsU0FBUyxzQkFBc0IsUUFBUSxnRUFBYTtBQUNwRDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCLFlBQVksWUFBWTtBQUM1RDtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7QUFDRCwwQkFBMEIsMEVBQWtCO0FBQzVDO0FBQ0E7QUFDQSxPQUFPLDZFQUFrQjtBQUN6QixPQUFPLHdDQUFRO0FBQ2YsU0FBUyx3Q0FBUSxVQUFVLGtDQUFrQztBQUM3RCxZQUFZLHdDQUFRLFVBQVUscUNBQXFDO0FBQ25FLGVBQWUsd0NBQVEsVUFBVSx5RUFBeUU7QUFDMUcsY0FBYyx5Q0FBUyxVQUFVLHlGQUF5RjtBQUMxSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBLGVBQWUsc0JBQXNCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsOENBQThDO0FBQ3BGO0FBQ0EsU0FBUyxrQkFBa0I7QUFDM0IsTUFBTSx1Q0FBTyx1Q0FBdUMsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN2SCx5RUFBeUUsdUJBQXVCO0FBQ2hHO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RCxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsT0FBTztBQUNwRSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsT0FBTztBQUMxRCxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxZQUFZLGlEQUFRLG1CQUFtQixTQUFTLHFFQUFnQiw0QkFBNEI7QUFDNUY7QUFDQTtBQUNBLGdGQUFnRixpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3RKO0FBQ0EsdUJBQXVCLHFGQUE0QjtBQUNuRDtBQUNBLGtCQUFrQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsWUFBWSxpREFBUSxnQkFBZ0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxtQkFBbUIsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQzNGO0FBQ0EsT0FBTyxvRUFBZ0I7QUFDdkI7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QixFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24taW4ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlVXNlck91dHB1dCB9IGZyb20gXCIuLi8uLi9kYi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBmb3JtQ3NyZk1pZGRsZXdhcmUgfSBmcm9tIFwiLi4vbWlkZGxld2FyZXMvb3JpZ2luLWNoZWNrLm1qc1wiO1xuaW1wb3J0IHsgc2V0U2Vzc2lvbkNvb2tpZSB9IGZyb20gXCIuLi8uLi9jb29raWVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTdGF0ZSB9IGZyb20gXCIuLi8uLi9vYXV0aDIvc3RhdGUubWpzXCI7XG5pbXBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH0gZnJvbSBcIi4uLy4uL29hdXRoMi9saW5rLWFjY291bnQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuIH0gZnJvbSBcIi4vZW1haWwtdmVyaWZpY2F0aW9uLm1qc1wiO1xuaW1wb3J0IFwiLi4vLi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBCQVNFX0VSUk9SX0NPREVTIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBTb2NpYWxQcm92aWRlckxpc3RFbnVtIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3NvY2lhbC1wcm92aWRlcnNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24taW4udHNcbmNvbnN0IHNvY2lhbFNpZ25JbkJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG5cdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaGFzIHNpZ25lZCBpblwiIH0pLm9wdGlvbmFsKCksXG5cdG5ld1VzZXJDYWxsYmFja1VSTDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuXHRlcnJvckNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJDYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gaWYgYW4gZXJyb3IgaGFwcGVuc1wiIH0pLm9wdGlvbmFsKCksXG5cdHByb3ZpZGVyOiBTb2NpYWxQcm92aWRlckxpc3RFbnVtLFxuXHRkaXNhYmxlUmVkaXJlY3Q6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIGF1dG9tYXRpYyByZWRpcmVjdGlvbiB0byB0aGUgcHJvdmlkZXIuIFVzZWZ1bCBmb3IgaGFuZGxpbmcgdGhlIHJlZGlyZWN0aW9uIHlvdXJzZWxmXCIgfSkub3B0aW9uYWwoKSxcblx0aWRUb2tlbjogei5vcHRpb25hbCh6Lm9iamVjdCh7XG5cdFx0dG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIklEIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSksXG5cdFx0bm9uY2U6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIk5vbmNlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHRva2VuXCIgfSkub3B0aW9uYWwoKSxcblx0XHRhY2Nlc3NUb2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQWNjZXNzIHRva2VuIGZyb20gdGhlIHByb3ZpZGVyXCIgfSkub3B0aW9uYWwoKSxcblx0XHRyZWZyZXNoVG9rZW46IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlJlZnJlc2ggdG9rZW4gZnJvbSB0aGUgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdGV4cGlyZXNBdDogei5udW1iZXIoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiRXhwaXJ5IGRhdGUgb2YgdGhlIHRva2VuXCIgfSkub3B0aW9uYWwoKVxuXHR9KSksXG5cdHNjb3Blczogei5hcnJheSh6LnN0cmluZygpKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiQXJyYXkgb2Ygc2NvcGVzIHRvIHJlcXVlc3QgZnJvbSB0aGUgcHJvdmlkZXIuIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBzY29wZXMgcGFzc2VkLlwiIH0pLm9wdGlvbmFsKCksXG5cdHJlcXVlc3RTaWduVXA6IHouYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJFeHBsaWNpdGx5IHJlcXVlc3Qgc2lnbi11cC4gVXNlZnVsIHdoZW4gZGlzYWJsZUltcGxpY2l0U2lnblVwIGlzIHRydWUgZm9yIHRoaXMgcHJvdmlkZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRsb2dpbkhpbnQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBsb2dpbiBoaW50IHRvIHVzZSBmb3IgdGhlIGF1dGhvcml6YXRpb24gY29kZSByZXF1ZXN0XCIgfSkub3B0aW9uYWwoKSxcblx0YWRkaXRpb25hbERhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkFkZGl0aW9uYWwgZGF0YSB0byBiZSBwYXNzZWQgdGhyb3VnaCB0aGUgT0F1dGggZmxvd1wiIH0pXG59KTtcbmNvbnN0IHNpZ25JblNvY2lhbCA9ICgpID0+IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9zaWduLWluL3NvY2lhbFwiLCB7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdG9wZXJhdGlvbklkOiBcInNvY2lhbFNpZ25JblwiLFxuXHRib2R5OiBzb2NpYWxTaWduSW5Cb2R5U2NoZW1hLFxuXHRtZXRhZGF0YToge1xuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gaW4gd2l0aCBhIHNvY2lhbCBwcm92aWRlclwiLFxuXHRcdFx0b3BlcmF0aW9uSWQ6IFwic29jaWFsU2lnbkluXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzIC0gUmV0dXJucyBlaXRoZXIgc2Vzc2lvbiBkZXRhaWxzIG9yIHJlZGlyZWN0IFVSTFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiByZXNwb25zZSB3aGVuIGlkVG9rZW4gaXMgcHJvdmlkZWRcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHR0b2tlbjogeyB0eXBlOiBcInN0cmluZ1wiIH0sXG5cdFx0XHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRcdCRyZWY6IFwiIy9jb21wb25lbnRzL3NjaGVtYXMvVXNlclwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dXJsOiB7IHR5cGU6IFwic3RyaW5nXCIgfSxcblx0XHRcdFx0XHRcdHJlZGlyZWN0OiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRlbnVtOiBbZmFsc2VdXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XCJyZWRpcmVjdFwiLFxuXHRcdFx0XHRcdFx0XCJ0b2tlblwiLFxuXHRcdFx0XHRcdFx0XCJ1c2VyXCJcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0gfSB9XG5cdFx0XHR9IH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjKSA9PiB7XG5cdGNvbnN0IHByb3ZpZGVyID0gYy5jb250ZXh0LnNvY2lhbFByb3ZpZGVycy5maW5kKChwKSA9PiBwLmlkID09PSBjLmJvZHkucHJvdmlkZXIpO1xuXHRpZiAoIXByb3ZpZGVyKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlByb3ZpZGVyIG5vdCBmb3VuZC4gTWFrZSBzdXJlIHRvIGFkZCB0aGUgcHJvdmlkZXIgaW4geW91ciBhdXRoIGNvbmZpZ1wiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QUk9WSURFUl9OT1RfRk9VTkQgfSk7XG5cdH1cblx0aWYgKGMuYm9keS5pZFRva2VuKSB7XG5cdFx0aWYgKCFwcm92aWRlci52ZXJpZnlJZFRva2VuKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUHJvdmlkZXIgZG9lcyBub3Qgc3VwcG9ydCBpZCB0b2tlbiB2ZXJpZmljYXRpb25cIiwgeyBwcm92aWRlcjogYy5ib2R5LnByb3ZpZGVyIH0pO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JRF9UT0tFTl9OT1RfU1VQUE9SVEVEIH0pO1xuXHRcdH1cblx0XHRjb25zdCB7IHRva2VuLCBub25jZSB9ID0gYy5ib2R5LmlkVG9rZW47XG5cdFx0aWYgKCFhd2FpdCBwcm92aWRlci52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIGlkIHRva2VuXCIsIHsgcHJvdmlkZXI6IGMuYm9keS5wcm92aWRlciB9KTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9UT0tFTiB9KTtcblx0XHR9XG5cdFx0Y29uc3QgdXNlckluZm8gPSBhd2FpdCBwcm92aWRlci5nZXRVc2VySW5mbyh7XG5cdFx0XHRpZFRva2VuOiB0b2tlbixcblx0XHRcdGFjY2Vzc1Rva2VuOiBjLmJvZHkuaWRUb2tlbi5hY2Nlc3NUb2tlbixcblx0XHRcdHJlZnJlc2hUb2tlbjogYy5ib2R5LmlkVG9rZW4ucmVmcmVzaFRva2VuXG5cdFx0fSk7XG5cdFx0aWYgKCF1c2VySW5mbyB8fCAhdXNlckluZm8/LnVzZXIpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZ2V0IHVzZXIgaW5mb1wiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfVVNFUl9JTkZPIH0pO1xuXHRcdH1cblx0XHRpZiAoIXVzZXJJbmZvLnVzZXIuZW1haWwpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLCB7IHByb3ZpZGVyOiBjLmJvZHkucHJvdmlkZXIgfSk7XG5cdFx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfRU1BSUxfTk9UX0ZPVU5EIH0pO1xuXHRcdH1cblx0XHRjb25zdCBkYXRhID0gYXdhaXQgaGFuZGxlT0F1dGhVc2VySW5mbyhjLCB7XG5cdFx0XHR1c2VySW5mbzoge1xuXHRcdFx0XHQuLi51c2VySW5mby51c2VyLFxuXHRcdFx0XHRlbWFpbDogdXNlckluZm8udXNlci5lbWFpbCxcblx0XHRcdFx0aWQ6IFN0cmluZyh1c2VySW5mby51c2VyLmlkKSxcblx0XHRcdFx0bmFtZTogdXNlckluZm8udXNlci5uYW1lIHx8IFwiXCIsXG5cdFx0XHRcdGltYWdlOiB1c2VySW5mby51c2VyLmltYWdlLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mby51c2VyLmVtYWlsVmVyaWZpZWQgfHwgZmFsc2Vcblx0XHRcdH0sXG5cdFx0XHRhY2NvdW50OiB7XG5cdFx0XHRcdHByb3ZpZGVySWQ6IHByb3ZpZGVyLmlkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IFN0cmluZyh1c2VySW5mby51c2VyLmlkKSxcblx0XHRcdFx0YWNjZXNzVG9rZW46IGMuYm9keS5pZFRva2VuLmFjY2Vzc1Rva2VuXG5cdFx0XHR9LFxuXHRcdFx0Y2FsbGJhY2tVUkw6IGMuYm9keS5jYWxsYmFja1VSTCxcblx0XHRcdGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVJbXBsaWNpdFNpZ25VcCAmJiAhYy5ib2R5LnJlcXVlc3RTaWduVXAgfHwgcHJvdmlkZXIuZGlzYWJsZVNpZ25VcFxuXHRcdH0pO1xuXHRcdGlmIChkYXRhLmVycm9yKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBkYXRhLmVycm9yIH0pO1xuXHRcdGF3YWl0IHNldFNlc3Npb25Db29raWUoYywgZGF0YS5kYXRhKTtcblx0XHRyZXR1cm4gYy5qc29uKHtcblx0XHRcdHJlZGlyZWN0OiBmYWxzZSxcblx0XHRcdHRva2VuOiBkYXRhLmRhdGEuc2Vzc2lvbi50b2tlbixcblx0XHRcdHVybDogdm9pZCAwLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGMuY29udGV4dC5vcHRpb25zLCBkYXRhLmRhdGEudXNlcilcblx0XHR9KTtcblx0fVxuXHRjb25zdCB7IGNvZGVWZXJpZmllciwgc3RhdGUgfSA9IGF3YWl0IGdlbmVyYXRlU3RhdGUoYywgdm9pZCAwLCBjLmJvZHkuYWRkaXRpb25hbERhdGEpO1xuXHRjb25zdCB1cmwgPSBhd2FpdCBwcm92aWRlci5jcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcblx0XHRzdGF0ZSxcblx0XHRjb2RlVmVyaWZpZXIsXG5cdFx0cmVkaXJlY3RVUkk6IGAke2MuY29udGV4dC5iYXNlVVJMfS9jYWxsYmFjay8ke3Byb3ZpZGVyLmlkfWAsXG5cdFx0c2NvcGVzOiBjLmJvZHkuc2NvcGVzLFxuXHRcdGxvZ2luSGludDogYy5ib2R5LmxvZ2luSGludFxuXHR9KTtcblx0aWYgKCFjLmJvZHkuZGlzYWJsZVJlZGlyZWN0KSBjLnNldEhlYWRlcihcIkxvY2F0aW9uXCIsIHVybC50b1N0cmluZygpKTtcblx0cmV0dXJuIGMuanNvbih7XG5cdFx0dXJsOiB1cmwudG9TdHJpbmcoKSxcblx0XHRyZWRpcmVjdDogIWMuYm9keS5kaXNhYmxlUmVkaXJlY3Rcblx0fSk7XG59KTtcbmNvbnN0IHNpZ25JbkVtYWlsID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24taW4vZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzaWduSW5FbWFpbFwiLFxuXHR1c2U6IFtmb3JtQ3NyZk1pZGRsZXdhcmVdLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0ZW1haWw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkVtYWlsIG9mIHRoZSB1c2VyXCIgfSksXG5cdFx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlBhc3N3b3JkIG9mIHRoZSB1c2VyXCIgfSksXG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkNhbGxiYWNrIFVSTCB0byB1c2UgYXMgYSByZWRpcmVjdCBmb3IgZW1haWwgdmVyaWZpY2F0aW9uXCIgfSkub3B0aW9uYWwoKSxcblx0XHRyZW1lbWJlck1lOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiSWYgdGhpcyBpcyBmYWxzZSwgdGhlIHNlc3Npb24gd2lsbCBub3QgYmUgcmVtZW1iZXJlZC4gRGVmYXVsdCBpcyBgdHJ1ZWAuXCIgfSkuZGVmYXVsdCh0cnVlKS5vcHRpb25hbCgpXG5cdH0pLFxuXHRtZXRhZGF0YToge1xuXHRcdGFsbG93ZWRNZWRpYVR5cGVzOiBbXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCJdLFxuXHRcdCRJbmZlcjoge1xuXHRcdFx0Ym9keToge30sXG5cdFx0XHRyZXR1cm5lZDoge31cblx0XHR9LFxuXHRcdG9wZW5hcGk6IHtcblx0XHRcdG9wZXJhdGlvbklkOiBcInNpZ25JbkVtYWlsXCIsXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXCIsXG5cdFx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0XHRkZXNjcmlwdGlvbjogXCJTdWNjZXNzIC0gUmV0dXJucyBlaXRoZXIgc2Vzc2lvbiBkZXRhaWxzIG9yIHJlZGlyZWN0IFVSTFwiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU2Vzc2lvbiByZXNwb25zZSB3aGVuIGlkVG9rZW4gaXMgcHJvdmlkZWRcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRyZWRpcmVjdDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdFx0ZW51bTogW2ZhbHNlXVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlNlc3Npb24gdG9rZW5cIlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVybDoge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlcXVpcmVkOiBbXG5cdFx0XHRcdFx0XHRcInJlZGlyZWN0XCIsXG5cdFx0XHRcdFx0XHRcInRva2VuXCIsXG5cdFx0XHRcdFx0XHRcInVzZXJcIlxuXHRcdFx0XHRcdF1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IGVuYWJsZWQuIE1ha2Ugc3VyZSB0byBlbmFibGUgaXQgaW4gdGhlIG9wdGlvbnMgb24geW91IGBhdXRoLnRzYCBmaWxlLiBDaGVjayBgaHR0cHM6Ly9iZXR0ZXItYXV0aC5jb20vZG9jcy9hdXRoZW50aWNhdGlvbi9lbWFpbC1wYXNzd29yZGAgZm9yIG1vcmUhXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gY3R4LmJvZHk7XG5cdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdGNvbnN0IHVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsLCB7IGluY2x1ZGVBY2NvdW50czogdHJ1ZSB9KTtcblx0aWYgKCF1c2VyKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiVXNlciBub3QgZm91bmRcIiwgeyBlbWFpbCB9KTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJVTkFVVEhPUklaRURcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUxfT1JfUEFTU1dPUkQgfSk7XG5cdH1cblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSB1c2VyLmFjY291bnRzLmZpbmQoKGEpID0+IGEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50KSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiQ3JlZGVudGlhbCBhY2NvdW50IG5vdCBmb3VuZFwiLCB7IGVtYWlsIH0pO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3VycmVudFBhc3N3b3JkKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgbm90IGZvdW5kXCIsIHsgZW1haWwgfSk7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5BVVRIT1JJWkVEXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX0VNQUlMX09SX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQudmVyaWZ5KHtcblx0XHRoYXNoOiBjdXJyZW50UGFzc3dvcmQsXG5cdFx0cGFzc3dvcmRcblx0fSkpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJJbnZhbGlkIHBhc3N3b3JkXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRCB9KTtcblx0fVxuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxBbmRQYXNzd29yZD8ucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uICYmICF1c2VyLnVzZXIuZW1haWxWZXJpZmllZCkge1xuXHRcdGlmICghY3R4LmNvbnRleHQub3B0aW9ucz8uZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiRk9SQklEREVOXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5FTUFJTF9OT1RfVkVSSUZJRUQgfSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnM/LmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduSW4pIHtcblx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIHVzZXIudXNlci5lbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgY2FsbGJhY2tVUkwgPSBjdHguYm9keS5jYWxsYmFja1VSTCA/IGVuY29kZVVSSUNvbXBvbmVudChjdHguYm9keS5jYWxsYmFja1VSTCkgOiBlbmNvZGVVUklDb21wb25lbnQoXCIvXCIpO1xuXHRcdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vdmVyaWZ5LWVtYWlsP3Rva2VuPSR7dG9rZW59JmNhbGxiYWNrVVJMPSR7Y2FsbGJhY2tVUkx9YDtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHR1c2VyOiB1c2VyLnVzZXIsXG5cdFx0XHRcdHVybCxcblx0XHRcdFx0dG9rZW5cblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkZPUkJJRERFTlwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRU1BSUxfTk9UX1ZFUklGSUVEIH0pO1xuXHR9XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbih1c2VyLnVzZXIuaWQsIGN0eC5ib2R5LnJlbWVtYmVyTWUgPT09IGZhbHNlKTtcblx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBzZXNzaW9uXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIlVOQVVUSE9SSVpFRFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9TRVNTSU9OIH0pO1xuXHR9XG5cdGF3YWl0IHNldFNlc3Npb25Db29raWUoY3R4LCB7XG5cdFx0c2Vzc2lvbixcblx0XHR1c2VyOiB1c2VyLnVzZXJcblx0fSwgY3R4LmJvZHkucmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRpZiAoY3R4LmJvZHkuY2FsbGJhY2tVUkwpIGN0eC5zZXRIZWFkZXIoXCJMb2NhdGlvblwiLCBjdHguYm9keS5jYWxsYmFja1VSTCk7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0cmVkaXJlY3Q6ICEhY3R4LmJvZHkuY2FsbGJhY2tVUkwsXG5cdFx0dG9rZW46IHNlc3Npb24udG9rZW4sXG5cdFx0dXJsOiBjdHguYm9keS5jYWxsYmFja1VSTCxcblx0XHR1c2VyOiBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgdXNlci51c2VyKVxuXHR9KTtcbn0pO1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHNpZ25JbkVtYWlsLCBzaWduSW5Tb2NpYWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ24taW4ubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-in.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-out.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signOut: () => (/* binding */ signOut)\n/* harmony export */ });\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n//#region src/api/routes/sign-out.ts\nconst signOut = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_1__.createAuthEndpoint)(\"/sign-out\", {\n\tmethod: \"POST\",\n\toperationId: \"signOut\",\n\trequireHeaders: true,\n\tmetadata: { openapi: {\n\t\toperationId: \"signOut\",\n\t\tdescription: \"Sign out the current user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Success\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: { success: { type: \"boolean\" } }\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst sessionCookieToken = await ctx.getSignedCookie(ctx.context.authCookies.sessionToken.name, ctx.context.secret);\n\tif (sessionCookieToken) try {\n\t\tawait ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n\t} catch (e) {\n\t\tctx.context.logger.error(\"Failed to delete session from database\", e);\n\t}\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_0__.deleteSessionCookie)(ctx);\n\treturn ctx.json({ success: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-out.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24tb3V0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEQ7QUFDSDs7QUFFM0Q7QUFDQSxnQkFBZ0IseUVBQWtCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQSxrQkFBa0IsV0FBVztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQixtQkFBbUIsZUFBZTtBQUNsQyxDQUFDOztBQUVEO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2FwaS9yb3V0ZXMvc2lnbi1vdXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24tb3V0LnRzXG5jb25zdCBzaWduT3V0ID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24tb3V0XCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwic2lnbk91dFwiLFxuXHRyZXF1aXJlSGVhZGVyczogdHJ1ZSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcInNpZ25PdXRcIixcblx0XHRkZXNjcmlwdGlvbjogXCJTaWduIG91dCB0aGUgY3VycmVudCB1c2VyXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHsgc3VjY2VzczogeyB0eXBlOiBcImJvb2xlYW5cIiB9IH1cblx0XHRcdH0gfSB9XG5cdFx0fSB9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBzZXNzaW9uQ29va2llVG9rZW4gPSBhd2FpdCBjdHguZ2V0U2lnbmVkQ29va2llKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25Ub2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRpZiAoc2Vzc2lvbkNvb2tpZVRva2VuKSB0cnkge1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9uKHNlc3Npb25Db29raWVUb2tlbik7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGVsZXRlIHNlc3Npb24gZnJvbSBkYXRhYmFzZVwiLCBlKTtcblx0fVxuXHRkZWxldGVTZXNzaW9uQ29va2llKGN0eCk7XG5cdHJldHVybiBjdHguanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduT3V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaWduLW91dC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-out.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/sign-up.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signUpEmail: () => (/* binding */ signUpEmail)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _db_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../db/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/sign-up.ts\nconst signUpEmailBodySchema = zod__WEBPACK_IMPORTED_MODULE_10__.object({\n\tname: zod__WEBPACK_IMPORTED_MODULE_10__.string(),\n\temail: zod__WEBPACK_IMPORTED_MODULE_10__.email(),\n\tpassword: zod__WEBPACK_IMPORTED_MODULE_10__.string().nonempty(),\n\timage: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_10__.string().optional(),\n\trememberMe: zod__WEBPACK_IMPORTED_MODULE_10__.boolean().optional()\n}).and(zod__WEBPACK_IMPORTED_MODULE_10__.record(zod__WEBPACK_IMPORTED_MODULE_10__.string(), zod__WEBPACK_IMPORTED_MODULE_10__.any()));\nconst signUpEmail = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_9__.createAuthEndpoint)(\"/sign-up/email\", {\n\tmethod: \"POST\",\n\toperationId: \"signUpWithEmailAndPassword\",\n\tuse: [_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_2__.formCsrfMiddleware],\n\tbody: signUpEmailBodySchema,\n\tmetadata: {\n\t\tallowedMediaTypes: [\"application/x-www-form-urlencoded\", \"application/json\"],\n\t\t$Infer: {\n\t\t\tbody: {},\n\t\t\treturned: {}\n\t\t},\n\t\topenapi: {\n\t\t\toperationId: \"signUpWithEmailAndPassword\",\n\t\t\tdescription: \"Sign up a user using email and password\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\temail: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The email of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The password of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t},\n\t\t\t\t\tcallbackURL: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The URL to use for email verification callback\"\n\t\t\t\t\t},\n\t\t\t\t\trememberMe: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"If this is false, the session will not be remembered. Default is `true`.\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"email\",\n\t\t\t\t\t\"password\"\n\t\t\t\t]\n\t\t\t} } } },\n\t\t\tresponses: {\n\t\t\t\t\"200\": {\n\t\t\t\t\tdescription: \"Successfully created user\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttoken: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"Authentication token for the session\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\"user\"]\n\t\t\t\t\t} } }\n\t\t\t\t},\n\t\t\t\t\"422\": {\n\t\t\t\t\tdescription: \"Unprocessable Entity. User already exists or failed to create user.\",\n\t\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t\t} } }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}, async (ctx) => {\n\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_5__.runWithTransaction)(ctx.context.adapter, async () => {\n\t\tif (!ctx.context.options.emailAndPassword?.enabled || ctx.context.options.emailAndPassword?.disableSignUp) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: \"Email and password sign up is not enabled\" });\n\t\tconst body = ctx.body;\n\t\tconst { name, email, password, image, callbackURL: _callbackURL, rememberMe, ...rest } = body;\n\t\tif (!zod__WEBPACK_IMPORTED_MODULE_10__.email().safeParse(email).success) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_EMAIL });\n\t\tif (!password || typeof password !== \"string\") throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\t\tif (password.length < minPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too short\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t\t}\n\t\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\t\tif (password.length > maxPasswordLength) {\n\t\t\tctx.context.logger.error(\"Password is too long\");\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t\t}\n\t\tif ((await ctx.context.internalAdapter.findUserByEmail(email))?.user) {\n\t\t\tctx.context.logger.info(`Sign-up attempt for existing email: ${email}`);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t\t}\n\t\t/**\n\t\t* Hash the password\n\t\t*\n\t\t* This is done prior to creating the user\n\t\t* to ensure that any plugin that\n\t\t* may break the hashing should break\n\t\t* before the user is created.\n\t\t*/\n\t\tconst hash = await ctx.context.password.hash(password);\n\t\tlet createdUser;\n\t\ttry {\n\t\t\tconst data = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"create\");\n\t\t\tcreatedUser = await ctx.context.internalAdapter.createUser({\n\t\t\t\temail: email.toLowerCase(),\n\t\t\t\tname,\n\t\t\t\timage,\n\t\t\t\t...data,\n\t\t\t\temailVerified: false\n\t\t\t});\n\t\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t} catch (e) {\n\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isDevelopment)()) ctx.context.logger.error(\"Failed to create user\", e);\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_8__.APIError) throw e;\n\t\t\tctx.context.logger?.error(\"Failed to create user\", e);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\t}\n\t\tif (!createdUser) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_USER });\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: createdUser.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: createdUser.id,\n\t\t\tpassword: hash\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendOnSignUp || ctx.context.options.emailAndPassword.requireEmailVerification) {\n\t\t\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_4__.createEmailVerificationToken)(ctx.context.secret, createdUser.email, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst callbackURL = body.callbackURL ? encodeURIComponent(body.callbackURL) : encodeURIComponent(\"/\");\n\t\t\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) await ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: createdUser,\n\t\t\t\turl,\n\t\t\t\ttoken\n\t\t\t}, ctx.request));\n\t\t}\n\t\tif (ctx.context.options.emailAndPassword.autoSignIn === false || ctx.context.options.emailAndPassword.requireEmailVerification) return ctx.json({\n\t\t\ttoken: null,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t\tconst session = await ctx.context.internalAdapter.createSession(createdUser.id, rememberMe === false);\n\t\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_8__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.setSessionCookie)(ctx, {\n\t\t\tsession,\n\t\t\tuser: createdUser\n\t\t}, rememberMe === false);\n\t\treturn ctx.json({\n\t\t\ttoken: session.token,\n\t\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, createdUser)\n\t\t});\n\t});\n});\n\n//#endregion\n\n//# sourceMappingURL=sign-up.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3NpZ24tdXAubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRTtBQUMxQztBQUN5QztBQUNWO0FBQ2E7QUFDVDtBQUNUO0FBQ0s7QUFDbEM7QUFDYztBQUNvQjs7QUFFM0Q7QUFDQSw4QkFBOEIsd0NBQVE7QUFDdEMsT0FBTyx3Q0FBUTtBQUNmLFFBQVEsdUNBQU87QUFDZixXQUFXLHdDQUFRO0FBQ25CLFFBQVEsd0NBQVE7QUFDaEIsY0FBYyx3Q0FBUTtBQUN0QixhQUFhLHlDQUFTO0FBQ3RCLENBQUMsTUFBTSx3Q0FBUSxDQUFDLHdDQUFRLElBQUkscUNBQUs7QUFDakMsMEJBQTBCLHlFQUFrQjtBQUM1QztBQUNBO0FBQ0EsT0FBTyw2RUFBa0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFdBQVcsc0JBQXNCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNCQUFzQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQkFBZ0Isc0JBQXNCO0FBQ3RDO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxRQUFRLDZFQUFrQjtBQUMxQix1SEFBdUgsaURBQVEsa0JBQWtCLHNEQUFzRDtBQUN2TTtBQUNBLFVBQVUsK0VBQStFO0FBQ3pGLE9BQU8sdUNBQU8sdUNBQXVDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixnQkFBZ0I7QUFDeEgsMkRBQTJELGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDakk7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IscUJBQXFCO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0Isb0JBQW9CO0FBQ3BGO0FBQ0E7QUFDQSxrRUFBa0UsTUFBTTtBQUN4RSxhQUFhLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3Q0FBd0M7QUFDakg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDhEQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSiwrQkFBK0IsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUMxRyxJQUFJO0FBQ0osT0FBTyxvRUFBYTtBQUNwQixvQkFBb0IsaURBQVE7QUFDNUI7QUFDQSxhQUFhLGlEQUFRLDJCQUEyQixTQUFTLHFFQUFnQix3QkFBd0I7QUFDakc7QUFDQSw4QkFBOEIsaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdCQUF3QjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsdUJBQXVCLHFGQUE0QjtBQUNuRDtBQUNBLGtCQUFrQixvQkFBb0Isc0JBQXNCLE1BQU0sZUFBZSxZQUFZO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFNBQVMsK0RBQWU7QUFDeEIsR0FBRztBQUNIO0FBQ0EsMEJBQTBCLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwyQkFBMkI7QUFDeEcsUUFBUSxvRUFBZ0I7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsU0FBUywrREFBZTtBQUN4QixHQUFHO0FBQ0gsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3JvdXRlcy9zaWduLXVwLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2RiL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZm9ybUNzcmZNaWRkbGV3YXJlIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCB7IHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBydW5XaXRoVHJhbnNhY3Rpb24gfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgaXNEZXZlbG9wbWVudCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3NpZ24tdXAudHNcbmNvbnN0IHNpZ25VcEVtYWlsQm9keVNjaGVtYSA9IHoub2JqZWN0KHtcblx0bmFtZTogei5zdHJpbmcoKSxcblx0ZW1haWw6IHouZW1haWwoKSxcblx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubm9uZW1wdHkoKSxcblx0aW1hZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0cmVtZW1iZXJNZTogei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSkuYW5kKHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpKTtcbmNvbnN0IHNpZ25VcEVtYWlsID0gKCkgPT4gY3JlYXRlQXV0aEVuZHBvaW50KFwiL3NpZ24tdXAvZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJzaWduVXBXaXRoRW1haWxBbmRQYXNzd29yZFwiLFxuXHR1c2U6IFtmb3JtQ3NyZk1pZGRsZXdhcmVdLFxuXHRib2R5OiBzaWduVXBFbWFpbEJvZHlTY2hlbWEsXG5cdG1ldGFkYXRhOiB7XG5cdFx0YWxsb3dlZE1lZGlhVHlwZXM6IFtcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLCBcImFwcGxpY2F0aW9uL2pzb25cIl0sXG5cdFx0JEluZmVyOiB7XG5cdFx0XHRib2R5OiB7fSxcblx0XHRcdHJldHVybmVkOiB7fVxuXHRcdH0sXG5cdFx0b3BlbmFwaToge1xuXHRcdFx0b3BlcmF0aW9uSWQ6IFwic2lnblVwV2l0aEVtYWlsQW5kUGFzc3dvcmRcIixcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlNpZ24gdXAgYSB1c2VyIHVzaW5nIGVtYWlsIGFuZCBwYXNzd29yZFwiLFxuXHRcdFx0cmVxdWVzdEJvZHk6IHsgY29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdG5hbWU6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXNzd29yZDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBwcm9maWxlIGltYWdlIFVSTCBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRjYWxsYmFja1VSTDoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBVUkwgdG8gdXNlIGZvciBlbWFpbCB2ZXJpZmljYXRpb24gY2FsbGJhY2tcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVtZW1iZXJNZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJJZiB0aGlzIGlzIGZhbHNlLCB0aGUgc2Vzc2lvbiB3aWxsIG5vdCBiZSByZW1lbWJlcmVkLiBEZWZhdWx0IGlzIGB0cnVlYC5cIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcIm5hbWVcIixcblx0XHRcdFx0XHRcImVtYWlsXCIsXG5cdFx0XHRcdFx0XCJwYXNzd29yZFwiXG5cdFx0XHRcdF1cblx0XHRcdH0gfSB9IH0sXG5cdFx0XHRyZXNwb25zZXM6IHtcblx0XHRcdFx0XCIyMDBcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN1Y2Nlc3NmdWxseSBjcmVhdGVkIHVzZXJcIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0dG9rZW46IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkF1dGhlbnRpY2F0aW9uIHRva2VuIGZvciB0aGUgc2Vzc2lvblwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0ZW1haWw6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBuYW1lIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRpbWFnZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgcHJvZmlsZSBpbWFnZSBVUkwgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsVmVyaWZpZWQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBjcmVhdGVkXCJcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJXaGVuIHRoZSB1c2VyIHdhcyBsYXN0IHVwZGF0ZWRcIlxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWlyZWQ6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFwiaWRcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwibmFtZVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJlbWFpbFZlcmlmaWVkXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ1cGRhdGVkQXRcIlxuXHRcdFx0XHRcdFx0XHRcdF1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHJlcXVpcmVkOiBbXCJ1c2VyXCJdXG5cdFx0XHRcdFx0fSB9IH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCI0MjJcIjoge1xuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlVucHJvY2Vzc2FibGUgRW50aXR5LiBVc2VyIGFscmVhZHkgZXhpc3RzIG9yIGZhaWxlZCB0byBjcmVhdGUgdXNlci5cIixcblx0XHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdHByb3BlcnRpZXM6IHsgbWVzc2FnZTogeyB0eXBlOiBcInN0cmluZ1wiIH0gfVxuXHRcdFx0XHRcdH0gfSB9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0cmV0dXJuIHJ1bldpdGhUcmFuc2FjdGlvbihjdHguY29udGV4dC5hZGFwdGVyLCBhc3luYyAoKSA9PiB7XG5cdFx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LmVuYWJsZWQgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5kaXNhYmxlU2lnblVwKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiRW1haWwgYW5kIHBhc3N3b3JkIHNpZ24gdXAgaXMgbm90IGVuYWJsZWRcIiB9KTtcblx0XHRjb25zdCBib2R5ID0gY3R4LmJvZHk7XG5cdFx0Y29uc3QgeyBuYW1lLCBlbWFpbCwgcGFzc3dvcmQsIGltYWdlLCBjYWxsYmFja1VSTDogX2NhbGxiYWNrVVJMLCByZW1lbWJlck1lLCAuLi5yZXN0IH0gPSBib2R5O1xuXHRcdGlmICghei5lbWFpbCgpLnNhZmVQYXJzZShlbWFpbCkuc3VjY2VzcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLklOVkFMSURfRU1BSUwgfSk7XG5cdFx0aWYgKCFwYXNzd29yZCB8fCB0eXBlb2YgcGFzc3dvcmQgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRcdGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRcdGlmIChwYXNzd29yZC5sZW5ndGggPCBtaW5QYXNzd29yZExlbmd0aCkge1xuXHRcdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19TSE9SVCB9KTtcblx0XHR9XG5cdFx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdFx0aWYgKHBhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gbG9uZ1wiKTtcblx0XHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0XHR9XG5cdFx0aWYgKChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFVzZXJCeUVtYWlsKGVtYWlsKSk/LnVzZXIpIHtcblx0XHRcdGN0eC5jb250ZXh0LmxvZ2dlci5pbmZvKGBTaWduLXVwIGF0dGVtcHQgZm9yIGV4aXN0aW5nIGVtYWlsOiAke2VtYWlsfWApO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUwgfSk7XG5cdFx0fVxuXHRcdC8qKlxuXHRcdCogSGFzaCB0aGUgcGFzc3dvcmRcblx0XHQqXG5cdFx0KiBUaGlzIGlzIGRvbmUgcHJpb3IgdG8gY3JlYXRpbmcgdGhlIHVzZXJcblx0XHQqIHRvIGVuc3VyZSB0aGF0IGFueSBwbHVnaW4gdGhhdFxuXHRcdCogbWF5IGJyZWFrIHRoZSBoYXNoaW5nIHNob3VsZCBicmVha1xuXHRcdCogYmVmb3JlIHRoZSB1c2VyIGlzIGNyZWF0ZWQuXG5cdFx0Ki9cblx0XHRjb25zdCBoYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChwYXNzd29yZCk7XG5cdFx0bGV0IGNyZWF0ZWRVc2VyO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkYXRhID0gcGFyc2VVc2VySW5wdXQoY3R4LmNvbnRleHQub3B0aW9ucywgcmVzdCwgXCJjcmVhdGVcIik7XG5cdFx0XHRjcmVhdGVkVXNlciA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVVc2VyKHtcblx0XHRcdFx0ZW1haWw6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdG5hbWUsXG5cdFx0XHRcdGltYWdlLFxuXHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiBmYWxzZVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIWNyZWF0ZWRVc2VyKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuRkFJTEVEX1RPX0NSRUFURV9VU0VSIH0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChpc0RldmVsb3BtZW50KCkpIGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgdXNlclwiLCBlKTtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHRocm93IGU7XG5cdFx0XHRjdHguY29udGV4dC5sb2dnZXI/LmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsIGUpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHR9XG5cdFx0aWYgKCFjcmVhdGVkVXNlcikgdGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfVVNFUiB9KTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlua0FjY291bnQoe1xuXHRcdFx0dXNlcklkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdHByb3ZpZGVySWQ6IFwiY3JlZGVudGlhbFwiLFxuXHRcdFx0YWNjb3VudElkOiBjcmVhdGVkVXNlci5pZCxcblx0XHRcdHBhc3N3b3JkOiBoYXNoXG5cdFx0fSk7XG5cdFx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRPblNpZ25VcCB8fCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQucmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uKSB7XG5cdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBjcmVhdGVkVXNlci5lbWFpbCwgdm9pZCAwLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4pO1xuXHRcdFx0Y29uc3QgY2FsbGJhY2tVUkwgPSBib2R5LmNhbGxiYWNrVVJMID8gZW5jb2RlVVJJQ29tcG9uZW50KGJvZHkuY2FsbGJhY2tVUkwpIDogZW5jb2RlVVJJQ29tcG9uZW50KFwiL1wiKTtcblx0XHRcdGNvbnN0IHVybCA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSBhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHRcdFx0dXNlcjogY3JlYXRlZFVzZXIsXG5cdFx0XHRcdHVybCxcblx0XHRcdFx0dG9rZW5cblx0XHRcdH0sIGN0eC5yZXF1ZXN0KSk7XG5cdFx0fVxuXHRcdGlmIChjdHguY29udGV4dC5vcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQuYXV0b1NpZ25JbiA9PT0gZmFsc2UgfHwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkLnJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbikgcmV0dXJuIGN0eC5qc29uKHtcblx0XHRcdHRva2VuOiBudWxsLFxuXHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5jb250ZXh0Lm9wdGlvbnMsIGNyZWF0ZWRVc2VyKVxuXHRcdH0pO1xuXHRcdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlU2Vzc2lvbihjcmVhdGVkVXNlci5pZCwgcmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRcdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTiB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXI6IGNyZWF0ZWRVc2VyXG5cdFx0fSwgcmVtZW1iZXJNZSA9PT0gZmFsc2UpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHR0b2tlbjogc2Vzc2lvbi50b2tlbixcblx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBjcmVhdGVkVXNlcilcblx0XHR9KTtcblx0fSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBzaWduVXBFbWFpbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbi11cC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/sign-up.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/routes/update-user.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   changeEmail: () => (/* binding */ changeEmail),\n/* harmony export */   changePassword: () => (/* binding */ changePassword),\n/* harmony export */   deleteUser: () => (/* binding */ deleteUser),\n/* harmony export */   deleteUserCallback: () => (/* binding */ deleteUserCallback),\n/* harmony export */   setPassword: () => (/* binding */ setPassword),\n/* harmony export */   updateUser: () => (/* binding */ updateUser)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../middlewares/origin-check.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/origin-check.mjs\");\n/* harmony import */ var _middlewares_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../middlewares/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/index.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _session_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./session.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/session.mjs\");\n/* harmony import */ var _email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/api/routes/update-user.ts\nconst updateUserBodySchema = zod__WEBPACK_IMPORTED_MODULE_11__.record(zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"Field name must be a string\" }), zod__WEBPACK_IMPORTED_MODULE_11__.any());\nconst updateUser = () => (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/update-user\", {\n\tmethod: \"POST\",\n\toperationId: \"updateUser\",\n\tbody: updateUserBodySchema,\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sessionMiddleware],\n\tmetadata: {\n\t\t$Infer: { body: {} },\n\t\topenapi: {\n\t\t\toperationId: \"updateUser\",\n\t\t\tdescription: \"Update the current user\",\n\t\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tname: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t},\n\t\t\t\t\timage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tdescription: \"The image of the user\",\n\t\t\t\t\t\tnullable: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} } } },\n\t\t\tresponses: { \"200\": {\n\t\t\t\tdescription: \"Success\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { user: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t} }\n\t\t\t\t} } }\n\t\t\t} }\n\t\t}\n\t}\n}, async (ctx) => {\n\tconst body = ctx.body;\n\tif (typeof body !== \"object\" || Array.isArray(body)) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Body must be an object\" });\n\tif (body.email) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED });\n\tconst { name, image, ...rest } = body;\n\tconst session = ctx.context.session;\n\tconst additionalFields = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserInput)(ctx.context.options, rest, \"update\");\n\tif (image === void 0 && name === void 0 && Object.keys(additionalFields).length === 0) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"No fields to update\" });\n\tconst updatedUser = await ctx.context.internalAdapter.updateUser(session.user.id, {\n\t\tname,\n\t\timage,\n\t\t...additionalFields\n\t}) ?? {\n\t\t...session.user,\n\t\t...name !== void 0 && { name },\n\t\t...image !== void 0 && { image },\n\t\t...additionalFields\n\t};\n\t/**\n\t* Update the session cookie with the new user data\n\t*/\n\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\tsession: session.session,\n\t\tuser: updatedUser\n\t});\n\treturn ctx.json({ status: true });\n});\nconst changePassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-password\", {\n\tmethod: \"POST\",\n\toperationId: \"changePassword\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set\" }),\n\t\tcurrentPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The current password is required\" }),\n\t\trevokeOtherSessions: zod__WEBPACK_IMPORTED_MODULE_11__.boolean().meta({ description: \"Must be a boolean value\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changePassword\",\n\t\tdescription: \"Change the password of the user\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"Password successfully changed\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\ttoken: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\tdescription: \"New session token if other sessions were revoked\"\n\t\t\t\t\t},\n\t\t\t\t\tuser: {\n\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tid: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The unique identifier of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temail: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"email\",\n\t\t\t\t\t\t\t\tdescription: \"The email address of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tdescription: \"The name of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\timage: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"uri\",\n\t\t\t\t\t\t\t\tnullable: true,\n\t\t\t\t\t\t\t\tdescription: \"The profile image URL of the user\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\temailVerified: {\n\t\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\t\tdescription: \"Whether the email has been verified\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tcreatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was created\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tupdatedAt: {\n\t\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\t\tformat: \"date-time\",\n\t\t\t\t\t\t\t\tdescription: \"When the user was last updated\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\trequired: [\n\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\"email\",\n\t\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\t\"emailVerified\",\n\t\t\t\t\t\t\t\"createdAt\",\n\t\t\t\t\t\t\t\"updatedAt\"\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"user\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tconst { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!await ctx.context.password.verify({\n\t\thash: account.password,\n\t\tpassword: currentPassword\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\tawait ctx.context.internalAdapter.updateAccount(account.id, { password: passwordHash });\n\tlet token = null;\n\tif (revokeOtherSessions) {\n\t\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t\tconst newSession = await ctx.context.internalAdapter.createSession(session.user.id);\n\t\tif (!newSession) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"INTERNAL_SERVER_ERROR\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_SESSION });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: newSession,\n\t\t\tuser: session.user\n\t\t});\n\t\ttoken = newSession.token;\n\t}\n\treturn ctx.json({\n\t\ttoken,\n\t\tuser: (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_0__.parseUserOutput)(ctx.context.options, session.user)\n\t});\n});\nconst setPassword = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)({\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({ newPassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The new password to set is required\" }) }),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware]\n}, async (ctx) => {\n\tconst { newPassword } = ctx.body;\n\tconst session = ctx.context.session;\n\tconst minPasswordLength = ctx.context.password.config.minPasswordLength;\n\tif (newPassword.length < minPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too short\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_SHORT });\n\t}\n\tconst maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n\tif (newPassword.length > maxPasswordLength) {\n\t\tctx.context.logger.error(\"Password is too long\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.PASSWORD_TOO_LONG });\n\t}\n\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\tconst passwordHash = await ctx.context.password.hash(newPassword);\n\tif (!account) {\n\t\tawait ctx.context.internalAdapter.linkAccount({\n\t\t\tuserId: session.user.id,\n\t\t\tproviderId: \"credential\",\n\t\t\taccountId: session.user.id,\n\t\t\tpassword: passwordHash\n\t\t});\n\t\treturn ctx.json({ status: true });\n\t}\n\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"user already has a password\" });\n});\nconst deleteUser = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user\", {\n\tmethod: \"POST\",\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The callback URL to redirect to after the user is deleted\" }).optional(),\n\t\tpassword: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The password of the user is required to delete the user\" }).optional(),\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to delete the user is required\" }).optional()\n\t}),\n\tmetadata: { openapi: {\n\t\toperationId: \"deleteUser\",\n\t\tdescription: \"Delete the user\",\n\t\trequestBody: { content: { \"application/json\": { schema: {\n\t\t\ttype: \"object\",\n\t\t\tproperties: {\n\t\t\t\tcallbackURL: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The callback URL to redirect to after the user is deleted\"\n\t\t\t\t},\n\t\t\t\tpassword: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The user's password. Required if session is not fresh\"\n\t\t\t\t},\n\t\t\t\ttoken: {\n\t\t\t\t\ttype: \"string\",\n\t\t\t\t\tdescription: \"The deletion verification token\"\n\t\t\t\t}\n\t\t\t}\n\t\t} } } },\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User deletion processed successfully\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the operation was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\", \"Verification email sent\"],\n\t\t\t\t\t\tdescription: \"Status message of the deletion process\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = ctx.context.session;\n\tif (ctx.body.password) {\n\t\tconst account = (await ctx.context.internalAdapter.findAccounts(session.user.id)).find((account$1) => account$1.providerId === \"credential\" && account$1.password);\n\t\tif (!account || !account.password) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND });\n\t\tif (!await ctx.context.password.verify({\n\t\t\thash: account.password,\n\t\t\tpassword: ctx.body.password\n\t\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_PASSWORD });\n\t}\n\tif (ctx.body.token) {\n\t\tawait deleteUserCallback({\n\t\t\t...ctx,\n\t\t\tquery: { token: ctx.body.token }\n\t\t});\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"User deleted\"\n\t\t});\n\t}\n\tif (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n\t\tconst token = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString)(32, \"0-9\", \"a-z\");\n\t\tawait ctx.context.internalAdapter.createVerificationValue({\n\t\t\tvalue: session.user.id,\n\t\t\tidentifier: `delete-account-${token}`,\n\t\t\texpiresAt: new Date(Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 3600 * 24) * 1e3)\n\t\t});\n\t\tconst url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.user.deleteUser.sendDeleteAccountVerification({\n\t\t\tuser: session.user,\n\t\t\turl,\n\t\t\ttoken\n\t\t}, ctx.request));\n\t\treturn ctx.json({\n\t\t\tsuccess: true,\n\t\t\tmessage: \"Verification email sent\"\n\t\t});\n\t}\n\tif (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n\t\tconst currentAge = new Date(session.session.createdAt).getTime();\n\t\tconst freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n\t\tif (Date.now() - currentAge > freshAge * 1e3) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.SESSION_EXPIRED });\n\t}\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst deleteUserCallback = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/delete-user/callback\", {\n\tmethod: \"GET\",\n\tquery: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\ttoken: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The token to verify the deletion request\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after deletion\" }).optional()\n\t}),\n\tuse: [(0,_middlewares_origin_check_mjs__WEBPACK_IMPORTED_MODULE_1__.originCheck)((ctx) => ctx.query.callbackURL)],\n\tmetadata: { openapi: {\n\t\tdescription: \"Callback to complete user deletion with verification token\",\n\t\tresponses: { \"200\": {\n\t\t\tdescription: \"User successfully deleted\",\n\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\ttype: \"object\",\n\t\t\t\tproperties: {\n\t\t\t\t\tsuccess: {\n\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\tdescription: \"Indicates if the deletion was successful\"\n\t\t\t\t\t},\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\tenum: [\"User deleted\"],\n\t\t\t\t\t\tdescription: \"Confirmation message\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\trequired: [\"success\", \"message\"]\n\t\t\t} } }\n\t\t} }\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.deleteUser?.enabled) {\n\t\tctx.context.logger.error(\"Delete user is disabled. Enable it in the options\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\");\n\t}\n\tconst session = await (0,_session_mjs__WEBPACK_IMPORTED_MODULE_6__.getSessionFromCtx)(ctx);\n\tif (!session) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO });\n\tconst token = await ctx.context.internalAdapter.findVerificationValue(`delete-account-${ctx.query.token}`);\n\tif (!token || token.expiresAt < /* @__PURE__ */ new Date()) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tif (token.value !== session.user.id) throw new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"NOT_FOUND\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.INVALID_TOKEN });\n\tconst beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n\tif (beforeDelete) await beforeDelete(session.user, ctx.request);\n\tawait ctx.context.internalAdapter.deleteUser(session.user.id);\n\tawait ctx.context.internalAdapter.deleteSessions(session.user.id);\n\tawait ctx.context.internalAdapter.deleteAccounts(session.user.id);\n\tawait ctx.context.internalAdapter.deleteVerificationValue(token.id);\n\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.deleteSessionCookie)(ctx);\n\tconst afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n\tif (afterDelete) await afterDelete(session.user, ctx.request);\n\tif (ctx.query.callbackURL) throw ctx.redirect(ctx.query.callbackURL || \"/\");\n\treturn ctx.json({\n\t\tsuccess: true,\n\t\tmessage: \"User deleted\"\n\t});\n});\nconst changeEmail = (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_10__.createAuthEndpoint)(\"/change-email\", {\n\tmethod: \"POST\",\n\tbody: zod__WEBPACK_IMPORTED_MODULE_11__.object({\n\t\tnewEmail: zod__WEBPACK_IMPORTED_MODULE_11__.email().meta({ description: \"The new email address to set must be a valid email address\" }),\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_11__.string().meta({ description: \"The URL to redirect to after email verification\" }).optional()\n\t}),\n\tuse: [_session_mjs__WEBPACK_IMPORTED_MODULE_6__.sensitiveSessionMiddleware],\n\tmetadata: { openapi: {\n\t\toperationId: \"changeEmail\",\n\t\tresponses: {\n\t\t\t\"200\": {\n\t\t\t\tdescription: \"Email change request processed successfully\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t$ref: \"#/components/schemas/User\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\ttype: \"boolean\",\n\t\t\t\t\t\t\tdescription: \"Indicates if the request was successful\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmessage: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tenum: [\"Email updated\", \"Verification email sent\"],\n\t\t\t\t\t\t\tdescription: \"Status message of the email change process\",\n\t\t\t\t\t\t\tnullable: true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\trequired: [\"status\"]\n\t\t\t\t} } }\n\t\t\t},\n\t\t\t\"422\": {\n\t\t\t\tdescription: \"Unprocessable Entity. Email already exists\",\n\t\t\t\tcontent: { \"application/json\": { schema: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\tproperties: { message: { type: \"string\" } }\n\t\t\t\t} } }\n\t\t\t}\n\t\t}\n\t} }\n}, async (ctx) => {\n\tif (!ctx.context.options.user?.changeEmail?.enabled) {\n\t\tctx.context.logger.error(\"Change email is disabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Change email is disabled\" });\n\t}\n\tconst newEmail = ctx.body.newEmail.toLowerCase();\n\tif (newEmail === ctx.context.session.user.email) {\n\t\tctx.context.logger.error(\"Email is the same\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Email is the same\" });\n\t}\n\tif (await ctx.context.internalAdapter.findUserByEmail(newEmail)) {\n\t\tctx.context.logger.error(\"Email already exists\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"UNPROCESSABLE_ENTITY\", { message: _better_auth_core_error__WEBPACK_IMPORTED_MODULE_8__.BASE_ERROR_CODES.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL });\n\t}\n\t/**\n\t* If the email is not verified, we can update the email if the option is enabled\n\t*/\n\tif (ctx.context.session.user.emailVerified !== true && ctx.context.options.user.changeEmail.updateEmailWithoutVerification) {\n\t\tawait ctx.context.internalAdapter.updateUserByEmail(ctx.context.session.user.email, { email: newEmail });\n\t\tawait (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_5__.setSessionCookie)(ctx, {\n\t\t\tsession: ctx.context.session.session,\n\t\t\tuser: {\n\t\t\t\t...ctx.context.session.user,\n\t\t\t\temail: newEmail\n\t\t\t}\n\t\t});\n\t\tif (ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, newEmail, void 0, ctx.context.options.emailVerification?.expiresIn);\n\t\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\t\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\tuser: {\n\t\t\t\t\t...ctx.context.session.user,\n\t\t\t\t\temail: newEmail\n\t\t\t\t},\n\t\t\t\turl: url$1,\n\t\t\t\ttoken: token$1\n\t\t\t}, ctx.request));\n\t\t}\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (ctx.context.session.user.emailVerified && (ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification)) {\n\t\tconst token$1 = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-confirmation\" });\n\t\tconst url$1 = `${ctx.context.baseURL}/verify-email?token=${token$1}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\t\tconst sendFn = ctx.context.options.user.changeEmail.sendChangeEmailConfirmation || ctx.context.options.user.changeEmail.sendChangeEmailVerification;\n\t\tif (sendFn) await ctx.context.runInBackgroundOrAwait(sendFn({\n\t\t\tuser: ctx.context.session.user,\n\t\t\tnewEmail,\n\t\t\turl: url$1,\n\t\t\ttoken: token$1\n\t\t}, ctx.request));\n\t\treturn ctx.json({ status: true });\n\t}\n\tif (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n\t\tctx.context.logger.error(\"Verification email isn't enabled.\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_9__.APIError(\"BAD_REQUEST\", { message: \"Verification email isn't enabled\" });\n\t}\n\tconst token = await (0,_email_verification_mjs__WEBPACK_IMPORTED_MODULE_7__.createEmailVerificationToken)(ctx.context.secret, ctx.context.session.user.email, newEmail, ctx.context.options.emailVerification?.expiresIn, { requestType: \"change-email-verification\" });\n\tconst url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n\tawait ctx.context.runInBackgroundOrAwait(ctx.context.options.emailVerification.sendVerificationEmail({\n\t\tuser: {\n\t\t\t...ctx.context.session.user,\n\t\t\temail: newEmail\n\t\t},\n\t\turl,\n\t\ttoken\n\t}, ctx.request));\n\treturn ctx.json({ status: true });\n});\n\n//#endregion\n\n//# sourceMappingURL=update-user.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3VwZGF0ZS11c2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0U7QUFDUjtBQUM1QjtBQUM2QjtBQUMvQjtBQUNnRDtBQUNpQjtBQUN6QjtBQUNiO0FBQ2xDO0FBQ2M7QUFDb0I7O0FBRTNEO0FBQ0EsNkJBQTZCLHdDQUFRLENBQUMsd0NBQVEsVUFBVSw0Q0FBNEMsR0FBRyxxQ0FBSztBQUM1Ryx5QkFBeUIsMEVBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLE9BQU8sMkRBQWlCO0FBQ3hCO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXLHNCQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixnQkFBZ0I7QUFDaEI7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGdFQUFnRSxpREFBUSxrQkFBa0IsbUNBQW1DO0FBQzdILDJCQUEyQixpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsMkJBQTJCO0FBQ3pHLFNBQVMsdUJBQXVCO0FBQ2hDO0FBQ0EsMEJBQTBCLDhEQUFjO0FBQ3hDLGtHQUFrRyxpREFBUSxrQkFBa0IsZ0NBQWdDO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsMEJBQTBCLE1BQU07QUFDaEMsMkJBQTJCLE9BQU87QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sb0VBQWdCO0FBQ3ZCO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQztBQUNELHVCQUF1QiwwRUFBa0I7QUFDekM7QUFDQTtBQUNBLE9BQU8sd0NBQVE7QUFDZixlQUFlLHdDQUFRLFVBQVUsd0NBQXdDO0FBQ3pFLG1CQUFtQix3Q0FBUSxVQUFVLGlEQUFpRDtBQUN0Rix1QkFBdUIseUNBQVMsVUFBVSx3Q0FBd0M7QUFDbEYsRUFBRTtBQUNGLE9BQU8sb0VBQTBCO0FBQ2pDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsU0FBUyxvREFBb0Q7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixxQkFBcUI7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixvQkFBb0I7QUFDbkY7QUFDQTtBQUNBLDhDQUE4QyxpREFBUSxrQkFBa0IsU0FBUyxxRUFBZ0IsK0JBQStCO0FBQ2hJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDckYsK0RBQStELHdCQUF3QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpREFBUSw0QkFBNEIsU0FBUyxxRUFBZ0Isd0JBQXdCO0FBQ2xILFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLCtEQUFlO0FBQ3ZCLEVBQUU7QUFDRixDQUFDO0FBQ0Qsb0JBQW9CLDBFQUFrQjtBQUN0QztBQUNBLE9BQU8sd0NBQVEsR0FBRyxhQUFhLHdDQUFRLFVBQVUsb0RBQW9ELEdBQUc7QUFDeEcsT0FBTyxvRUFBMEI7QUFDakMsQ0FBQztBQUNELFNBQVMsY0FBYztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLHFCQUFxQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLG9CQUFvQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLGNBQWM7QUFDbEM7QUFDQSxXQUFXLGlEQUFRLGtCQUFrQix3Q0FBd0M7QUFDN0UsQ0FBQztBQUNELG1CQUFtQiwwRUFBa0I7QUFDckM7QUFDQSxPQUFPLG9FQUEwQjtBQUNqQyxPQUFPLHdDQUFRO0FBQ2YsZUFBZSx3Q0FBUSxVQUFVLDBFQUEwRTtBQUMzRyxZQUFZLHdDQUFRLFVBQVUsd0VBQXdFO0FBQ3RHLFNBQVMsd0NBQVEsVUFBVSx5REFBeUQ7QUFDcEYsRUFBRTtBQUNGLGFBQWE7QUFDYjtBQUNBO0FBQ0EsaUJBQWlCLFdBQVcsc0JBQXNCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZUFBZTtBQUNmO0FBQ0EsY0FBYyxzQkFBc0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxZQUFZLGlEQUFRO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQiwrQkFBK0I7QUFDakk7QUFDQTtBQUNBO0FBQ0EsR0FBRyxhQUFhLGlEQUFRLGtCQUFrQixTQUFTLHFFQUFnQixtQkFBbUI7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsZ0JBQWdCLHdFQUFvQjtBQUNwQztBQUNBO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCLG9CQUFvQiw4QkFBOEIsTUFBTSxlQUFlLDRCQUE0QjtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsaURBQVEsa0JBQWtCLFNBQVMscUVBQWdCLGtCQUFrQjtBQUMvSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx1RUFBbUI7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDO0FBQ0QsMkJBQTJCLDBFQUFrQjtBQUM3QztBQUNBLFFBQVEsd0NBQVE7QUFDaEIsU0FBUyx3Q0FBUSxVQUFVLHlEQUF5RDtBQUNwRixlQUFlLHdDQUFRLFVBQVUsc0RBQXNEO0FBQ3ZGLEVBQUU7QUFDRixPQUFPLDBFQUFXO0FBQ2xCLGFBQWE7QUFDYjtBQUNBLGVBQWU7QUFDZjtBQUNBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUTtBQUNwQjtBQUNBLHVCQUF1QiwrREFBaUI7QUFDeEMseUJBQXlCLGlEQUFRLGdCQUFnQixTQUFTLHFFQUFnQiwwQkFBMEI7QUFDcEcseUZBQXlGLGdCQUFnQjtBQUN6Ryx1RUFBdUUsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUN4SSxnREFBZ0QsaURBQVEsZ0JBQWdCLFNBQVMscUVBQWdCLGdCQUFnQjtBQUNqSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHVFQUFtQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQztBQUNELG9CQUFvQiwwRUFBa0I7QUFDdEM7QUFDQSxPQUFPLHdDQUFRO0FBQ2YsWUFBWSx1Q0FBTyxVQUFVLDJFQUEyRTtBQUN4RyxlQUFlLHdDQUFRLFVBQVUsZ0VBQWdFO0FBQ2pHLEVBQUU7QUFDRixPQUFPLG9FQUEwQjtBQUNqQyxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxtQkFBbUIsV0FBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IscUNBQXFDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpREFBUSxrQkFBa0IsOEJBQThCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsMkJBQTJCLFNBQVMscUVBQWdCLHdDQUF3QztBQUNoSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLGlCQUFpQjtBQUN6RyxRQUFRLG9FQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EseUJBQXlCLHFGQUE0QjtBQUNyRCxvQkFBb0Isb0JBQW9CLHNCQUFzQixRQUFRLGVBQWUsNEJBQTRCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxvQkFBb0IsY0FBYztBQUNsQztBQUNBO0FBQ0Esd0JBQXdCLHFGQUE0QixtSEFBbUgsMENBQTBDO0FBQ2pOLG1CQUFtQixvQkFBb0Isc0JBQXNCLFFBQVEsZUFBZSw0QkFBNEI7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILG9CQUFvQixjQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLFlBQVksaURBQVEsa0JBQWtCLDZDQUE2QztBQUNuRjtBQUNBLHFCQUFxQixxRkFBNEIsbUhBQW1ILDBDQUEwQztBQUM5TSxnQkFBZ0Isb0JBQW9CLHNCQUFzQixNQUFNLGVBQWUsNEJBQTRCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsbUJBQW1CLGNBQWM7QUFDakMsQ0FBQzs7QUFFRDtBQUNnRztBQUNoRyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvcm91dGVzL3VwZGF0ZS11c2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uLy4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IG9yaWdpbkNoZWNrIH0gZnJvbSBcIi4uL21pZGRsZXdhcmVzL29yaWdpbi1jaGVjay5tanNcIjtcbmltcG9ydCBcIi4uL21pZGRsZXdhcmVzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCBcIi4uLy4uL2NyeXB0by9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlbGV0ZVNlc3Npb25Db29raWUsIHNldFNlc3Npb25Db29raWUgfSBmcm9tIFwiLi4vLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tQ3R4LCBzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZSwgc2Vzc2lvbk1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zZXNzaW9uLm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbiB9IGZyb20gXCIuL2VtYWlsLXZlcmlmaWNhdGlvbi5tanNcIjtcbmltcG9ydCB7IEJBU0VfRVJST1JfQ09ERVMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9hcGlcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvcm91dGVzL3VwZGF0ZS11c2VyLnRzXG5jb25zdCB1cGRhdGVVc2VyQm9keVNjaGVtYSA9IHoucmVjb3JkKHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkZpZWxkIG5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiIH0pLCB6LmFueSgpKTtcbmNvbnN0IHVwZGF0ZVVzZXIgPSAoKSA9PiBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvdXBkYXRlLXVzZXJcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRvcGVyYXRpb25JZDogXCJ1cGRhdGVVc2VyXCIsXG5cdGJvZHk6IHVwZGF0ZVVzZXJCb2R5U2NoZW1hLFxuXHR1c2U6IFtzZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7XG5cdFx0JEluZmVyOiB7IGJvZHk6IHt9IH0sXG5cdFx0b3BlbmFwaToge1xuXHRcdFx0b3BlcmF0aW9uSWQ6IFwidXBkYXRlVXNlclwiLFxuXHRcdFx0ZGVzY3JpcHRpb246IFwiVXBkYXRlIHRoZSBjdXJyZW50IHVzZXJcIixcblx0XHRcdHJlcXVlc3RCb2R5OiB7IGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIG5hbWUgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aW1hZ2U6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgaW1hZ2Ugb2YgdGhlIHVzZXJcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IH0gfSB9LFxuXHRcdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3VjY2Vzc1wiLFxuXHRcdFx0XHRjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0cHJvcGVydGllczogeyB1c2VyOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHR9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH0gfVxuXHRcdH1cblx0fVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCBib2R5ID0gY3R4LmJvZHk7XG5cdGlmICh0eXBlb2YgYm9keSAhPT0gXCJvYmplY3RcIiB8fCBBcnJheS5pc0FycmF5KGJvZHkpKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiQm9keSBtdXN0IGJlIGFuIG9iamVjdFwiIH0pO1xuXHRpZiAoYm9keS5lbWFpbCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkVNQUlMX0NBTl9OT1RfQkVfVVBEQVRFRCB9KTtcblx0Y29uc3QgeyBuYW1lLCBpbWFnZSwgLi4ucmVzdCB9ID0gYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHMgPSBwYXJzZVVzZXJJbnB1dChjdHguY29udGV4dC5vcHRpb25zLCByZXN0LCBcInVwZGF0ZVwiKTtcblx0aWYgKGltYWdlID09PSB2b2lkIDAgJiYgbmFtZSA9PT0gdm9pZCAwICYmIE9iamVjdC5rZXlzKGFkZGl0aW9uYWxGaWVsZHMpLmxlbmd0aCA9PT0gMCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIk5vIGZpZWxkcyB0byB1cGRhdGVcIiB9KTtcblx0Y29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihzZXNzaW9uLnVzZXIuaWQsIHtcblx0XHRuYW1lLFxuXHRcdGltYWdlLFxuXHRcdC4uLmFkZGl0aW9uYWxGaWVsZHNcblx0fSkgPz8ge1xuXHRcdC4uLnNlc3Npb24udXNlcixcblx0XHQuLi5uYW1lICE9PSB2b2lkIDAgJiYgeyBuYW1lIH0sXG5cdFx0Li4uaW1hZ2UgIT09IHZvaWQgMCAmJiB7IGltYWdlIH0sXG5cdFx0Li4uYWRkaXRpb25hbEZpZWxkc1xuXHR9O1xuXHQvKipcblx0KiBVcGRhdGUgdGhlIHNlc3Npb24gY29va2llIHdpdGggdGhlIG5ldyB1c2VyIGRhdGFcblx0Ki9cblx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRzZXNzaW9uOiBzZXNzaW9uLnNlc3Npb24sXG5cdFx0dXNlcjogdXBkYXRlZFVzZXJcblx0fSk7XG5cdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcbn0pO1xuY29uc3QgY2hhbmdlUGFzc3dvcmQgPSBjcmVhdGVBdXRoRW5kcG9pbnQoXCIvY2hhbmdlLXBhc3N3b3JkXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0b3BlcmF0aW9uSWQ6IFwiY2hhbmdlUGFzc3dvcmRcIixcblx0Ym9keTogei5vYmplY3Qoe1xuXHRcdG5ld1Bhc3N3b3JkOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgbmV3IHBhc3N3b3JkIHRvIHNldFwiIH0pLFxuXHRcdGN1cnJlbnRQYXNzd29yZDogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIGN1cnJlbnQgcGFzc3dvcmQgaXMgcmVxdWlyZWRcIiB9KSxcblx0XHRyZXZva2VPdGhlclNlc3Npb25zOiB6LmJvb2xlYW4oKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiTXVzdCBiZSBhIGJvb2xlYW4gdmFsdWVcIiB9KS5vcHRpb25hbCgpXG5cdH0pLFxuXHR1c2U6IFtzZW5zaXRpdmVTZXNzaW9uTWlkZGxld2FyZV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRvcGVyYXRpb25JZDogXCJjaGFuZ2VQYXNzd29yZFwiLFxuXHRcdGRlc2NyaXB0aW9uOiBcIkNoYW5nZSB0aGUgcGFzc3dvcmQgb2YgdGhlIHVzZXJcIixcblx0XHRyZXNwb25zZXM6IHsgXCIyMDBcIjoge1xuXHRcdFx0ZGVzY3JpcHRpb246IFwiUGFzc3dvcmQgc3VjY2Vzc2Z1bGx5IGNoYW5nZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHR0b2tlbjoge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdG51bGxhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiTmV3IHNlc3Npb24gdG9rZW4gaWYgb3RoZXIgc2Vzc2lvbnMgd2VyZSByZXZva2VkXCJcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7XG5cdFx0XHRcdFx0XHRcdGlkOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRlbWFpbDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImVtYWlsXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIHVzZXJcIlxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRuYW1lOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgbmFtZSBvZiB0aGUgdXNlclwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGltYWdlOiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwidXJpXCIsXG5cdFx0XHRcdFx0XHRcdFx0bnVsbGFibGU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVGhlIHByb2ZpbGUgaW1hZ2UgVVJMIG9mIHRoZSB1c2VyXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0ZW1haWxWZXJpZmllZDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZXRoZXIgdGhlIGVtYWlsIGhhcyBiZWVuIHZlcmlmaWVkXCJcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdFx0XHRmb3JtYXQ6IFwiZGF0ZS10aW1lXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiV2hlbiB0aGUgdXNlciB3YXMgY3JlYXRlZFwiXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDoge1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic3RyaW5nXCIsXG5cdFx0XHRcdFx0XHRcdFx0Zm9ybWF0OiBcImRhdGUtdGltZVwiLFxuXHRcdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIldoZW4gdGhlIHVzZXIgd2FzIGxhc3QgdXBkYXRlZFwiXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXF1aXJlZDogW1xuXHRcdFx0XHRcdFx0XHRcImlkXCIsXG5cdFx0XHRcdFx0XHRcdFwiZW1haWxcIixcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCIsXG5cdFx0XHRcdFx0XHRcdFwiZW1haWxWZXJpZmllZFwiLFxuXHRcdFx0XHRcdFx0XHRcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdFx0XHRcInVwZGF0ZWRBdFwiXG5cdFx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRyZXF1aXJlZDogW1widXNlclwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGNvbnN0IHsgbmV3UGFzc3dvcmQsIGN1cnJlbnRQYXNzd29yZCwgcmV2b2tlT3RoZXJTZXNzaW9ucyB9ID0gY3R4LmJvZHk7XG5cdGNvbnN0IHNlc3Npb24gPSBjdHguY29udGV4dC5zZXNzaW9uO1xuXHRjb25zdCBtaW5QYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5taW5QYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA8IG1pblBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIHNob3J0XCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fU0hPUlQgfSk7XG5cdH1cblx0Y29uc3QgbWF4UGFzc3dvcmRMZW5ndGggPSBjdHguY29udGV4dC5wYXNzd29yZC5jb25maWcubWF4UGFzc3dvcmRMZW5ndGg7XG5cdGlmIChuZXdQYXNzd29yZC5sZW5ndGggPiBtYXhQYXNzd29yZExlbmd0aCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlBhc3N3b3JkIGlzIHRvbyBsb25nXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5QQVNTV09SRF9UT09fTE9ORyB9KTtcblx0fVxuXHRjb25zdCBhY2NvdW50ID0gKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKSkuZmluZCgoYWNjb3VudCQxKSA9PiBhY2NvdW50JDEucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIgJiYgYWNjb3VudCQxLnBhc3N3b3JkKTtcblx0aWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0Y29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQuaGFzaChuZXdQYXNzd29yZCk7XG5cdGlmICghYXdhaXQgY3R4LmNvbnRleHQucGFzc3dvcmQudmVyaWZ5KHtcblx0XHRoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBjdXJyZW50UGFzc3dvcmRcblx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlQWNjb3VudChhY2NvdW50LmlkLCB7IHBhc3N3b3JkOiBwYXNzd29yZEhhc2ggfSk7XG5cdGxldCB0b2tlbiA9IG51bGw7XG5cdGlmIChyZXZva2VPdGhlclNlc3Npb25zKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVNlc3Npb25zKHNlc3Npb24udXNlci5pZCk7XG5cdFx0Y29uc3QgbmV3U2Vzc2lvbiA9IGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVTZXNzaW9uKHNlc3Npb24udXNlci5pZCk7XG5cdFx0aWYgKCFuZXdTZXNzaW9uKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLkZBSUxFRF9UT19HRVRfU0VTU0lPTiB9KTtcblx0XHRhd2FpdCBzZXRTZXNzaW9uQ29va2llKGN0eCwge1xuXHRcdFx0c2Vzc2lvbjogbmV3U2Vzc2lvbixcblx0XHRcdHVzZXI6IHNlc3Npb24udXNlclxuXHRcdH0pO1xuXHRcdHRva2VuID0gbmV3U2Vzc2lvbi50b2tlbjtcblx0fVxuXHRyZXR1cm4gY3R4Lmpzb24oe1xuXHRcdHRva2VuLFxuXHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHguY29udGV4dC5vcHRpb25zLCBzZXNzaW9uLnVzZXIpXG5cdH0pO1xufSk7XG5jb25zdCBzZXRQYXNzd29yZCA9IGNyZWF0ZUF1dGhFbmRwb2ludCh7XG5cdG1ldGhvZDogXCJQT1NUXCIsXG5cdGJvZHk6IHoub2JqZWN0KHsgbmV3UGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBuZXcgcGFzc3dvcmQgdG8gc2V0IGlzIHJlcXVpcmVkXCIgfSkgfSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRjb25zdCB7IG5ld1Bhc3N3b3JkIH0gPSBjdHguYm9keTtcblx0Y29uc3Qgc2Vzc2lvbiA9IGN0eC5jb250ZXh0LnNlc3Npb247XG5cdGNvbnN0IG1pblBhc3N3b3JkTGVuZ3RoID0gY3R4LmNvbnRleHQucGFzc3dvcmQuY29uZmlnLm1pblBhc3N3b3JkTGVuZ3RoO1xuXHRpZiAobmV3UGFzc3dvcmQubGVuZ3RoIDwgbWluUGFzc3dvcmRMZW5ndGgpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJQYXNzd29yZCBpcyB0b28gc2hvcnRcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19TSE9SVCB9KTtcblx0fVxuXHRjb25zdCBtYXhQYXNzd29yZExlbmd0aCA9IGN0eC5jb250ZXh0LnBhc3N3b3JkLmNvbmZpZy5tYXhQYXNzd29yZExlbmd0aDtcblx0aWYgKG5ld1Bhc3N3b3JkLmxlbmd0aCA+IG1heFBhc3N3b3JkTGVuZ3RoKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiUGFzc3dvcmQgaXMgdG9vIGxvbmdcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlBBU1NXT1JEX1RPT19MT05HIH0pO1xuXHR9XG5cdGNvbnN0IGFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhzZXNzaW9uLnVzZXIuaWQpKS5maW5kKChhY2NvdW50JDEpID0+IGFjY291bnQkMS5wcm92aWRlcklkID09PSBcImNyZWRlbnRpYWxcIiAmJiBhY2NvdW50JDEucGFzc3dvcmQpO1xuXHRjb25zdCBwYXNzd29yZEhhc2ggPSBhd2FpdCBjdHguY29udGV4dC5wYXNzd29yZC5oYXNoKG5ld1Bhc3N3b3JkKTtcblx0aWYgKCFhY2NvdW50KSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmxpbmtBY2NvdW50KHtcblx0XHRcdHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkLFxuXHRcdFx0cHJvdmlkZXJJZDogXCJjcmVkZW50aWFsXCIsXG5cdFx0XHRhY2NvdW50SWQ6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdHBhc3N3b3JkOiBwYXNzd29yZEhhc2hcblx0XHR9KTtcblx0XHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG5cdH1cblx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcInVzZXIgYWxyZWFkeSBoYXMgYSBwYXNzd29yZFwiIH0pO1xufSk7XG5jb25zdCBkZWxldGVVc2VyID0gY3JlYXRlQXV0aEVuZHBvaW50KFwiL2RlbGV0ZS11c2VyXCIsIHtcblx0bWV0aG9kOiBcIlBPU1RcIixcblx0dXNlOiBbc2Vuc2l0aXZlU2Vzc2lvbk1pZGRsZXdhcmVdLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0Y2FsbGJhY2tVUkw6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBjYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaXMgZGVsZXRlZFwiIH0pLm9wdGlvbmFsKCksXG5cdFx0cGFzc3dvcmQ6IHouc3RyaW5nKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIlRoZSBwYXNzd29yZCBvZiB0aGUgdXNlciBpcyByZXF1aXJlZCB0byBkZWxldGUgdGhlIHVzZXJcIiB9KS5vcHRpb25hbCgpLFxuXHRcdHRva2VuOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgdG9rZW4gdG8gZGVsZXRlIHRoZSB1c2VyIGlzIHJlcXVpcmVkXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImRlbGV0ZVVzZXJcIixcblx0XHRkZXNjcmlwdGlvbjogXCJEZWxldGUgdGhlIHVzZXJcIixcblx0XHRyZXF1ZXN0Qm9keTogeyBjb250ZW50OiB7IFwiYXBwbGljYXRpb24vanNvblwiOiB7IHNjaGVtYToge1xuXHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0Y2FsbGJhY2tVUkw6IHtcblx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlRoZSBjYWxsYmFjayBVUkwgdG8gcmVkaXJlY3QgdG8gYWZ0ZXIgdGhlIHVzZXIgaXMgZGVsZXRlZFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHBhc3N3b3JkOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgdXNlcidzIHBhc3N3b3JkLiBSZXF1aXJlZCBpZiBzZXNzaW9uIGlzIG5vdCBmcmVzaFwiXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRva2VuOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogXCJUaGUgZGVsZXRpb24gdmVyaWZpY2F0aW9uIHRva2VuXCJcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gfSB9IH0sXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgZGVsZXRpb24gcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseVwiLFxuXHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0cHJvcGVydGllczoge1xuXHRcdFx0XHRcdHN1Y2Nlc3M6IHtcblx0XHRcdFx0XHRcdHR5cGU6IFwiYm9vbGVhblwiLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiSW5kaWNhdGVzIGlmIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGVudW06IFtcIlVzZXIgZGVsZXRlZFwiLCBcIlZlcmlmaWNhdGlvbiBlbWFpbCBzZW50XCJdLFxuXHRcdFx0XHRcdFx0ZGVzY3JpcHRpb246IFwiU3RhdHVzIG1lc3NhZ2Ugb2YgdGhlIGRlbGV0aW9uIHByb2Nlc3NcIlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0cmVxdWlyZWQ6IFtcInN1Y2Nlc3NcIiwgXCJtZXNzYWdlXCJdXG5cdFx0XHR9IH0gfVxuXHRcdH0gfVxuXHR9IH1cbn0sIGFzeW5jIChjdHgpID0+IHtcblx0aWYgKCFjdHguY29udGV4dC5vcHRpb25zLnVzZXI/LmRlbGV0ZVVzZXI/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJEZWxldGUgdXNlciBpcyBkaXNhYmxlZC4gRW5hYmxlIGl0IGluIHRoZSBvcHRpb25zXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIk5PVF9GT1VORFwiKTtcblx0fVxuXHRjb25zdCBzZXNzaW9uID0gY3R4LmNvbnRleHQuc2Vzc2lvbjtcblx0aWYgKGN0eC5ib2R5LnBhc3N3b3JkKSB7XG5cdFx0Y29uc3QgYWNjb3VudCA9IChhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZEFjY291bnRzKHNlc3Npb24udXNlci5pZCkpLmZpbmQoKGFjY291bnQkMSkgPT4gYWNjb3VudCQxLnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiICYmIGFjY291bnQkMS5wYXNzd29yZCk7XG5cdFx0aWYgKCFhY2NvdW50IHx8ICFhY2NvdW50LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IEJBU0VfRVJST1JfQ09ERVMuQ1JFREVOVElBTF9BQ0NPVU5UX05PVF9GT1VORCB9KTtcblx0XHRpZiAoIWF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0XHRoYXNoOiBhY2NvdW50LnBhc3N3b3JkLFxuXHRcdFx0cGFzc3dvcmQ6IGN0eC5ib2R5LnBhc3N3b3JkXG5cdFx0fSkpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1BBU1NXT1JEIH0pO1xuXHR9XG5cdGlmIChjdHguYm9keS50b2tlbikge1xuXHRcdGF3YWl0IGRlbGV0ZVVzZXJDYWxsYmFjayh7XG5cdFx0XHQuLi5jdHgsXG5cdFx0XHRxdWVyeTogeyB0b2tlbjogY3R4LmJvZHkudG9rZW4gfVxuXHRcdH0pO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJVc2VyIGRlbGV0ZWRcIlxuXHRcdH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uc2VuZERlbGV0ZUFjY291bnRWZXJpZmljYXRpb24pIHtcblx0XHRjb25zdCB0b2tlbiA9IGdlbmVyYXRlUmFuZG9tU3RyaW5nKDMyLCBcIjAtOVwiLCBcImEtelwiKTtcblx0XHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuY3JlYXRlVmVyaWZpY2F0aW9uVmFsdWUoe1xuXHRcdFx0dmFsdWU6IHNlc3Npb24udXNlci5pZCxcblx0XHRcdGlkZW50aWZpZXI6IGBkZWxldGUtYWNjb3VudC0ke3Rva2VufWAsXG5cdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKERhdGUubm93KCkgKyAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmRlbGV0ZVRva2VuRXhwaXJlc0luIHx8IDM2MDAgKiAyNCkgKiAxZTMpXG5cdFx0fSk7XG5cdFx0Y29uc3QgdXJsID0gYCR7Y3R4LmNvbnRleHQuYmFzZVVSTH0vZGVsZXRlLXVzZXIvY2FsbGJhY2s/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjdHguYm9keS5jYWxsYmFja1VSTCB8fCBcIi9cIn1gO1xuXHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXIuc2VuZERlbGV0ZUFjY291bnRWZXJpZmljYXRpb24oe1xuXHRcdFx0dXNlcjogc2Vzc2lvbi51c2VyLFxuXHRcdFx0dXJsLFxuXHRcdFx0dG9rZW5cblx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdHJldHVybiBjdHguanNvbih7XG5cdFx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJWZXJpZmljYXRpb24gZW1haWwgc2VudFwiXG5cdFx0fSk7XG5cdH1cblx0aWYgKCFjdHguYm9keS5wYXNzd29yZCAmJiBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmZyZXNoQWdlICE9PSAwKSB7XG5cdFx0Y29uc3QgY3VycmVudEFnZSA9IG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi5jcmVhdGVkQXQpLmdldFRpbWUoKTtcblx0XHRjb25zdCBmcmVzaEFnZSA9IGN0eC5jb250ZXh0LnNlc3Npb25Db25maWcuZnJlc2hBZ2UgKiAxZTM7XG5cdFx0aWYgKERhdGUubm93KCkgLSBjdXJyZW50QWdlID4gZnJlc2hBZ2UgKiAxZTMpIHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5TRVNTSU9OX0VYUElSRUQgfSk7XG5cdH1cblx0Y29uc3QgYmVmb3JlRGVsZXRlID0gY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmRlbGV0ZVVzZXI/LmJlZm9yZURlbGV0ZTtcblx0aWYgKGJlZm9yZURlbGV0ZSkgYXdhaXQgYmVmb3JlRGVsZXRlKHNlc3Npb24udXNlciwgY3R4LnJlcXVlc3QpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlVXNlcihzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlU2Vzc2lvbnMoc2Vzc2lvbi51c2VyLmlkKTtcblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcblx0aWYgKGFmdGVyRGVsZXRlKSBhd2FpdCBhZnRlckRlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0cmV0dXJuIGN0eC5qc29uKHtcblx0XHRzdWNjZXNzOiB0cnVlLFxuXHRcdG1lc3NhZ2U6IFwiVXNlciBkZWxldGVkXCJcblx0fSk7XG59KTtcbmNvbnN0IGRlbGV0ZVVzZXJDYWxsYmFjayA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9kZWxldGUtdXNlci9jYWxsYmFja1wiLCB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0cXVlcnk6IHoub2JqZWN0KHtcblx0XHR0b2tlbjogei5zdHJpbmcoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIHRva2VuIHRvIHZlcmlmeSB0aGUgZGVsZXRpb24gcmVxdWVzdFwiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGRlbGV0aW9uXCIgfSkub3B0aW9uYWwoKVxuXHR9KSxcblx0dXNlOiBbb3JpZ2luQ2hlY2soKGN0eCkgPT4gY3R4LnF1ZXJ5LmNhbGxiYWNrVVJMKV0sXG5cdG1ldGFkYXRhOiB7IG9wZW5hcGk6IHtcblx0XHRkZXNjcmlwdGlvbjogXCJDYWxsYmFjayB0byBjb21wbGV0ZSB1c2VyIGRlbGV0aW9uIHdpdGggdmVyaWZpY2F0aW9uIHRva2VuXCIsXG5cdFx0cmVzcG9uc2VzOiB7IFwiMjAwXCI6IHtcblx0XHRcdGRlc2NyaXB0aW9uOiBcIlVzZXIgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWRcIixcblx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdHR5cGU6IFwib2JqZWN0XCIsXG5cdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRzdWNjZXNzOiB7XG5cdFx0XHRcdFx0XHR0eXBlOiBcImJvb2xlYW5cIixcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgZGVsZXRpb24gd2FzIHN1Y2Nlc3NmdWxcIlxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0dHlwZTogXCJzdHJpbmdcIixcblx0XHRcdFx0XHRcdGVudW06IFtcIlVzZXIgZGVsZXRlZFwiXSxcblx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkNvbmZpcm1hdGlvbiBtZXNzYWdlXCJcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJlcXVpcmVkOiBbXCJzdWNjZXNzXCIsIFwibWVzc2FnZVwiXVxuXHRcdFx0fSB9IH1cblx0XHR9IH1cblx0fSB9XG59LCBhc3luYyAoY3R4KSA9PiB7XG5cdGlmICghY3R4LmNvbnRleHQub3B0aW9ucy51c2VyPy5kZWxldGVVc2VyPy5lbmFibGVkKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRGVsZXRlIHVzZXIgaXMgZGlzYWJsZWQuIEVuYWJsZSBpdCBpbiB0aGUgb3B0aW9uc1wiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJOT1RfRk9VTkRcIik7XG5cdH1cblx0Y29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25Gcm9tQ3R4KGN0eCk7XG5cdGlmICghc2Vzc2lvbikgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5GQUlMRURfVE9fR0VUX1VTRVJfSU5GTyB9KTtcblx0Y29uc3QgdG9rZW4gPSBhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKGBkZWxldGUtYWNjb3VudC0ke2N0eC5xdWVyeS50b2tlbn1gKTtcblx0aWYgKCF0b2tlbiB8fCB0b2tlbi5leHBpcmVzQXQgPCAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRpZiAodG9rZW4udmFsdWUgIT09IHNlc3Npb24udXNlci5pZCkgdGhyb3cgbmV3IEFQSUVycm9yKFwiTk9UX0ZPVU5EXCIsIHsgbWVzc2FnZTogQkFTRV9FUlJPUl9DT0RFUy5JTlZBTElEX1RPS0VOIH0pO1xuXHRjb25zdCBiZWZvcmVEZWxldGUgPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuZGVsZXRlVXNlcj8uYmVmb3JlRGVsZXRlO1xuXHRpZiAoYmVmb3JlRGVsZXRlKSBhd2FpdCBiZWZvcmVEZWxldGUoc2Vzc2lvbi51c2VyLCBjdHgucmVxdWVzdCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVVc2VyKHNlc3Npb24udXNlci5pZCk7XG5cdGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5kZWxldGVTZXNzaW9ucyhzZXNzaW9uLnVzZXIuaWQpO1xuXHRhd2FpdCBjdHguY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZGVsZXRlQWNjb3VudHMoc2Vzc2lvbi51c2VyLmlkKTtcblx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKHRva2VuLmlkKTtcblx0ZGVsZXRlU2Vzc2lvbkNvb2tpZShjdHgpO1xuXHRjb25zdCBhZnRlckRlbGV0ZSA9IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5kZWxldGVVc2VyPy5hZnRlckRlbGV0ZTtcblx0aWYgKGFmdGVyRGVsZXRlKSBhd2FpdCBhZnRlckRlbGV0ZShzZXNzaW9uLnVzZXIsIGN0eC5yZXF1ZXN0KTtcblx0aWYgKGN0eC5xdWVyeS5jYWxsYmFja1VSTCkgdGhyb3cgY3R4LnJlZGlyZWN0KGN0eC5xdWVyeS5jYWxsYmFja1VSTCB8fCBcIi9cIik7XG5cdHJldHVybiBjdHguanNvbih7XG5cdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRtZXNzYWdlOiBcIlVzZXIgZGVsZXRlZFwiXG5cdH0pO1xufSk7XG5jb25zdCBjaGFuZ2VFbWFpbCA9IGNyZWF0ZUF1dGhFbmRwb2ludChcIi9jaGFuZ2UtZW1haWxcIiwge1xuXHRtZXRob2Q6IFwiUE9TVFwiLFxuXHRib2R5OiB6Lm9iamVjdCh7XG5cdFx0bmV3RW1haWw6IHouZW1haWwoKS5tZXRhKHsgZGVzY3JpcHRpb246IFwiVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIHNldCBtdXN0IGJlIGEgdmFsaWQgZW1haWwgYWRkcmVzc1wiIH0pLFxuXHRcdGNhbGxiYWNrVVJMOiB6LnN0cmluZygpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJUaGUgVVJMIHRvIHJlZGlyZWN0IHRvIGFmdGVyIGVtYWlsIHZlcmlmaWNhdGlvblwiIH0pLm9wdGlvbmFsKClcblx0fSksXG5cdHVzZTogW3NlbnNpdGl2ZVNlc3Npb25NaWRkbGV3YXJlXSxcblx0bWV0YWRhdGE6IHsgb3BlbmFwaToge1xuXHRcdG9wZXJhdGlvbklkOiBcImNoYW5nZUVtYWlsXCIsXG5cdFx0cmVzcG9uc2VzOiB7XG5cdFx0XHRcIjIwMFwiOiB7XG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkVtYWlsIGNoYW5nZSByZXF1ZXN0IHByb2Nlc3NlZCBzdWNjZXNzZnVsbHlcIixcblx0XHRcdFx0Y29udGVudDogeyBcImFwcGxpY2F0aW9uL2pzb25cIjogeyBzY2hlbWE6IHtcblx0XHRcdFx0XHR0eXBlOiBcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHByb3BlcnRpZXM6IHtcblx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRcdFx0JHJlZjogXCIjL2NvbXBvbmVudHMvc2NoZW1hcy9Vc2VyXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJib29sZWFuXCIsXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIkluZGljYXRlcyBpZiB0aGUgcmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bFwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0bWVzc2FnZToge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBcInN0cmluZ1wiLFxuXHRcdFx0XHRcdFx0XHRlbnVtOiBbXCJFbWFpbCB1cGRhdGVkXCIsIFwiVmVyaWZpY2F0aW9uIGVtYWlsIHNlbnRcIl0sXG5cdFx0XHRcdFx0XHRcdGRlc2NyaXB0aW9uOiBcIlN0YXR1cyBtZXNzYWdlIG9mIHRoZSBlbWFpbCBjaGFuZ2UgcHJvY2Vzc1wiLFxuXHRcdFx0XHRcdFx0XHRudWxsYWJsZTogdHJ1ZVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVxdWlyZWQ6IFtcInN0YXR1c1wiXVxuXHRcdFx0XHR9IH0gfVxuXHRcdFx0fSxcblx0XHRcdFwiNDIyXCI6IHtcblx0XHRcdFx0ZGVzY3JpcHRpb246IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHkuIEVtYWlsIGFscmVhZHkgZXhpc3RzXCIsXG5cdFx0XHRcdGNvbnRlbnQ6IHsgXCJhcHBsaWNhdGlvbi9qc29uXCI6IHsgc2NoZW1hOiB7XG5cdFx0XHRcdFx0dHlwZTogXCJvYmplY3RcIixcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiB7IG1lc3NhZ2U6IHsgdHlwZTogXCJzdHJpbmdcIiB9IH1cblx0XHRcdFx0fSB9IH1cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufSwgYXN5bmMgKGN0eCkgPT4ge1xuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMudXNlcj8uY2hhbmdlRW1haWw/LmVuYWJsZWQpIHtcblx0XHRjdHguY29udGV4dC5sb2dnZXIuZXJyb3IoXCJDaGFuZ2UgZW1haWwgaXMgZGlzYWJsZWQuXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIkJBRF9SRVFVRVNUXCIsIHsgbWVzc2FnZTogXCJDaGFuZ2UgZW1haWwgaXMgZGlzYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCBuZXdFbWFpbCA9IGN0eC5ib2R5Lm5ld0VtYWlsLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChuZXdFbWFpbCA9PT0gY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgaXMgdGhlIHNhbWVcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiBcIkVtYWlsIGlzIHRoZSBzYW1lXCIgfSk7XG5cdH1cblx0aWYgKGF3YWl0IGN0eC5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kVXNlckJ5RW1haWwobmV3RW1haWwpKSB7XG5cdFx0Y3R4LmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRW1haWwgYWxyZWFkeSBleGlzdHNcIik7XG5cdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiVU5QUk9DRVNTQUJMRV9FTlRJVFlcIiwgeyBtZXNzYWdlOiBCQVNFX0VSUk9SX0NPREVTLlVTRVJfQUxSRUFEWV9FWElTVFNfVVNFX0FOT1RIRVJfRU1BSUwgfSk7XG5cdH1cblx0LyoqXG5cdCogSWYgdGhlIGVtYWlsIGlzIG5vdCB2ZXJpZmllZCwgd2UgY2FuIHVwZGF0ZSB0aGUgZW1haWwgaWYgdGhlIG9wdGlvbiBpcyBlbmFibGVkXG5cdCovXG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWxWZXJpZmllZCAhPT0gdHJ1ZSAmJiBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwudXBkYXRlRW1haWxXaXRob3V0VmVyaWZpY2F0aW9uKSB7XG5cdFx0YXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXJCeUVtYWlsKGN0eC5jb250ZXh0LnNlc3Npb24udXNlci5lbWFpbCwgeyBlbWFpbDogbmV3RW1haWwgfSk7XG5cdFx0YXdhaXQgc2V0U2Vzc2lvbkNvb2tpZShjdHgsIHtcblx0XHRcdHNlc3Npb246IGN0eC5jb250ZXh0LnNlc3Npb24uc2Vzc2lvbixcblx0XHRcdHVzZXI6IHtcblx0XHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHRcdH1cblx0XHR9KTtcblx0XHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKSB7XG5cdFx0XHRjb25zdCB0b2tlbiQxID0gYXdhaXQgY3JlYXRlRW1haWxWZXJpZmljYXRpb25Ub2tlbihjdHguY29udGV4dC5zZWNyZXQsIG5ld0VtYWlsLCB2b2lkIDAsIGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmV4cGlyZXNJbik7XG5cdFx0XHRjb25zdCB1cmwkMSA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VuJDF9JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRcdGF3YWl0IGN0eC5jb250ZXh0LnJ1bkluQmFja2dyb3VuZE9yQXdhaXQoY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5zZW5kVmVyaWZpY2F0aW9uRW1haWwoe1xuXHRcdFx0XHR1c2VyOiB7XG5cdFx0XHRcdFx0Li4uY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0XHRcdGVtYWlsOiBuZXdFbWFpbFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR1cmw6IHVybCQxLFxuXHRcdFx0XHR0b2tlbjogdG9rZW4kMVxuXHRcdFx0fSwgY3R4LnJlcXVlc3QpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGN0eC5qc29uKHsgc3RhdHVzOiB0cnVlIH0pO1xuXHR9XG5cdGlmIChjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWxWZXJpZmllZCAmJiAoY3R4LmNvbnRleHQub3B0aW9ucy51c2VyLmNoYW5nZUVtYWlsLnNlbmRDaGFuZ2VFbWFpbENvbmZpcm1hdGlvbiB8fCBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uKSkge1xuXHRcdGNvbnN0IHRva2VuJDEgPSBhd2FpdCBjcmVhdGVFbWFpbFZlcmlmaWNhdGlvblRva2VuKGN0eC5jb250ZXh0LnNlY3JldCwgY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLmVtYWlsLCBuZXdFbWFpbCwgY3R4LmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luLCB7IHJlcXVlc3RUeXBlOiBcImNoYW5nZS1lbWFpbC1jb25maXJtYXRpb25cIiB9KTtcblx0XHRjb25zdCB1cmwkMSA9IGAke2N0eC5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VuJDF9JmNhbGxiYWNrVVJMPSR7Y3R4LmJvZHkuY2FsbGJhY2tVUkwgfHwgXCIvXCJ9YDtcblx0XHRjb25zdCBzZW5kRm4gPSBjdHguY29udGV4dC5vcHRpb25zLnVzZXIuY2hhbmdlRW1haWwuc2VuZENoYW5nZUVtYWlsQ29uZmlybWF0aW9uIHx8IGN0eC5jb250ZXh0Lm9wdGlvbnMudXNlci5jaGFuZ2VFbWFpbC5zZW5kQ2hhbmdlRW1haWxWZXJpZmljYXRpb247XG5cdFx0aWYgKHNlbmRGbikgYXdhaXQgY3R4LmNvbnRleHQucnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChzZW5kRm4oe1xuXHRcdFx0dXNlcjogY3R4LmNvbnRleHQuc2Vzc2lvbi51c2VyLFxuXHRcdFx0bmV3RW1haWwsXG5cdFx0XHR1cmw6IHVybCQxLFxuXHRcdFx0dG9rZW46IHRva2VuJDFcblx0XHR9LCBjdHgucmVxdWVzdCkpO1xuXHRcdHJldHVybiBjdHguanNvbih7IHN0YXR1czogdHJ1ZSB9KTtcblx0fVxuXHRpZiAoIWN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdGN0eC5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlZlcmlmaWNhdGlvbiBlbWFpbCBpc24ndCBlbmFibGVkLlwiKTtcblx0XHR0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiVmVyaWZpY2F0aW9uIGVtYWlsIGlzbid0IGVuYWJsZWRcIiB9KTtcblx0fVxuXHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oY3R4LmNvbnRleHQuc2VjcmV0LCBjdHguY29udGV4dC5zZXNzaW9uLnVzZXIuZW1haWwsIG5ld0VtYWlsLCBjdHguY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4sIHsgcmVxdWVzdFR5cGU6IFwiY2hhbmdlLWVtYWlsLXZlcmlmaWNhdGlvblwiIH0pO1xuXHRjb25zdCB1cmwgPSBgJHtjdHguY29udGV4dC5iYXNlVVJMfS92ZXJpZnktZW1haWw/dG9rZW49JHt0b2tlbn0mY2FsbGJhY2tVUkw9JHtjdHguYm9keS5jYWxsYmFja1VSTCB8fCBcIi9cIn1gO1xuXHRhd2FpdCBjdHguY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGN0eC5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24uc2VuZFZlcmlmaWNhdGlvbkVtYWlsKHtcblx0XHR1c2VyOiB7XG5cdFx0XHQuLi5jdHguY29udGV4dC5zZXNzaW9uLnVzZXIsXG5cdFx0XHRlbWFpbDogbmV3RW1haWxcblx0XHR9LFxuXHRcdHVybCxcblx0XHR0b2tlblxuXHR9LCBjdHgucmVxdWVzdCkpO1xuXHRyZXR1cm4gY3R4Lmpzb24oeyBzdGF0dXM6IHRydWUgfSk7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGFuZ2VFbWFpbCwgY2hhbmdlUGFzc3dvcmQsIGRlbGV0ZVVzZXIsIGRlbGV0ZVVzZXJDYWxsYmFjaywgc2V0UGFzc3dvcmQsIHVwZGF0ZVVzZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVwZGF0ZS11c2VyLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/routes/update-user.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/api/to-auth-endpoints.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toAuthEndpoints: () => (/* binding */ toAuthEndpoints)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n//#region src/api/to-auth-endpoints.ts\nconst defuReplaceArrays = (0,defu__WEBPACK_IMPORTED_MODULE_3__.createDefu)((obj, key, value) => {\n\tif (Array.isArray(obj[key]) && Array.isArray(value)) {\n\t\tobj[key] = value;\n\t\treturn true;\n\t}\n});\nconst hooksSourceWeakMap = /* @__PURE__ */ new WeakMap();\nfunction toAuthEndpoints(endpoints, ctx) {\n\tconst api = {};\n\tfor (const [key, endpoint] of Object.entries(endpoints)) {\n\t\tapi[key] = async (context) => {\n\t\t\tconst run = async () => {\n\t\t\t\tconst authContext = await ctx;\n\t\t\t\tlet internalContext = {\n\t\t\t\t\t...context,\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\t...authContext,\n\t\t\t\t\t\treturned: void 0,\n\t\t\t\t\t\tresponseHeaders: void 0,\n\t\t\t\t\t\tsession: null\n\t\t\t\t\t},\n\t\t\t\t\tpath: endpoint.path,\n\t\t\t\t\theaders: context?.headers ? new Headers(context?.headers) : void 0\n\t\t\t\t};\n\t\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, async () => {\n\t\t\t\t\tconst { beforeHooks, afterHooks } = getHooks(authContext);\n\t\t\t\t\tconst before = await runBeforeHooks(internalContext, beforeHooks);\n\t\t\t\t\t/**\n\t\t\t\t\t* If `before.context` is returned, it should\n\t\t\t\t\t* get merged with the original context\n\t\t\t\t\t*/\n\t\t\t\t\tif (\"context\" in before && before.context && typeof before.context === \"object\") {\n\t\t\t\t\t\tconst { headers, ...rest } = before.context;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* Headers should be merged differently\n\t\t\t\t\t\t* so the hook doesn't override the whole\n\t\t\t\t\t\t* header\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tif (headers) headers.forEach((value, key$1) => {\n\t\t\t\t\t\t\tinternalContext.headers.set(key$1, value);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tinternalContext = defuReplaceArrays(rest, internalContext);\n\t\t\t\t\t} else if (before) return context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(before, { headers: context?.headers }) : context?.returnHeaders ? {\n\t\t\t\t\t\theaders: context?.headers,\n\t\t\t\t\t\tresponse: before\n\t\t\t\t\t} : before;\n\t\t\t\t\tinternalContext.asResponse = false;\n\t\t\t\t\tinternalContext.returnHeaders = true;\n\t\t\t\t\tinternalContext.returnStatus = true;\n\t\t\t\t\tconst result = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithEndpointContext)(internalContext, () => endpoint(internalContext)).catch((e) => {\n\t\t\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError)\n /**\n\t\t\t\t\t\t* API Errors from response are caught\n\t\t\t\t\t\t* and returned to hooks\n\t\t\t\t\t\t*/\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresponse: e,\n\t\t\t\t\t\t\tstatus: e.statusCode,\n\t\t\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t});\n\t\t\t\t\tif (result && result instanceof Response) return result;\n\t\t\t\t\tinternalContext.context.returned = result.response;\n\t\t\t\t\tinternalContext.context.responseHeaders = result.headers;\n\t\t\t\t\tconst after = await runAfterHooks(internalContext, afterHooks);\n\t\t\t\t\tif (after.response) result.response = after.response;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(authContext.logger.level, \"debug\")) result.response.stack = result.response.errorStack;\n\t\t\t\t\tif (result.response instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && !context?.asResponse) throw result.response;\n\t\t\t\t\treturn context?.asResponse ? (0,better_call__WEBPACK_IMPORTED_MODULE_2__.toResponse)(result.response, {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t}) : context?.returnHeaders ? context?.returnStatus ? {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : {\n\t\t\t\t\t\theaders: result.headers,\n\t\t\t\t\t\tresponse: result.response\n\t\t\t\t\t} : context?.returnStatus ? {\n\t\t\t\t\t\tresponse: result.response,\n\t\t\t\t\t\tstatus: result.status\n\t\t\t\t\t} : result.response;\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.hasRequestState)()) return run();\n\t\t\telse return (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.runWithRequestState)(/* @__PURE__ */ new WeakMap(), run);\n\t\t};\n\t\tapi[key].path = endpoint.path;\n\t\tapi[key].options = endpoint.options;\n\t}\n\treturn api;\n}\nasync function runBeforeHooks(context, hooks) {\n\tlet modifiedContext = {};\n\tfor (const hook of hooks) {\n\t\tlet matched = false;\n\t\ttry {\n\t\t\tmatched = hook.matcher(context);\n\t\t} catch (error) {\n\t\t\tconst hookSource = hooksSourceWeakMap.get(hook.handler) ?? \"unknown\";\n\t\t\tcontext.context.logger.error(`An error occurred during ${hookSource} hook matcher execution:`, error);\n\t\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_2__.APIError(\"INTERNAL_SERVER_ERROR\", { message: `An error occurred during hook matcher execution. Check the logs for more details.` });\n\t\t}\n\t\tif (matched) {\n\t\t\tconst result = await hook.handler({\n\t\t\t\t...context,\n\t\t\t\treturnHeaders: false\n\t\t\t}).catch((e) => {\n\t\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError && (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\tthrow e;\n\t\t\t});\n\t\t\tif (result && typeof result === \"object\") {\n\t\t\t\tif (\"context\" in result && typeof result.context === \"object\") {\n\t\t\t\t\tconst { headers, ...rest } = result.context;\n\t\t\t\t\tif (headers instanceof Headers) if (modifiedContext.headers) headers.forEach((value, key) => {\n\t\t\t\t\t\tmodifiedContext.headers?.set(key, value);\n\t\t\t\t\t});\n\t\t\t\t\telse modifiedContext.headers = headers;\n\t\t\t\t\tmodifiedContext = defuReplaceArrays(rest, modifiedContext);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t}\n\treturn { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n\tfor (const hook of hooks) if (hook.matcher(context)) {\n\t\tconst result = await hook.handler(context).catch((e) => {\n\t\t\tif (e instanceof better_call__WEBPACK_IMPORTED_MODULE_2__.APIError) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.shouldPublishLog)(context.context.logger.level, \"debug\")) e.stack = e.errorStack;\n\t\t\t\treturn {\n\t\t\t\t\tresponse: e,\n\t\t\t\t\theaders: e.headers ? new Headers(e.headers) : null\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow e;\n\t\t});\n\t\tif (result.headers) result.headers.forEach((value, key) => {\n\t\t\tif (!context.context.responseHeaders) context.context.responseHeaders = new Headers({ [key]: value });\n\t\t\telse if (key.toLowerCase() === \"set-cookie\") context.context.responseHeaders.append(key, value);\n\t\t\telse context.context.responseHeaders.set(key, value);\n\t\t});\n\t\tif (result.response) context.context.returned = result.response;\n\t}\n\treturn {\n\t\tresponse: context.context.returned,\n\t\theaders: context.context.responseHeaders\n\t};\n}\nfunction getHooks(authContext) {\n\tconst plugins = authContext.options.plugins || [];\n\tconst beforeHooks = [];\n\tconst afterHooks = [];\n\tconst beforeHookHandler = authContext.options.hooks?.before;\n\tif (beforeHookHandler) {\n\t\thooksSourceWeakMap.set(beforeHookHandler, \"user\");\n\t\tbeforeHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: beforeHookHandler\n\t\t});\n\t}\n\tconst afterHookHandler = authContext.options.hooks?.after;\n\tif (afterHookHandler) {\n\t\thooksSourceWeakMap.set(afterHookHandler, \"user\");\n\t\tafterHooks.push({\n\t\t\tmatcher: () => true,\n\t\t\thandler: afterHookHandler\n\t\t});\n\t}\n\tconst pluginBeforeHooks = plugins.filter((plugin) => plugin.hooks?.before).map((plugin) => plugin.hooks?.before).flat();\n\tconst pluginAfterHooks = plugins.filter((plugin) => plugin.hooks?.after).map((plugin) => plugin.hooks?.after).flat();\n\t/**\n\t* Add plugin added hooks at last\n\t*/\n\tif (pluginBeforeHooks.length) beforeHooks.push(...pluginBeforeHooks);\n\tif (pluginAfterHooks.length) afterHooks.push(...pluginAfterHooks);\n\treturn {\n\t\tbeforeHooks,\n\t\tafterHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=to-auth-endpoints.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hcGkvdG8tYXV0aC1lbmRwb2ludHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlHO0FBQ2hEO0FBQ047QUFDakI7O0FBRWxDO0FBQ0EsMEJBQTBCLGdEQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsV0FBVyxpRkFBc0I7QUFDakMsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxtQkFBbUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPLDhDQUE4Qyx1REFBVSxXQUFXLDJCQUEyQjtBQUNyRztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixpRkFBc0I7QUFDaEQsdUJBQXVCLGlEQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsaURBQVEsSUFBSSx1RUFBZ0I7QUFDaEUsb0NBQW9DLGlEQUFRO0FBQzVDLGtDQUFrQyx1REFBVTtBQUM1QztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsYUFBYSwwRUFBZTtBQUM1QixlQUFlLDhFQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0REFBNEQsWUFBWTtBQUN4RSxhQUFhLGlEQUFRLDRCQUE0Qiw4RkFBOEY7QUFDL0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixxQkFBcUIsaURBQVEsSUFBSSx1RUFBZ0I7QUFDakQ7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLGFBQWEsbUJBQW1CO0FBQ2hDO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpREFBUTtBQUM1QixRQUFRLHVFQUFnQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx5RkFBeUYsY0FBYztBQUN2RztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDMkI7QUFDM0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXBpL3RvLWF1dGgtZW5kcG9pbnRzLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoYXNSZXF1ZXN0U3RhdGUsIHJ1bldpdGhFbmRwb2ludENvbnRleHQsIHJ1bldpdGhSZXF1ZXN0U3RhdGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgc2hvdWxkUHVibGlzaExvZyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEFQSUVycm9yLCB0b1Jlc3BvbnNlIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5pbXBvcnQgeyBjcmVhdGVEZWZ1IH0gZnJvbSBcImRlZnVcIjtcblxuLy8jcmVnaW9uIHNyYy9hcGkvdG8tYXV0aC1lbmRwb2ludHMudHNcbmNvbnN0IGRlZnVSZXBsYWNlQXJyYXlzID0gY3JlYXRlRGVmdSgob2JqLCBrZXksIHZhbHVlKSA9PiB7XG5cdGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdG9ialtrZXldID0gdmFsdWU7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn0pO1xuY29uc3QgaG9va3NTb3VyY2VXZWFrTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiB0b0F1dGhFbmRwb2ludHMoZW5kcG9pbnRzLCBjdHgpIHtcblx0Y29uc3QgYXBpID0ge307XG5cdGZvciAoY29uc3QgW2tleSwgZW5kcG9pbnRdIG9mIE9iamVjdC5lbnRyaWVzKGVuZHBvaW50cykpIHtcblx0XHRhcGlba2V5XSA9IGFzeW5jIChjb250ZXh0KSA9PiB7XG5cdFx0XHRjb25zdCBydW4gPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGF1dGhDb250ZXh0ID0gYXdhaXQgY3R4O1xuXHRcdFx0XHRsZXQgaW50ZXJuYWxDb250ZXh0ID0ge1xuXHRcdFx0XHRcdC4uLmNvbnRleHQsXG5cdFx0XHRcdFx0Y29udGV4dDoge1xuXHRcdFx0XHRcdFx0Li4uYXV0aENvbnRleHQsXG5cdFx0XHRcdFx0XHRyZXR1cm5lZDogdm9pZCAwLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBudWxsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRwYXRoOiBlbmRwb2ludC5wYXRoLFxuXHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMgPyBuZXcgSGVhZGVycyhjb250ZXh0Py5oZWFkZXJzKSA6IHZvaWQgMFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4gcnVuV2l0aEVuZHBvaW50Q29udGV4dChpbnRlcm5hbENvbnRleHQsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCB7IGJlZm9yZUhvb2tzLCBhZnRlckhvb2tzIH0gPSBnZXRIb29rcyhhdXRoQ29udGV4dCk7XG5cdFx0XHRcdFx0Y29uc3QgYmVmb3JlID0gYXdhaXQgcnVuQmVmb3JlSG9va3MoaW50ZXJuYWxDb250ZXh0LCBiZWZvcmVIb29rcyk7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0KiBJZiBgYmVmb3JlLmNvbnRleHRgIGlzIHJldHVybmVkLCBpdCBzaG91bGRcblx0XHRcdFx0XHQqIGdldCBtZXJnZWQgd2l0aCB0aGUgb3JpZ2luYWwgY29udGV4dFxuXHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0aWYgKFwiY29udGV4dFwiIGluIGJlZm9yZSAmJiBiZWZvcmUuY29udGV4dCAmJiB0eXBlb2YgYmVmb3JlLmNvbnRleHQgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gYmVmb3JlLmNvbnRleHQ7XG5cdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdCogSGVhZGVycyBzaG91bGQgYmUgbWVyZ2VkIGRpZmZlcmVudGx5XG5cdFx0XHRcdFx0XHQqIHNvIHRoZSBob29rIGRvZXNuJ3Qgb3ZlcnJpZGUgdGhlIHdob2xlXG5cdFx0XHRcdFx0XHQqIGhlYWRlclxuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGlmIChoZWFkZXJzKSBoZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkkMSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuaGVhZGVycy5zZXQoa2V5JDEsIHZhbHVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0ID0gZGVmdVJlcGxhY2VBcnJheXMocmVzdCwgaW50ZXJuYWxDb250ZXh0KTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGJlZm9yZSkgcmV0dXJuIGNvbnRleHQ/LmFzUmVzcG9uc2UgPyB0b1Jlc3BvbnNlKGJlZm9yZSwgeyBoZWFkZXJzOiBjb250ZXh0Py5oZWFkZXJzIH0pIDogY29udGV4dD8ucmV0dXJuSGVhZGVycyA/IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IGNvbnRleHQ/LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogYmVmb3JlXG5cdFx0XHRcdFx0fSA6IGJlZm9yZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQuYXNSZXNwb25zZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGludGVybmFsQ29udGV4dC5yZXR1cm5IZWFkZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRpbnRlcm5hbENvbnRleHQucmV0dXJuU3RhdHVzID0gdHJ1ZTtcblx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBydW5XaXRoRW5kcG9pbnRDb250ZXh0KGludGVybmFsQ29udGV4dCwgKCkgPT4gZW5kcG9pbnQoaW50ZXJuYWxDb250ZXh0KSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpXG4gLyoqXG5cdFx0XHRcdFx0XHQqIEFQSSBFcnJvcnMgZnJvbSByZXNwb25zZSBhcmUgY2F1Z2h0XG5cdFx0XHRcdFx0XHQqIGFuZCByZXR1cm5lZCB0byBob29rc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlOiBlLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IGUuc3RhdHVzQ29kZSxcblx0XHRcdFx0XHRcdFx0aGVhZGVyczogZS5oZWFkZXJzID8gbmV3IEhlYWRlcnMoZS5oZWFkZXJzKSA6IG51bGxcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQgJiYgcmVzdWx0IGluc3RhbmNlb2YgUmVzcG9uc2UpIHJldHVybiByZXN1bHQ7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmV0dXJuZWQgPSByZXN1bHQucmVzcG9uc2U7XG5cdFx0XHRcdFx0aW50ZXJuYWxDb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzID0gcmVzdWx0LmhlYWRlcnM7XG5cdFx0XHRcdFx0Y29uc3QgYWZ0ZXIgPSBhd2FpdCBydW5BZnRlckhvb2tzKGludGVybmFsQ29udGV4dCwgYWZ0ZXJIb29rcyk7XG5cdFx0XHRcdFx0aWYgKGFmdGVyLnJlc3BvbnNlKSByZXN1bHQucmVzcG9uc2UgPSBhZnRlci5yZXNwb25zZTtcblx0XHRcdFx0XHRpZiAocmVzdWx0LnJlc3BvbnNlIGluc3RhbmNlb2YgQVBJRXJyb3IgJiYgc2hvdWxkUHVibGlzaExvZyhhdXRoQ29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIHJlc3VsdC5yZXNwb25zZS5zdGFjayA9IHJlc3VsdC5yZXNwb25zZS5lcnJvclN0YWNrO1xuXHRcdFx0XHRcdGlmIChyZXN1bHQucmVzcG9uc2UgaW5zdGFuY2VvZiBBUElFcnJvciAmJiAhY29udGV4dD8uYXNSZXNwb25zZSkgdGhyb3cgcmVzdWx0LnJlc3BvbnNlO1xuXHRcdFx0XHRcdHJldHVybiBjb250ZXh0Py5hc1Jlc3BvbnNlID8gdG9SZXNwb25zZShyZXN1bHQucmVzcG9uc2UsIHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSkgOiBjb250ZXh0Py5yZXR1cm5IZWFkZXJzID8gY29udGV4dD8ucmV0dXJuU3RhdHVzID8ge1xuXHRcdFx0XHRcdFx0aGVhZGVyczogcmVzdWx0LmhlYWRlcnMsXG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHtcblx0XHRcdFx0XHRcdGhlYWRlcnM6IHJlc3VsdC5oZWFkZXJzLFxuXHRcdFx0XHRcdFx0cmVzcG9uc2U6IHJlc3VsdC5yZXNwb25zZVxuXHRcdFx0XHRcdH0gOiBjb250ZXh0Py5yZXR1cm5TdGF0dXMgPyB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZTogcmVzdWx0LnJlc3BvbnNlLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiByZXN1bHQuc3RhdHVzXG5cdFx0XHRcdFx0fSA6IHJlc3VsdC5yZXNwb25zZTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdFx0aWYgKGF3YWl0IGhhc1JlcXVlc3RTdGF0ZSgpKSByZXR1cm4gcnVuKCk7XG5cdFx0XHRlbHNlIHJldHVybiBydW5XaXRoUmVxdWVzdFN0YXRlKC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBydW4pO1xuXHRcdH07XG5cdFx0YXBpW2tleV0ucGF0aCA9IGVuZHBvaW50LnBhdGg7XG5cdFx0YXBpW2tleV0ub3B0aW9ucyA9IGVuZHBvaW50Lm9wdGlvbnM7XG5cdH1cblx0cmV0dXJuIGFwaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJ1bkJlZm9yZUhvb2tzKGNvbnRleHQsIGhvb2tzKSB7XG5cdGxldCBtb2RpZmllZENvbnRleHQgPSB7fTtcblx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzKSB7XG5cdFx0bGV0IG1hdGNoZWQgPSBmYWxzZTtcblx0XHR0cnkge1xuXHRcdFx0bWF0Y2hlZCA9IGhvb2subWF0Y2hlcihjb250ZXh0KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc3QgaG9va1NvdXJjZSA9IGhvb2tzU291cmNlV2Vha01hcC5nZXQoaG9vay5oYW5kbGVyKSA/PyBcInVua25vd25cIjtcblx0XHRcdGNvbnRleHQuY29udGV4dC5sb2dnZXIuZXJyb3IoYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyAke2hvb2tTb3VyY2V9IGhvb2sgbWF0Y2hlciBleGVjdXRpb246YCwgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEFQSUVycm9yKFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsIHsgbWVzc2FnZTogYEFuIGVycm9yIG9jY3VycmVkIGR1cmluZyBob29rIG1hdGNoZXIgZXhlY3V0aW9uLiBDaGVjayB0aGUgbG9ncyBmb3IgbW9yZSBkZXRhaWxzLmAgfSk7XG5cdFx0fVxuXHRcdGlmIChtYXRjaGVkKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoe1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHRyZXR1cm5IZWFkZXJzOiBmYWxzZVxuXHRcdFx0fSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvciAmJiBzaG91bGRQdWJsaXNoTG9nKGNvbnRleHQuY29udGV4dC5sb2dnZXIubGV2ZWwsIFwiZGVidWdcIikpIGUuc3RhY2sgPSBlLmVycm9yU3RhY2s7XG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRpZiAoXCJjb250ZXh0XCIgaW4gcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQuY29udGV4dCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdGNvbnN0IHsgaGVhZGVycywgLi4ucmVzdCB9ID0gcmVzdWx0LmNvbnRleHQ7XG5cdFx0XHRcdFx0aWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSBpZiAobW9kaWZpZWRDb250ZXh0LmhlYWRlcnMpIGhlYWRlcnMuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdFx0XHRcdFx0bW9kaWZpZWRDb250ZXh0LmhlYWRlcnM/LnNldChrZXksIHZhbHVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRlbHNlIG1vZGlmaWVkQ29udGV4dC5oZWFkZXJzID0gaGVhZGVycztcblx0XHRcdFx0XHRtb2RpZmllZENvbnRleHQgPSBkZWZ1UmVwbGFjZUFycmF5cyhyZXN0LCBtb2RpZmllZENvbnRleHQpO1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7IGNvbnRleHQ6IG1vZGlmaWVkQ29udGV4dCB9O1xufVxuYXN5bmMgZnVuY3Rpb24gcnVuQWZ0ZXJIb29rcyhjb250ZXh0LCBob29rcykge1xuXHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MpIGlmIChob29rLm1hdGNoZXIoY29udGV4dCkpIHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBob29rLmhhbmRsZXIoY29udGV4dCkuY2F0Y2goKGUpID0+IHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQVBJRXJyb3IpIHtcblx0XHRcdFx0aWYgKHNob3VsZFB1Ymxpc2hMb2coY29udGV4dC5jb250ZXh0LmxvZ2dlci5sZXZlbCwgXCJkZWJ1Z1wiKSkgZS5zdGFjayA9IGUuZXJyb3JTdGFjaztcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRyZXNwb25zZTogZSxcblx0XHRcdFx0XHRoZWFkZXJzOiBlLmhlYWRlcnMgPyBuZXcgSGVhZGVycyhlLmhlYWRlcnMpIDogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dGhyb3cgZTtcblx0XHR9KTtcblx0XHRpZiAocmVzdWx0LmhlYWRlcnMpIHJlc3VsdC5oZWFkZXJzLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGlmICghY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycykgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycyA9IG5ldyBIZWFkZXJzKHsgW2tleV06IHZhbHVlIH0pO1xuXHRcdFx0ZWxzZSBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IFwic2V0LWNvb2tpZVwiKSBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzLmFwcGVuZChrZXksIHZhbHVlKTtcblx0XHRcdGVsc2UgY29udGV4dC5jb250ZXh0LnJlc3BvbnNlSGVhZGVycy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0fSk7XG5cdFx0aWYgKHJlc3VsdC5yZXNwb25zZSkgY29udGV4dC5jb250ZXh0LnJldHVybmVkID0gcmVzdWx0LnJlc3BvbnNlO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0cmVzcG9uc2U6IGNvbnRleHQuY29udGV4dC5yZXR1cm5lZCxcblx0XHRoZWFkZXJzOiBjb250ZXh0LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzXG5cdH07XG59XG5mdW5jdGlvbiBnZXRIb29rcyhhdXRoQ29udGV4dCkge1xuXHRjb25zdCBwbHVnaW5zID0gYXV0aENvbnRleHQub3B0aW9ucy5wbHVnaW5zIHx8IFtdO1xuXHRjb25zdCBiZWZvcmVIb29rcyA9IFtdO1xuXHRjb25zdCBhZnRlckhvb2tzID0gW107XG5cdGNvbnN0IGJlZm9yZUhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYmVmb3JlO1xuXHRpZiAoYmVmb3JlSG9va0hhbmRsZXIpIHtcblx0XHRob29rc1NvdXJjZVdlYWtNYXAuc2V0KGJlZm9yZUhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YmVmb3JlSG9va3MucHVzaCh7XG5cdFx0XHRtYXRjaGVyOiAoKSA9PiB0cnVlLFxuXHRcdFx0aGFuZGxlcjogYmVmb3JlSG9va0hhbmRsZXJcblx0XHR9KTtcblx0fVxuXHRjb25zdCBhZnRlckhvb2tIYW5kbGVyID0gYXV0aENvbnRleHQub3B0aW9ucy5ob29rcz8uYWZ0ZXI7XG5cdGlmIChhZnRlckhvb2tIYW5kbGVyKSB7XG5cdFx0aG9va3NTb3VyY2VXZWFrTWFwLnNldChhZnRlckhvb2tIYW5kbGVyLCBcInVzZXJcIik7XG5cdFx0YWZ0ZXJIb29rcy5wdXNoKHtcblx0XHRcdG1hdGNoZXI6ICgpID0+IHRydWUsXG5cdFx0XHRoYW5kbGVyOiBhZnRlckhvb2tIYW5kbGVyXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcGx1Z2luQmVmb3JlSG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmJlZm9yZSkubWFwKChwbHVnaW4pID0+IHBsdWdpbi5ob29rcz8uYmVmb3JlKS5mbGF0KCk7XG5cdGNvbnN0IHBsdWdpbkFmdGVySG9va3MgPSBwbHVnaW5zLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uaG9va3M/LmFmdGVyKS5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLmhvb2tzPy5hZnRlcikuZmxhdCgpO1xuXHQvKipcblx0KiBBZGQgcGx1Z2luIGFkZGVkIGhvb2tzIGF0IGxhc3Rcblx0Ki9cblx0aWYgKHBsdWdpbkJlZm9yZUhvb2tzLmxlbmd0aCkgYmVmb3JlSG9va3MucHVzaCguLi5wbHVnaW5CZWZvcmVIb29rcyk7XG5cdGlmIChwbHVnaW5BZnRlckhvb2tzLmxlbmd0aCkgYWZ0ZXJIb29rcy5wdXNoKC4uLnBsdWdpbkFmdGVySG9va3MpO1xuXHRyZXR1cm4ge1xuXHRcdGJlZm9yZUhvb2tzLFxuXHRcdGFmdGVySG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB0b0F1dGhFbmRwb2ludHMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLWF1dGgtZW5kcG9pbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/api/to-auth-endpoints.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/auth.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/auth.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   betterAuth: () => (/* binding */ betterAuth)\n/* harmony export */ });\n/* harmony import */ var _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../context/init.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/init.mjs\");\n/* harmony import */ var _base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/base.mjs\");\n\n\n\n//#region src/auth/auth.ts\n/**\n* Better Auth initializer for full mode (with Kysely)\n*\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth\";\n*\n* const auth = betterAuth({\n* \tdatabase: new PostgresDialect({ connection: process.env.DATABASE_URL }),\n* });\n* ```\n*\n* For minimal mode (without Kysely), import from `better-auth/minimal` instead\n* @example\n* ```ts\n* import { betterAuth } from \"better-auth/minimal\";\n*\n* const auth = betterAuth({\n*\t  database: drizzleAdapter(db, { provider: \"pg\" }),\n* });\n*/\nconst betterAuth = (options) => {\n\treturn (0,_base_mjs__WEBPACK_IMPORTED_MODULE_1__.createBetterAuth)(options, _context_init_mjs__WEBPACK_IMPORTED_MODULE_0__.init);\n};\n\n//#endregion\n\n//# sourceMappingURL=auth.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2F1dGgubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNHOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLG1DQUFtQyxzQ0FBc0M7QUFDekUsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGFBQWE7QUFDeEI7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQsR0FBRztBQUNIO0FBQ0E7QUFDQSxRQUFRLDJEQUFnQixVQUFVLG1EQUFJO0FBQ3RDOztBQUVBO0FBQ3NCO0FBQ3RCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2F1dGgvYXV0aC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5pdCB9IGZyb20gXCIuLi9jb250ZXh0L2luaXQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVCZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYmFzZS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL2F1dGgudHNcbi8qKlxuKiBCZXR0ZXIgQXV0aCBpbml0aWFsaXplciBmb3IgZnVsbCBtb2RlICh3aXRoIEt5c2VseSlcbipcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogaW1wb3J0IHsgYmV0dGVyQXV0aCB9IGZyb20gXCJiZXR0ZXItYXV0aFwiO1xuKlxuKiBjb25zdCBhdXRoID0gYmV0dGVyQXV0aCh7XG4qIFx0ZGF0YWJhc2U6IG5ldyBQb3N0Z3Jlc0RpYWxlY3QoeyBjb25uZWN0aW9uOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwgfSksXG4qIH0pO1xuKiBgYGBcbipcbiogRm9yIG1pbmltYWwgbW9kZSAod2l0aG91dCBLeXNlbHkpLCBpbXBvcnQgZnJvbSBgYmV0dGVyLWF1dGgvbWluaW1hbGAgaW5zdGVhZFxuKiBAZXhhbXBsZVxuKiBgYGB0c1xuKiBpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcImJldHRlci1hdXRoL21pbmltYWxcIjtcbipcbiogY29uc3QgYXV0aCA9IGJldHRlckF1dGgoe1xuKlx0ICBkYXRhYmFzZTogZHJpenpsZUFkYXB0ZXIoZGIsIHsgcHJvdmlkZXI6IFwicGdcIiB9KSxcbiogfSk7XG4qL1xuY29uc3QgYmV0dGVyQXV0aCA9IChvcHRpb25zKSA9PiB7XG5cdHJldHVybiBjcmVhdGVCZXR0ZXJBdXRoKG9wdGlvbnMsIGluaXQpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBiZXR0ZXJBdXRoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXRoLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/auth.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/base.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/base.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBetterAuth: () => (/* binding */ createBetterAuth)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/helpers.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/auth/base.ts\nconst createBetterAuth = (options, initFn) => {\n\tconst authContext = initFn(options);\n\tconst { api } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getEndpoints)(authContext, options);\n\treturn {\n\t\thandler: async (request) => {\n\t\t\tconst ctx = await authContext;\n\t\t\tconst basePath = ctx.options.basePath || \"/api/auth\";\n\t\t\tif (!ctx.options.baseURL) {\n\t\t\t\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(void 0, basePath, request, void 0, ctx.options.advanced?.trustedProxyHeaders);\n\t\t\t\tif (baseURL) {\n\t\t\t\t\tctx.baseURL = baseURL;\n\t\t\t\t\tctx.options.baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(ctx.baseURL) || void 0;\n\t\t\t\t} else throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Could not get base URL from request. Please provide a valid base URL.\");\n\t\t\t}\n\t\t\tctx.trustedOrigins = await (0,_context_helpers_mjs__WEBPACK_IMPORTED_MODULE_2__.getTrustedOrigins)(ctx.options, request);\n\t\t\tconst { handler } = (0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_1__.router)(ctx, options);\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_3__.runWithAdapter)(ctx.adapter, () => handler(request));\n\t\t},\n\t\tapi,\n\t\toptions,\n\t\t$context: authContext,\n\t\t$ERROR_CODES: {\n\t\t\t...options.plugins?.reduce((acc, plugin) => {\n\t\t\t\tif (plugin.$ERROR_CODES) return {\n\t\t\t\t\t...acc,\n\t\t\t\t\t...plugin.$ERROR_CODES\n\t\t\t\t};\n\t\t\t\treturn acc;\n\t\t\t}, {}),\n\t\t\t..._better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BASE_ERROR_CODES\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2Jhc2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUF5RDtBQUNEO0FBQ0c7QUFDQTtBQUNpQjs7QUFFNUU7QUFDQTtBQUNBO0FBQ0EsU0FBUyxNQUFNLEVBQUUsNERBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwwREFBVTtBQUM5QjtBQUNBO0FBQ0EsMkJBQTJCLHlEQUFTO0FBQ3BDLE1BQU0sZUFBZSxvRUFBZTtBQUNwQztBQUNBLDhCQUE4Qix1RUFBaUI7QUFDL0MsV0FBVyxVQUFVLEVBQUUsc0RBQU07QUFDN0IsVUFBVSx5RUFBYztBQUN4QixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLElBQUk7QUFDUixNQUFNLHFFQUFnQjtBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDNEI7QUFDNUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXV0aC9iYXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRCYXNlVVJMLCBnZXRPcmlnaW4gfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnRzLCByb3V0ZXIgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0VHJ1c3RlZE9yaWdpbnMgfSBmcm9tIFwiLi4vY29udGV4dC9oZWxwZXJzLm1qc1wiO1xuaW1wb3J0IHsgcnVuV2l0aEFkYXB0ZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvY29udGV4dFwiO1xuaW1wb3J0IHsgQkFTRV9FUlJPUl9DT0RFUywgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvYXV0aC9iYXNlLnRzXG5jb25zdCBjcmVhdGVCZXR0ZXJBdXRoID0gKG9wdGlvbnMsIGluaXRGbikgPT4ge1xuXHRjb25zdCBhdXRoQ29udGV4dCA9IGluaXRGbihvcHRpb25zKTtcblx0Y29uc3QgeyBhcGkgfSA9IGdldEVuZHBvaW50cyhhdXRoQ29udGV4dCwgb3B0aW9ucyk7XG5cdHJldHVybiB7XG5cdFx0aGFuZGxlcjogYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRcdGNvbnN0IGN0eCA9IGF3YWl0IGF1dGhDb250ZXh0O1xuXHRcdFx0Y29uc3QgYmFzZVBhdGggPSBjdHgub3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiO1xuXHRcdFx0aWYgKCFjdHgub3B0aW9ucy5iYXNlVVJMKSB7XG5cdFx0XHRcdGNvbnN0IGJhc2VVUkwgPSBnZXRCYXNlVVJMKHZvaWQgMCwgYmFzZVBhdGgsIHJlcXVlc3QsIHZvaWQgMCwgY3R4Lm9wdGlvbnMuYWR2YW5jZWQ/LnRydXN0ZWRQcm94eUhlYWRlcnMpO1xuXHRcdFx0XHRpZiAoYmFzZVVSTCkge1xuXHRcdFx0XHRcdGN0eC5iYXNlVVJMID0gYmFzZVVSTDtcblx0XHRcdFx0XHRjdHgub3B0aW9ucy5iYXNlVVJMID0gZ2V0T3JpZ2luKGN0eC5iYXNlVVJMKSB8fCB2b2lkIDA7XG5cdFx0XHRcdH0gZWxzZSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ291bGQgbm90IGdldCBiYXNlIFVSTCBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdFx0fVxuXHRcdFx0Y3R4LnRydXN0ZWRPcmlnaW5zID0gYXdhaXQgZ2V0VHJ1c3RlZE9yaWdpbnMoY3R4Lm9wdGlvbnMsIHJlcXVlc3QpO1xuXHRcdFx0Y29uc3QgeyBoYW5kbGVyIH0gPSByb3V0ZXIoY3R4LCBvcHRpb25zKTtcblx0XHRcdHJldHVybiBydW5XaXRoQWRhcHRlcihjdHguYWRhcHRlciwgKCkgPT4gaGFuZGxlcihyZXF1ZXN0KSk7XG5cdFx0fSxcblx0XHRhcGksXG5cdFx0b3B0aW9ucyxcblx0XHQkY29udGV4dDogYXV0aENvbnRleHQsXG5cdFx0JEVSUk9SX0NPREVTOiB7XG5cdFx0XHQuLi5vcHRpb25zLnBsdWdpbnM/LnJlZHVjZSgoYWNjLCBwbHVnaW4pID0+IHtcblx0XHRcdFx0aWYgKHBsdWdpbi4kRVJST1JfQ09ERVMpIHJldHVybiB7XG5cdFx0XHRcdFx0Li4uYWNjLFxuXHRcdFx0XHRcdC4uLnBsdWdpbi4kRVJST1JfQ09ERVNcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIGFjYztcblx0XHRcdH0sIHt9KSxcblx0XHRcdC4uLkJBU0VfRVJST1JfQ09ERVNcblx0XHR9XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUJldHRlckF1dGggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhc2UubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/auth.mjs\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOztBQUF3QyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiZXR0ZXJBdXRoIH0gZnJvbSBcIi4vYXV0aC5tanNcIjtcblxuZXhwb3J0IHsgIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/auth/trusted-origins.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   matchesOriginPattern: () => (/* binding */ matchesOriginPattern)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/wildcard.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\");\n\n\n\n//#region src/auth/trusted-origins.ts\n/**\n* Matches the given url against an origin or origin pattern\n* See \"options.trustedOrigins\" for details of supported patterns\n*\n* @param url The url to test\n* @param pattern The origin pattern\n* @param [settings] Specify supported pattern matching settings\n* @returns {boolean} true if the URL matches the origin pattern, false otherwise.\n*/\nconst matchesOriginPattern = (url, pattern, settings) => {\n\tif (url.startsWith(\"/\")) {\n\t\tif (settings?.allowRelativePaths) return url.startsWith(\"/\") && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url);\n\t\treturn false;\n\t}\n\tif (pattern.includes(\"*\") || pattern.includes(\"?\")) {\n\t\tif (pattern.includes(\"://\")) return (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)((0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) || url);\n\t\tconst host = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getHost)(url);\n\t\tif (!host) return false;\n\t\treturn (0,_utils_wildcard_mjs__WEBPACK_IMPORTED_MODULE_1__.wildcardMatch)(pattern)(host);\n\t}\n\tconst protocol = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getProtocol)(url);\n\treturn protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getOrigin)(url) : url.startsWith(pattern);\n};\n\n//#endregion\n\n//# sourceMappingURL=trusted-origins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9hdXRoL3RydXN0ZWQtb3JpZ2lucy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ2I7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFNBQVM7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msa0VBQWEsVUFBVSx5REFBUztBQUN0RSxlQUFlLHVEQUFPO0FBQ3RCO0FBQ0EsU0FBUyxrRUFBYTtBQUN0QjtBQUNBLGtCQUFrQiwyREFBVztBQUM3QixpRkFBaUYseURBQVM7QUFDMUY7O0FBRUE7QUFDZ0M7QUFDaEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvYXV0aC90cnVzdGVkLW9yaWdpbnMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgd2lsZGNhcmRNYXRjaCB9IGZyb20gXCIuLi91dGlscy93aWxkY2FyZC5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9hdXRoL3RydXN0ZWQtb3JpZ2lucy50c1xuLyoqXG4qIE1hdGNoZXMgdGhlIGdpdmVuIHVybCBhZ2FpbnN0IGFuIG9yaWdpbiBvciBvcmlnaW4gcGF0dGVyblxuKiBTZWUgXCJvcHRpb25zLnRydXN0ZWRPcmlnaW5zXCIgZm9yIGRldGFpbHMgb2Ygc3VwcG9ydGVkIHBhdHRlcm5zXG4qXG4qIEBwYXJhbSB1cmwgVGhlIHVybCB0byB0ZXN0XG4qIEBwYXJhbSBwYXR0ZXJuIFRoZSBvcmlnaW4gcGF0dGVyblxuKiBAcGFyYW0gW3NldHRpbmdzXSBTcGVjaWZ5IHN1cHBvcnRlZCBwYXR0ZXJuIG1hdGNoaW5nIHNldHRpbmdzXG4qIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIHRoZSBVUkwgbWF0Y2hlcyB0aGUgb3JpZ2luIHBhdHRlcm4sIGZhbHNlIG90aGVyd2lzZS5cbiovXG5jb25zdCBtYXRjaGVzT3JpZ2luUGF0dGVybiA9ICh1cmwsIHBhdHRlcm4sIHNldHRpbmdzKSA9PiB7XG5cdGlmICh1cmwuc3RhcnRzV2l0aChcIi9cIikpIHtcblx0XHRpZiAoc2V0dGluZ3M/LmFsbG93UmVsYXRpdmVQYXRocykgcmV0dXJuIHVybC5zdGFydHNXaXRoKFwiL1wiKSAmJiAvXlxcLyg/IVxcL3xcXFxcfCUyZnwlNWMpW1xcd1xcLS5cXCsvQF0qKD86XFw/W1xcd1xcLS5cXCsvPSYlQF0qKT8kLy50ZXN0KHVybCk7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiKlwiKSB8fCBwYXR0ZXJuLmluY2x1ZGVzKFwiP1wiKSkge1xuXHRcdGlmIChwYXR0ZXJuLmluY2x1ZGVzKFwiOi8vXCIpKSByZXR1cm4gd2lsZGNhcmRNYXRjaChwYXR0ZXJuKShnZXRPcmlnaW4odXJsKSB8fCB1cmwpO1xuXHRcdGNvbnN0IGhvc3QgPSBnZXRIb3N0KHVybCk7XG5cdFx0aWYgKCFob3N0KSByZXR1cm4gZmFsc2U7XG5cdFx0cmV0dXJuIHdpbGRjYXJkTWF0Y2gocGF0dGVybikoaG9zdCk7XG5cdH1cblx0Y29uc3QgcHJvdG9jb2wgPSBnZXRQcm90b2NvbCh1cmwpO1xuXHRyZXR1cm4gcHJvdG9jb2wgPT09IFwiaHR0cDpcIiB8fCBwcm90b2NvbCA9PT0gXCJodHRwczpcIiB8fCAhcHJvdG9jb2wgPyBwYXR0ZXJuID09PSBnZXRPcmlnaW4odXJsKSA6IHVybC5zdGFydHNXaXRoKHBhdHRlcm4pO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtYXRjaGVzT3JpZ2luUGF0dGVybiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJ1c3RlZC1vcmlnaW5zLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/create-context.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/context/create-context.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthContext: () => (/* binding */ createAuthContext)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth/trusted-origins.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/trusted-origins.mjs\");\n/* harmony import */ var _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../crypto/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _utils_password_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/password.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/password.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/constants.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/constants.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _helpers_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @better-auth/core/social-providers */ \"(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/context/create-context.ts\n/**\n* Estimates the entropy of a string in bits.\n* This is a simple approximation that helps detect low-entropy secrets.\n*/\nfunction estimateEntropy(str) {\n\tconst unique = new Set(str).size;\n\tif (unique === 0) return 0;\n\treturn Math.log2(Math.pow(unique, str.length));\n}\n/**\n* Validates that the secret meets minimum security requirements.\n* Throws BetterAuthError if the secret is invalid.\n* Skips validation for DEFAULT_SECRET in test environments only.\n* Only throws for DEFAULT_SECRET in production environment.\n*/\nfunction validateSecret(secret, logger$1) {\n\tconst isDefaultSecret = secret === _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_SECRET;\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)()) return;\n\tif (isDefaultSecret && _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.\");\n\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).\");\n\tif (secret.length < 32) logger$1.warn(`[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with \\`npx @better-auth/cli secret\\` or \\`openssl rand -base64 32\\`.`);\n\tif (estimateEntropy(secret) < 120) logger$1.warn(\"[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.\");\n}\nasync function createAuthContext(adapter, options, getDatabaseType) {\n\tif (!options.database) options = (0,defu__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(options, {\n\t\tsession: { cookieCache: {\n\t\t\tenabled: true,\n\t\t\tstrategy: \"jwe\",\n\t\t\trefreshCache: true\n\t\t} },\n\t\taccount: {\n\t\t\tstoreStateStrategy: \"cookie\",\n\t\t\tstoreAccountCookie: true\n\t\t}\n\t});\n\tconst plugins = options.plugins || [];\n\tconst internalPlugins = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getInternalPlugins)(options);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.createLogger)(options.logger);\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath);\n\tif (!baseURL) logger$1.warn(`[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.`);\n\tconst secret = options.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.BETTER_AUTH_SECRET || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.env.AUTH_SECRET || _utils_constants_mjs__WEBPACK_IMPORTED_MODULE_8__.DEFAULT_SECRET;\n\tvalidateSecret(secret, logger$1);\n\toptions = {\n\t\t...options,\n\t\tsecret,\n\t\tbaseURL: baseURL ? new URL(baseURL).origin : \"\",\n\t\tbasePath: options.basePath || \"/api/auth\",\n\t\tplugins: plugins.concat(internalPlugins)\n\t};\n\t(0,_api_index_mjs__WEBPACK_IMPORTED_MODULE_7__.checkEndpointConflicts)(options, logger$1);\n\tconst cookies = (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.getCookies)(options);\n\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_12__.getAuthTables)(options);\n\tconst providers = Object.entries(options.socialProviders || {}).map(([key, config]) => {\n\t\tif (config == null) return null;\n\t\tif (config.enabled === false) return null;\n\t\tif (!config.clientId) logger$1.warn(`Social provider ${key} is missing clientId or clientSecret`);\n\t\tconst provider = _better_auth_core_social_providers__WEBPACK_IMPORTED_MODULE_16__.socialProviders[key](config);\n\t\tprovider.disableImplicitSignUp = config.disableImplicitSignUp;\n\t\treturn provider;\n\t}).filter((x) => x !== null);\n\tconst generateIdFunc = ({ model, size }) => {\n\t\tif (typeof options.advanced?.generateId === \"function\") return options.advanced.generateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\tif (typeof options?.advanced?.database?.generateId === \"function\") return options.advanced.database.generateId({\n\t\t\tmodel,\n\t\t\tsize\n\t\t});\n\t\treturn (0,_utils_index_mjs__WEBPACK_IMPORTED_MODULE_5__.generateId)(size);\n\t};\n\tconst { publish } = await (0,_better_auth_telemetry__WEBPACK_IMPORTED_MODULE_17__.createTelemetry)(options, {\n\t\tadapter: adapter.id,\n\t\tdatabase: typeof options.database === \"function\" ? \"adapter\" : getDatabaseType(options.database)\n\t});\n\tconst initOrPromise = (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.runPluginInit)({\n\t\tappName: options.appName || \"Better Auth\",\n\t\tbaseURL: baseURL || \"\",\n\t\tversion: (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_11__.getBetterAuthVersion)(),\n\t\tsocialProviders: providers,\n\t\toptions,\n\t\toauthConfig: {\n\t\t\tstoreStateStrategy: options.account?.storeStateStrategy || (options.database ? \"database\" : \"cookie\"),\n\t\t\tskipStateCookieCheck: !!options.account?.skipStateCookieCheck\n\t\t},\n\t\ttables,\n\t\ttrustedOrigins: await (0,_helpers_mjs__WEBPACK_IMPORTED_MODULE_10__.getTrustedOrigins)(options),\n\t\tisTrustedOrigin(url, settings) {\n\t\t\treturn this.trustedOrigins.some((origin) => (0,_auth_trusted_origins_mjs__WEBPACK_IMPORTED_MODULE_2__.matchesOriginPattern)(url, origin, settings));\n\t\t},\n\t\tsessionConfig: {\n\t\t\tupdateAge: options.session?.updateAge !== void 0 ? options.session.updateAge : 1440 * 60,\n\t\t\texpiresIn: options.session?.expiresIn || 3600 * 24 * 7,\n\t\t\tfreshAge: options.session?.freshAge === void 0 ? 3600 * 24 : options.session.freshAge,\n\t\t\tcookieRefreshCache: (() => {\n\t\t\t\tconst refreshCache = options.session?.cookieCache?.refreshCache;\n\t\t\t\tconst maxAge = options.session?.cookieCache?.maxAge || 300;\n\t\t\t\tif ((!!options.database || !!options.secondaryStorage) && refreshCache) {\n\t\t\t\t\tlogger$1.warn(\"[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache`  remove it from your config to silence this warning.\");\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (refreshCache === false || refreshCache === void 0) return false;\n\t\t\t\tif (refreshCache === true) return {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tupdateAge: refreshCache.updateAge !== void 0 ? refreshCache.updateAge : Math.floor(maxAge * .2)\n\t\t\t\t};\n\t\t\t})()\n\t\t},\n\t\tsecret,\n\t\trateLimit: {\n\t\t\t...options.rateLimit,\n\t\t\tenabled: options.rateLimit?.enabled ?? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isProduction,\n\t\t\twindow: options.rateLimit?.window || 10,\n\t\t\tmax: options.rateLimit?.max || 100,\n\t\t\tstorage: options.rateLimit?.storage || (options.secondaryStorage ? \"secondary-storage\" : \"memory\")\n\t\t},\n\t\tauthCookies: cookies,\n\t\tlogger: logger$1,\n\t\tgenerateId: generateIdFunc,\n\t\tsession: null,\n\t\tsecondaryStorage: options.secondaryStorage,\n\t\tpassword: {\n\t\t\thash: options.emailAndPassword?.password?.hash || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.hashPassword,\n\t\t\tverify: options.emailAndPassword?.password?.verify || _crypto_password_mjs__WEBPACK_IMPORTED_MODULE_3__.verifyPassword,\n\t\t\tconfig: {\n\t\t\t\tminPasswordLength: options.emailAndPassword?.minPasswordLength || 8,\n\t\t\t\tmaxPasswordLength: options.emailAndPassword?.maxPasswordLength || 128\n\t\t\t},\n\t\t\tcheckPassword: _utils_password_mjs__WEBPACK_IMPORTED_MODULE_6__.checkPassword\n\t\t},\n\t\tsetNewSession(session) {\n\t\t\tthis.newSession = session;\n\t\t},\n\t\tnewSession: null,\n\t\tadapter,\n\t\tinternalAdapter: (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(adapter, {\n\t\t\toptions,\n\t\t\tlogger: logger$1,\n\t\t\thooks: options.databaseHooks ? [options.databaseHooks] : [],\n\t\t\tgenerateId: generateIdFunc\n\t\t}),\n\t\tcreateAuthCookie: (0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_4__.createCookieGetter)(options),\n\t\tasync runMigrations() {\n\t\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_14__.BetterAuthError(\"runMigrations will be set by the specific init implementation\");\n\t\t},\n\t\tpublishTelemetry: publish,\n\t\tskipCSRFCheck: !!options.advanced?.disableCSRFCheck,\n\t\tskipOriginCheck: options.advanced?.disableOriginCheck !== void 0 ? options.advanced.disableOriginCheck : (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_13__.isTest)() ? true : false,\n\t\trunInBackground: options.advanced?.backgroundTasks?.handler ?? ((p) => {\n\t\t\tp.catch(() => {});\n\t\t}),\n\t\tasync runInBackgroundOrAwait(promise) {\n\t\t\ttry {\n\t\t\t\tif (options.advanced?.backgroundTasks?.handler) {\n\t\t\t\t\tif (promise instanceof Promise) options.advanced.backgroundTasks.handler(promise.catch((e) => {\n\t\t\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t\t\t}));\n\t\t\t\t} else await promise;\n\t\t\t} catch (e) {\n\t\t\t\tlogger$1.error(\"Failed to run background task:\", e);\n\t\t\t}\n\t\t},\n\t\tgetPlugin: (id) => options.plugins.find((p) => p.id === id) ?? null\n\t});\n\tlet context;\n\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_9__.isPromise)(initOrPromise)) ({context} = await initOrPromise);\n\telse ({context} = initOrPromise);\n\tif (typeof context.options.emailVerification?.onEmailVerification === \"function\") context.options.emailVerification.onEmailVerification = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_15__.deprecate)(context.options.emailVerification.onEmailVerification, \"Use `afterEmailVerification` instead. This will be removed in 1.5\", context.logger);\n\treturn context;\n}\n\n//#endregion\n\n//# sourceMappingURL=create-context.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2NyZWF0ZS1jb250ZXh0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtRTtBQUNyQjtBQUNxQjtBQUNHO0FBQ0E7QUFDTjtBQUNWO0FBQ0k7QUFDRjtBQUNKO0FBQ2lDO0FBQ3BCO0FBQ1o7QUFDMkI7QUFDdEI7QUFDTjtBQUNpQjtBQUNaO0FBQ2pDOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdFQUFjO0FBQ2xELEtBQUssOERBQU07QUFDWCx3QkFBd0IsZ0VBQVksWUFBWSxxRUFBZTtBQUMvRCx3QkFBd0IscUVBQWUsNkZBQTZGLFFBQVE7QUFDNUk7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsaURBQUk7QUFDdEMsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLHlCQUF5QixpRUFBa0I7QUFDM0Msa0JBQWtCLG9FQUFZO0FBQzlCLGlCQUFpQiwwREFBVTtBQUMzQjtBQUNBLGtDQUFrQyx1REFBRyx1QkFBdUIsdURBQUcsZ0JBQWdCLGdFQUFjO0FBQzdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNFQUFzQjtBQUN2QixpQkFBaUIsOERBQVU7QUFDM0IsZ0JBQWdCLG9FQUFhO0FBQzdCLCtEQUErRDtBQUMvRDtBQUNBO0FBQ0EseURBQXlELEtBQUs7QUFDOUQsbUJBQW1CLGdGQUFlO0FBQ2xDO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsMkJBQTJCLGFBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxTQUFTLDREQUFZO0FBQ3JCO0FBQ0EsU0FBUyxVQUFVLFFBQVEsd0VBQWU7QUFDMUM7QUFDQTtBQUNBLEVBQUU7QUFDRix1QkFBdUIsNERBQWE7QUFDcEM7QUFDQTtBQUNBLFdBQVcsZ0ZBQW9CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3QkFBd0IsZ0VBQWlCO0FBQ3pDO0FBQ0EsK0NBQStDLCtFQUFvQjtBQUNuRSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdFQUFZO0FBQ3REO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsOERBQVk7QUFDakUseURBQXlELGdFQUFjO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixnQkFBZ0I7QUFDaEIsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQiwrRUFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsb0JBQW9CLHNFQUFrQjtBQUN0QztBQUNBLGFBQWEscUVBQWU7QUFDNUIsR0FBRztBQUNIO0FBQ0E7QUFDQSwyR0FBMkcsOERBQU07QUFDakg7QUFDQSxtQkFBbUI7QUFDbkIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsS0FBSyxnRUFBUyxtQkFBbUIsU0FBUztBQUMxQyxRQUFRLFNBQVM7QUFDakIsMklBQTJJLG1FQUFTO0FBQ3BKO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29udGV4dC9jcmVhdGUtY29udGV4dC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IG1hdGNoZXNPcmlnaW5QYXR0ZXJuIH0gZnJvbSBcIi4uL2F1dGgvdHJ1c3RlZC1vcmlnaW5zLm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuLi9jcnlwdG8vcGFzc3dvcmQubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVDb29raWVHZXR0ZXIsIGdldENvb2tpZXMgfSBmcm9tIFwiLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlSWQgYXMgZ2VuZXJhdGVJZCQxIH0gZnJvbSBcIi4uL3V0aWxzL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgY2hlY2tQYXNzd29yZCB9IGZyb20gXCIuLi91dGlscy9wYXNzd29yZC5tanNcIjtcbmltcG9ydCB7IGNoZWNrRW5kcG9pbnRDb25mbGljdHMgfSBmcm9tIFwiLi4vYXBpL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9TRUNSRVQgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLm1qc1wiO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSBcIi4uL3V0aWxzL2lzLXByb21pc2UubWpzXCI7XG5pbXBvcnQgeyBnZXRJbnRlcm5hbFBsdWdpbnMsIGdldFRydXN0ZWRPcmlnaW5zLCBydW5QbHVnaW5Jbml0IH0gZnJvbSBcIi4vaGVscGVycy5tanNcIjtcbmltcG9ydCB7IGdldEJldHRlckF1dGhWZXJzaW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciwgZW52LCBpc1Byb2R1Y3Rpb24sIGlzVGVzdCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCB7IEJldHRlckF1dGhFcnJvciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lcnJvclwiO1xuaW1wb3J0IHsgZGVwcmVjYXRlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBzb2NpYWxQcm92aWRlcnMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvc29jaWFsLXByb3ZpZGVyc1wiO1xuaW1wb3J0IHsgY3JlYXRlVGVsZW1ldHJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC90ZWxlbWV0cnlcIjtcbmltcG9ydCBkZWZ1IGZyb20gXCJkZWZ1XCI7XG5cbi8vI3JlZ2lvbiBzcmMvY29udGV4dC9jcmVhdGUtY29udGV4dC50c1xuLyoqXG4qIEVzdGltYXRlcyB0aGUgZW50cm9weSBvZiBhIHN0cmluZyBpbiBiaXRzLlxuKiBUaGlzIGlzIGEgc2ltcGxlIGFwcHJveGltYXRpb24gdGhhdCBoZWxwcyBkZXRlY3QgbG93LWVudHJvcHkgc2VjcmV0cy5cbiovXG5mdW5jdGlvbiBlc3RpbWF0ZUVudHJvcHkoc3RyKSB7XG5cdGNvbnN0IHVuaXF1ZSA9IG5ldyBTZXQoc3RyKS5zaXplO1xuXHRpZiAodW5pcXVlID09PSAwKSByZXR1cm4gMDtcblx0cmV0dXJuIE1hdGgubG9nMihNYXRoLnBvdyh1bmlxdWUsIHN0ci5sZW5ndGgpKTtcbn1cbi8qKlxuKiBWYWxpZGF0ZXMgdGhhdCB0aGUgc2VjcmV0IG1lZXRzIG1pbmltdW0gc2VjdXJpdHkgcmVxdWlyZW1lbnRzLlxuKiBUaHJvd3MgQmV0dGVyQXV0aEVycm9yIGlmIHRoZSBzZWNyZXQgaXMgaW52YWxpZC5cbiogU2tpcHMgdmFsaWRhdGlvbiBmb3IgREVGQVVMVF9TRUNSRVQgaW4gdGVzdCBlbnZpcm9ubWVudHMgb25seS5cbiogT25seSB0aHJvd3MgZm9yIERFRkFVTFRfU0VDUkVUIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuXG4qL1xuZnVuY3Rpb24gdmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSkge1xuXHRjb25zdCBpc0RlZmF1bHRTZWNyZXQgPSBzZWNyZXQgPT09IERFRkFVTFRfU0VDUkVUO1xuXHRpZiAoaXNUZXN0KCkpIHJldHVybjtcblx0aWYgKGlzRGVmYXVsdFNlY3JldCAmJiBpc1Byb2R1Y3Rpb24pIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJZb3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IHNlY3JldC4gUGxlYXNlIHNldCBgQkVUVEVSX0FVVEhfU0VDUkVUYCBpbiB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcyBvciBwYXNzIGBzZWNyZXRgIGluIHlvdXIgYXV0aCBjb25maWcuXCIpO1xuXHRpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkJFVFRFUl9BVVRIX1NFQ1JFVCBpcyBtaXNzaW5nLiBTZXQgaXQgaW4geW91ciBlbnZpcm9ubWVudCBvciBwYXNzIGBzZWNyZXRgIHRvIGJldHRlckF1dGgoeyBzZWNyZXQgfSkuXCIpO1xuXHRpZiAoc2VjcmV0Lmxlbmd0aCA8IDMyKSBsb2dnZXIkMS53YXJuKGBbYmV0dGVyLWF1dGhdIFdhcm5pbmc6IHlvdXIgQkVUVEVSX0FVVEhfU0VDUkVUIHNob3VsZCBiZSBhdCBsZWFzdCAzMiBjaGFyYWN0ZXJzIGxvbmcgZm9yIGFkZXF1YXRlIHNlY3VyaXR5LiBHZW5lcmF0ZSBvbmUgd2l0aCBcXGBucHggQGJldHRlci1hdXRoL2NsaSBzZWNyZXRcXGAgb3IgXFxgb3BlbnNzbCByYW5kIC1iYXNlNjQgMzJcXGAuYCk7XG5cdGlmIChlc3RpbWF0ZUVudHJvcHkoc2VjcmV0KSA8IDEyMCkgbG9nZ2VyJDEud2FybihcIltiZXR0ZXItYXV0aF0gV2FybmluZzogeW91ciBCRVRURVJfQVVUSF9TRUNSRVQgYXBwZWFycyBsb3ctZW50cm9weS4gVXNlIGEgcmFuZG9tbHkgZ2VuZXJhdGVkIHNlY3JldCBmb3IgcHJvZHVjdGlvbi5cIik7XG59XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpIHtcblx0aWYgKCFvcHRpb25zLmRhdGFiYXNlKSBvcHRpb25zID0gZGVmdShvcHRpb25zLCB7XG5cdFx0c2Vzc2lvbjogeyBjb29raWVDYWNoZToge1xuXHRcdFx0ZW5hYmxlZDogdHJ1ZSxcblx0XHRcdHN0cmF0ZWd5OiBcImp3ZVwiLFxuXHRcdFx0cmVmcmVzaENhY2hlOiB0cnVlXG5cdFx0fSB9LFxuXHRcdGFjY291bnQ6IHtcblx0XHRcdHN0b3JlU3RhdGVTdHJhdGVneTogXCJjb29raWVcIixcblx0XHRcdHN0b3JlQWNjb3VudENvb2tpZTogdHJ1ZVxuXHRcdH1cblx0fSk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zLnBsdWdpbnMgfHwgW107XG5cdGNvbnN0IGludGVybmFsUGx1Z2lucyA9IGdldEludGVybmFsUGx1Z2lucyhvcHRpb25zKTtcblx0Y29uc3QgbG9nZ2VyJDEgPSBjcmVhdGVMb2dnZXIob3B0aW9ucy5sb2dnZXIpO1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgpO1xuXHRpZiAoIWJhc2VVUkwpIGxvZ2dlciQxLndhcm4oYFtiZXR0ZXItYXV0aF0gQmFzZSBVUkwgY291bGQgbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBzZXQgYSB2YWxpZCBiYXNlIFVSTCB1c2luZyB0aGUgYmFzZVVSTCBjb25maWcgb3B0aW9uIG9yIHRoZSBCRVRURVJfQVVUSF9CQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZS4gV2l0aG91dCB0aGlzLCBjYWxsYmFja3MgYW5kIHJlZGlyZWN0cyBtYXkgbm90IHdvcmsgY29ycmVjdGx5LmApO1xuXHRjb25zdCBzZWNyZXQgPSBvcHRpb25zLnNlY3JldCB8fCBlbnYuQkVUVEVSX0FVVEhfU0VDUkVUIHx8IGVudi5BVVRIX1NFQ1JFVCB8fCBERUZBVUxUX1NFQ1JFVDtcblx0dmFsaWRhdGVTZWNyZXQoc2VjcmV0LCBsb2dnZXIkMSk7XG5cdG9wdGlvbnMgPSB7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRzZWNyZXQsXG5cdFx0YmFzZVVSTDogYmFzZVVSTCA/IG5ldyBVUkwoYmFzZVVSTCkub3JpZ2luIDogXCJcIixcblx0XHRiYXNlUGF0aDogb3B0aW9ucy5iYXNlUGF0aCB8fCBcIi9hcGkvYXV0aFwiLFxuXHRcdHBsdWdpbnM6IHBsdWdpbnMuY29uY2F0KGludGVybmFsUGx1Z2lucylcblx0fTtcblx0Y2hlY2tFbmRwb2ludENvbmZsaWN0cyhvcHRpb25zLCBsb2dnZXIkMSk7XG5cdGNvbnN0IGNvb2tpZXMgPSBnZXRDb29raWVzKG9wdGlvbnMpO1xuXHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRjb25zdCBwcm92aWRlcnMgPSBPYmplY3QuZW50cmllcyhvcHRpb25zLnNvY2lhbFByb3ZpZGVycyB8fCB7fSkubWFwKChba2V5LCBjb25maWddKSA9PiB7XG5cdFx0aWYgKGNvbmZpZyA9PSBudWxsKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoY29uZmlnLmVuYWJsZWQgPT09IGZhbHNlKSByZXR1cm4gbnVsbDtcblx0XHRpZiAoIWNvbmZpZy5jbGllbnRJZCkgbG9nZ2VyJDEud2FybihgU29jaWFsIHByb3ZpZGVyICR7a2V5fSBpcyBtaXNzaW5nIGNsaWVudElkIG9yIGNsaWVudFNlY3JldGApO1xuXHRcdGNvbnN0IHByb3ZpZGVyID0gc29jaWFsUHJvdmlkZXJzW2tleV0oY29uZmlnKTtcblx0XHRwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAgPSBjb25maWcuZGlzYWJsZUltcGxpY2l0U2lnblVwO1xuXHRcdHJldHVybiBwcm92aWRlcjtcblx0fSkuZmlsdGVyKCh4KSA9PiB4ICE9PSBudWxsKTtcblx0Y29uc3QgZ2VuZXJhdGVJZEZ1bmMgPSAoeyBtb2RlbCwgc2l6ZSB9KSA9PiB7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLmFkdmFuY2VkPy5nZW5lcmF0ZUlkID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBvcHRpb25zLmFkdmFuY2VkLmdlbmVyYXRlSWQoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRzaXplXG5cdFx0fSk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zPy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG9wdGlvbnMuYWR2YW5jZWQuZGF0YWJhc2UuZ2VuZXJhdGVJZCh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHNpemVcblx0XHR9KTtcblx0XHRyZXR1cm4gZ2VuZXJhdGVJZCQxKHNpemUpO1xuXHR9O1xuXHRjb25zdCB7IHB1Ymxpc2ggfSA9IGF3YWl0IGNyZWF0ZVRlbGVtZXRyeShvcHRpb25zLCB7XG5cdFx0YWRhcHRlcjogYWRhcHRlci5pZCxcblx0XHRkYXRhYmFzZTogdHlwZW9mIG9wdGlvbnMuZGF0YWJhc2UgPT09IFwiZnVuY3Rpb25cIiA/IFwiYWRhcHRlclwiIDogZ2V0RGF0YWJhc2VUeXBlKG9wdGlvbnMuZGF0YWJhc2UpXG5cdH0pO1xuXHRjb25zdCBpbml0T3JQcm9taXNlID0gcnVuUGx1Z2luSW5pdCh7XG5cdFx0YXBwTmFtZTogb3B0aW9ucy5hcHBOYW1lIHx8IFwiQmV0dGVyIEF1dGhcIixcblx0XHRiYXNlVVJMOiBiYXNlVVJMIHx8IFwiXCIsXG5cdFx0dmVyc2lvbjogZ2V0QmV0dGVyQXV0aFZlcnNpb24oKSxcblx0XHRzb2NpYWxQcm92aWRlcnM6IHByb3ZpZGVycyxcblx0XHRvcHRpb25zLFxuXHRcdG9hdXRoQ29uZmlnOiB7XG5cdFx0XHRzdG9yZVN0YXRlU3RyYXRlZ3k6IG9wdGlvbnMuYWNjb3VudD8uc3RvcmVTdGF0ZVN0cmF0ZWd5IHx8IChvcHRpb25zLmRhdGFiYXNlID8gXCJkYXRhYmFzZVwiIDogXCJjb29raWVcIiksXG5cdFx0XHRza2lwU3RhdGVDb29raWVDaGVjazogISFvcHRpb25zLmFjY291bnQ/LnNraXBTdGF0ZUNvb2tpZUNoZWNrXG5cdFx0fSxcblx0XHR0YWJsZXMsXG5cdFx0dHJ1c3RlZE9yaWdpbnM6IGF3YWl0IGdldFRydXN0ZWRPcmlnaW5zKG9wdGlvbnMpLFxuXHRcdGlzVHJ1c3RlZE9yaWdpbih1cmwsIHNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy50cnVzdGVkT3JpZ2lucy5zb21lKChvcmlnaW4pID0+IG1hdGNoZXNPcmlnaW5QYXR0ZXJuKHVybCwgb3JpZ2luLCBzZXR0aW5ncykpO1xuXHRcdH0sXG5cdFx0c2Vzc2lvbkNvbmZpZzoge1xuXHRcdFx0dXBkYXRlQWdlOiBvcHRpb25zLnNlc3Npb24/LnVwZGF0ZUFnZSAhPT0gdm9pZCAwID8gb3B0aW9ucy5zZXNzaW9uLnVwZGF0ZUFnZSA6IDE0NDAgKiA2MCxcblx0XHRcdGV4cGlyZXNJbjogb3B0aW9ucy5zZXNzaW9uPy5leHBpcmVzSW4gfHwgMzYwMCAqIDI0ICogNyxcblx0XHRcdGZyZXNoQWdlOiBvcHRpb25zLnNlc3Npb24/LmZyZXNoQWdlID09PSB2b2lkIDAgPyAzNjAwICogMjQgOiBvcHRpb25zLnNlc3Npb24uZnJlc2hBZ2UsXG5cdFx0XHRjb29raWVSZWZyZXNoQ2FjaGU6ICgoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJlZnJlc2hDYWNoZSA9IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/LnJlZnJlc2hDYWNoZTtcblx0XHRcdFx0Y29uc3QgbWF4QWdlID0gb3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8ubWF4QWdlIHx8IDMwMDtcblx0XHRcdFx0aWYgKCghIW9wdGlvbnMuZGF0YWJhc2UgfHwgISFvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UpICYmIHJlZnJlc2hDYWNoZSkge1xuXHRcdFx0XHRcdGxvZ2dlciQxLndhcm4oXCJbYmV0dGVyLWF1dGhdIGBzZXNzaW9uLmNvb2tpZUNhY2hlLnJlZnJlc2hDYWNoZWAgaXMgZW5hYmxlZCB3aGlsZSBgZGF0YWJhc2VgIG9yIGBzZWNvbmRhcnlTdG9yYWdlYCBpcyBjb25maWd1cmVkLiBgcmVmcmVzaENhY2hlYCBpcyBtZWFudCBmb3Igc3RhdGVsZXNzIChEQi1sZXNzKSBzZXR1cHMuIERpc2FibGluZyBgcmVmcmVzaENhY2hlYCDigJQgcmVtb3ZlIGl0IGZyb20geW91ciBjb25maWcgdG8gc2lsZW5jZSB0aGlzIHdhcm5pbmcuXCIpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocmVmcmVzaENhY2hlID09PSBmYWxzZSB8fCByZWZyZXNoQ2FjaGUgPT09IHZvaWQgMCkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZiAocmVmcmVzaENhY2hlID09PSB0cnVlKSByZXR1cm4ge1xuXHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0dXBkYXRlQWdlOiBNYXRoLmZsb29yKG1heEFnZSAqIC4yKVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGVuYWJsZWQ6IHRydWUsXG5cdFx0XHRcdFx0dXBkYXRlQWdlOiByZWZyZXNoQ2FjaGUudXBkYXRlQWdlICE9PSB2b2lkIDAgPyByZWZyZXNoQ2FjaGUudXBkYXRlQWdlIDogTWF0aC5mbG9vcihtYXhBZ2UgKiAuMilcblx0XHRcdFx0fTtcblx0XHRcdH0pKClcblx0XHR9LFxuXHRcdHNlY3JldCxcblx0XHRyYXRlTGltaXQ6IHtcblx0XHRcdC4uLm9wdGlvbnMucmF0ZUxpbWl0LFxuXHRcdFx0ZW5hYmxlZDogb3B0aW9ucy5yYXRlTGltaXQ/LmVuYWJsZWQgPz8gaXNQcm9kdWN0aW9uLFxuXHRcdFx0d2luZG93OiBvcHRpb25zLnJhdGVMaW1pdD8ud2luZG93IHx8IDEwLFxuXHRcdFx0bWF4OiBvcHRpb25zLnJhdGVMaW1pdD8ubWF4IHx8IDEwMCxcblx0XHRcdHN0b3JhZ2U6IG9wdGlvbnMucmF0ZUxpbWl0Py5zdG9yYWdlIHx8IChvcHRpb25zLnNlY29uZGFyeVN0b3JhZ2UgPyBcInNlY29uZGFyeS1zdG9yYWdlXCIgOiBcIm1lbW9yeVwiKVxuXHRcdH0sXG5cdFx0YXV0aENvb2tpZXM6IGNvb2tpZXMsXG5cdFx0bG9nZ2VyOiBsb2dnZXIkMSxcblx0XHRnZW5lcmF0ZUlkOiBnZW5lcmF0ZUlkRnVuYyxcblx0XHRzZXNzaW9uOiBudWxsLFxuXHRcdHNlY29uZGFyeVN0b3JhZ2U6IG9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSxcblx0XHRwYXNzd29yZDoge1xuXHRcdFx0aGFzaDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5wYXNzd29yZD8uaGFzaCB8fCBoYXNoUGFzc3dvcmQsXG5cdFx0XHR2ZXJpZnk6IG9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/LnZlcmlmeSB8fCB2ZXJpZnlQYXNzd29yZCxcblx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHRtaW5QYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5taW5QYXNzd29yZExlbmd0aCB8fCA4LFxuXHRcdFx0XHRtYXhQYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5tYXhQYXNzd29yZExlbmd0aCB8fCAxMjhcblx0XHRcdH0sXG5cdFx0XHRjaGVja1Bhc3N3b3JkXG5cdFx0fSxcblx0XHRzZXROZXdTZXNzaW9uKHNlc3Npb24pIHtcblx0XHRcdHRoaXMubmV3U2Vzc2lvbiA9IHNlc3Npb247XG5cdFx0fSxcblx0XHRuZXdTZXNzaW9uOiBudWxsLFxuXHRcdGFkYXB0ZXIsXG5cdFx0aW50ZXJuYWxBZGFwdGVyOiBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIoYWRhcHRlciwge1xuXHRcdFx0b3B0aW9ucyxcblx0XHRcdGxvZ2dlcjogbG9nZ2VyJDEsXG5cdFx0XHRob29rczogb3B0aW9ucy5kYXRhYmFzZUhvb2tzID8gW29wdGlvbnMuZGF0YWJhc2VIb29rc10gOiBbXSxcblx0XHRcdGdlbmVyYXRlSWQ6IGdlbmVyYXRlSWRGdW5jXG5cdFx0fSksXG5cdFx0Y3JlYXRlQXV0aENvb2tpZTogY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpLFxuXHRcdGFzeW5jIHJ1bk1pZ3JhdGlvbnMoKSB7XG5cdFx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwicnVuTWlncmF0aW9ucyB3aWxsIGJlIHNldCBieSB0aGUgc3BlY2lmaWMgaW5pdCBpbXBsZW1lbnRhdGlvblwiKTtcblx0XHR9LFxuXHRcdHB1Ymxpc2hUZWxlbWV0cnk6IHB1Ymxpc2gsXG5cdFx0c2tpcENTUkZDaGVjazogISFvcHRpb25zLmFkdmFuY2VkPy5kaXNhYmxlQ1NSRkNoZWNrLFxuXHRcdHNraXBPcmlnaW5DaGVjazogb3B0aW9ucy5hZHZhbmNlZD8uZGlzYWJsZU9yaWdpbkNoZWNrICE9PSB2b2lkIDAgPyBvcHRpb25zLmFkdmFuY2VkLmRpc2FibGVPcmlnaW5DaGVjayA6IGlzVGVzdCgpID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdHJ1bkluQmFja2dyb3VuZDogb3B0aW9ucy5hZHZhbmNlZD8uYmFja2dyb3VuZFRhc2tzPy5oYW5kbGVyID8/ICgocCkgPT4ge1xuXHRcdFx0cC5jYXRjaCgoKSA9PiB7fSk7XG5cdFx0fSksXG5cdFx0YXN5bmMgcnVuSW5CYWNrZ3JvdW5kT3JBd2FpdChwcm9taXNlKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAob3B0aW9ucy5hZHZhbmNlZD8uYmFja2dyb3VuZFRhc2tzPy5oYW5kbGVyKSB7XG5cdFx0XHRcdFx0aWYgKHByb21pc2UgaW5zdGFuY2VvZiBQcm9taXNlKSBvcHRpb25zLmFkdmFuY2VkLmJhY2tncm91bmRUYXNrcy5oYW5kbGVyKHByb21pc2UuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRcdGxvZ2dlciQxLmVycm9yKFwiRmFpbGVkIHRvIHJ1biBiYWNrZ3JvdW5kIHRhc2s6XCIsIGUpO1xuXHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0fSBlbHNlIGF3YWl0IHByb21pc2U7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGxvZ2dlciQxLmVycm9yKFwiRmFpbGVkIHRvIHJ1biBiYWNrZ3JvdW5kIHRhc2s6XCIsIGUpO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Z2V0UGx1Z2luOiAoaWQpID0+IG9wdGlvbnMucGx1Z2lucy5maW5kKChwKSA9PiBwLmlkID09PSBpZCkgPz8gbnVsbFxuXHR9KTtcblx0bGV0IGNvbnRleHQ7XG5cdGlmIChpc1Byb21pc2UoaW5pdE9yUHJvbWlzZSkpICh7Y29udGV4dH0gPSBhd2FpdCBpbml0T3JQcm9taXNlKTtcblx0ZWxzZSAoe2NvbnRleHR9ID0gaW5pdE9yUHJvbWlzZSk7XG5cdGlmICh0eXBlb2YgY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5vbkVtYWlsVmVyaWZpY2F0aW9uID09PSBcImZ1bmN0aW9uXCIpIGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uID0gZGVwcmVjYXRlKGNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbi5vbkVtYWlsVmVyaWZpY2F0aW9uLCBcIlVzZSBgYWZ0ZXJFbWFpbFZlcmlmaWNhdGlvbmAgaW5zdGVhZC4gVGhpcyB3aWxsIGJlIHJlbW92ZWQgaW4gMS41XCIsIGNvbnRleHQubG9nZ2VyKTtcblx0cmV0dXJuIGNvbnRleHQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlQXV0aENvbnRleHQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZS1jb250ZXh0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/create-context.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/helpers.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/context/helpers.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getInternalPlugins: () => (/* binding */ getInternalPlugins),\n/* harmony export */   getTrustedOrigins: () => (/* binding */ getTrustedOrigins),\n/* harmony export */   runPluginInit: () => (/* binding */ runPluginInit)\n/* harmony export */ });\n/* harmony import */ var _db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/url.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/is-promise.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var defu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! defu */ \"(rsc)/./node_modules/defu/dist/defu.mjs\");\n\n\n\n\n\n\n//#region src/context/helpers.ts\nasync function runPluginInit(ctx) {\n\tlet options = ctx.options;\n\tconst plugins = options.plugins || [];\n\tlet context = ctx;\n\tconst dbHooks = [];\n\tfor (const plugin of plugins) if (plugin.init) {\n\t\tconst initPromise = plugin.init(context);\n\t\tlet result;\n\t\tif ((0,_utils_is_promise_mjs__WEBPACK_IMPORTED_MODULE_2__.isPromise)(initPromise)) result = await initPromise;\n\t\telse result = initPromise;\n\t\tif (typeof result === \"object\") {\n\t\t\tif (result.options) {\n\t\t\t\tconst { databaseHooks, ...restOpts } = result.options;\n\t\t\t\tif (databaseHooks) dbHooks.push(databaseHooks);\n\t\t\t\toptions = (0,defu__WEBPACK_IMPORTED_MODULE_4__.defu)(options, restOpts);\n\t\t\t}\n\t\t\tif (result.context) context = {\n\t\t\t\t...context,\n\t\t\t\t...result.context\n\t\t\t};\n\t\t}\n\t}\n\tdbHooks.push(options.databaseHooks);\n\tcontext.internalAdapter = (0,_db_internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_0__.createInternalAdapter)(context.adapter, {\n\t\toptions,\n\t\tlogger: context.logger,\n\t\thooks: dbHooks.filter((u) => u !== void 0),\n\t\tgenerateId: context.generateId\n\t});\n\tcontext.options = options;\n\treturn { context };\n}\nfunction getInternalPlugins(options) {\n\tconst plugins = [];\n\tif (options.advanced?.crossSubDomainCookies?.enabled) {}\n\treturn plugins;\n}\nasync function getTrustedOrigins(options, request) {\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseURL)(options.baseURL, options.basePath);\n\tconst trustedOrigins = baseURL ? [new URL(baseURL).origin] : [];\n\tif (options.trustedOrigins) {\n\t\tif (Array.isArray(options.trustedOrigins)) trustedOrigins.push(...options.trustedOrigins);\n\t\tif (typeof options.trustedOrigins === \"function\") {\n\t\t\tconst validOrigins = await options.trustedOrigins(request);\n\t\t\ttrustedOrigins.push(...validOrigins);\n\t\t}\n\t}\n\tconst envTrustedOrigins = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.env.BETTER_AUTH_TRUSTED_ORIGINS;\n\tif (envTrustedOrigins) trustedOrigins.push(...envTrustedOrigins.split(\",\"));\n\treturn trustedOrigins.filter((v) => Boolean(v));\n}\n\n//#endregion\n\n//# sourceMappingURL=helpers.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2hlbHBlcnMubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQW1FO0FBQ3JCO0FBQ007QUFDUjtBQUNOOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGdFQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsWUFBWSw2QkFBNkI7QUFDekM7QUFDQSxjQUFjLDBDQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsK0VBQXFCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0RBQUc7QUFDOUI7QUFDQTtBQUNBOztBQUVBO0FBQ2dFO0FBQ2hFIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NvbnRleHQvaGVscGVycy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW50ZXJuYWxBZGFwdGVyIH0gZnJvbSBcIi4uL2RiL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlVVJMIH0gZnJvbSBcIi4uL3V0aWxzL3VybC5tanNcIjtcbmltcG9ydCB7IGlzUHJvbWlzZSB9IGZyb20gXCIuLi91dGlscy9pcy1wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgZGVmdSBhcyBkZWZ1JDEgfSBmcm9tIFwiZGVmdVwiO1xuXG4vLyNyZWdpb24gc3JjL2NvbnRleHQvaGVscGVycy50c1xuYXN5bmMgZnVuY3Rpb24gcnVuUGx1Z2luSW5pdChjdHgpIHtcblx0bGV0IG9wdGlvbnMgPSBjdHgub3B0aW9ucztcblx0Y29uc3QgcGx1Z2lucyA9IG9wdGlvbnMucGx1Z2lucyB8fCBbXTtcblx0bGV0IGNvbnRleHQgPSBjdHg7XG5cdGNvbnN0IGRiSG9va3MgPSBbXTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykgaWYgKHBsdWdpbi5pbml0KSB7XG5cdFx0Y29uc3QgaW5pdFByb21pc2UgPSBwbHVnaW4uaW5pdChjb250ZXh0KTtcblx0XHRsZXQgcmVzdWx0O1xuXHRcdGlmIChpc1Byb21pc2UoaW5pdFByb21pc2UpKSByZXN1bHQgPSBhd2FpdCBpbml0UHJvbWlzZTtcblx0XHRlbHNlIHJlc3VsdCA9IGluaXRQcm9taXNlO1xuXHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRpZiAocmVzdWx0Lm9wdGlvbnMpIHtcblx0XHRcdFx0Y29uc3QgeyBkYXRhYmFzZUhvb2tzLCAuLi5yZXN0T3B0cyB9ID0gcmVzdWx0Lm9wdGlvbnM7XG5cdFx0XHRcdGlmIChkYXRhYmFzZUhvb2tzKSBkYkhvb2tzLnB1c2goZGF0YWJhc2VIb29rcyk7XG5cdFx0XHRcdG9wdGlvbnMgPSBkZWZ1JDEob3B0aW9ucywgcmVzdE9wdHMpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlc3VsdC5jb250ZXh0KSBjb250ZXh0ID0ge1xuXHRcdFx0XHQuLi5jb250ZXh0LFxuXHRcdFx0XHQuLi5yZXN1bHQuY29udGV4dFxuXHRcdFx0fTtcblx0XHR9XG5cdH1cblx0ZGJIb29rcy5wdXNoKG9wdGlvbnMuZGF0YWJhc2VIb29rcyk7XG5cdGNvbnRleHQuaW50ZXJuYWxBZGFwdGVyID0gY3JlYXRlSW50ZXJuYWxBZGFwdGVyKGNvbnRleHQuYWRhcHRlciwge1xuXHRcdG9wdGlvbnMsXG5cdFx0bG9nZ2VyOiBjb250ZXh0LmxvZ2dlcixcblx0XHRob29rczogZGJIb29rcy5maWx0ZXIoKHUpID0+IHUgIT09IHZvaWQgMCksXG5cdFx0Z2VuZXJhdGVJZDogY29udGV4dC5nZW5lcmF0ZUlkXG5cdH0pO1xuXHRjb250ZXh0Lm9wdGlvbnMgPSBvcHRpb25zO1xuXHRyZXR1cm4geyBjb250ZXh0IH07XG59XG5mdW5jdGlvbiBnZXRJbnRlcm5hbFBsdWdpbnMob3B0aW9ucykge1xuXHRjb25zdCBwbHVnaW5zID0gW107XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmVuYWJsZWQpIHt9XG5cdHJldHVybiBwbHVnaW5zO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJ1c3RlZE9yaWdpbnMob3B0aW9ucywgcmVxdWVzdCkge1xuXHRjb25zdCBiYXNlVVJMID0gZ2V0QmFzZVVSTChvcHRpb25zLmJhc2VVUkwsIG9wdGlvbnMuYmFzZVBhdGgpO1xuXHRjb25zdCB0cnVzdGVkT3JpZ2lucyA9IGJhc2VVUkwgPyBbbmV3IFVSTChiYXNlVVJMKS5vcmlnaW5dIDogW107XG5cdGlmIChvcHRpb25zLnRydXN0ZWRPcmlnaW5zKSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy50cnVzdGVkT3JpZ2lucykpIHRydXN0ZWRPcmlnaW5zLnB1c2goLi4ub3B0aW9ucy50cnVzdGVkT3JpZ2lucyk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zLnRydXN0ZWRPcmlnaW5zID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdGNvbnN0IHZhbGlkT3JpZ2lucyA9IGF3YWl0IG9wdGlvbnMudHJ1c3RlZE9yaWdpbnMocmVxdWVzdCk7XG5cdFx0XHR0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLnZhbGlkT3JpZ2lucyk7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGVudlRydXN0ZWRPcmlnaW5zID0gZW52LkJFVFRFUl9BVVRIX1RSVVNURURfT1JJR0lOUztcblx0aWYgKGVudlRydXN0ZWRPcmlnaW5zKSB0cnVzdGVkT3JpZ2lucy5wdXNoKC4uLmVudlRydXN0ZWRPcmlnaW5zLnNwbGl0KFwiLFwiKSk7XG5cdHJldHVybiB0cnVzdGVkT3JpZ2lucy5maWx0ZXIoKHYpID0+IEJvb2xlYW4odikpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEludGVybmFsUGx1Z2lucywgZ2V0VHJ1c3RlZE9yaWdpbnMsIHJ1blBsdWdpbkluaXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/helpers.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/context/init.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/context/init.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init: () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/adapter-kysely.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../db/get-migration.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _create_context_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./create-context.mjs */ \"(rsc)/./node_modules/better-auth/dist/context/create-context.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n\n\n\n//#region src/context/init.ts\nconst init = async (options) => {\n\tconst adapter = await (0,_db_adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_1__.getAdapter)(options);\n\tconst getDatabaseType = (database) => (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.getKyselyDatabaseType)(database) || \"unknown\";\n\tconst ctx = await (0,_create_context_mjs__WEBPACK_IMPORTED_MODULE_3__.createAuthContext)(adapter, options, getDatabaseType);\n\tctx.runMigrations = async function() {\n\t\tif (!options.database || \"updateMany\" in options.database) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_4__.BetterAuthError(\"Database is not provided or it's an adapter. Migrations are only supported with a database instance.\");\n\t\tconst { runMigrations } = await (0,_db_get_migration_mjs__WEBPACK_IMPORTED_MODULE_2__.getMigrations)(options);\n\t\tawait runMigrations();\n\t};\n\treturn ctx;\n};\n\n//#endregion\n\n//# sourceMappingURL=init.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2luaXQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUErRTtBQUN6QjtBQUNFO0FBQ0M7QUFDQzs7QUFFMUQ7QUFDQTtBQUNBLHVCQUF1QixrRUFBVTtBQUNqQyx1Q0FBdUMsMkZBQXFCO0FBQzVELG1CQUFtQixzRUFBaUI7QUFDcEM7QUFDQSx1RUFBdUUsb0VBQWU7QUFDdEYsVUFBVSxnQkFBZ0IsUUFBUSxvRUFBYTtBQUMvQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnQjtBQUNoQiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb250ZXh0L2luaXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEt5c2VseURhdGFiYXNlVHlwZSB9IGZyb20gXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9kaWFsZWN0Lm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWRhcHRlciB9IGZyb20gXCIuLi9kYi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGdldE1pZ3JhdGlvbnMgfSBmcm9tIFwiLi4vZGIvZ2V0LW1pZ3JhdGlvbi5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhDb250ZXh0IH0gZnJvbSBcIi4vY3JlYXRlLWNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZXJyb3JcIjtcblxuLy8jcmVnaW9uIHNyYy9jb250ZXh0L2luaXQudHNcbmNvbnN0IGluaXQgPSBhc3luYyAob3B0aW9ucykgPT4ge1xuXHRjb25zdCBhZGFwdGVyID0gYXdhaXQgZ2V0QWRhcHRlcihvcHRpb25zKTtcblx0Y29uc3QgZ2V0RGF0YWJhc2VUeXBlID0gKGRhdGFiYXNlKSA9PiBnZXRLeXNlbHlEYXRhYmFzZVR5cGUoZGF0YWJhc2UpIHx8IFwidW5rbm93blwiO1xuXHRjb25zdCBjdHggPSBhd2FpdCBjcmVhdGVBdXRoQ29udGV4dChhZGFwdGVyLCBvcHRpb25zLCBnZXREYXRhYmFzZVR5cGUpO1xuXHRjdHgucnVuTWlncmF0aW9ucyA9IGFzeW5jIGZ1bmN0aW9uKCkge1xuXHRcdGlmICghb3B0aW9ucy5kYXRhYmFzZSB8fCBcInVwZGF0ZU1hbnlcIiBpbiBvcHRpb25zLmRhdGFiYXNlKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRGF0YWJhc2UgaXMgbm90IHByb3ZpZGVkIG9yIGl0J3MgYW4gYWRhcHRlci4gTWlncmF0aW9ucyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCBhIGRhdGFiYXNlIGluc3RhbmNlLlwiKTtcblx0XHRjb25zdCB7IHJ1bk1pZ3JhdGlvbnMgfSA9IGF3YWl0IGdldE1pZ3JhdGlvbnMob3B0aW9ucyk7XG5cdFx0YXdhaXQgcnVuTWlncmF0aW9ucygpO1xuXHR9O1xuXHRyZXR1cm4gY3R4O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBpbml0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/context/init.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/cookie-utils.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* binding */ HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* binding */ SECURE_COOKIE_PREFIX),\n/* harmony export */   parseSetCookieHeader: () => (/* binding */ parseSetCookieHeader),\n/* harmony export */   setCookieToHeader: () => (/* binding */ setCookieToHeader),\n/* harmony export */   stripSecureCookiePrefix: () => (/* binding */ stripSecureCookiePrefix)\n/* harmony export */ });\n//#region src/cookies/cookie-utils.ts\nconst SECURE_COOKIE_PREFIX = \"__Secure-\";\nconst HOST_COOKIE_PREFIX = \"__Host-\";\n/**\n* Remove __Secure- or __Host- prefix from cookie name.\n*/\nfunction stripSecureCookiePrefix(cookieName) {\n\tif (cookieName.startsWith(SECURE_COOKIE_PREFIX)) return cookieName.slice(9);\n\tif (cookieName.startsWith(HOST_COOKIE_PREFIX)) return cookieName.slice(7);\n\treturn cookieName;\n}\nfunction parseSetCookieHeader(setCookie) {\n\tconst cookies = /* @__PURE__ */ new Map();\n\tsetCookie.split(\", \").forEach((cookieString) => {\n\t\tconst [nameValue, ...attributes] = cookieString.split(\";\").map((part) => part.trim());\n\t\tconst [name, ...valueParts] = (nameValue || \"\").split(\"=\");\n\t\tconst value = valueParts.join(\"=\");\n\t\tif (!name || value === void 0) return;\n\t\tconst attrObj = { value };\n\t\tattributes.forEach((attribute) => {\n\t\t\tconst [attrName, ...attrValueParts] = attribute.split(\"=\");\n\t\t\tconst attrValue = attrValueParts.join(\"=\");\n\t\t\tconst normalizedAttrName = attrName.trim().toLowerCase();\n\t\t\tswitch (normalizedAttrName) {\n\t\t\t\tcase \"max-age\":\n\t\t\t\t\tattrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expires\":\n\t\t\t\t\tattrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"domain\":\n\t\t\t\t\tattrObj.domain = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"path\":\n\t\t\t\t\tattrObj.path = attrValue ? attrValue.trim() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"secure\":\n\t\t\t\t\tattrObj.secure = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"httponly\":\n\t\t\t\t\tattrObj.httponly = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"samesite\":\n\t\t\t\t\tattrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tattrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t\tcookies.set(name, attrObj);\n\t});\n\treturn cookies;\n}\nfunction setCookieToHeader(headers) {\n\treturn (context) => {\n\t\tconst setCookieHeader = context.response.headers.get(\"set-cookie\");\n\t\tif (!setCookieHeader) return;\n\t\tconst cookieMap = /* @__PURE__ */ new Map();\n\t\t(headers.get(\"cookie\") || \"\").split(\";\").forEach((cookie) => {\n\t\t\tconst [name, ...rest] = cookie.trim().split(\"=\");\n\t\t\tif (name && rest.length > 0) cookieMap.set(name, rest.join(\"=\"));\n\t\t});\n\t\tsetCookieHeader.split(\",\").forEach((header) => {\n\t\t\tparseSetCookieHeader(header).forEach((value, name) => {\n\t\t\t\tcookieMap.set(name, value.value);\n\t\t\t});\n\t\t});\n\t\tconst updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n\t\theaders.set(\"cookie\", updatedCookies);\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=cookie-utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL2Nvb2tpZS11dGlscy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNILG1GQUFtRixLQUFLLEdBQUcsTUFBTSxXQUFXO0FBQzVHO0FBQ0E7QUFDQTs7QUFFQTtBQUNzSDtBQUN0SCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL2Nvb2tpZS11dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jb29raWVzL2Nvb2tpZS11dGlscy50c1xuY29uc3QgU0VDVVJFX0NPT0tJRV9QUkVGSVggPSBcIl9fU2VjdXJlLVwiO1xuY29uc3QgSE9TVF9DT09LSUVfUFJFRklYID0gXCJfX0hvc3QtXCI7XG4vKipcbiogUmVtb3ZlIF9fU2VjdXJlLSBvciBfX0hvc3QtIHByZWZpeCBmcm9tIGNvb2tpZSBuYW1lLlxuKi9cbmZ1bmN0aW9uIHN0cmlwU2VjdXJlQ29va2llUHJlZml4KGNvb2tpZU5hbWUpIHtcblx0aWYgKGNvb2tpZU5hbWUuc3RhcnRzV2l0aChTRUNVUkVfQ09PS0lFX1BSRUZJWCkpIHJldHVybiBjb29raWVOYW1lLnNsaWNlKDkpO1xuXHRpZiAoY29va2llTmFtZS5zdGFydHNXaXRoKEhPU1RfQ09PS0lFX1BSRUZJWCkpIHJldHVybiBjb29raWVOYW1lLnNsaWNlKDcpO1xuXHRyZXR1cm4gY29va2llTmFtZTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2V0Q29va2llSGVhZGVyKHNldENvb2tpZSkge1xuXHRjb25zdCBjb29raWVzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0c2V0Q29va2llLnNwbGl0KFwiLCBcIikuZm9yRWFjaCgoY29va2llU3RyaW5nKSA9PiB7XG5cdFx0Y29uc3QgW25hbWVWYWx1ZSwgLi4uYXR0cmlidXRlc10gPSBjb29raWVTdHJpbmcuc3BsaXQoXCI7XCIpLm1hcCgocGFydCkgPT4gcGFydC50cmltKCkpO1xuXHRcdGNvbnN0IFtuYW1lLCAuLi52YWx1ZVBhcnRzXSA9IChuYW1lVmFsdWUgfHwgXCJcIikuc3BsaXQoXCI9XCIpO1xuXHRcdGNvbnN0IHZhbHVlID0gdmFsdWVQYXJ0cy5qb2luKFwiPVwiKTtcblx0XHRpZiAoIW5hbWUgfHwgdmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuO1xuXHRcdGNvbnN0IGF0dHJPYmogPSB7IHZhbHVlIH07XG5cdFx0YXR0cmlidXRlcy5mb3JFYWNoKChhdHRyaWJ1dGUpID0+IHtcblx0XHRcdGNvbnN0IFthdHRyTmFtZSwgLi4uYXR0clZhbHVlUGFydHNdID0gYXR0cmlidXRlLnNwbGl0KFwiPVwiKTtcblx0XHRcdGNvbnN0IGF0dHJWYWx1ZSA9IGF0dHJWYWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHRcdFx0Y29uc3Qgbm9ybWFsaXplZEF0dHJOYW1lID0gYXR0ck5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRzd2l0Y2ggKG5vcm1hbGl6ZWRBdHRyTmFtZSkge1xuXHRcdFx0XHRjYXNlIFwibWF4LWFnZVwiOlxuXHRcdFx0XHRcdGF0dHJPYmpbXCJtYXgtYWdlXCJdID0gYXR0clZhbHVlID8gcGFyc2VJbnQoYXR0clZhbHVlLnRyaW0oKSwgMTApIDogdm9pZCAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZXhwaXJlc1wiOlxuXHRcdFx0XHRcdGF0dHJPYmouZXhwaXJlcyA9IGF0dHJWYWx1ZSA/IG5ldyBEYXRlKGF0dHJWYWx1ZS50cmltKCkpIDogdm9pZCAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZG9tYWluXCI6XG5cdFx0XHRcdFx0YXR0ck9iai5kb21haW4gPSBhdHRyVmFsdWUgPyBhdHRyVmFsdWUudHJpbSgpIDogdm9pZCAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwicGF0aFwiOlxuXHRcdFx0XHRcdGF0dHJPYmoucGF0aCA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkgOiB2b2lkIDA7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJzZWN1cmVcIjpcblx0XHRcdFx0XHRhdHRyT2JqLnNlY3VyZSA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJodHRwb25seVwiOlxuXHRcdFx0XHRcdGF0dHJPYmouaHR0cG9ubHkgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwic2FtZXNpdGVcIjpcblx0XHRcdFx0XHRhdHRyT2JqLnNhbWVzaXRlID0gYXR0clZhbHVlID8gYXR0clZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpIDogdm9pZCAwO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGF0dHJPYmpbbm9ybWFsaXplZEF0dHJOYW1lXSA9IGF0dHJWYWx1ZSA/IGF0dHJWYWx1ZS50cmltKCkgOiB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvb2tpZXMuc2V0KG5hbWUsIGF0dHJPYmopO1xuXHR9KTtcblx0cmV0dXJuIGNvb2tpZXM7XG59XG5mdW5jdGlvbiBzZXRDb29raWVUb0hlYWRlcihoZWFkZXJzKSB7XG5cdHJldHVybiAoY29udGV4dCkgPT4ge1xuXHRcdGNvbnN0IHNldENvb2tpZUhlYWRlciA9IGNvbnRleHQucmVzcG9uc2UuaGVhZGVycy5nZXQoXCJzZXQtY29va2llXCIpO1xuXHRcdGlmICghc2V0Q29va2llSGVhZGVyKSByZXR1cm47XG5cdFx0Y29uc3QgY29va2llTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcblx0XHQoaGVhZGVycy5nZXQoXCJjb29raWVcIikgfHwgXCJcIikuc3BsaXQoXCI7XCIpLmZvckVhY2goKGNvb2tpZSkgPT4ge1xuXHRcdFx0Y29uc3QgW25hbWUsIC4uLnJlc3RdID0gY29va2llLnRyaW0oKS5zcGxpdChcIj1cIik7XG5cdFx0XHRpZiAobmFtZSAmJiByZXN0Lmxlbmd0aCA+IDApIGNvb2tpZU1hcC5zZXQobmFtZSwgcmVzdC5qb2luKFwiPVwiKSk7XG5cdFx0fSk7XG5cdFx0c2V0Q29va2llSGVhZGVyLnNwbGl0KFwiLFwiKS5mb3JFYWNoKChoZWFkZXIpID0+IHtcblx0XHRcdHBhcnNlU2V0Q29va2llSGVhZGVyKGhlYWRlcikuZm9yRWFjaCgodmFsdWUsIG5hbWUpID0+IHtcblx0XHRcdFx0Y29va2llTWFwLnNldChuYW1lLCB2YWx1ZS52YWx1ZSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRjb25zdCB1cGRhdGVkQ29va2llcyA9IEFycmF5LmZyb20oY29va2llTWFwLmVudHJpZXMoKSkubWFwKChbbmFtZSwgdmFsdWVdKSA9PiBgJHtuYW1lfT0ke3ZhbHVlfWApLmpvaW4oXCI7IFwiKTtcblx0XHRoZWFkZXJzLnNldChcImNvb2tpZVwiLCB1cGRhdGVkQ29va2llcyk7XG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZVRvSGVhZGVyLCBzdHJpcFNlY3VyZUNvb2tpZVByZWZpeCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29va2llLXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/index.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/index.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HOST_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.HOST_COOKIE_PREFIX),\n/* harmony export */   SECURE_COOKIE_PREFIX: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.SECURE_COOKIE_PREFIX),\n/* harmony export */   createCookieGetter: () => (/* binding */ createCookieGetter),\n/* harmony export */   createSessionStore: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore),\n/* harmony export */   deleteSessionCookie: () => (/* binding */ deleteSessionCookie),\n/* harmony export */   expireCookie: () => (/* binding */ expireCookie),\n/* harmony export */   getChunkedCookie: () => (/* reexport safe */ _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.getChunkedCookie),\n/* harmony export */   getCookieCache: () => (/* binding */ getCookieCache),\n/* harmony export */   getCookies: () => (/* binding */ getCookies),\n/* harmony export */   getSessionCookie: () => (/* binding */ getSessionCookie),\n/* harmony export */   parseCookies: () => (/* binding */ parseCookies),\n/* harmony export */   parseSetCookieHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSetCookieHeader),\n/* harmony export */   setCookieCache: () => (/* binding */ setCookieCache),\n/* harmony export */   setCookieToHeader: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.setCookieToHeader),\n/* harmony export */   setSessionCookie: () => (/* binding */ setSessionCookie),\n/* harmony export */   stripSecureCookiePrefix: () => (/* reexport safe */ _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.stripSecureCookiePrefix)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../db/schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _session_store_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_time_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/time.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/time.mjs\");\n/* harmony import */ var _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/utils/binary */ \"(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\");\n/* harmony import */ var _better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/utils/hmac */ \"(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/cookies/index.ts\nfunction createCookieGetter(options) {\n\tconst secureCookiePrefix = (options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL !== void 0 ? options.baseURL.startsWith(\"https://\") ? true : false : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isProduction) ? _cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.SECURE_COOKIE_PREFIX : \"\";\n\tconst crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n\tconst domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n\tif (crossSubdomainEnabled && !domain) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BetterAuthError(\"baseURL is required when crossSubdomainCookies are enabled\");\n\tfunction createCookie(cookieName, overrideAttributes = {}) {\n\t\tconst prefix = options.advanced?.cookiePrefix || \"better-auth\";\n\t\tconst name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n\t\tconst attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n\t\treturn {\n\t\t\tname: `${secureCookiePrefix}${name}`,\n\t\t\tattributes: {\n\t\t\t\tsecure: !!secureCookiePrefix,\n\t\t\t\tsameSite: \"lax\",\n\t\t\t\tpath: \"/\",\n\t\t\t\thttpOnly: true,\n\t\t\t\t...crossSubdomainEnabled ? { domain } : {},\n\t\t\t\t...options.advanced?.defaultCookieAttributes,\n\t\t\t\t...overrideAttributes,\n\t\t\t\t...attributes\n\t\t\t}\n\t\t};\n\t}\n\treturn createCookie;\n}\nfunction getCookies(options) {\n\tconst createCookie = createCookieGetter(options);\n\tconst sessionToken = createCookie(\"session_token\", { maxAge: options.session?.expiresIn || (0,_utils_time_mjs__WEBPACK_IMPORTED_MODULE_4__.sec)(\"7d\") });\n\tconst sessionData = createCookie(\"session_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst accountData = createCookie(\"account_data\", { maxAge: options.session?.cookieCache?.maxAge || 300 });\n\tconst dontRememberToken = createCookie(\"dont_remember\");\n\treturn {\n\t\tsessionToken: {\n\t\t\tname: sessionToken.name,\n\t\t\tattributes: sessionToken.attributes\n\t\t},\n\t\tsessionData: {\n\t\t\tname: sessionData.name,\n\t\t\tattributes: sessionData.attributes\n\t\t},\n\t\tdontRememberToken: {\n\t\t\tname: dontRememberToken.name,\n\t\t\tattributes: dontRememberToken.attributes\n\t\t},\n\t\taccountData: {\n\t\t\tname: accountData.name,\n\t\t\tattributes: accountData.attributes\n\t\t}\n\t};\n}\nasync function setCookieCache(ctx, session, dontRememberMe) {\n\tif (ctx.context.options.session?.cookieCache?.enabled) {\n\t\tconst filteredSession = Object.entries(session.session).reduce((acc, [key, value]) => {\n\t\t\tconst fieldConfig = ctx.context.options.session?.additionalFields?.[key];\n\t\t\tif (!fieldConfig || fieldConfig.returned !== false) acc[key] = value;\n\t\t\treturn acc;\n\t\t}, {});\n\t\tconst filteredUser = (0,_db_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.parseUserOutput)(ctx.context.options, session.user);\n\t\tconst versionConfig = ctx.context.options.session?.cookieCache?.version;\n\t\tlet version = \"1\";\n\t\tif (versionConfig) {\n\t\t\tif (typeof versionConfig === \"string\") version = versionConfig;\n\t\t\telse if (typeof versionConfig === \"function\") {\n\t\t\t\tconst result = versionConfig(session.session, session.user);\n\t\t\t\tversion = result instanceof Promise ? await result : result;\n\t\t\t}\n\t\t}\n\t\tconst sessionData = {\n\t\t\tsession: filteredSession,\n\t\t\tuser: filteredUser,\n\t\t\tupdatedAt: Date.now(),\n\t\t\tversion\n\t\t};\n\t\tconst options = {\n\t\t\t...ctx.context.authCookies.sessionData.attributes,\n\t\t\tmaxAge: dontRememberMe ? void 0 : ctx.context.authCookies.sessionData.attributes.maxAge\n\t\t};\n\t\tconst expiresAtDate = (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(options.maxAge || 60, \"sec\").getTime();\n\t\tconst strategy = ctx.context.options.session?.cookieCache?.strategy || \"compact\";\n\t\tlet data;\n\t\tif (strategy === \"jwe\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncodeJWT)(sessionData, ctx.context.secret, \"better-auth-session\", options.maxAge || 300);\n\t\telse if (strategy === \"jwt\") data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.signJWT)(sessionData, ctx.context.secret, options.maxAge || 300);\n\t\telse data = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_9__.base64Url.encode(JSON.stringify({\n\t\t\tsession: sessionData,\n\t\t\texpiresAt: expiresAtDate,\n\t\t\tsignature: await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_11__.createHMAC)(\"SHA-256\", \"base64urlnopad\").sign(ctx.context.secret, JSON.stringify({\n\t\t\t\t...sessionData,\n\t\t\t\texpiresAt: expiresAtDate\n\t\t\t}))\n\t\t}), { padding: false });\n\t\tif (data.length > 4093) {\n\t\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\t\tconst cookies = sessionStore.chunk(data, options);\n\t\t\tsessionStore.setCookies(cookies);\n\t\t} else {\n\t\t\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, options, ctx);\n\t\t\tif (sessionStore.hasChunks()) {\n\t\t\t\tconst cleanCookies = sessionStore.clean();\n\t\t\t\tsessionStore.setCookies(cleanCookies);\n\t\t\t}\n\t\t\tctx.setCookie(ctx.context.authCookies.sessionData.name, data, options);\n\t\t}\n\t}\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n\tconst dontRememberMeCookie = await ctx.getSignedCookie(ctx.context.authCookies.dontRememberToken.name, ctx.context.secret);\n\tdontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n\tconst options = ctx.context.authCookies.sessionToken.attributes;\n\tconst maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n\tawait ctx.setSignedCookie(ctx.context.authCookies.sessionToken.name, session.session.token, ctx.context.secret, {\n\t\t...options,\n\t\tmaxAge,\n\t\t...overrides\n\t});\n\tif (dontRememberMe) await ctx.setSignedCookie(ctx.context.authCookies.dontRememberToken.name, \"true\", ctx.context.secret, ctx.context.authCookies.dontRememberToken.attributes);\n\tawait setCookieCache(ctx, session, dontRememberMe);\n\tctx.context.setNewSession(session);\n\t/**\n\t* If secondary storage is enabled, store the session data in the secondary storage\n\t* This is useful if the session got updated and we want to update the session data in the\n\t* secondary storage\n\t*/\n\tif (ctx.context.options.secondaryStorage) await ctx.context.secondaryStorage?.set(session.session.token, JSON.stringify({\n\t\tuser: session.user,\n\t\tsession: session.session\n\t}), Math.floor((new Date(session.session.expiresAt).getTime() - Date.now()) / 1e3));\n}\n/**\n* Expires a cookie by setting `maxAge: 0` while preserving its attributes\n*/\nfunction expireCookie(ctx, cookie) {\n\tctx.setCookie(cookie.name, \"\", {\n\t\t...cookie.attributes,\n\t\tmaxAge: 0\n\t});\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n\texpireCookie(ctx, ctx.context.authCookies.sessionToken);\n\texpireCookie(ctx, ctx.context.authCookies.sessionData);\n\tif (ctx.context.options.account?.storeAccountCookie) {\n\t\texpireCookie(ctx, ctx.context.authCookies.accountData);\n\t\tconst accountStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createAccountStore)(ctx.context.authCookies.accountData.name, ctx.context.authCookies.accountData.attributes, ctx);\n\t\tconst cleanCookies$1 = accountStore.clean();\n\t\taccountStore.setCookies(cleanCookies$1);\n\t}\n\tif (ctx.context.oauthConfig.storeStateStrategy === \"cookie\") expireCookie(ctx, ctx.context.createAuthCookie(\"oauth_state\"));\n\tconst sessionStore = (0,_session_store_mjs__WEBPACK_IMPORTED_MODULE_3__.createSessionStore)(ctx.context.authCookies.sessionData.name, ctx.context.authCookies.sessionData.attributes, ctx);\n\tconst cleanCookies = sessionStore.clean();\n\tsessionStore.setCookies(cleanCookies);\n\tif (!skipDontRememberMe) expireCookie(ctx, ctx.context.authCookies.dontRememberToken);\n}\nfunction parseCookies(cookieHeader) {\n\tconst cookies = cookieHeader.split(\"; \");\n\tconst cookieMap = /* @__PURE__ */ new Map();\n\tcookies.forEach((cookie) => {\n\t\tconst [name, value] = cookie.split(/=(.*)/s);\n\t\tcookieMap.set(name, value);\n\t});\n\treturn cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n\tif (config?.cookiePrefix) if (config.cookieName) config.cookiePrefix = `${config.cookiePrefix}-`;\n\telse config.cookiePrefix = `${config.cookiePrefix}.`;\n\tconst cookies = (\"headers\" in request ? request.headers : request).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n\tconst name = `${cookiePrefix}${cookieName}`;\n\tconst secureCookieName = `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.SECURE_COOKIE_PREFIX}${name}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tconst sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n\tif (sessionToken) return sessionToken;\n\treturn null;\n};\nconst getCookieCache = async (request, config) => {\n\tconst cookies = (request instanceof Headers ? request : request.headers).get(\"cookie\");\n\tif (!cookies) return null;\n\tconst { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n\tconst name = config?.isSecure !== void 0 ? config.isSecure ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.isProduction ? `${_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_5__.SECURE_COOKIE_PREFIX}${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n\tconst parsedCookie = parseCookies(cookies);\n\tlet sessionData = parsedCookie.get(name);\n\tif (!sessionData) {\n\t\tconst chunks = [];\n\t\tfor (const [cookieName$1, value] of parsedCookie.entries()) if (cookieName$1.startsWith(name + \".\")) {\n\t\t\tconst parts = cookieName$1.split(\".\");\n\t\t\tconst indexStr = parts[parts.length - 1];\n\t\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\t\tif (!isNaN(index)) chunks.push({\n\t\t\t\tindex,\n\t\t\t\tvalue\n\t\t\t});\n\t\t}\n\t\tif (chunks.length > 0) {\n\t\t\tchunks.sort((a, b) => a.index - b.index);\n\t\t\tsessionData = chunks.map((c) => c.value).join(\"\");\n\t\t}\n\t}\n\tif (sessionData) {\n\t\tconst secret = config?.secret || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_6__.env.BETTER_AUTH_SECRET;\n\t\tif (!secret) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_7__.BetterAuthError(\"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\");\n\t\tconst strategy = config?.strategy || \"compact\";\n\t\tif (strategy === \"jwe\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecodeJWT)(sessionData, secret, \"better-auth-session\");\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else if (strategy === \"jwt\") {\n\t\t\tconst payload = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyJWT)(sessionData, secret);\n\t\t\tif (payload && payload.session && payload.user) {\n\t\t\t\tif (config?.version) {\n\t\t\t\t\tconst cookieVersion = payload.version || \"1\";\n\t\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\t\tconst result = config.version(payload.session, payload.user);\n\t\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t\t}\n\t\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t\t}\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst sessionDataPayload = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_8__.safeJSONParse)(_better_auth_utils_binary__WEBPACK_IMPORTED_MODULE_10__.binary.decode(_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_9__.base64Url.decode(sessionData)));\n\t\t\tif (!sessionDataPayload) return null;\n\t\t\tif (!await (0,_better_auth_utils_hmac__WEBPACK_IMPORTED_MODULE_11__.createHMAC)(\"SHA-256\", \"base64urlnopad\").verify(secret, JSON.stringify({\n\t\t\t\t...sessionDataPayload.session,\n\t\t\t\texpiresAt: sessionDataPayload.expiresAt\n\t\t\t}), sessionDataPayload.signature)) return null;\n\t\t\tif (config?.version && sessionDataPayload.session) {\n\t\t\t\tconst cookieVersion = sessionDataPayload.session.version || \"1\";\n\t\t\t\tlet expectedVersion = \"1\";\n\t\t\t\tif (typeof config.version === \"string\") expectedVersion = config.version;\n\t\t\t\telse if (typeof config.version === \"function\") {\n\t\t\t\t\tconst result = config.version(sessionDataPayload.session.session, sessionDataPayload.session.user);\n\t\t\t\t\texpectedVersion = result instanceof Promise ? await result : result;\n\t\t\t\t}\n\t\t\t\tif (cookieVersion !== expectedVersion) return null;\n\t\t\t}\n\t\t\treturn sessionDataPayload.session;\n\t\t}\n\t}\n\treturn null;\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ087QUFDNEM7QUFDQTtBQUN2RDtBQUN3RztBQUN0RjtBQUNBO0FBQ0Y7QUFDRjtBQUNIO0FBQ0U7O0FBRXJEO0FBQ0E7QUFDQSx1TUFBdU0sK0RBQVksSUFBSSxtRUFBb0I7QUFDM087QUFDQTtBQUNBLGlEQUFpRCxvRUFBZTtBQUNoRSwwREFBMEQ7QUFDMUQ7QUFDQSxtRUFBbUUsT0FBTyxHQUFHLFdBQVc7QUFDeEY7QUFDQTtBQUNBLFlBQVksbUJBQW1CLEVBQUUsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFNBQVMsSUFBSTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxzQ0FBc0Msb0RBQUcsUUFBUTtBQUN2RyxvREFBb0QscURBQXFEO0FBQ3pHLG9EQUFvRCxxREFBcUQ7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUcsSUFBSTtBQUNQLHVCQUF1QiwrREFBZTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix3REFBTztBQUMvQjtBQUNBO0FBQ0EsdUNBQXVDLG1FQUFrQjtBQUN6RCw0Q0FBNEMsd0RBQU87QUFDbkQsY0FBYyxnRUFBUztBQUN2QjtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFVO0FBQzlCO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRyxLQUFLLGdCQUFnQjtBQUN4QjtBQUNBLHdCQUF3QixzRUFBa0I7QUFDMUM7QUFDQTtBQUNBLElBQUk7QUFDSix3QkFBd0Isc0VBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzRUFBa0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0VBQWtCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLG9CQUFvQjtBQUMvRiwrQkFBK0Isb0JBQW9CO0FBQ25EO0FBQ0E7QUFDQSxTQUFTLDhEQUE4RDtBQUN2RSxpQkFBaUIsYUFBYSxFQUFFLFdBQVc7QUFDM0MsNkJBQTZCLG1FQUFvQixDQUFDLEVBQUUsS0FBSztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw0REFBNEQ7QUFDckUsaUVBQWlFLG1FQUFvQixDQUFDLEVBQUUsYUFBYSxHQUFHLFdBQVcsT0FBTyxhQUFhLEdBQUcsV0FBVyxJQUFJLCtEQUFZLE1BQU0sbUVBQW9CLENBQUMsRUFBRSxhQUFhLEdBQUcsV0FBVyxPQUFPLGFBQWEsR0FBRyxXQUFXO0FBQy9QO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0RBQUc7QUFDdEMseUJBQXlCLG9FQUFlO0FBQ3hDO0FBQ0E7QUFDQSx5QkFBeUIsbUVBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0oseUJBQXlCLDBEQUFTO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osOEJBQThCLHNFQUFhLENBQUMsOERBQU0sUUFBUSxnRUFBUztBQUNuRTtBQUNBLGNBQWMsb0VBQVU7QUFDeEI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDaVQ7QUFDalQiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY29va2llcy9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4uL2RiL3NjaGVtYS5tanNcIjtcbmltcG9ydCB7IHNpZ25KV1QsIHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRW5jb2RlSldULCB2ZXJpZnlKV1QgfSBmcm9tIFwiLi4vY3J5cHRvL2p3dC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUFjY291bnRTdG9yZSwgY3JlYXRlU2Vzc2lvblN0b3JlLCBnZXRDaHVua2VkQ29va2llIH0gZnJvbSBcIi4vc2Vzc2lvbi1zdG9yZS5tanNcIjtcbmltcG9ydCB7IHNlYyB9IGZyb20gXCIuLi91dGlscy90aW1lLm1qc1wiO1xuaW1wb3J0IHsgSE9TVF9DT09LSUVfUFJFRklYLCBTRUNVUkVfQ09PS0lFX1BSRUZJWCwgcGFyc2VTZXRDb29raWVIZWFkZXIsIHNldENvb2tpZVRvSGVhZGVyLCBzdHJpcFNlY3VyZUNvb2tpZVByZWZpeCB9IGZyb20gXCIuL2Nvb2tpZS11dGlscy5tanNcIjtcbmltcG9ydCB7IGVudiwgaXNQcm9kdWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgeyBiYXNlNjRVcmwgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NFwiO1xuaW1wb3J0IHsgYmluYXJ5IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9iaW5hcnlcIjtcbmltcG9ydCB7IGNyZWF0ZUhNQUMgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2htYWNcIjtcblxuLy8jcmVnaW9uIHNyYy9jb29raWVzL2luZGV4LnRzXG5mdW5jdGlvbiBjcmVhdGVDb29raWVHZXR0ZXIob3B0aW9ucykge1xuXHRjb25zdCBzZWN1cmVDb29raWVQcmVmaXggPSAob3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyAhPT0gdm9pZCAwID8gb3B0aW9ucy5hZHZhbmNlZD8udXNlU2VjdXJlQ29va2llcyA6IG9wdGlvbnMuYmFzZVVSTCAhPT0gdm9pZCAwID8gb3B0aW9ucy5iYXNlVVJMLnN0YXJ0c1dpdGgoXCJodHRwczovL1wiKSA/IHRydWUgOiBmYWxzZSA6IGlzUHJvZHVjdGlvbikgPyBTRUNVUkVfQ09PS0lFX1BSRUZJWCA6IFwiXCI7XG5cdGNvbnN0IGNyb3NzU3ViZG9tYWluRW5hYmxlZCA9ICEhb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5lbmFibGVkO1xuXHRjb25zdCBkb21haW4gPSBjcm9zc1N1YmRvbWFpbkVuYWJsZWQgPyBvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmRvbWFpbiB8fCAob3B0aW9ucy5iYXNlVVJMID8gbmV3IFVSTChvcHRpb25zLmJhc2VVUkwpLmhvc3RuYW1lIDogdm9pZCAwKSA6IHZvaWQgMDtcblx0aWYgKGNyb3NzU3ViZG9tYWluRW5hYmxlZCAmJiAhZG9tYWluKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiYmFzZVVSTCBpcyByZXF1aXJlZCB3aGVuIGNyb3NzU3ViZG9tYWluQ29va2llcyBhcmUgZW5hYmxlZFwiKTtcblx0ZnVuY3Rpb24gY3JlYXRlQ29va2llKGNvb2tpZU5hbWUsIG92ZXJyaWRlQXR0cmlidXRlcyA9IHt9KSB7XG5cdFx0Y29uc3QgcHJlZml4ID0gb3B0aW9ucy5hZHZhbmNlZD8uY29va2llUHJlZml4IHx8IFwiYmV0dGVyLWF1dGhcIjtcblx0XHRjb25zdCBuYW1lID0gb3B0aW9ucy5hZHZhbmNlZD8uY29va2llcz8uW2Nvb2tpZU5hbWVdPy5uYW1lIHx8IGAke3ByZWZpeH0uJHtjb29raWVOYW1lfWA7XG5cdFx0Y29uc3QgYXR0cmlidXRlcyA9IG9wdGlvbnMuYWR2YW5jZWQ/LmNvb2tpZXM/Lltjb29raWVOYW1lXT8uYXR0cmlidXRlcztcblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogYCR7c2VjdXJlQ29va2llUHJlZml4fSR7bmFtZX1gLFxuXHRcdFx0YXR0cmlidXRlczoge1xuXHRcdFx0XHRzZWN1cmU6ICEhc2VjdXJlQ29va2llUHJlZml4LFxuXHRcdFx0XHRzYW1lU2l0ZTogXCJsYXhcIixcblx0XHRcdFx0cGF0aDogXCIvXCIsXG5cdFx0XHRcdGh0dHBPbmx5OiB0cnVlLFxuXHRcdFx0XHQuLi5jcm9zc1N1YmRvbWFpbkVuYWJsZWQgPyB7IGRvbWFpbiB9IDoge30sXG5cdFx0XHRcdC4uLm9wdGlvbnMuYWR2YW5jZWQ/LmRlZmF1bHRDb29raWVBdHRyaWJ1dGVzLFxuXHRcdFx0XHQuLi5vdmVycmlkZUF0dHJpYnV0ZXMsXG5cdFx0XHRcdC4uLmF0dHJpYnV0ZXNcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdHJldHVybiBjcmVhdGVDb29raWU7XG59XG5mdW5jdGlvbiBnZXRDb29raWVzKG9wdGlvbnMpIHtcblx0Y29uc3QgY3JlYXRlQ29va2llID0gY3JlYXRlQ29va2llR2V0dGVyKG9wdGlvbnMpO1xuXHRjb25zdCBzZXNzaW9uVG9rZW4gPSBjcmVhdGVDb29raWUoXCJzZXNzaW9uX3Rva2VuXCIsIHsgbWF4QWdlOiBvcHRpb25zLnNlc3Npb24/LmV4cGlyZXNJbiB8fCBzZWMoXCI3ZFwiKSB9KTtcblx0Y29uc3Qgc2Vzc2lvbkRhdGEgPSBjcmVhdGVDb29raWUoXCJzZXNzaW9uX2RhdGFcIiwgeyBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZSB8fCAzMDAgfSk7XG5cdGNvbnN0IGFjY291bnREYXRhID0gY3JlYXRlQ29va2llKFwiYWNjb3VudF9kYXRhXCIsIHsgbWF4QWdlOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5tYXhBZ2UgfHwgMzAwIH0pO1xuXHRjb25zdCBkb250UmVtZW1iZXJUb2tlbiA9IGNyZWF0ZUNvb2tpZShcImRvbnRfcmVtZW1iZXJcIik7XG5cdHJldHVybiB7XG5cdFx0c2Vzc2lvblRva2VuOiB7XG5cdFx0XHRuYW1lOiBzZXNzaW9uVG9rZW4ubmFtZSxcblx0XHRcdGF0dHJpYnV0ZXM6IHNlc3Npb25Ub2tlbi5hdHRyaWJ1dGVzXG5cdFx0fSxcblx0XHRzZXNzaW9uRGF0YToge1xuXHRcdFx0bmFtZTogc2Vzc2lvbkRhdGEubmFtZSxcblx0XHRcdGF0dHJpYnV0ZXM6IHNlc3Npb25EYXRhLmF0dHJpYnV0ZXNcblx0XHR9LFxuXHRcdGRvbnRSZW1lbWJlclRva2VuOiB7XG5cdFx0XHRuYW1lOiBkb250UmVtZW1iZXJUb2tlbi5uYW1lLFxuXHRcdFx0YXR0cmlidXRlczogZG9udFJlbWVtYmVyVG9rZW4uYXR0cmlidXRlc1xuXHRcdH0sXG5cdFx0YWNjb3VudERhdGE6IHtcblx0XHRcdG5hbWU6IGFjY291bnREYXRhLm5hbWUsXG5cdFx0XHRhdHRyaWJ1dGVzOiBhY2NvdW50RGF0YS5hdHRyaWJ1dGVzXG5cdFx0fVxuXHR9O1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uLCBkb250UmVtZW1iZXJNZSkge1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8uZW5hYmxlZCkge1xuXHRcdGNvbnN0IGZpbHRlcmVkU2Vzc2lvbiA9IE9iamVjdC5lbnRyaWVzKHNlc3Npb24uc2Vzc2lvbikucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuXHRcdFx0Y29uc3QgZmllbGRDb25maWcgPSBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmFkZGl0aW9uYWxGaWVsZHM/LltrZXldO1xuXHRcdFx0aWYgKCFmaWVsZENvbmZpZyB8fCBmaWVsZENvbmZpZy5yZXR1cm5lZCAhPT0gZmFsc2UpIGFjY1trZXldID0gdmFsdWU7XG5cdFx0XHRyZXR1cm4gYWNjO1xuXHRcdH0sIHt9KTtcblx0XHRjb25zdCBmaWx0ZXJlZFVzZXIgPSBwYXJzZVVzZXJPdXRwdXQoY3R4LmNvbnRleHQub3B0aW9ucywgc2Vzc2lvbi51c2VyKTtcblx0XHRjb25zdCB2ZXJzaW9uQ29uZmlnID0gY3R4LmNvbnRleHQub3B0aW9ucy5zZXNzaW9uPy5jb29raWVDYWNoZT8udmVyc2lvbjtcblx0XHRsZXQgdmVyc2lvbiA9IFwiMVwiO1xuXHRcdGlmICh2ZXJzaW9uQ29uZmlnKSB7XG5cdFx0XHRpZiAodHlwZW9mIHZlcnNpb25Db25maWcgPT09IFwic3RyaW5nXCIpIHZlcnNpb24gPSB2ZXJzaW9uQ29uZmlnO1xuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHZlcnNpb25Db25maWcgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSB2ZXJzaW9uQ29uZmlnKHNlc3Npb24uc2Vzc2lvbiwgc2Vzc2lvbi51c2VyKTtcblx0XHRcdFx0dmVyc2lvbiA9IHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHNlc3Npb25EYXRhID0ge1xuXHRcdFx0c2Vzc2lvbjogZmlsdGVyZWRTZXNzaW9uLFxuXHRcdFx0dXNlcjogZmlsdGVyZWRVc2VyLFxuXHRcdFx0dXBkYXRlZEF0OiBEYXRlLm5vdygpLFxuXHRcdFx0dmVyc2lvblxuXHRcdH07XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRcdC4uLmN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMsXG5cdFx0XHRtYXhBZ2U6IGRvbnRSZW1lbWJlck1lID8gdm9pZCAwIDogY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEuYXR0cmlidXRlcy5tYXhBZ2Vcblx0XHR9O1xuXHRcdGNvbnN0IGV4cGlyZXNBdERhdGUgPSBnZXREYXRlKG9wdGlvbnMubWF4QWdlIHx8IDYwLCBcInNlY1wiKS5nZXRUaW1lKCk7XG5cdFx0Y29uc3Qgc3RyYXRlZ3kgPSBjdHguY29udGV4dC5vcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5zdHJhdGVneSB8fCBcImNvbXBhY3RcIjtcblx0XHRsZXQgZGF0YTtcblx0XHRpZiAoc3RyYXRlZ3kgPT09IFwiandlXCIpIGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1Qoc2Vzc2lvbkRhdGEsIGN0eC5jb250ZXh0LnNlY3JldCwgXCJiZXR0ZXItYXV0aC1zZXNzaW9uXCIsIG9wdGlvbnMubWF4QWdlIHx8IDMwMCk7XG5cdFx0ZWxzZSBpZiAoc3RyYXRlZ3kgPT09IFwiand0XCIpIGRhdGEgPSBhd2FpdCBzaWduSldUKHNlc3Npb25EYXRhLCBjdHguY29udGV4dC5zZWNyZXQsIG9wdGlvbnMubWF4QWdlIHx8IDMwMCk7XG5cdFx0ZWxzZSBkYXRhID0gYmFzZTY0VXJsLmVuY29kZShKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRzZXNzaW9uOiBzZXNzaW9uRGF0YSxcblx0XHRcdGV4cGlyZXNBdDogZXhwaXJlc0F0RGF0ZSxcblx0XHRcdHNpZ25hdHVyZTogYXdhaXQgY3JlYXRlSE1BQyhcIlNIQS0yNTZcIiwgXCJiYXNlNjR1cmxub3BhZFwiKS5zaWduKGN0eC5jb250ZXh0LnNlY3JldCwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdFx0XHQuLi5zZXNzaW9uRGF0YSxcblx0XHRcdFx0ZXhwaXJlc0F0OiBleHBpcmVzQXREYXRlXG5cdFx0XHR9KSlcblx0XHR9KSwgeyBwYWRkaW5nOiBmYWxzZSB9KTtcblx0XHRpZiAoZGF0YS5sZW5ndGggPiA0MDkzKSB7XG5cdFx0XHRjb25zdCBzZXNzaW9uU3RvcmUgPSBjcmVhdGVTZXNzaW9uU3RvcmUoY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEubmFtZSwgb3B0aW9ucywgY3R4KTtcblx0XHRcdGNvbnN0IGNvb2tpZXMgPSBzZXNzaW9uU3RvcmUuY2h1bmsoZGF0YSwgb3B0aW9ucyk7XG5cdFx0XHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjb29raWVzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgc2Vzc2lvblN0b3JlID0gY3JlYXRlU2Vzc2lvblN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIG9wdGlvbnMsIGN0eCk7XG5cdFx0XHRpZiAoc2Vzc2lvblN0b3JlLmhhc0NodW5rcygpKSB7XG5cdFx0XHRcdGNvbnN0IGNsZWFuQ29va2llcyA9IHNlc3Npb25TdG9yZS5jbGVhbigpO1xuXHRcdFx0XHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdFx0fVxuXHRcdFx0Y3R4LnNldENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uRGF0YS5uYW1lLCBkYXRhLCBvcHRpb25zKTtcblx0XHR9XG5cdH1cbn1cbmFzeW5jIGZ1bmN0aW9uIHNldFNlc3Npb25Db29raWUoY3R4LCBzZXNzaW9uLCBkb250UmVtZW1iZXJNZSwgb3ZlcnJpZGVzKSB7XG5cdGNvbnN0IGRvbnRSZW1lbWJlck1lQ29va2llID0gYXdhaXQgY3R4LmdldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5uYW1lLCBjdHguY29udGV4dC5zZWNyZXQpO1xuXHRkb250UmVtZW1iZXJNZSA9IGRvbnRSZW1lbWJlck1lICE9PSB2b2lkIDAgPyBkb250UmVtZW1iZXJNZSA6ICEhZG9udFJlbWVtYmVyTWVDb29raWU7XG5cdGNvbnN0IG9wdGlvbnMgPSBjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4uYXR0cmlidXRlcztcblx0Y29uc3QgbWF4QWdlID0gZG9udFJlbWVtYmVyTWUgPyB2b2lkIDAgOiBjdHguY29udGV4dC5zZXNzaW9uQ29uZmlnLmV4cGlyZXNJbjtcblx0YXdhaXQgY3R4LnNldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5zZXNzaW9uVG9rZW4ubmFtZSwgc2Vzc2lvbi5zZXNzaW9uLnRva2VuLCBjdHguY29udGV4dC5zZWNyZXQsIHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdG1heEFnZSxcblx0XHQuLi5vdmVycmlkZXNcblx0fSk7XG5cdGlmIChkb250UmVtZW1iZXJNZSkgYXdhaXQgY3R4LnNldFNpZ25lZENvb2tpZShjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5uYW1lLCBcInRydWVcIiwgY3R4LmNvbnRleHQuc2VjcmV0LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5kb250UmVtZW1iZXJUb2tlbi5hdHRyaWJ1dGVzKTtcblx0YXdhaXQgc2V0Q29va2llQ2FjaGUoY3R4LCBzZXNzaW9uLCBkb250UmVtZW1iZXJNZSk7XG5cdGN0eC5jb250ZXh0LnNldE5ld1Nlc3Npb24oc2Vzc2lvbik7XG5cdC8qKlxuXHQqIElmIHNlY29uZGFyeSBzdG9yYWdlIGlzIGVuYWJsZWQsIHN0b3JlIHRoZSBzZXNzaW9uIGRhdGEgaW4gdGhlIHNlY29uZGFyeSBzdG9yYWdlXG5cdCogVGhpcyBpcyB1c2VmdWwgaWYgdGhlIHNlc3Npb24gZ290IHVwZGF0ZWQgYW5kIHdlIHdhbnQgdG8gdXBkYXRlIHRoZSBzZXNzaW9uIGRhdGEgaW4gdGhlXG5cdCogc2Vjb25kYXJ5IHN0b3JhZ2Vcblx0Ki9cblx0aWYgKGN0eC5jb250ZXh0Lm9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSkgYXdhaXQgY3R4LmNvbnRleHQuc2Vjb25kYXJ5U3RvcmFnZT8uc2V0KHNlc3Npb24uc2Vzc2lvbi50b2tlbiwgSlNPTi5zdHJpbmdpZnkoe1xuXHRcdHVzZXI6IHNlc3Npb24udXNlcixcblx0XHRzZXNzaW9uOiBzZXNzaW9uLnNlc3Npb25cblx0fSksIE1hdGguZmxvb3IoKG5ldyBEYXRlKHNlc3Npb24uc2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKSAtIERhdGUubm93KCkpIC8gMWUzKSk7XG59XG4vKipcbiogRXhwaXJlcyBhIGNvb2tpZSBieSBzZXR0aW5nIGBtYXhBZ2U6IDBgIHdoaWxlIHByZXNlcnZpbmcgaXRzIGF0dHJpYnV0ZXNcbiovXG5mdW5jdGlvbiBleHBpcmVDb29raWUoY3R4LCBjb29raWUpIHtcblx0Y3R4LnNldENvb2tpZShjb29raWUubmFtZSwgXCJcIiwge1xuXHRcdC4uLmNvb2tpZS5hdHRyaWJ1dGVzLFxuXHRcdG1heEFnZTogMFxuXHR9KTtcbn1cbmZ1bmN0aW9uIGRlbGV0ZVNlc3Npb25Db29raWUoY3R4LCBza2lwRG9udFJlbWVtYmVyTWUpIHtcblx0ZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvblRva2VuKTtcblx0ZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuc2Vzc2lvbkRhdGEpO1xuXHRpZiAoY3R4LmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5zdG9yZUFjY291bnRDb29raWUpIHtcblx0XHRleHBpcmVDb29raWUoY3R4LCBjdHguY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YSk7XG5cdFx0Y29uc3QgYWNjb3VudFN0b3JlID0gY3JlYXRlQWNjb3VudFN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhLm5hbWUsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLmFjY291bnREYXRhLmF0dHJpYnV0ZXMsIGN0eCk7XG5cdFx0Y29uc3QgY2xlYW5Db29raWVzJDEgPSBhY2NvdW50U3RvcmUuY2xlYW4oKTtcblx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMkMSk7XG5cdH1cblx0aWYgKGN0eC5jb250ZXh0Lm9hdXRoQ29uZmlnLnN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuY3JlYXRlQXV0aENvb2tpZShcIm9hdXRoX3N0YXRlXCIpKTtcblx0Y29uc3Qgc2Vzc2lvblN0b3JlID0gY3JlYXRlU2Vzc2lvblN0b3JlKGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLm5hbWUsIGN0eC5jb250ZXh0LmF1dGhDb29raWVzLnNlc3Npb25EYXRhLmF0dHJpYnV0ZXMsIGN0eCk7XG5cdGNvbnN0IGNsZWFuQ29va2llcyA9IHNlc3Npb25TdG9yZS5jbGVhbigpO1xuXHRzZXNzaW9uU3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRpZiAoIXNraXBEb250UmVtZW1iZXJNZSkgZXhwaXJlQ29va2llKGN0eCwgY3R4LmNvbnRleHQuYXV0aENvb2tpZXMuZG9udFJlbWVtYmVyVG9rZW4pO1xufVxuZnVuY3Rpb24gcGFyc2VDb29raWVzKGNvb2tpZUhlYWRlcikge1xuXHRjb25zdCBjb29raWVzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG5cdGNvbnN0IGNvb2tpZU1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5cdGNvb2tpZXMuZm9yRWFjaCgoY29va2llKSA9PiB7XG5cdFx0Y29uc3QgW25hbWUsIHZhbHVlXSA9IGNvb2tpZS5zcGxpdCgvPSguKikvcyk7XG5cdFx0Y29va2llTWFwLnNldChuYW1lLCB2YWx1ZSk7XG5cdH0pO1xuXHRyZXR1cm4gY29va2llTWFwO1xufVxuY29uc3QgZ2V0U2Vzc2lvbkNvb2tpZSA9IChyZXF1ZXN0LCBjb25maWcpID0+IHtcblx0aWYgKGNvbmZpZz8uY29va2llUHJlZml4KSBpZiAoY29uZmlnLmNvb2tpZU5hbWUpIGNvbmZpZy5jb29raWVQcmVmaXggPSBgJHtjb25maWcuY29va2llUHJlZml4fS1gO1xuXHRlbHNlIGNvbmZpZy5jb29raWVQcmVmaXggPSBgJHtjb25maWcuY29va2llUHJlZml4fS5gO1xuXHRjb25zdCBjb29raWVzID0gKFwiaGVhZGVyc1wiIGluIHJlcXVlc3QgPyByZXF1ZXN0LmhlYWRlcnMgOiByZXF1ZXN0KS5nZXQoXCJjb29raWVcIik7XG5cdGlmICghY29va2llcykgcmV0dXJuIG51bGw7XG5cdGNvbnN0IHsgY29va2llTmFtZSA9IFwic2Vzc2lvbl90b2tlblwiLCBjb29raWVQcmVmaXggPSBcImJldHRlci1hdXRoLlwiIH0gPSBjb25maWcgfHwge307XG5cdGNvbnN0IG5hbWUgPSBgJHtjb29raWVQcmVmaXh9JHtjb29raWVOYW1lfWA7XG5cdGNvbnN0IHNlY3VyZUNvb2tpZU5hbWUgPSBgJHtTRUNVUkVfQ09PS0lFX1BSRUZJWH0ke25hbWV9YDtcblx0Y29uc3QgcGFyc2VkQ29va2llID0gcGFyc2VDb29raWVzKGNvb2tpZXMpO1xuXHRjb25zdCBzZXNzaW9uVG9rZW4gPSBwYXJzZWRDb29raWUuZ2V0KG5hbWUpIHx8IHBhcnNlZENvb2tpZS5nZXQoc2VjdXJlQ29va2llTmFtZSk7XG5cdGlmIChzZXNzaW9uVG9rZW4pIHJldHVybiBzZXNzaW9uVG9rZW47XG5cdHJldHVybiBudWxsO1xufTtcbmNvbnN0IGdldENvb2tpZUNhY2hlID0gYXN5bmMgKHJlcXVlc3QsIGNvbmZpZykgPT4ge1xuXHRjb25zdCBjb29raWVzID0gKHJlcXVlc3QgaW5zdGFuY2VvZiBIZWFkZXJzID8gcmVxdWVzdCA6IHJlcXVlc3QuaGVhZGVycykuZ2V0KFwiY29va2llXCIpO1xuXHRpZiAoIWNvb2tpZXMpIHJldHVybiBudWxsO1xuXHRjb25zdCB7IGNvb2tpZU5hbWUgPSBcInNlc3Npb25fZGF0YVwiLCBjb29raWVQcmVmaXggPSBcImJldHRlci1hdXRoXCIgfSA9IGNvbmZpZyB8fCB7fTtcblx0Y29uc3QgbmFtZSA9IGNvbmZpZz8uaXNTZWN1cmUgIT09IHZvaWQgMCA/IGNvbmZpZy5pc1NlY3VyZSA/IGAke1NFQ1VSRV9DT09LSUVfUFJFRklYfSR7Y29va2llUHJlZml4fS4ke2Nvb2tpZU5hbWV9YCA6IGAke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWAgOiBpc1Byb2R1Y3Rpb24gPyBgJHtTRUNVUkVfQ09PS0lFX1BSRUZJWH0ke2Nvb2tpZVByZWZpeH0uJHtjb29raWVOYW1lfWAgOiBgJHtjb29raWVQcmVmaXh9LiR7Y29va2llTmFtZX1gO1xuXHRjb25zdCBwYXJzZWRDb29raWUgPSBwYXJzZUNvb2tpZXMoY29va2llcyk7XG5cdGxldCBzZXNzaW9uRGF0YSA9IHBhcnNlZENvb2tpZS5nZXQobmFtZSk7XG5cdGlmICghc2Vzc2lvbkRhdGEpIHtcblx0XHRjb25zdCBjaHVua3MgPSBbXTtcblx0XHRmb3IgKGNvbnN0IFtjb29raWVOYW1lJDEsIHZhbHVlXSBvZiBwYXJzZWRDb29raWUuZW50cmllcygpKSBpZiAoY29va2llTmFtZSQxLnN0YXJ0c1dpdGgobmFtZSArIFwiLlwiKSkge1xuXHRcdFx0Y29uc3QgcGFydHMgPSBjb29raWVOYW1lJDEuc3BsaXQoXCIuXCIpO1xuXHRcdFx0Y29uc3QgaW5kZXhTdHIgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcblx0XHRcdGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoaW5kZXhTdHIgfHwgXCIwXCIsIDEwKTtcblx0XHRcdGlmICghaXNOYU4oaW5kZXgpKSBjaHVua3MucHVzaCh7XG5cdFx0XHRcdGluZGV4LFxuXHRcdFx0XHR2YWx1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmIChjaHVua3MubGVuZ3RoID4gMCkge1xuXHRcdFx0Y2h1bmtzLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcblx0XHRcdHNlc3Npb25EYXRhID0gY2h1bmtzLm1hcCgoYykgPT4gYy52YWx1ZSkuam9pbihcIlwiKTtcblx0XHR9XG5cdH1cblx0aWYgKHNlc3Npb25EYXRhKSB7XG5cdFx0Y29uc3Qgc2VjcmV0ID0gY29uZmlnPy5zZWNyZXQgfHwgZW52LkJFVFRFUl9BVVRIX1NFQ1JFVDtcblx0XHRpZiAoIXNlY3JldCkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImdldENvb2tpZUNhY2hlIHJlcXVpcmVzIGEgc2VjcmV0IHRvIGJlIHByb3ZpZGVkLiBFaXRoZXIgcGFzcyBpdCBhcyBhbiBvcHRpb24gb3Igc2V0IHRoZSBCRVRURVJfQVVUSF9TRUNSRVQgZW52aXJvbm1lbnQgdmFyaWFibGVcIik7XG5cdFx0Y29uc3Qgc3RyYXRlZ3kgPSBjb25maWc/LnN0cmF0ZWd5IHx8IFwiY29tcGFjdFwiO1xuXHRcdGlmIChzdHJhdGVneSA9PT0gXCJqd2VcIikge1xuXHRcdFx0Y29uc3QgcGF5bG9hZCA9IGF3YWl0IHN5bW1ldHJpY0RlY29kZUpXVChzZXNzaW9uRGF0YSwgc2VjcmV0LCBcImJldHRlci1hdXRoLXNlc3Npb25cIik7XG5cdFx0XHRpZiAocGF5bG9hZCAmJiBwYXlsb2FkLnNlc3Npb24gJiYgcGF5bG9hZC51c2VyKSB7XG5cdFx0XHRcdGlmIChjb25maWc/LnZlcnNpb24pIHtcblx0XHRcdFx0XHRjb25zdCBjb29raWVWZXJzaW9uID0gcGF5bG9hZC52ZXJzaW9uIHx8IFwiMVwiO1xuXHRcdFx0XHRcdGxldCBleHBlY3RlZFZlcnNpb24gPSBcIjFcIjtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcInN0cmluZ1wiKSBleHBlY3RlZFZlcnNpb24gPSBjb25maWcudmVyc2lvbjtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgY29uZmlnLnZlcnNpb24gPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gY29uZmlnLnZlcnNpb24ocGF5bG9hZC5zZXNzaW9uLCBwYXlsb2FkLnVzZXIpO1xuXHRcdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGNvb2tpZVZlcnNpb24gIT09IGV4cGVjdGVkVmVyc2lvbikgcmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHBheWxvYWQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGVsc2UgaWYgKHN0cmF0ZWd5ID09PSBcImp3dFwiKSB7XG5cdFx0XHRjb25zdCBwYXlsb2FkID0gYXdhaXQgdmVyaWZ5SldUKHNlc3Npb25EYXRhLCBzZWNyZXQpO1xuXHRcdFx0aWYgKHBheWxvYWQgJiYgcGF5bG9hZC5zZXNzaW9uICYmIHBheWxvYWQudXNlcikge1xuXHRcdFx0XHRpZiAoY29uZmlnPy52ZXJzaW9uKSB7XG5cdFx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHBheWxvYWQudmVyc2lvbiB8fCBcIjFcIjtcblx0XHRcdFx0XHRsZXQgZXhwZWN0ZWRWZXJzaW9uID0gXCIxXCI7XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdFx0ZWxzZSBpZiAodHlwZW9mIGNvbmZpZy52ZXJzaW9uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNvbmZpZy52ZXJzaW9uKHBheWxvYWQuc2Vzc2lvbiwgcGF5bG9hZC51c2VyKTtcblx0XHRcdFx0XHRcdGV4cGVjdGVkVmVyc2lvbiA9IHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UgPyBhd2FpdCByZXN1bHQgOiByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChjb29raWVWZXJzaW9uICE9PSBleHBlY3RlZFZlcnNpb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBwYXlsb2FkO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHNlc3Npb25EYXRhUGF5bG9hZCA9IHNhZmVKU09OUGFyc2UoYmluYXJ5LmRlY29kZShiYXNlNjRVcmwuZGVjb2RlKHNlc3Npb25EYXRhKSkpO1xuXHRcdFx0aWYgKCFzZXNzaW9uRGF0YVBheWxvYWQpIHJldHVybiBudWxsO1xuXHRcdFx0aWYgKCFhd2FpdCBjcmVhdGVITUFDKFwiU0hBLTI1NlwiLCBcImJhc2U2NHVybG5vcGFkXCIpLnZlcmlmeShzZWNyZXQsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4uc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24sXG5cdFx0XHRcdGV4cGlyZXNBdDogc2Vzc2lvbkRhdGFQYXlsb2FkLmV4cGlyZXNBdFxuXHRcdFx0fSksIHNlc3Npb25EYXRhUGF5bG9hZC5zaWduYXR1cmUpKSByZXR1cm4gbnVsbDtcblx0XHRcdGlmIChjb25maWc/LnZlcnNpb24gJiYgc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24pIHtcblx0XHRcdFx0Y29uc3QgY29va2llVmVyc2lvbiA9IHNlc3Npb25EYXRhUGF5bG9hZC5zZXNzaW9uLnZlcnNpb24gfHwgXCIxXCI7XG5cdFx0XHRcdGxldCBleHBlY3RlZFZlcnNpb24gPSBcIjFcIjtcblx0XHRcdFx0aWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJzdHJpbmdcIikgZXhwZWN0ZWRWZXJzaW9uID0gY29uZmlnLnZlcnNpb247XG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBjb25maWcudmVyc2lvbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gY29uZmlnLnZlcnNpb24oc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24uc2Vzc2lvbiwgc2Vzc2lvbkRhdGFQYXlsb2FkLnNlc3Npb24udXNlcik7XG5cdFx0XHRcdFx0ZXhwZWN0ZWRWZXJzaW9uID0gcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSA/IGF3YWl0IHJlc3VsdCA6IHJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY29va2llVmVyc2lvbiAhPT0gZXhwZWN0ZWRWZXJzaW9uKSByZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBzZXNzaW9uRGF0YVBheWxvYWQuc2Vzc2lvbjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG51bGw7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEhPU1RfQ09PS0lFX1BSRUZJWCwgU0VDVVJFX0NPT0tJRV9QUkVGSVgsIGNyZWF0ZUNvb2tpZUdldHRlciwgY3JlYXRlU2Vzc2lvblN0b3JlLCBkZWxldGVTZXNzaW9uQ29va2llLCBleHBpcmVDb29raWUsIGdldENodW5rZWRDb29raWUsIGdldENvb2tpZUNhY2hlLCBnZXRDb29raWVzLCBnZXRTZXNzaW9uQ29va2llLCBwYXJzZUNvb2tpZXMsIHBhcnNlU2V0Q29va2llSGVhZGVyLCBzZXRDb29raWVDYWNoZSwgc2V0Q29va2llVG9IZWFkZXIsIHNldFNlc3Npb25Db29raWUsIHN0cmlwU2VjdXJlQ29va2llUHJlZml4IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/cookies/session-store.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAccountStore: () => (/* binding */ createAccountStore),\n/* harmony export */   createSessionStore: () => (/* binding */ createSessionStore),\n/* harmony export */   getAccountCookie: () => (/* binding */ getAccountCookie),\n/* harmony export */   getChunkedCookie: () => (/* binding */ getChunkedCookie),\n/* harmony export */   getSessionQuerySchema: () => (/* binding */ getSessionQuerySchema),\n/* harmony export */   setAccountCookie: () => (/* binding */ setAccountCookie)\n/* harmony export */ });\n/* harmony import */ var _crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n\n\n//#region src/cookies/session-store.ts\nconst ALLOWED_COOKIE_SIZE = 4096;\nconst ESTIMATED_EMPTY_COOKIE_SIZE = 200;\nconst CHUNK_SIZE = ALLOWED_COOKIE_SIZE - ESTIMATED_EMPTY_COOKIE_SIZE;\n/**\n* Parse cookies from the request headers\n*/\nfunction parseCookiesFromContext(ctx) {\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return {};\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\treturn cookies;\n}\n/**\n* Extract the chunk index from a cookie name\n*/\nfunction getChunkIndex(cookieName) {\n\tconst parts = cookieName.split(\".\");\n\tconst lastPart = parts[parts.length - 1];\n\tconst index = parseInt(lastPart || \"0\", 10);\n\treturn isNaN(index) ? 0 : index;\n}\n/**\n* Read all existing chunks from cookies\n*/\nfunction readExistingChunks(cookieName, ctx) {\n\tconst chunks = {};\n\tconst cookies = parseCookiesFromContext(ctx);\n\tfor (const [name, value] of Object.entries(cookies)) if (name.startsWith(cookieName)) chunks[name] = value;\n\treturn chunks;\n}\n/**\n* Get the full session data by joining all chunks\n*/\nfunction joinChunks(chunks) {\n\treturn Object.keys(chunks).sort((a, b) => {\n\t\treturn getChunkIndex(a) - getChunkIndex(b);\n\t}).map((key) => chunks[key]).join(\"\");\n}\n/**\n* Split a cookie value into chunks if needed\n*/\nfunction chunkCookie(storeName, cookie, chunks, logger) {\n\tconst chunkCount = Math.ceil(cookie.value.length / CHUNK_SIZE);\n\tif (chunkCount === 1) {\n\t\tchunks[cookie.name] = cookie.value;\n\t\treturn [cookie];\n\t}\n\tconst cookies = [];\n\tfor (let i = 0; i < chunkCount; i++) {\n\t\tconst name = `${cookie.name}.${i}`;\n\t\tconst start = i * CHUNK_SIZE;\n\t\tconst value = cookie.value.substring(start, start + CHUNK_SIZE);\n\t\tcookies.push({\n\t\t\t...cookie,\n\t\t\tname,\n\t\t\tvalue\n\t\t});\n\t\tchunks[name] = value;\n\t}\n\tlogger.debug(`CHUNKING_${storeName.toUpperCase()}_COOKIE`, {\n\t\tmessage: `${storeName} cookie exceeds allowed ${ALLOWED_COOKIE_SIZE} bytes.`,\n\t\temptyCookieSize: ESTIMATED_EMPTY_COOKIE_SIZE,\n\t\tvalueSize: cookie.value.length,\n\t\tchunkCount,\n\t\tchunks: cookies.map((c) => c.value.length + ESTIMATED_EMPTY_COOKIE_SIZE)\n\t});\n\treturn cookies;\n}\n/**\n* Get all cookies that should be cleaned (removed)\n*/\nfunction getCleanCookies(chunks, cookieOptions) {\n\tconst cleanedChunks = {};\n\tfor (const name in chunks) cleanedChunks[name] = {\n\t\tname,\n\t\tvalue: \"\",\n\t\tattributes: {\n\t\t\t...cookieOptions,\n\t\t\tmaxAge: 0\n\t\t}\n\t};\n\treturn cleanedChunks;\n}\n/**\n* Create a session store for handling cookie chunking.\n* When session data exceeds 4KB, it automatically splits it into multiple cookies.\n*\n* Based on next-auth's SessionStore implementation.\n* @see https://github.com/nextauthjs/next-auth/blob/27b2519b84b8eb9cf053775dea29d577d2aa0098/packages/next-auth/src/core/lib/cookie.ts\n*/\nconst storeFactory = (storeName) => (cookieName, cookieOptions, ctx) => {\n\tconst chunks = readExistingChunks(cookieName, ctx);\n\tconst logger = ctx.context.logger;\n\treturn {\n\t\tgetValue() {\n\t\t\treturn joinChunks(chunks);\n\t\t},\n\t\thasChunks() {\n\t\t\treturn Object.keys(chunks).length > 0;\n\t\t},\n\t\tchunk(value, options) {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\tconst cookies = cleanedChunks;\n\t\t\tconst chunked = chunkCookie(storeName, {\n\t\t\t\tname: cookieName,\n\t\t\t\tvalue,\n\t\t\t\tattributes: {\n\t\t\t\t\t...cookieOptions,\n\t\t\t\t\t...options\n\t\t\t\t}\n\t\t\t}, chunks, logger);\n\t\t\tfor (const chunk of chunked) cookies[chunk.name] = chunk;\n\t\t\treturn Object.values(cookies);\n\t\t},\n\t\tclean() {\n\t\t\tconst cleanedChunks = getCleanCookies(chunks, cookieOptions);\n\t\t\tfor (const name in chunks) delete chunks[name];\n\t\t\treturn Object.values(cleanedChunks);\n\t\t},\n\t\tsetCookies(cookies) {\n\t\t\tfor (const cookie of cookies) ctx.setCookie(cookie.name, cookie.value, cookie.attributes);\n\t\t}\n\t};\n};\nconst createSessionStore = storeFactory(\"Session\");\nconst createAccountStore = storeFactory(\"Account\");\nfunction getChunkedCookie(ctx, cookieName) {\n\tconst value = ctx.getCookie(cookieName);\n\tif (value) return value;\n\tconst chunks = [];\n\tconst cookieHeader = ctx.headers?.get(\"cookie\");\n\tif (!cookieHeader) return null;\n\tconst cookies = {};\n\tconst pairs = cookieHeader.split(\"; \");\n\tfor (const pair of pairs) {\n\t\tconst [name, ...valueParts] = pair.split(\"=\");\n\t\tif (name && valueParts.length > 0) cookies[name] = valueParts.join(\"=\");\n\t}\n\tfor (const [name, val] of Object.entries(cookies)) if (name.startsWith(cookieName + \".\")) {\n\t\tconst indexStr = name.split(\".\").at(-1);\n\t\tconst index = parseInt(indexStr || \"0\", 10);\n\t\tif (!isNaN(index)) chunks.push({\n\t\t\tindex,\n\t\t\tvalue: val\n\t\t});\n\t}\n\tif (chunks.length > 0) {\n\t\tchunks.sort((a, b) => a.index - b.index);\n\t\treturn chunks.map((c) => c.value).join(\"\");\n\t}\n\treturn null;\n}\nasync function setAccountCookie(c, accountData) {\n\tconst accountDataCookie = c.context.authCookies.accountData;\n\tconst options = {\n\t\tmaxAge: 300,\n\t\t...accountDataCookie.attributes\n\t};\n\tconst data = await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncodeJWT)(accountData, c.context.secret, \"better-auth-account\", options.maxAge);\n\tif (data.length > ALLOWED_COOKIE_SIZE) {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tconst cookies = accountStore.chunk(data, options);\n\t\taccountStore.setCookies(cookies);\n\t} else {\n\t\tconst accountStore = createAccountStore(accountDataCookie.name, options, c);\n\t\tif (accountStore.hasChunks()) {\n\t\t\tconst cleanCookies = accountStore.clean();\n\t\t\taccountStore.setCookies(cleanCookies);\n\t\t}\n\t\tc.setCookie(accountDataCookie.name, data, options);\n\t}\n}\nasync function getAccountCookie(c) {\n\tconst accountCookie = getChunkedCookie(c, c.context.authCookies.accountData.name);\n\tif (accountCookie) {\n\t\tconst accountData = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.safeJSONParse)(await (0,_crypto_jwt_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecodeJWT)(accountCookie, c.context.secret, \"better-auth-account\"));\n\t\tif (accountData) return accountData;\n\t}\n\treturn null;\n}\nconst getSessionQuerySchema = zod__WEBPACK_IMPORTED_MODULE_3__.optional(zod__WEBPACK_IMPORTED_MODULE_3__.object({\n\tdisableCookieCache: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable cookie cache and fetch session from database\" }).optional(),\n\tdisableRefresh: zod__WEBPACK_IMPORTED_MODULE_3__.coerce.boolean().meta({ description: \"Disable session refresh. Useful for checking session status, without updating the session\" }).optional()\n}));\n\n//#endregion\n\n//# sourceMappingURL=session-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkU7QUFDOUM7QUFDMkI7QUFDL0I7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDLGtCQUFrQixZQUFZLEdBQUcsRUFBRTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDBCQUEwQix3QkFBd0I7QUFDbEQsY0FBYyxXQUFXLHlCQUF5QixxQkFBcUI7QUFDdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUVBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isc0VBQWEsT0FBTyxtRUFBa0I7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseUNBQVUsQ0FBQyx1Q0FBUTtBQUNqRCxxQkFBcUIsK0NBQWdCLFVBQVUscUVBQXFFO0FBQ3BILGlCQUFpQiwrQ0FBZ0IsVUFBVSwwR0FBMEc7QUFDckosQ0FBQzs7QUFFRDtBQUMrSDtBQUMvSCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRW5jb2RlSldUIH0gZnJvbSBcIi4uL2NyeXB0by9qd3QubWpzXCI7XG5pbXBvcnQgXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBzYWZlSlNPTlBhcnNlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9jb29raWVzL3Nlc3Npb24tc3RvcmUudHNcbmNvbnN0IEFMTE9XRURfQ09PS0lFX1NJWkUgPSA0MDk2O1xuY29uc3QgRVNUSU1BVEVEX0VNUFRZX0NPT0tJRV9TSVpFID0gMjAwO1xuY29uc3QgQ0hVTktfU0laRSA9IEFMTE9XRURfQ09PS0lFX1NJWkUgLSBFU1RJTUFURURfRU1QVFlfQ09PS0lFX1NJWkU7XG4vKipcbiogUGFyc2UgY29va2llcyBmcm9tIHRoZSByZXF1ZXN0IGhlYWRlcnNcbiovXG5mdW5jdGlvbiBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpIHtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiB7fTtcblx0Y29uc3QgY29va2llcyA9IHt9O1xuXHRjb25zdCBwYWlycyA9IGNvb2tpZUhlYWRlci5zcGxpdChcIjsgXCIpO1xuXHRmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcblx0XHRjb25zdCBbbmFtZSwgLi4udmFsdWVQYXJ0c10gPSBwYWlyLnNwbGl0KFwiPVwiKTtcblx0XHRpZiAobmFtZSAmJiB2YWx1ZVBhcnRzLmxlbmd0aCA+IDApIGNvb2tpZXNbbmFtZV0gPSB2YWx1ZVBhcnRzLmpvaW4oXCI9XCIpO1xuXHR9XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEV4dHJhY3QgdGhlIGNodW5rIGluZGV4IGZyb20gYSBjb29raWUgbmFtZVxuKi9cbmZ1bmN0aW9uIGdldENodW5rSW5kZXgoY29va2llTmFtZSkge1xuXHRjb25zdCBwYXJ0cyA9IGNvb2tpZU5hbWUuc3BsaXQoXCIuXCIpO1xuXHRjb25zdCBsYXN0UGFydCA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xuXHRjb25zdCBpbmRleCA9IHBhcnNlSW50KGxhc3RQYXJ0IHx8IFwiMFwiLCAxMCk7XG5cdHJldHVybiBpc05hTihpbmRleCkgPyAwIDogaW5kZXg7XG59XG4vKipcbiogUmVhZCBhbGwgZXhpc3RpbmcgY2h1bmtzIGZyb20gY29va2llc1xuKi9cbmZ1bmN0aW9uIHJlYWRFeGlzdGluZ0NodW5rcyhjb29raWVOYW1lLCBjdHgpIHtcblx0Y29uc3QgY2h1bmtzID0ge307XG5cdGNvbnN0IGNvb2tpZXMgPSBwYXJzZUNvb2tpZXNGcm9tQ29udGV4dChjdHgpO1xuXHRmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29va2llcykpIGlmIChuYW1lLnN0YXJ0c1dpdGgoY29va2llTmFtZSkpIGNodW5rc1tuYW1lXSA9IHZhbHVlO1xuXHRyZXR1cm4gY2h1bmtzO1xufVxuLyoqXG4qIEdldCB0aGUgZnVsbCBzZXNzaW9uIGRhdGEgYnkgam9pbmluZyBhbGwgY2h1bmtzXG4qL1xuZnVuY3Rpb24gam9pbkNodW5rcyhjaHVua3MpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKGNodW5rcykuc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiBnZXRDaHVua0luZGV4KGEpIC0gZ2V0Q2h1bmtJbmRleChiKTtcblx0fSkubWFwKChrZXkpID0+IGNodW5rc1trZXldKS5qb2luKFwiXCIpO1xufVxuLyoqXG4qIFNwbGl0IGEgY29va2llIHZhbHVlIGludG8gY2h1bmtzIGlmIG5lZWRlZFxuKi9cbmZ1bmN0aW9uIGNodW5rQ29va2llKHN0b3JlTmFtZSwgY29va2llLCBjaHVua3MsIGxvZ2dlcikge1xuXHRjb25zdCBjaHVua0NvdW50ID0gTWF0aC5jZWlsKGNvb2tpZS52YWx1ZS5sZW5ndGggLyBDSFVOS19TSVpFKTtcblx0aWYgKGNodW5rQ291bnQgPT09IDEpIHtcblx0XHRjaHVua3NbY29va2llLm5hbWVdID0gY29va2llLnZhbHVlO1xuXHRcdHJldHVybiBbY29va2llXTtcblx0fVxuXHRjb25zdCBjb29raWVzID0gW107XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKSB7XG5cdFx0Y29uc3QgbmFtZSA9IGAke2Nvb2tpZS5uYW1lfS4ke2l9YDtcblx0XHRjb25zdCBzdGFydCA9IGkgKiBDSFVOS19TSVpFO1xuXHRcdGNvbnN0IHZhbHVlID0gY29va2llLnZhbHVlLnN1YnN0cmluZyhzdGFydCwgc3RhcnQgKyBDSFVOS19TSVpFKTtcblx0XHRjb29raWVzLnB1c2goe1xuXHRcdFx0Li4uY29va2llLFxuXHRcdFx0bmFtZSxcblx0XHRcdHZhbHVlXG5cdFx0fSk7XG5cdFx0Y2h1bmtzW25hbWVdID0gdmFsdWU7XG5cdH1cblx0bG9nZ2VyLmRlYnVnKGBDSFVOS0lOR18ke3N0b3JlTmFtZS50b1VwcGVyQ2FzZSgpfV9DT09LSUVgLCB7XG5cdFx0bWVzc2FnZTogYCR7c3RvcmVOYW1lfSBjb29raWUgZXhjZWVkcyBhbGxvd2VkICR7QUxMT1dFRF9DT09LSUVfU0laRX0gYnl0ZXMuYCxcblx0XHRlbXB0eUNvb2tpZVNpemU6IEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSxcblx0XHR2YWx1ZVNpemU6IGNvb2tpZS52YWx1ZS5sZW5ndGgsXG5cdFx0Y2h1bmtDb3VudCxcblx0XHRjaHVua3M6IGNvb2tpZXMubWFwKChjKSA9PiBjLnZhbHVlLmxlbmd0aCArIEVTVElNQVRFRF9FTVBUWV9DT09LSUVfU0laRSlcblx0fSk7XG5cdHJldHVybiBjb29raWVzO1xufVxuLyoqXG4qIEdldCBhbGwgY29va2llcyB0aGF0IHNob3VsZCBiZSBjbGVhbmVkIChyZW1vdmVkKVxuKi9cbmZ1bmN0aW9uIGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpIHtcblx0Y29uc3QgY2xlYW5lZENodW5rcyA9IHt9O1xuXHRmb3IgKGNvbnN0IG5hbWUgaW4gY2h1bmtzKSBjbGVhbmVkQ2h1bmtzW25hbWVdID0ge1xuXHRcdG5hbWUsXG5cdFx0dmFsdWU6IFwiXCIsXG5cdFx0YXR0cmlidXRlczoge1xuXHRcdFx0Li4uY29va2llT3B0aW9ucyxcblx0XHRcdG1heEFnZTogMFxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGNsZWFuZWRDaHVua3M7XG59XG4vKipcbiogQ3JlYXRlIGEgc2Vzc2lvbiBzdG9yZSBmb3IgaGFuZGxpbmcgY29va2llIGNodW5raW5nLlxuKiBXaGVuIHNlc3Npb24gZGF0YSBleGNlZWRzIDRLQiwgaXQgYXV0b21hdGljYWxseSBzcGxpdHMgaXQgaW50byBtdWx0aXBsZSBjb29raWVzLlxuKlxuKiBCYXNlZCBvbiBuZXh0LWF1dGgncyBTZXNzaW9uU3RvcmUgaW1wbGVtZW50YXRpb24uXG4qIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL25leHRhdXRoanMvbmV4dC1hdXRoL2Jsb2IvMjdiMjUxOWI4NGI4ZWI5Y2YwNTM3NzVkZWEyOWQ1NzdkMmFhMDA5OC9wYWNrYWdlcy9uZXh0LWF1dGgvc3JjL2NvcmUvbGliL2Nvb2tpZS50c1xuKi9cbmNvbnN0IHN0b3JlRmFjdG9yeSA9IChzdG9yZU5hbWUpID0+IChjb29raWVOYW1lLCBjb29raWVPcHRpb25zLCBjdHgpID0+IHtcblx0Y29uc3QgY2h1bmtzID0gcmVhZEV4aXN0aW5nQ2h1bmtzKGNvb2tpZU5hbWUsIGN0eCk7XG5cdGNvbnN0IGxvZ2dlciA9IGN0eC5jb250ZXh0LmxvZ2dlcjtcblx0cmV0dXJuIHtcblx0XHRnZXRWYWx1ZSgpIHtcblx0XHRcdHJldHVybiBqb2luQ2h1bmtzKGNodW5rcyk7XG5cdFx0fSxcblx0XHRoYXNDaHVua3MoKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMoY2h1bmtzKS5sZW5ndGggPiAwO1xuXHRcdH0sXG5cdFx0Y2h1bmsodmFsdWUsIG9wdGlvbnMpIHtcblx0XHRcdGNvbnN0IGNsZWFuZWRDaHVua3MgPSBnZXRDbGVhbkNvb2tpZXMoY2h1bmtzLCBjb29raWVPcHRpb25zKTtcblx0XHRcdGZvciAoY29uc3QgbmFtZSBpbiBjaHVua3MpIGRlbGV0ZSBjaHVua3NbbmFtZV07XG5cdFx0XHRjb25zdCBjb29raWVzID0gY2xlYW5lZENodW5rcztcblx0XHRcdGNvbnN0IGNodW5rZWQgPSBjaHVua0Nvb2tpZShzdG9yZU5hbWUsIHtcblx0XHRcdFx0bmFtZTogY29va2llTmFtZSxcblx0XHRcdFx0dmFsdWUsXG5cdFx0XHRcdGF0dHJpYnV0ZXM6IHtcblx0XHRcdFx0XHQuLi5jb29raWVPcHRpb25zLFxuXHRcdFx0XHRcdC4uLm9wdGlvbnNcblx0XHRcdFx0fVxuXHRcdFx0fSwgY2h1bmtzLCBsb2dnZXIpO1xuXHRcdFx0Zm9yIChjb25zdCBjaHVuayBvZiBjaHVua2VkKSBjb29raWVzW2NodW5rLm5hbWVdID0gY2h1bms7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LnZhbHVlcyhjb29raWVzKTtcblx0XHR9LFxuXHRcdGNsZWFuKCkge1xuXHRcdFx0Y29uc3QgY2xlYW5lZENodW5rcyA9IGdldENsZWFuQ29va2llcyhjaHVua3MsIGNvb2tpZU9wdGlvbnMpO1xuXHRcdFx0Zm9yIChjb25zdCBuYW1lIGluIGNodW5rcykgZGVsZXRlIGNodW5rc1tuYW1lXTtcblx0XHRcdHJldHVybiBPYmplY3QudmFsdWVzKGNsZWFuZWRDaHVua3MpO1xuXHRcdH0sXG5cdFx0c2V0Q29va2llcyhjb29raWVzKSB7XG5cdFx0XHRmb3IgKGNvbnN0IGNvb2tpZSBvZiBjb29raWVzKSBjdHguc2V0Q29va2llKGNvb2tpZS5uYW1lLCBjb29raWUudmFsdWUsIGNvb2tpZS5hdHRyaWJ1dGVzKTtcblx0XHR9XG5cdH07XG59O1xuY29uc3QgY3JlYXRlU2Vzc2lvblN0b3JlID0gc3RvcmVGYWN0b3J5KFwiU2Vzc2lvblwiKTtcbmNvbnN0IGNyZWF0ZUFjY291bnRTdG9yZSA9IHN0b3JlRmFjdG9yeShcIkFjY291bnRcIik7XG5mdW5jdGlvbiBnZXRDaHVua2VkQ29va2llKGN0eCwgY29va2llTmFtZSkge1xuXHRjb25zdCB2YWx1ZSA9IGN0eC5nZXRDb29raWUoY29va2llTmFtZSk7XG5cdGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlO1xuXHRjb25zdCBjaHVua3MgPSBbXTtcblx0Y29uc3QgY29va2llSGVhZGVyID0gY3R4LmhlYWRlcnM/LmdldChcImNvb2tpZVwiKTtcblx0aWYgKCFjb29raWVIZWFkZXIpIHJldHVybiBudWxsO1xuXHRjb25zdCBjb29raWVzID0ge307XG5cdGNvbnN0IHBhaXJzID0gY29va2llSGVhZGVyLnNwbGl0KFwiOyBcIik7XG5cdGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuXHRcdGNvbnN0IFtuYW1lLCAuLi52YWx1ZVBhcnRzXSA9IHBhaXIuc3BsaXQoXCI9XCIpO1xuXHRcdGlmIChuYW1lICYmIHZhbHVlUGFydHMubGVuZ3RoID4gMCkgY29va2llc1tuYW1lXSA9IHZhbHVlUGFydHMuam9pbihcIj1cIik7XG5cdH1cblx0Zm9yIChjb25zdCBbbmFtZSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhjb29raWVzKSkgaWYgKG5hbWUuc3RhcnRzV2l0aChjb29raWVOYW1lICsgXCIuXCIpKSB7XG5cdFx0Y29uc3QgaW5kZXhTdHIgPSBuYW1lLnNwbGl0KFwiLlwiKS5hdCgtMSk7XG5cdFx0Y29uc3QgaW5kZXggPSBwYXJzZUludChpbmRleFN0ciB8fCBcIjBcIiwgMTApO1xuXHRcdGlmICghaXNOYU4oaW5kZXgpKSBjaHVua3MucHVzaCh7XG5cdFx0XHRpbmRleCxcblx0XHRcdHZhbHVlOiB2YWxcblx0XHR9KTtcblx0fVxuXHRpZiAoY2h1bmtzLmxlbmd0aCA+IDApIHtcblx0XHRjaHVua3Muc29ydCgoYSwgYikgPT4gYS5pbmRleCAtIGIuaW5kZXgpO1xuXHRcdHJldHVybiBjaHVua3MubWFwKChjKSA9PiBjLnZhbHVlKS5qb2luKFwiXCIpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuYXN5bmMgZnVuY3Rpb24gc2V0QWNjb3VudENvb2tpZShjLCBhY2NvdW50RGF0YSkge1xuXHRjb25zdCBhY2NvdW50RGF0YUNvb2tpZSA9IGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YTtcblx0Y29uc3Qgb3B0aW9ucyA9IHtcblx0XHRtYXhBZ2U6IDMwMCxcblx0XHQuLi5hY2NvdW50RGF0YUNvb2tpZS5hdHRyaWJ1dGVzXG5cdH07XG5cdGNvbnN0IGRhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNvZGVKV1QoYWNjb3VudERhdGEsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiLCBvcHRpb25zLm1heEFnZSk7XG5cdGlmIChkYXRhLmxlbmd0aCA+IEFMTE9XRURfQ09PS0lFX1NJWkUpIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0Y29uc3QgY29va2llcyA9IGFjY291bnRTdG9yZS5jaHVuayhkYXRhLCBvcHRpb25zKTtcblx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjb29raWVzKTtcblx0fSBlbHNlIHtcblx0XHRjb25zdCBhY2NvdW50U3RvcmUgPSBjcmVhdGVBY2NvdW50U3RvcmUoYWNjb3VudERhdGFDb29raWUubmFtZSwgb3B0aW9ucywgYyk7XG5cdFx0aWYgKGFjY291bnRTdG9yZS5oYXNDaHVua3MoKSkge1xuXHRcdFx0Y29uc3QgY2xlYW5Db29raWVzID0gYWNjb3VudFN0b3JlLmNsZWFuKCk7XG5cdFx0XHRhY2NvdW50U3RvcmUuc2V0Q29va2llcyhjbGVhbkNvb2tpZXMpO1xuXHRcdH1cblx0XHRjLnNldENvb2tpZShhY2NvdW50RGF0YUNvb2tpZS5uYW1lLCBkYXRhLCBvcHRpb25zKTtcblx0fVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudENvb2tpZShjKSB7XG5cdGNvbnN0IGFjY291bnRDb29raWUgPSBnZXRDaHVua2VkQ29va2llKGMsIGMuY29udGV4dC5hdXRoQ29va2llcy5hY2NvdW50RGF0YS5uYW1lKTtcblx0aWYgKGFjY291bnRDb29raWUpIHtcblx0XHRjb25zdCBhY2NvdW50RGF0YSA9IHNhZmVKU09OUGFyc2UoYXdhaXQgc3ltbWV0cmljRGVjb2RlSldUKGFjY291bnRDb29raWUsIGMuY29udGV4dC5zZWNyZXQsIFwiYmV0dGVyLWF1dGgtYWNjb3VudFwiKSk7XG5cdFx0aWYgKGFjY291bnREYXRhKSByZXR1cm4gYWNjb3VudERhdGE7XG5cdH1cblx0cmV0dXJuIG51bGw7XG59XG5jb25zdCBnZXRTZXNzaW9uUXVlcnlTY2hlbWEgPSB6Lm9wdGlvbmFsKHoub2JqZWN0KHtcblx0ZGlzYWJsZUNvb2tpZUNhY2hlOiB6LmNvZXJjZS5ib29sZWFuKCkubWV0YSh7IGRlc2NyaXB0aW9uOiBcIkRpc2FibGUgY29va2llIGNhY2hlIGFuZCBmZXRjaCBzZXNzaW9uIGZyb20gZGF0YWJhc2VcIiB9KS5vcHRpb25hbCgpLFxuXHRkaXNhYmxlUmVmcmVzaDogei5jb2VyY2UuYm9vbGVhbigpLm1ldGEoeyBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIHNlc3Npb24gcmVmcmVzaC4gVXNlZnVsIGZvciBjaGVja2luZyBzZXNzaW9uIHN0YXR1cywgd2l0aG91dCB1cGRhdGluZyB0aGUgc2Vzc2lvblwiIH0pLm9wdGlvbmFsKClcbn0pKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVBY2NvdW50U3RvcmUsIGNyZWF0ZVNlc3Npb25TdG9yZSwgZ2V0QWNjb3VudENvb2tpZSwgZ2V0Q2h1bmtlZENvb2tpZSwgZ2V0U2Vzc2lvblF1ZXJ5U2NoZW1hLCBzZXRBY2NvdW50Q29va2llIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXNzaW9uLXN0b3JlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/buffer.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* binding */ constantTimeEqual)\n/* harmony export */ });\n//#region src/crypto/buffer.ts\n/**\n* Compare two buffers in constant time.\n*/\nfunction constantTimeEqual(a, b) {\n\tif (typeof a === \"string\") a = new TextEncoder().encode(a);\n\tif (typeof b === \"string\") b = new TextEncoder().encode(b);\n\tconst aBuffer = new Uint8Array(a);\n\tconst bBuffer = new Uint8Array(b);\n\tlet c = aBuffer.length ^ bBuffer.length;\n\tconst length = Math.max(aBuffer.length, bBuffer.length);\n\tfor (let i = 0; i < length; i++) c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n\treturn c === 0;\n}\n\n//#endregion\n\n//# sourceMappingURL=buffer.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vYnVmZmVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7O0FBRUE7QUFDNkI7QUFDN0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY3J5cHRvL2J1ZmZlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jcnlwdG8vYnVmZmVyLnRzXG4vKipcbiogQ29tcGFyZSB0d28gYnVmZmVycyBpbiBjb25zdGFudCB0aW1lLlxuKi9cbmZ1bmN0aW9uIGNvbnN0YW50VGltZUVxdWFsKGEsIGIpIHtcblx0aWYgKHR5cGVvZiBhID09PSBcInN0cmluZ1wiKSBhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGEpO1xuXHRpZiAodHlwZW9mIGIgPT09IFwic3RyaW5nXCIpIGIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoYik7XG5cdGNvbnN0IGFCdWZmZXIgPSBuZXcgVWludDhBcnJheShhKTtcblx0Y29uc3QgYkJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGIpO1xuXHRsZXQgYyA9IGFCdWZmZXIubGVuZ3RoIF4gYkJ1ZmZlci5sZW5ndGg7XG5cdGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KGFCdWZmZXIubGVuZ3RoLCBiQnVmZmVyLmxlbmd0aCk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIGMgfD0gKGkgPCBhQnVmZmVyLmxlbmd0aCA/IGFCdWZmZXJbaV0gOiAwKSBeIChpIDwgYkJ1ZmZlci5sZW5ndGggPyBiQnVmZmVyW2ldIDogMCk7XG5cdHJldHVybiBjID09PSAwO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1idWZmZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   constantTimeEqual: () => (/* reexport safe */ _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual),\n/* harmony export */   generateRandomString: () => (/* reexport safe */ _random_mjs__WEBPACK_IMPORTED_MODULE_3__.generateRandomString),\n/* harmony export */   getCryptoKey: () => (/* binding */ getCryptoKey),\n/* harmony export */   hashPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.hashPassword),\n/* harmony export */   makeSignature: () => (/* binding */ makeSignature),\n/* harmony export */   signJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricDecodeJWT),\n/* harmony export */   symmetricDecrypt: () => (/* binding */ symmetricDecrypt),\n/* harmony export */   symmetricEncodeJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.symmetricEncodeJWT),\n/* harmony export */   symmetricEncrypt: () => (/* binding */ symmetricEncrypt),\n/* harmony export */   verifyJWT: () => (/* reexport safe */ _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__.verifyJWT),\n/* harmony export */   verifyPassword: () => (/* reexport safe */ _password_mjs__WEBPACK_IMPORTED_MODULE_2__.verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _jwt_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./jwt.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\");\n/* harmony import */ var _password_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./password.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\");\n/* harmony import */ var _random_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _better_auth_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/utils */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @noble/ciphers/chacha.js */ \"(rsc)/./node_modules/@noble/ciphers/chacha.js\");\n/* harmony import */ var _noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @noble/ciphers/utils.js */ \"(rsc)/./node_modules/@noble/ciphers/utils.js\");\n\n\n\n\n\n\n\n\n\n//#region src/crypto/index.ts\nconst algorithm = {\n\tname: \"HMAC\",\n\thash: \"SHA-256\"\n};\nconst symmetricEncrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.utf8ToBytes)(data);\n\treturn (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.bytesToHex)((0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes)).encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({ key, data }) => {\n\tconst keyAsBytes = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_5__.createHash)(\"SHA-256\").digest(key);\n\tconst dataAsBytes = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.hexToBytes)(data);\n\tconst chacha = (0,_noble_ciphers_utils_js__WEBPACK_IMPORTED_MODULE_6__.managedNonce)(_noble_ciphers_chacha_js__WEBPACK_IMPORTED_MODULE_7__.xchacha20poly1305)(new Uint8Array(keyAsBytes));\n\treturn new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\nconst getCryptoKey = async (secret) => {\n\tconst secretBuf = typeof secret === \"string\" ? new TextEncoder().encode(secret) : secret;\n\treturn await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().importKey(\"raw\", secretBuf, algorithm, false, [\"sign\", \"verify\"]);\n};\nconst makeSignature = async (value, secret) => {\n\tconst key = await getCryptoKey(secret);\n\tconst signature = await (0,_better_auth_utils__WEBPACK_IMPORTED_MODULE_4__.getWebcryptoSubtle)().sign(algorithm.name, key, new TextEncoder().encode(value));\n\treturn btoa(String.fromCharCode(...new Uint8Array(signature)));\n};\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ3NDO0FBQ3pCO0FBQ1Y7QUFDSTtBQUNIO0FBQ1E7QUFDK0I7O0FBRTVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsV0FBVztBQUM3QywwQkFBMEIsbUVBQVU7QUFDcEMscUJBQXFCLG9FQUFXO0FBQ2hDLFFBQVEsbUVBQVUsQ0FBQyxxRUFBWSxDQUFDLHVFQUFpQjtBQUNqRDtBQUNBLGtDQUFrQyxXQUFXO0FBQzdDLDBCQUEwQixtRUFBVTtBQUNwQyxxQkFBcUIsbUVBQVU7QUFDL0IsZ0JBQWdCLHFFQUFZLENBQUMsdUVBQWlCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxzRUFBa0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHNFQUFrQjtBQUMzQztBQUNBOztBQUVBO0FBQzhNO0FBQzlNIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NyeXB0by9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29uc3RhbnRUaW1lRXF1YWwgfSBmcm9tIFwiLi9idWZmZXIubWpzXCI7XG5pbXBvcnQgeyBzaWduSldULCBzeW1tZXRyaWNEZWNvZGVKV1QsIHN5bW1ldHJpY0VuY29kZUpXVCwgdmVyaWZ5SldUIH0gZnJvbSBcIi4vand0Lm1qc1wiO1xuaW1wb3J0IHsgaGFzaFBhc3N3b3JkLCB2ZXJpZnlQYXNzd29yZCB9IGZyb20gXCIuL3Bhc3N3b3JkLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi9yYW5kb20ubWpzXCI7XG5pbXBvcnQgeyBnZXRXZWJjcnlwdG9TdWJ0bGUgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC91dGlscy9oYXNoXCI7XG5pbXBvcnQgeyB4Y2hhY2hhMjBwb2x5MTMwNSB9IGZyb20gXCJAbm9ibGUvY2lwaGVycy9jaGFjaGEuanNcIjtcbmltcG9ydCB7IGJ5dGVzVG9IZXgsIGhleFRvQnl0ZXMsIG1hbmFnZWROb25jZSwgdXRmOFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2NpcGhlcnMvdXRpbHMuanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jcnlwdG8vaW5kZXgudHNcbmNvbnN0IGFsZ29yaXRobSA9IHtcblx0bmFtZTogXCJITUFDXCIsXG5cdGhhc2g6IFwiU0hBLTI1NlwiXG59O1xuY29uc3Qgc3ltbWV0cmljRW5jcnlwdCA9IGFzeW5jICh7IGtleSwgZGF0YSB9KSA9PiB7XG5cdGNvbnN0IGtleUFzQnl0ZXMgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3Qoa2V5KTtcblx0Y29uc3QgZGF0YUFzQnl0ZXMgPSB1dGY4VG9CeXRlcyhkYXRhKTtcblx0cmV0dXJuIGJ5dGVzVG9IZXgobWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSkuZW5jcnlwdChkYXRhQXNCeXRlcykpO1xufTtcbmNvbnN0IHN5bW1ldHJpY0RlY3J5cHQgPSBhc3luYyAoeyBrZXksIGRhdGEgfSkgPT4ge1xuXHRjb25zdCBrZXlBc0J5dGVzID0gYXdhaXQgY3JlYXRlSGFzaChcIlNIQS0yNTZcIikuZGlnZXN0KGtleSk7XG5cdGNvbnN0IGRhdGFBc0J5dGVzID0gaGV4VG9CeXRlcyhkYXRhKTtcblx0Y29uc3QgY2hhY2hhID0gbWFuYWdlZE5vbmNlKHhjaGFjaGEyMHBvbHkxMzA1KShuZXcgVWludDhBcnJheShrZXlBc0J5dGVzKSk7XG5cdHJldHVybiBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoY2hhY2hhLmRlY3J5cHQoZGF0YUFzQnl0ZXMpKTtcbn07XG5jb25zdCBnZXRDcnlwdG9LZXkgPSBhc3luYyAoc2VjcmV0KSA9PiB7XG5cdGNvbnN0IHNlY3JldEJ1ZiA9IHR5cGVvZiBzZWNyZXQgPT09IFwic3RyaW5nXCIgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2VjcmV0KSA6IHNlY3JldDtcblx0cmV0dXJuIGF3YWl0IGdldFdlYmNyeXB0b1N1YnRsZSgpLmltcG9ydEtleShcInJhd1wiLCBzZWNyZXRCdWYsIGFsZ29yaXRobSwgZmFsc2UsIFtcInNpZ25cIiwgXCJ2ZXJpZnlcIl0pO1xufTtcbmNvbnN0IG1ha2VTaWduYXR1cmUgPSBhc3luYyAodmFsdWUsIHNlY3JldCkgPT4ge1xuXHRjb25zdCBrZXkgPSBhd2FpdCBnZXRDcnlwdG9LZXkoc2VjcmV0KTtcblx0Y29uc3Qgc2lnbmF0dXJlID0gYXdhaXQgZ2V0V2ViY3J5cHRvU3VidGxlKCkuc2lnbihhbGdvcml0aG0ubmFtZSwga2V5LCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUodmFsdWUpKTtcblx0cmV0dXJuIGJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZSguLi5uZXcgVWludDhBcnJheShzaWduYXR1cmUpKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNvbnN0YW50VGltZUVxdWFsLCBnZW5lcmF0ZVJhbmRvbVN0cmluZywgZ2V0Q3J5cHRvS2V5LCBoYXNoUGFzc3dvcmQsIG1ha2VTaWduYXR1cmUsIHNpZ25KV1QsIHN5bW1ldHJpY0RlY29kZUpXVCwgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jb2RlSldULCBzeW1tZXRyaWNFbmNyeXB0LCB2ZXJpZnlKV1QsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/jwt.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signJWT: () => (/* binding */ signJWT),\n/* harmony export */   symmetricDecodeJWT: () => (/* binding */ symmetricDecodeJWT),\n/* harmony export */   symmetricEncodeJWT: () => (/* binding */ symmetricEncodeJWT),\n/* harmony export */   verifyJWT: () => (/* binding */ verifyJWT)\n/* harmony export */ });\n/* harmony import */ var _noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @noble/hashes/hkdf.js */ \"(rsc)/./node_modules/@noble/hashes/hkdf.js\");\n/* harmony import */ var _noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/sha2.js */ \"(rsc)/./node_modules/@noble/hashes/sha2.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/decrypt.js\");\n\n\n\n\n//#region src/crypto/jwt.ts\nasync function signJWT(payload, secret, expiresIn = 3600) {\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n}\nasync function verifyJWT(token, secret) {\n\ttry {\n\t\treturn (await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, new TextEncoder().encode(secret))).payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\nconst info = new Uint8Array([\n\t66,\n\t101,\n\t116,\n\t116,\n\t101,\n\t114,\n\t65,\n\t117,\n\t116,\n\t104,\n\t46,\n\t106,\n\t115,\n\t32,\n\t71,\n\t101,\n\t110,\n\t101,\n\t114,\n\t97,\n\t116,\n\t101,\n\t100,\n\t32,\n\t69,\n\t110,\n\t99,\n\t114,\n\t121,\n\t112,\n\t116,\n\t105,\n\t111,\n\t110,\n\t32,\n\t75,\n\t101,\n\t121\n]);\nconst now = () => Date.now() / 1e3 | 0;\nconst alg = \"dir\";\nconst enc = \"A256CBC-HS512\";\nasync function symmetricEncodeJWT(payload, secret, salt, expiresIn = 3600) {\n\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\tconst thumbprint = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\tkty: \"oct\",\n\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t}, \"sha256\");\n\treturn await new jose__WEBPACK_IMPORTED_MODULE_6__.EncryptJWT(payload).setProtectedHeader({\n\t\talg,\n\t\tenc,\n\t\tkid: thumbprint\n\t}).setIssuedAt().setExpirationTime(now() + expiresIn).setJti(crypto.randomUUID()).encrypt(encryptionSecret);\n}\nasync function symmetricDecodeJWT(token, secret, salt) {\n\tif (!token) return null;\n\ttry {\n\t\tconst { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_7__.jwtDecrypt)(token, async ({ kid }) => {\n\t\t\tconst encryptionSecret = (0,_noble_hashes_hkdf_js__WEBPACK_IMPORTED_MODULE_2__.hkdf)(_noble_hashes_sha2_js__WEBPACK_IMPORTED_MODULE_3__.sha256, new TextEncoder().encode(secret), new TextEncoder().encode(salt), info, 64);\n\t\t\tif (kid === void 0) return encryptionSecret;\n\t\t\tif (kid === await (0,jose__WEBPACK_IMPORTED_MODULE_4__.calculateJwkThumbprint)({\n\t\t\t\tkty: \"oct\",\n\t\t\t\tk: jose__WEBPACK_IMPORTED_MODULE_5__.encode(encryptionSecret)\n\t\t\t}, \"sha256\")) return encryptionSecret;\n\t\t\tthrow new Error(\"no matching decryption secret\");\n\t\t}, {\n\t\t\tclockTolerance: 15,\n\t\t\tkeyManagementAlgorithms: [alg],\n\t\t\tcontentEncryptionAlgorithms: [enc, \"A256GCM\"]\n\t\t});\n\t\treturn payload;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=jwt.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vand0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNkM7QUFDRTtBQUNzRDs7QUFFckc7QUFDQTtBQUNBLGtCQUFrQix5Q0FBTywrQkFBK0IsY0FBYztBQUN0RTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsK0NBQVM7QUFDekIsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkRBQUksQ0FBQyx5REFBTTtBQUNyQywwQkFBMEIsNERBQXNCO0FBQ2hEO0FBQ0EsS0FBSyx3Q0FBZ0I7QUFDckIsRUFBRTtBQUNGLGtCQUFrQiw0Q0FBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLFVBQVUsUUFBUSxnREFBVSxpQkFBaUIsS0FBSztBQUM1RCw0QkFBNEIsMkRBQUksQ0FBQyx5REFBTTtBQUN2QztBQUNBLHFCQUFxQiw0REFBc0I7QUFDM0M7QUFDQSxPQUFPLHdDQUFnQjtBQUN2QixJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNzRTtBQUN0RSIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vand0Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBoa2RmIH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvaGtkZi5qc1wiO1xuaW1wb3J0IHsgc2hhMjU2IH0gZnJvbSBcIkBub2JsZS9oYXNoZXMvc2hhMi5qc1wiO1xuaW1wb3J0IHsgRW5jcnlwdEpXVCwgU2lnbkpXVCwgYmFzZTY0dXJsLCBjYWxjdWxhdGVKd2tUaHVtYnByaW50LCBqd3REZWNyeXB0LCBqd3RWZXJpZnkgfSBmcm9tIFwiam9zZVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9qd3QudHNcbmFzeW5jIGZ1bmN0aW9uIHNpZ25KV1QocGF5bG9hZCwgc2VjcmV0LCBleHBpcmVzSW4gPSAzNjAwKSB7XG5cdHJldHVybiBhd2FpdCBuZXcgU2lnbkpXVChwYXlsb2FkKS5zZXRQcm90ZWN0ZWRIZWFkZXIoeyBhbGc6IFwiSFMyNTZcIiB9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDFlMykgKyBleHBpcmVzSW4pLnNpZ24obmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5SldUKHRva2VuLCBzZWNyZXQpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCkpKS5wYXlsb2FkO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuY29uc3QgaW5mbyA9IG5ldyBVaW50OEFycmF5KFtcblx0NjYsXG5cdDEwMSxcblx0MTE2LFxuXHQxMTYsXG5cdDEwMSxcblx0MTE0LFxuXHQ2NSxcblx0MTE3LFxuXHQxMTYsXG5cdDEwNCxcblx0NDYsXG5cdDEwNixcblx0MTE1LFxuXHQzMixcblx0NzEsXG5cdDEwMSxcblx0MTEwLFxuXHQxMDEsXG5cdDExNCxcblx0OTcsXG5cdDExNixcblx0MTAxLFxuXHQxMDAsXG5cdDMyLFxuXHQ2OSxcblx0MTEwLFxuXHQ5OSxcblx0MTE0LFxuXHQxMjEsXG5cdDExMixcblx0MTE2LFxuXHQxMDUsXG5cdDExMSxcblx0MTEwLFxuXHQzMixcblx0NzUsXG5cdDEwMSxcblx0MTIxXG5dKTtcbmNvbnN0IG5vdyA9ICgpID0+IERhdGUubm93KCkgLyAxZTMgfCAwO1xuY29uc3QgYWxnID0gXCJkaXJcIjtcbmNvbnN0IGVuYyA9IFwiQTI1NkNCQy1IUzUxMlwiO1xuYXN5bmMgZnVuY3Rpb24gc3ltbWV0cmljRW5jb2RlSldUKHBheWxvYWQsIHNlY3JldCwgc2FsdCwgZXhwaXJlc0luID0gMzYwMCkge1xuXHRjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gaGtkZihzaGEyNTYsIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzZWNyZXQpLCBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc2FsdCksIGluZm8sIDY0KTtcblx0Y29uc3QgdGh1bWJwcmludCA9IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdGt0eTogXCJvY3RcIixcblx0XHRrOiBiYXNlNjR1cmwuZW5jb2RlKGVuY3J5cHRpb25TZWNyZXQpXG5cdH0sIFwic2hhMjU2XCIpO1xuXHRyZXR1cm4gYXdhaXQgbmV3IEVuY3J5cHRKV1QocGF5bG9hZCkuc2V0UHJvdGVjdGVkSGVhZGVyKHtcblx0XHRhbGcsXG5cdFx0ZW5jLFxuXHRcdGtpZDogdGh1bWJwcmludFxuXHR9KS5zZXRJc3N1ZWRBdCgpLnNldEV4cGlyYXRpb25UaW1lKG5vdygpICsgZXhwaXJlc0luKS5zZXRKdGkoY3J5cHRvLnJhbmRvbVVVSUQoKSkuZW5jcnlwdChlbmNyeXB0aW9uU2VjcmV0KTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHN5bW1ldHJpY0RlY29kZUpXVCh0b2tlbiwgc2VjcmV0LCBzYWx0KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuXHR0cnkge1xuXHRcdGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0RGVjcnlwdCh0b2tlbiwgYXN5bmMgKHsga2lkIH0pID0+IHtcblx0XHRcdGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBoa2RmKHNoYTI1NiwgbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNlY3JldCksIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzYWx0KSwgaW5mbywgNjQpO1xuXHRcdFx0aWYgKGtpZCA9PT0gdm9pZCAwKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdGlmIChraWQgPT09IGF3YWl0IGNhbGN1bGF0ZUp3a1RodW1icHJpbnQoe1xuXHRcdFx0XHRrdHk6IFwib2N0XCIsXG5cdFx0XHRcdGs6IGJhc2U2NHVybC5lbmNvZGUoZW5jcnlwdGlvblNlY3JldClcblx0XHRcdH0sIFwic2hhMjU2XCIpKSByZXR1cm4gZW5jcnlwdGlvblNlY3JldDtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vIG1hdGNoaW5nIGRlY3J5cHRpb24gc2VjcmV0XCIpO1xuXHRcdH0sIHtcblx0XHRcdGNsb2NrVG9sZXJhbmNlOiAxNSxcblx0XHRcdGtleU1hbmFnZW1lbnRBbGdvcml0aG1zOiBbYWxnXSxcblx0XHRcdGNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtczogW2VuYywgXCJBMjU2R0NNXCJdXG5cdFx0fSk7XG5cdFx0cmV0dXJuIHBheWxvYWQ7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgc2lnbkpXVCwgc3ltbWV0cmljRGVjb2RlSldULCBzeW1tZXRyaWNFbmNvZGVKV1QsIHZlcmlmeUpXVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9and0Lm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/jwt.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/password.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/password.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var _buffer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/buffer.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hex */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @noble/hashes/scrypt.js */ \"(rsc)/./node_modules/@noble/hashes/scrypt.js\");\n/* harmony import */ var _noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @noble/hashes/utils.js */ \"(rsc)/./node_modules/@noble/hashes/utils.js\");\n\n\n\n\n\n\n//#region src/crypto/password.ts\nconst config = {\n\tN: 16384,\n\tr: 16,\n\tp: 1,\n\tdkLen: 64\n};\nasync function generateKey(password, salt) {\n\treturn await (0,_noble_hashes_scrypt_js__WEBPACK_IMPORTED_MODULE_3__.scryptAsync)(password.normalize(\"NFKC\"), salt, {\n\t\tN: config.N,\n\t\tp: config.p,\n\t\tr: config.r,\n\t\tdkLen: config.dkLen,\n\t\tmaxmem: 128 * config.N * config.r * 2\n\t});\n}\nconst hashPassword = async (password) => {\n\tconst salt = _better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(crypto.getRandomValues(new Uint8Array(16)));\n\tconst key = await generateKey(password, salt);\n\treturn `${salt}:${_better_auth_utils_hex__WEBPACK_IMPORTED_MODULE_2__.hex.encode(key)}`;\n};\nconst verifyPassword = async ({ hash, password }) => {\n\tconst [salt, key] = hash.split(\":\");\n\tif (!salt || !key) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Invalid password hash\");\n\treturn (0,_buffer_mjs__WEBPACK_IMPORTED_MODULE_0__.constantTimeEqual)(await generateKey(password, salt), (0,_noble_hashes_utils_js__WEBPACK_IMPORTED_MODULE_4__.hexToBytes)(key));\n};\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcGFzc3dvcmQubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBaUQ7QUFDUztBQUNiO0FBQ1M7QUFDRjs7QUFFcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsb0VBQVc7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsY0FBYyx1REFBRztBQUNqQjtBQUNBLFdBQVcsS0FBSyxHQUFHLHVEQUFHLGFBQWE7QUFDbkM7QUFDQSxnQ0FBZ0MsZ0JBQWdCO0FBQ2hEO0FBQ0EsOEJBQThCLG9FQUFlO0FBQzdDLFFBQVEsOERBQWlCLG9DQUFvQyxrRUFBVTtBQUN2RTs7QUFFQTtBQUN3QztBQUN4QyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcGFzc3dvcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbnN0YW50VGltZUVxdWFsIH0gZnJvbSBcIi4vYnVmZmVyLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5pbXBvcnQgeyBoZXggfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL2hleFwiO1xuaW1wb3J0IHsgc2NyeXB0QXN5bmMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy9zY3J5cHQuanNcIjtcbmltcG9ydCB7IGhleFRvQnl0ZXMgfSBmcm9tIFwiQG5vYmxlL2hhc2hlcy91dGlscy5qc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9wYXNzd29yZC50c1xuY29uc3QgY29uZmlnID0ge1xuXHROOiAxNjM4NCxcblx0cjogMTYsXG5cdHA6IDEsXG5cdGRrTGVuOiA2NFxufTtcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KSB7XG5cdHJldHVybiBhd2FpdCBzY3J5cHRBc3luYyhwYXNzd29yZC5ub3JtYWxpemUoXCJORktDXCIpLCBzYWx0LCB7XG5cdFx0TjogY29uZmlnLk4sXG5cdFx0cDogY29uZmlnLnAsXG5cdFx0cjogY29uZmlnLnIsXG5cdFx0ZGtMZW46IGNvbmZpZy5ka0xlbixcblx0XHRtYXhtZW06IDEyOCAqIGNvbmZpZy5OICogY29uZmlnLnIgKiAyXG5cdH0pO1xufVxuY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkKSA9PiB7XG5cdGNvbnN0IHNhbHQgPSBoZXguZW5jb2RlKGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoMTYpKSk7XG5cdGNvbnN0IGtleSA9IGF3YWl0IGdlbmVyYXRlS2V5KHBhc3N3b3JkLCBzYWx0KTtcblx0cmV0dXJuIGAke3NhbHR9OiR7aGV4LmVuY29kZShrZXkpfWA7XG59O1xuY29uc3QgdmVyaWZ5UGFzc3dvcmQgPSBhc3luYyAoeyBoYXNoLCBwYXNzd29yZCB9KSA9PiB7XG5cdGNvbnN0IFtzYWx0LCBrZXldID0gaGFzaC5zcGxpdChcIjpcIik7XG5cdGlmICghc2FsdCB8fCAha2V5KSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiSW52YWxpZCBwYXNzd29yZCBoYXNoXCIpO1xuXHRyZXR1cm4gY29uc3RhbnRUaW1lRXF1YWwoYXdhaXQgZ2VuZXJhdGVLZXkocGFzc3dvcmQsIHNhbHQpLCBoZXhUb0J5dGVzKGtleSkpO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYXNoUGFzc3dvcmQsIHZlcmlmeVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/crypto/random.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/crypto/random.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateRandomString: () => (/* binding */ generateRandomString)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n\n\n//#region src/crypto/random.ts\nconst generateRandomString = (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_0__.createRandomStringGenerator)(\"a-z\", \"0-9\", \"A-Z\", \"-_\");\n\n//#endregion\n\n//# sourceMappingURL=random.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcmFuZG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3RTs7QUFFeEU7QUFDQSw2QkFBNkIsc0ZBQTJCOztBQUV4RDtBQUNnQztBQUNoQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jcnlwdG8vcmFuZG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IgfSBmcm9tIFwiQGJldHRlci1hdXRoL3V0aWxzL3JhbmRvbVwiO1xuXG4vLyNyZWdpb24gc3JjL2NyeXB0by9yYW5kb20udHNcbmNvbnN0IGdlbmVyYXRlUmFuZG9tU3RyaW5nID0gY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yKFwiYS16XCIsIFwiMC05XCIsIFwiQS1aXCIsIFwiLV9cIik7XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJhbmRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/adapter-base.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseAdapter: () => (/* binding */ getBaseAdapter)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n//#region src/db/adapter-base.ts\nasync function getBaseAdapter(options, handleDirectDatabase) {\n\tlet adapter;\n\tif (!options.database) {\n\t\tconst tables = (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options);\n\t\tconst memoryDB = Object.keys(tables).reduce((acc, key) => {\n\t\t\tacc[key] = [];\n\t\t\treturn acc;\n\t\t}, {});\n\t\tconst { memoryAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/memory-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/memory-adapter/index.mjs\"));\n\t\tadapter = memoryAdapter(memoryDB)(options);\n\t} else if (typeof options.database === \"function\") adapter = options.database(options);\n\telse adapter = await handleDirectDatabase(options);\n\tif (!adapter.transaction) {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_1__.logger.warn(\"Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation.\");\n\t\tadapter.transaction = async (cb) => {\n\t\t\treturn cb(adapter);\n\t\t};\n\t}\n\treturn adapter;\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-base.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9hZGFwdGVyLWJhc2UubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUNOOztBQUUvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtRUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxHQUFHLElBQUk7QUFDUCxVQUFVLGdCQUFnQixRQUFRLDZPQUE4QztBQUNoRjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRSx5REFBTTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9hZGFwdGVyLWJhc2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEF1dGhUYWJsZXMgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9hZGFwdGVyLWJhc2UudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEJhc2VBZGFwdGVyKG9wdGlvbnMsIGhhbmRsZURpcmVjdERhdGFiYXNlKSB7XG5cdGxldCBhZGFwdGVyO1xuXHRpZiAoIW9wdGlvbnMuZGF0YWJhc2UpIHtcblx0XHRjb25zdCB0YWJsZXMgPSBnZXRBdXRoVGFibGVzKG9wdGlvbnMpO1xuXHRcdGNvbnN0IG1lbW9yeURCID0gT2JqZWN0LmtleXModGFibGVzKS5yZWR1Y2UoKGFjYywga2V5KSA9PiB7XG5cdFx0XHRhY2Nba2V5XSA9IFtdO1xuXHRcdFx0cmV0dXJuIGFjYztcblx0XHR9LCB7fSk7XG5cdFx0Y29uc3QgeyBtZW1vcnlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9tZW1vcnktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0YWRhcHRlciA9IG1lbW9yeUFkYXB0ZXIobWVtb3J5REIpKG9wdGlvbnMpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGFiYXNlID09PSBcImZ1bmN0aW9uXCIpIGFkYXB0ZXIgPSBvcHRpb25zLmRhdGFiYXNlKG9wdGlvbnMpO1xuXHRlbHNlIGFkYXB0ZXIgPSBhd2FpdCBoYW5kbGVEaXJlY3REYXRhYmFzZShvcHRpb25zKTtcblx0aWYgKCFhZGFwdGVyLnRyYW5zYWN0aW9uKSB7XG5cdFx0bG9nZ2VyLndhcm4oXCJBZGFwdGVyIGRvZXMgbm90IGNvcnJlY3RseSBpbXBsZW1lbnQgdHJhbnNhY3Rpb24gZnVuY3Rpb24sIHBhdGNoaW5nIGl0IGF1dG9tYXRpY2FsbHkuIFBsZWFzZSB1cGRhdGUgeW91ciBhZGFwdGVyIGltcGxlbWVudGF0aW9uLlwiKTtcblx0XHRhZGFwdGVyLnRyYW5zYWN0aW9uID0gYXN5bmMgKGNiKSA9PiB7XG5cdFx0XHRyZXR1cm4gY2IoYWRhcHRlcik7XG5cdFx0fTtcblx0fVxuXHRyZXR1cm4gYWRhcHRlcjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRCYXNlQWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1iYXNlLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/adapter-kysely.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAdapter: () => (/* binding */ getAdapter)\n/* harmony export */ });\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/db/adapter-kysely.ts\nasync function getAdapter(options) {\n\treturn (0,_adapter_base_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseAdapter)(options, async (opts) => {\n\t\tconst { createKyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\tconst { kysely, databaseType, transaction } = await createKyselyAdapter(opts);\n\t\tif (!kysely) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Failed to initialize database adapter\");\n\t\tconst { kyselyAdapter } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/better-auth\").then(__webpack_require__.bind(__webpack_require__, /*! ../adapters/kysely-adapter/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/index.mjs\"));\n\t\treturn kyselyAdapter(kysely, {\n\t\t\ttype: databaseType || \"sqlite\",\n\t\t\tdebugLogs: opts.database && \"debugLogs\" in opts.database ? opts.database.debugLogs : false,\n\t\t\ttransaction\n\t\t})(opts);\n\t});\n}\n\n//#endregion\n\n//# sourceMappingURL=adapter-kysely.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9hZGFwdGVyLWt5c2VseS5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBQ007O0FBRTFEO0FBQ0E7QUFDQSxRQUFRLGlFQUFjO0FBQ3RCLFVBQVUsc0JBQXNCLFFBQVEsNk9BQThDO0FBQ3RGLFVBQVUsb0NBQW9DO0FBQzlDLHlCQUF5QixvRUFBZTtBQUN4QyxVQUFVLGdCQUFnQixRQUFRLDZPQUE4QztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7O0FBRUE7QUFDc0I7QUFDdEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvYWRhcHRlci1reXNlbHkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VBZGFwdGVyIH0gZnJvbSBcIi4vYWRhcHRlci1iYXNlLm1qc1wiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvYWRhcHRlci1reXNlbHkudHNcbmFzeW5jIGZ1bmN0aW9uIGdldEFkYXB0ZXIob3B0aW9ucykge1xuXHRyZXR1cm4gZ2V0QmFzZUFkYXB0ZXIob3B0aW9ucywgYXN5bmMgKG9wdHMpID0+IHtcblx0XHRjb25zdCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSA9IGF3YWl0IGltcG9ydChcIi4uL2FkYXB0ZXJzL2t5c2VseS1hZGFwdGVyL2luZGV4Lm1qc1wiKTtcblx0XHRjb25zdCB7IGt5c2VseSwgZGF0YWJhc2VUeXBlLCB0cmFuc2FjdGlvbiB9ID0gYXdhaXQgY3JlYXRlS3lzZWx5QWRhcHRlcihvcHRzKTtcblx0XHRpZiAoIWt5c2VseSkgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlIGFkYXB0ZXJcIik7XG5cdFx0Y29uc3QgeyBreXNlbHlBZGFwdGVyIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9hZGFwdGVycy9reXNlbHktYWRhcHRlci9pbmRleC5tanNcIik7XG5cdFx0cmV0dXJuIGt5c2VseUFkYXB0ZXIoa3lzZWx5LCB7XG5cdFx0XHR0eXBlOiBkYXRhYmFzZVR5cGUgfHwgXCJzcWxpdGVcIixcblx0XHRcdGRlYnVnTG9nczogb3B0cy5kYXRhYmFzZSAmJiBcImRlYnVnTG9nc1wiIGluIG9wdHMuZGF0YWJhc2UgPyBvcHRzLmRhdGFiYXNlLmRlYnVnTG9ncyA6IGZhbHNlLFxuXHRcdFx0dHJhbnNhY3Rpb25cblx0XHR9KShvcHRzKTtcblx0fSk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0QWRhcHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWRhcHRlci1reXNlbHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/field-converter.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertFromDB: () => (/* binding */ convertFromDB),\n/* harmony export */   convertToDB: () => (/* binding */ convertToDB)\n/* harmony export */ });\n//#region src/db/field-converter.ts\nfunction convertToDB(fields, values) {\n\tconst result = values.id ? { id: values.id } : {};\n\tfor (const key in fields) {\n\t\tconst field = fields[key];\n\t\tconst value = values[key];\n\t\tif (value === void 0) continue;\n\t\tresult[field.fieldName || key] = value;\n\t}\n\treturn result;\n}\nfunction convertFromDB(fields, values) {\n\tif (!values) return null;\n\tconst result = { id: values.id };\n\tfor (const [key, value] of Object.entries(fields)) result[key] = values[value.fieldName || key];\n\treturn result;\n}\n\n//#endregion\n\n//# sourceMappingURL=field-converter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9maWVsZC1jb252ZXJ0ZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBLDhCQUE4QixnQkFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2ZpZWxkLWNvbnZlcnRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9kYi9maWVsZC1jb252ZXJ0ZXIudHNcbmZ1bmN0aW9uIGNvbnZlcnRUb0RCKGZpZWxkcywgdmFsdWVzKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHZhbHVlcy5pZCA/IHsgaWQ6IHZhbHVlcy5pZCB9IDoge307XG5cdGZvciAoY29uc3Qga2V5IGluIGZpZWxkcykge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0Y29uc3QgdmFsdWUgPSB2YWx1ZXNba2V5XTtcblx0XHRpZiAodmFsdWUgPT09IHZvaWQgMCkgY29udGludWU7XG5cdFx0cmVzdWx0W2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXldID0gdmFsdWU7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRGcm9tREIoZmllbGRzLCB2YWx1ZXMpIHtcblx0aWYgKCF2YWx1ZXMpIHJldHVybiBudWxsO1xuXHRjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZXMuaWQgfTtcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmllbGRzKSkgcmVzdWx0W2tleV0gPSB2YWx1ZXNbdmFsdWUuZmllbGROYW1lIHx8IGtleV07XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY29udmVydEZyb21EQiwgY29udmVydFRvREIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpZWxkLWNvbnZlcnRlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/field.mjs":
/*!****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/field.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createFieldAttribute: () => (/* binding */ createFieldAttribute)\n/* harmony export */ });\n//#region src/db/field.ts\nconst createFieldAttribute = (type, config) => {\n\treturn {\n\t\ttype,\n\t\t...config\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=field.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9maWVsZC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dDO0FBQ2hDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2ZpZWxkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2RiL2ZpZWxkLnRzXG5jb25zdCBjcmVhdGVGaWVsZEF0dHJpYnV0ZSA9ICh0eXBlLCBjb25maWcpID0+IHtcblx0cmV0dXJuIHtcblx0XHR0eXBlLFxuXHRcdC4uLmNvbmZpZ1xuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVGaWVsZEF0dHJpYnV0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmllbGQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/field.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/get-migration.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getMigrations: () => (/* binding */ getMigrations),\n/* harmony export */   matchType: () => (/* binding */ matchType)\n/* harmony export */ });\n/* harmony import */ var _adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../adapters/kysely-adapter/dialect.mjs */ \"(rsc)/./node_modules/better-auth/dist/adapters/kysely-adapter/dialect.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kysely */ \"(rsc)/./node_modules/kysely/dist/esm/raw-builder/sql.js\");\n/* harmony import */ var _better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/db/adapter */ \"(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/get-migration.ts\nconst map = {\n\tpostgres: {\n\t\tstring: [\n\t\t\t\"character varying\",\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int4\",\n\t\t\t\"integer\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"numeric\",\n\t\t\t\"real\",\n\t\t\t\"double precision\"\n\t\t],\n\t\tboolean: [\"bool\", \"boolean\"],\n\t\tdate: [\n\t\t\t\"timestamptz\",\n\t\t\t\"timestamp\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\", \"jsonb\"]\n\t},\n\tmysql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"text\",\n\t\t\t\"uuid\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"integer\",\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"boolean\", \"tinyint\"],\n\t\tdate: [\n\t\t\t\"timestamp\",\n\t\t\t\"datetime\",\n\t\t\t\"date\"\n\t\t],\n\t\tjson: [\"json\"]\n\t},\n\tsqlite: {\n\t\tstring: [\"TEXT\"],\n\t\tnumber: [\"INTEGER\", \"REAL\"],\n\t\tboolean: [\"INTEGER\", \"BOOLEAN\"],\n\t\tdate: [\"DATE\", \"INTEGER\"],\n\t\tjson: [\"TEXT\"]\n\t},\n\tmssql: {\n\t\tstring: [\n\t\t\t\"varchar\",\n\t\t\t\"nvarchar\",\n\t\t\t\"uniqueidentifier\"\n\t\t],\n\t\tnumber: [\n\t\t\t\"int\",\n\t\t\t\"bigint\",\n\t\t\t\"smallint\",\n\t\t\t\"decimal\",\n\t\t\t\"float\",\n\t\t\t\"double\"\n\t\t],\n\t\tboolean: [\"bit\", \"smallint\"],\n\t\tdate: [\n\t\t\t\"datetime2\",\n\t\t\t\"date\",\n\t\t\t\"datetime\"\n\t\t],\n\t\tjson: [\"varchar\", \"nvarchar\"]\n\t}\n};\nfunction matchType(columnDataType, fieldType, dbType) {\n\tfunction normalize(type) {\n\t\treturn type.toLowerCase().split(\"(\")[0].trim();\n\t}\n\tif (fieldType === \"string[]\" || fieldType === \"number[]\") return columnDataType.toLowerCase().includes(\"json\");\n\tconst types = map[dbType];\n\treturn (Array.isArray(fieldType) ? types[\"string\"].map((t) => t.toLowerCase()) : types[fieldType].map((t) => t.toLowerCase())).includes(normalize(columnDataType));\n}\n/**\n* Get the current PostgreSQL schema (search_path) for the database connection\n* Returns the first schema in the search_path, defaulting to 'public' if not found\n*/\nasync function getPostgresSchema(db) {\n\ttry {\n\t\tconst result = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`SHOW search_path`.execute(db);\n\t\tif (result.rows[0]?.search_path) return result.rows[0].search_path.split(\",\").map((s) => s.trim()).map((s) => s.replace(/^[\"']|[\"']$/g, \"\")).filter((s) => !s.startsWith(\"$\"))[0] || \"public\";\n\t} catch {}\n\treturn \"public\";\n}\nasync function getMigrations(config) {\n\tconst betterAuthSchema = (0,_get_schema_mjs__WEBPACK_IMPORTED_MODULE_1__.getSchema)(config);\n\tconst logger$1 = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_3__.createLogger)(config.logger);\n\tlet { kysely: db, databaseType: dbType } = await (0,_adapters_kysely_adapter_dialect_mjs__WEBPACK_IMPORTED_MODULE_0__.createKyselyAdapter)(config);\n\tif (!dbType) {\n\t\tlogger$1.warn(\"Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this.\");\n\t\tdbType = \"sqlite\";\n\t}\n\tif (!db) {\n\t\tlogger$1.error(\"Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter.\");\n\t\tprocess.exit(1);\n\t}\n\tlet currentSchema = \"public\";\n\tif (dbType === \"postgres\") {\n\t\tcurrentSchema = await getPostgresSchema(db);\n\t\tlogger$1.debug(`PostgreSQL migration: Using schema '${currentSchema}' (from search_path)`);\n\t\ttry {\n\t\t\tif (!(await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT schema_name \n\t\t\t\tFROM information_schema.schemata \n\t\t\t\tWHERE schema_name = ${currentSchema}\n\t\t\t`.execute(db)).rows[0]) logger$1.warn(`Schema '${currentSchema}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`);\n\t\t} catch (error) {\n\t\t\tlogger$1.debug(`Could not verify schema existence: ${error instanceof Error ? error.message : String(error)}`);\n\t\t}\n\t}\n\tconst allTableMetadata = await db.introspection.getTables();\n\tlet tableMetadata = allTableMetadata;\n\tif (dbType === \"postgres\") try {\n\t\tconst tablesInSchema = await (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`\n\t\t\t\tSELECT table_name \n\t\t\t\tFROM information_schema.tables \n\t\t\t\tWHERE table_schema = ${currentSchema}\n\t\t\t\tAND table_type = 'BASE TABLE'\n\t\t\t`.execute(db);\n\t\tconst tableNamesInSchema = new Set(tablesInSchema.rows.map((row) => row.table_name));\n\t\ttableMetadata = allTableMetadata.filter((table) => table.schema === currentSchema && tableNamesInSchema.has(table.name));\n\t\tlogger$1.debug(`Found ${tableMetadata.length} table(s) in schema '${currentSchema}': ${tableMetadata.map((t) => t.name).join(\", \") || \"(none)\"}`);\n\t} catch (error) {\n\t\tlogger$1.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${error instanceof Error ? error.message : String(error)}`);\n\t}\n\tconst toBeCreated = [];\n\tconst toBeAdded = [];\n\tfor (const [key, value] of Object.entries(betterAuthSchema)) {\n\t\tconst table = tableMetadata.find((t) => t.name === key);\n\t\tif (!table) {\n\t\t\tconst tIndex = toBeCreated.findIndex((t) => t.table === key);\n\t\t\tconst tableData = {\n\t\t\t\ttable: key,\n\t\t\t\tfields: value.fields,\n\t\t\t\torder: value.order || Infinity\n\t\t\t};\n\t\t\tconst insertIndex = toBeCreated.findIndex((t) => (t.order || Infinity) > tableData.order);\n\t\t\tif (insertIndex === -1) if (tIndex === -1) toBeCreated.push(tableData);\n\t\t\telse toBeCreated[tIndex].fields = {\n\t\t\t\t...toBeCreated[tIndex].fields,\n\t\t\t\t...value.fields\n\t\t\t};\n\t\t\telse toBeCreated.splice(insertIndex, 0, tableData);\n\t\t\tcontinue;\n\t\t}\n\t\tconst toBeAddedFields = {};\n\t\tfor (const [fieldName, field] of Object.entries(value.fields)) {\n\t\t\tconst column = table.columns.find((c) => c.name === fieldName);\n\t\t\tif (!column) {\n\t\t\t\ttoBeAddedFields[fieldName] = field;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (matchType(column.dataType, field.type, dbType)) continue;\n\t\t\telse logger$1.warn(`Field ${fieldName} in table ${key} has a different type in the database. Expected ${field.type} but got ${column.dataType}.`);\n\t\t}\n\t\tif (Object.keys(toBeAddedFields).length > 0) toBeAdded.push({\n\t\t\ttable: key,\n\t\t\tfields: toBeAddedFields,\n\t\t\torder: value.order || Infinity\n\t\t});\n\t}\n\tconst migrations = [];\n\tconst useUUIDs = config.advanced?.database?.generateId === \"uuid\";\n\tconst useNumberId = config.advanced?.database?.useNumberId || config.advanced?.database?.generateId === \"serial\";\n\tfunction getType(field, fieldName) {\n\t\tconst type = field.type;\n\t\tconst provider = dbType || \"sqlite\";\n\t\tconst typeMap = {\n\t\t\tstring: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"text\",\n\t\t\t\tmysql: field.unique ? \"varchar(255)\" : field.references ? \"varchar(36)\" : field.sortable ? \"varchar(255)\" : field.index ? \"varchar(255)\" : \"text\",\n\t\t\t\tmssql: field.unique || field.sortable ? \"varchar(255)\" : field.references ? \"varchar(36)\" : \"varchar(8000)\"\n\t\t\t},\n\t\t\tboolean: {\n\t\t\t\tsqlite: \"integer\",\n\t\t\t\tpostgres: \"boolean\",\n\t\t\t\tmysql: \"boolean\",\n\t\t\t\tmssql: \"smallint\"\n\t\t\t},\n\t\t\tnumber: {\n\t\t\t\tsqlite: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tpostgres: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmysql: field.bigint ? \"bigint\" : \"integer\",\n\t\t\t\tmssql: field.bigint ? \"bigint\" : \"integer\"\n\t\t\t},\n\t\t\tdate: {\n\t\t\t\tsqlite: \"date\",\n\t\t\t\tpostgres: \"timestamptz\",\n\t\t\t\tmysql: \"timestamp(3)\",\n\t\t\t\tmssql: (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`datetime2(3)`\n\t\t\t},\n\t\t\tjson: {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\tid: {\n\t\t\t\tpostgres: useNumberId ? (0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`integer GENERATED BY DEFAULT AS IDENTITY` : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\tforeignKeyId: {\n\t\t\t\tpostgres: useNumberId ? \"integer\" : useUUIDs ? \"uuid\" : \"text\",\n\t\t\t\tmysql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tmssql: useNumberId ? \"integer\" : useUUIDs ? \"varchar(36)\" : \"varchar(36)\",\n\t\t\t\tsqlite: useNumberId ? \"integer\" : \"text\"\n\t\t\t},\n\t\t\t\"string[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t},\n\t\t\t\"number[]\": {\n\t\t\t\tsqlite: \"text\",\n\t\t\t\tpostgres: \"jsonb\",\n\t\t\t\tmysql: \"json\",\n\t\t\t\tmssql: \"varchar(8000)\"\n\t\t\t}\n\t\t};\n\t\tif (fieldName === \"id\" || field.references?.field === \"id\") {\n\t\t\tif (fieldName === \"id\") return typeMap.id[provider];\n\t\t\treturn typeMap.foreignKeyId[provider];\n\t\t}\n\t\tif (Array.isArray(type)) return \"text\";\n\t\tif (!(type in typeMap)) throw new Error(`Unsupported field type '${String(type)}' for field '${fieldName}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: \"string\") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);\n\t\treturn typeMap[type][provider];\n\t}\n\tconst getModelName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetModelName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tconst getFieldName = (0,_better_auth_core_db_adapter__WEBPACK_IMPORTED_MODULE_4__.initGetFieldName)({\n\t\tschema: (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_2__.getAuthTables)(config),\n\t\tusePlural: false\n\t});\n\tfunction getReferencePath(model, field) {\n\t\ttry {\n\t\t\treturn `${getModelName(model)}.${getFieldName({\n\t\t\t\tmodel,\n\t\t\t\tfield\n\t\t\t})}`;\n\t\t} catch {\n\t\t\treturn `${model}.${field}`;\n\t\t}\n\t}\n\tif (toBeAdded.length) for (const table of toBeAdded) for (const [fieldName, field] of Object.entries(table.fields)) {\n\t\tconst type = getType(field, fieldName);\n\t\tconst builder = db.schema.alterTable(table.table);\n\t\tif (field.index) {\n\t\t\tconst index = db.schema.alterTable(table.table).addIndex(`${table.table}_${fieldName}_idx`);\n\t\t\tmigrations.push(index);\n\t\t}\n\t\tconst built = builder.addColumn(fieldName, type, (col) => {\n\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\tif (field.unique) col = col.unique();\n\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\treturn col;\n\t\t});\n\t\tmigrations.push(built);\n\t}\n\tconst toBeIndexed = [];\n\tif (config.advanced?.database?.useNumberId) logger$1.warn(\"`useNumberId` is deprecated. Please use `generateId` with `serial` instead.\");\n\tif (toBeCreated.length) for (const table of toBeCreated) {\n\t\tconst idType = getType({ type: useNumberId ? \"number\" : \"string\" }, \"id\");\n\t\tlet dbT = db.schema.createTable(table.table).addColumn(\"id\", idType, (col) => {\n\t\t\tif (useNumberId) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"sqlite\") return col.primaryKey().notNull();\n\t\t\t\telse if (dbType === \"mssql\") return col.identity().primaryKey().notNull();\n\t\t\t\treturn col.autoIncrement().primaryKey().notNull();\n\t\t\t}\n\t\t\tif (useUUIDs) {\n\t\t\t\tif (dbType === \"postgres\") return col.primaryKey().defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`pg_catalog.gen_random_uuid()`).notNull();\n\t\t\t\treturn col.primaryKey().notNull();\n\t\t\t}\n\t\t\treturn col.primaryKey().notNull();\n\t\t});\n\t\tfor (const [fieldName, field] of Object.entries(table.fields)) {\n\t\t\tconst type = getType(field, fieldName);\n\t\t\tdbT = dbT.addColumn(fieldName, type, (col) => {\n\t\t\t\tcol = field.required !== false ? col.notNull() : col;\n\t\t\t\tif (field.references) col = col.references(getReferencePath(field.references.model, field.references.field)).onDelete(field.references.onDelete || \"cascade\");\n\t\t\t\tif (field.unique) col = col.unique();\n\t\t\t\tif (field.type === \"date\" && typeof field.defaultValue === \"function\" && (dbType === \"postgres\" || dbType === \"mysql\" || dbType === \"mssql\")) if (dbType === \"mysql\") col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP(3)`);\n\t\t\t\telse col = col.defaultTo((0,kysely__WEBPACK_IMPORTED_MODULE_5__.sql)`CURRENT_TIMESTAMP`);\n\t\t\t\treturn col;\n\t\t\t});\n\t\t\tif (field.index) {\n\t\t\t\tconst builder = db.schema.createIndex(`${table.table}_${fieldName}_${field.unique ? \"uidx\" : \"idx\"}`).on(table.table).columns([fieldName]);\n\t\t\t\ttoBeIndexed.push(field.unique ? builder.unique() : builder);\n\t\t\t}\n\t\t}\n\t\tmigrations.push(dbT);\n\t}\n\tif (toBeIndexed.length) for (const index of toBeIndexed) migrations.push(index);\n\tasync function runMigrations() {\n\t\tfor (const migration of migrations) await migration.execute();\n\t}\n\tasync function compileMigrations() {\n\t\treturn migrations.map((m) => m.compile().sql).join(\";\\n\\n\") + \";\";\n\t}\n\treturn {\n\t\ttoBeCreated,\n\t\ttoBeAdded,\n\t\trunMigrations,\n\t\tcompileMigrations\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=get-migration.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9nZXQtbWlncmF0aW9uLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE2RTtBQUNoQztBQUNRO0FBQ0E7QUFDeEI7QUFDcUQ7O0FBRWxGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQ0FBRztBQUMxQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMERBQVM7QUFDbkMsa0JBQWtCLG1FQUFZO0FBQzlCLE9BQU8sbUNBQW1DLFFBQVEseUZBQW1CO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsY0FBYztBQUN0RTtBQUNBLGVBQWUsMkNBQUc7QUFDbEI7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQixvREFBb0QsY0FBYztBQUNsRSxJQUFJO0FBQ0osd0RBQXdELHVEQUF1RDtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDJDQUFHO0FBQ2xDO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0JBQXNCLHNCQUFzQixjQUFjLEtBQUssd0RBQXdEO0FBQ2pKLEdBQUc7QUFDSCwwRkFBMEYsdURBQXVEO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVyxXQUFXLEtBQUssaURBQWlELFlBQVksVUFBVSxnQkFBZ0I7QUFDako7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDJDQUFHO0FBQ2QsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0QkFBNEIsMkNBQUc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsYUFBYSxlQUFlLFVBQVU7QUFDM0c7QUFDQTtBQUNBLHNCQUFzQiw4RUFBZ0I7QUFDdEMsVUFBVSxtRUFBYTtBQUN2QjtBQUNBLEVBQUU7QUFDRixzQkFBc0IsOEVBQWdCO0FBQ3RDLFVBQVUsbUVBQWE7QUFDdkI7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGFBQWEsb0JBQW9CLEdBQUc7QUFDcEM7QUFDQTtBQUNBLElBQUksRUFBRTtBQUNOLElBQUk7QUFDSixhQUFhLE1BQU0sR0FBRyxNQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxZQUFZLEdBQUcsVUFBVTtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2TEFBNkwsMkNBQUc7QUFDaE0sNEJBQTRCLDJDQUFHO0FBQy9CO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseUNBQXlDO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsMkNBQUc7QUFDcEU7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhMQUE4TCwyQ0FBRztBQUNqTSw2QkFBNkIsMkNBQUc7QUFDaEM7QUFDQSxJQUFJO0FBQ0o7QUFDQSw2Q0FBNkMsWUFBWSxHQUFHLFVBQVUsR0FBRyw4QkFBOEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1REFBdUQsV0FBVztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ29DO0FBQ3BDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL2dldC1taWdyYXRpb24ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUt5c2VseUFkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlcnMva3lzZWx5LWFkYXB0ZXIvZGlhbGVjdC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRBdXRoVGFibGVzIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiXCI7XG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5pbXBvcnQgeyBzcWwgfSBmcm9tIFwia3lzZWx5XCI7XG5pbXBvcnQgeyBpbml0R2V0RmllbGROYW1lLCBpbml0R2V0TW9kZWxOYW1lIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2RiL2FkYXB0ZXJcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9nZXQtbWlncmF0aW9uLnRzXG5jb25zdCBtYXAgPSB7XG5cdHBvc3RncmVzOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcImNoYXJhY3RlciB2YXJ5aW5nXCIsXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnQ0XCIsXG5cdFx0XHRcImludGVnZXJcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcIm51bWVyaWNcIixcblx0XHRcdFwicmVhbFwiLFxuXHRcdFx0XCJkb3VibGUgcHJlY2lzaW9uXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJvb2xcIiwgXCJib29sZWFuXCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwidGltZXN0YW1wdHpcIixcblx0XHRcdFwidGltZXN0YW1wXCIsXG5cdFx0XHRcImRhdGVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1wianNvblwiLCBcImpzb25iXCJdXG5cdH0sXG5cdG15c3FsOiB7XG5cdFx0c3RyaW5nOiBbXG5cdFx0XHRcInZhcmNoYXJcIixcblx0XHRcdFwidGV4dFwiLFxuXHRcdFx0XCJ1dWlkXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRlZ2VyXCIsXG5cdFx0XHRcImludFwiLFxuXHRcdFx0XCJiaWdpbnRcIixcblx0XHRcdFwic21hbGxpbnRcIixcblx0XHRcdFwiZGVjaW1hbFwiLFxuXHRcdFx0XCJmbG9hdFwiLFxuXHRcdFx0XCJkb3VibGVcIlxuXHRcdF0sXG5cdFx0Ym9vbGVhbjogW1wiYm9vbGVhblwiLCBcInRpbnlpbnRcIl0sXG5cdFx0ZGF0ZTogW1xuXHRcdFx0XCJ0aW1lc3RhbXBcIixcblx0XHRcdFwiZGF0ZXRpbWVcIixcblx0XHRcdFwiZGF0ZVwiXG5cdFx0XSxcblx0XHRqc29uOiBbXCJqc29uXCJdXG5cdH0sXG5cdHNxbGl0ZToge1xuXHRcdHN0cmluZzogW1wiVEVYVFwiXSxcblx0XHRudW1iZXI6IFtcIklOVEVHRVJcIiwgXCJSRUFMXCJdLFxuXHRcdGJvb2xlYW46IFtcIklOVEVHRVJcIiwgXCJCT09MRUFOXCJdLFxuXHRcdGRhdGU6IFtcIkRBVEVcIiwgXCJJTlRFR0VSXCJdLFxuXHRcdGpzb246IFtcIlRFWFRcIl1cblx0fSxcblx0bXNzcWw6IHtcblx0XHRzdHJpbmc6IFtcblx0XHRcdFwidmFyY2hhclwiLFxuXHRcdFx0XCJudmFyY2hhclwiLFxuXHRcdFx0XCJ1bmlxdWVpZGVudGlmaWVyXCJcblx0XHRdLFxuXHRcdG51bWJlcjogW1xuXHRcdFx0XCJpbnRcIixcblx0XHRcdFwiYmlnaW50XCIsXG5cdFx0XHRcInNtYWxsaW50XCIsXG5cdFx0XHRcImRlY2ltYWxcIixcblx0XHRcdFwiZmxvYXRcIixcblx0XHRcdFwiZG91YmxlXCJcblx0XHRdLFxuXHRcdGJvb2xlYW46IFtcImJpdFwiLCBcInNtYWxsaW50XCJdLFxuXHRcdGRhdGU6IFtcblx0XHRcdFwiZGF0ZXRpbWUyXCIsXG5cdFx0XHRcImRhdGVcIixcblx0XHRcdFwiZGF0ZXRpbWVcIlxuXHRcdF0sXG5cdFx0anNvbjogW1widmFyY2hhclwiLCBcIm52YXJjaGFyXCJdXG5cdH1cbn07XG5mdW5jdGlvbiBtYXRjaFR5cGUoY29sdW1uRGF0YVR5cGUsIGZpZWxkVHlwZSwgZGJUeXBlKSB7XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSh0eXBlKSB7XG5cdFx0cmV0dXJuIHR5cGUudG9Mb3dlckNhc2UoKS5zcGxpdChcIihcIilbMF0udHJpbSgpO1xuXHR9XG5cdGlmIChmaWVsZFR5cGUgPT09IFwic3RyaW5nW11cIiB8fCBmaWVsZFR5cGUgPT09IFwibnVtYmVyW11cIikgcmV0dXJuIGNvbHVtbkRhdGFUeXBlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJqc29uXCIpO1xuXHRjb25zdCB0eXBlcyA9IG1hcFtkYlR5cGVdO1xuXHRyZXR1cm4gKEFycmF5LmlzQXJyYXkoZmllbGRUeXBlKSA/IHR5cGVzW1wic3RyaW5nXCJdLm1hcCgodCkgPT4gdC50b0xvd2VyQ2FzZSgpKSA6IHR5cGVzW2ZpZWxkVHlwZV0ubWFwKCh0KSA9PiB0LnRvTG93ZXJDYXNlKCkpKS5pbmNsdWRlcyhub3JtYWxpemUoY29sdW1uRGF0YVR5cGUpKTtcbn1cbi8qKlxuKiBHZXQgdGhlIGN1cnJlbnQgUG9zdGdyZVNRTCBzY2hlbWEgKHNlYXJjaF9wYXRoKSBmb3IgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb25cbiogUmV0dXJucyB0aGUgZmlyc3Qgc2NoZW1hIGluIHRoZSBzZWFyY2hfcGF0aCwgZGVmYXVsdGluZyB0byAncHVibGljJyBpZiBub3QgZm91bmRcbiovXG5hc3luYyBmdW5jdGlvbiBnZXRQb3N0Z3Jlc1NjaGVtYShkYikge1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNxbGBTSE9XIHNlYXJjaF9wYXRoYC5leGVjdXRlKGRiKTtcblx0XHRpZiAocmVzdWx0LnJvd3NbMF0/LnNlYXJjaF9wYXRoKSByZXR1cm4gcmVzdWx0LnJvd3NbMF0uc2VhcmNoX3BhdGguc3BsaXQoXCIsXCIpLm1hcCgocykgPT4gcy50cmltKCkpLm1hcCgocykgPT4gcy5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpKS5maWx0ZXIoKHMpID0+ICFzLnN0YXJ0c1dpdGgoXCIkXCIpKVswXSB8fCBcInB1YmxpY1wiO1xuXHR9IGNhdGNoIHt9XG5cdHJldHVybiBcInB1YmxpY1wiO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0TWlncmF0aW9ucyhjb25maWcpIHtcblx0Y29uc3QgYmV0dGVyQXV0aFNjaGVtYSA9IGdldFNjaGVtYShjb25maWcpO1xuXHRjb25zdCBsb2dnZXIkMSA9IGNyZWF0ZUxvZ2dlcihjb25maWcubG9nZ2VyKTtcblx0bGV0IHsga3lzZWx5OiBkYiwgZGF0YWJhc2VUeXBlOiBkYlR5cGUgfSA9IGF3YWl0IGNyZWF0ZUt5c2VseUFkYXB0ZXIoY29uZmlnKTtcblx0aWYgKCFkYlR5cGUpIHtcblx0XHRsb2dnZXIkMS53YXJuKFwiQ291bGQgbm90IGRldGVybWluZSBkYXRhYmFzZSB0eXBlLCBkZWZhdWx0aW5nIHRvIHNxbGl0ZS4gUGxlYXNlIHByb3ZpZGUgYSB0eXBlIGluIHRoZSBkYXRhYmFzZSBvcHRpb25zIHRvIGF2b2lkIHRoaXMuXCIpO1xuXHRcdGRiVHlwZSA9IFwic3FsaXRlXCI7XG5cdH1cblx0aWYgKCFkYikge1xuXHRcdGxvZ2dlciQxLmVycm9yKFwiT25seSBreXNlbHkgYWRhcHRlciBpcyBzdXBwb3J0ZWQgZm9yIG1pZ3JhdGlvbnMuIFlvdSBjYW4gdXNlIGBnZW5lcmF0ZWAgY29tbWFuZCB0byBnZW5lcmF0ZSB0aGUgc2NoZW1hLCBpZiB5b3UncmUgdXNpbmcgYSBkaWZmZXJlbnQgYWRhcHRlci5cIik7XG5cdFx0cHJvY2Vzcy5leGl0KDEpO1xuXHR9XG5cdGxldCBjdXJyZW50U2NoZW1hID0gXCJwdWJsaWNcIjtcblx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSB7XG5cdFx0Y3VycmVudFNjaGVtYSA9IGF3YWl0IGdldFBvc3RncmVzU2NoZW1hKGRiKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgUG9zdGdyZVNRTCBtaWdyYXRpb246IFVzaW5nIHNjaGVtYSAnJHtjdXJyZW50U2NoZW1hfScgKGZyb20gc2VhcmNoX3BhdGgpYCk7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICghKGF3YWl0IHNxbGBcblx0XHRcdFx0U0VMRUNUIHNjaGVtYV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5zY2hlbWF0YSBcblx0XHRcdFx0V0hFUkUgc2NoZW1hX25hbWUgPSAke2N1cnJlbnRTY2hlbWF9XG5cdFx0XHRgLmV4ZWN1dGUoZGIpKS5yb3dzWzBdKSBsb2dnZXIkMS53YXJuKGBTY2hlbWEgJyR7Y3VycmVudFNjaGVtYX0nIGRvZXMgbm90IGV4aXN0LiBUYWJsZXMgd2lsbCBiZSBpbnNwZWN0ZWQgZnJvbSBhdmFpbGFibGUgc2NoZW1hcy4gQ29uc2lkZXIgY3JlYXRpbmcgdGhlIHNjaGVtYSBmaXJzdCBvciBjaGVja2luZyB5b3VyIGRhdGFiYXNlIGNvbmZpZ3VyYXRpb24uYCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGxvZ2dlciQxLmRlYnVnKGBDb3VsZCBub3QgdmVyaWZ5IHNjaGVtYSBleGlzdGVuY2U6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHRcdH1cblx0fVxuXHRjb25zdCBhbGxUYWJsZU1ldGFkYXRhID0gYXdhaXQgZGIuaW50cm9zcGVjdGlvbi5nZXRUYWJsZXMoKTtcblx0bGV0IHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhO1xuXHRpZiAoZGJUeXBlID09PSBcInBvc3RncmVzXCIpIHRyeSB7XG5cdFx0Y29uc3QgdGFibGVzSW5TY2hlbWEgPSBhd2FpdCBzcWxgXG5cdFx0XHRcdFNFTEVDVCB0YWJsZV9uYW1lIFxuXHRcdFx0XHRGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgXG5cdFx0XHRcdFdIRVJFIHRhYmxlX3NjaGVtYSA9ICR7Y3VycmVudFNjaGVtYX1cblx0XHRcdFx0QU5EIHRhYmxlX3R5cGUgPSAnQkFTRSBUQUJMRSdcblx0XHRcdGAuZXhlY3V0ZShkYik7XG5cdFx0Y29uc3QgdGFibGVOYW1lc0luU2NoZW1hID0gbmV3IFNldCh0YWJsZXNJblNjaGVtYS5yb3dzLm1hcCgocm93KSA9PiByb3cudGFibGVfbmFtZSkpO1xuXHRcdHRhYmxlTWV0YWRhdGEgPSBhbGxUYWJsZU1ldGFkYXRhLmZpbHRlcigodGFibGUpID0+IHRhYmxlLnNjaGVtYSA9PT0gY3VycmVudFNjaGVtYSAmJiB0YWJsZU5hbWVzSW5TY2hlbWEuaGFzKHRhYmxlLm5hbWUpKTtcblx0XHRsb2dnZXIkMS5kZWJ1ZyhgRm91bmQgJHt0YWJsZU1ldGFkYXRhLmxlbmd0aH0gdGFibGUocykgaW4gc2NoZW1hICcke2N1cnJlbnRTY2hlbWF9JzogJHt0YWJsZU1ldGFkYXRhLm1hcCgodCkgPT4gdC5uYW1lKS5qb2luKFwiLCBcIikgfHwgXCIobm9uZSlcIn1gKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRsb2dnZXIkMS53YXJuKGBDb3VsZCBub3QgZmlsdGVyIHRhYmxlcyBieSBzY2hlbWEuIFVzaW5nIGFsbCBkaXNjb3ZlcmVkIHRhYmxlcy4gRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpfWApO1xuXHR9XG5cdGNvbnN0IHRvQmVDcmVhdGVkID0gW107XG5cdGNvbnN0IHRvQmVBZGRlZCA9IFtdO1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhiZXR0ZXJBdXRoU2NoZW1hKSkge1xuXHRcdGNvbnN0IHRhYmxlID0gdGFibGVNZXRhZGF0YS5maW5kKCh0KSA9PiB0Lm5hbWUgPT09IGtleSk7XG5cdFx0aWYgKCF0YWJsZSkge1xuXHRcdFx0Y29uc3QgdEluZGV4ID0gdG9CZUNyZWF0ZWQuZmluZEluZGV4KCh0KSA9PiB0LnRhYmxlID09PSBrZXkpO1xuXHRcdFx0Y29uc3QgdGFibGVEYXRhID0ge1xuXHRcdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0XHRmaWVsZHM6IHZhbHVlLmZpZWxkcyxcblx0XHRcdFx0b3JkZXI6IHZhbHVlLm9yZGVyIHx8IEluZmluaXR5XG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgaW5zZXJ0SW5kZXggPSB0b0JlQ3JlYXRlZC5maW5kSW5kZXgoKHQpID0+ICh0Lm9yZGVyIHx8IEluZmluaXR5KSA+IHRhYmxlRGF0YS5vcmRlcik7XG5cdFx0XHRpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSBpZiAodEluZGV4ID09PSAtMSkgdG9CZUNyZWF0ZWQucHVzaCh0YWJsZURhdGEpO1xuXHRcdFx0ZWxzZSB0b0JlQ3JlYXRlZFt0SW5kZXhdLmZpZWxkcyA9IHtcblx0XHRcdFx0Li4udG9CZUNyZWF0ZWRbdEluZGV4XS5maWVsZHMsXG5cdFx0XHRcdC4uLnZhbHVlLmZpZWxkc1xuXHRcdFx0fTtcblx0XHRcdGVsc2UgdG9CZUNyZWF0ZWQuc3BsaWNlKGluc2VydEluZGV4LCAwLCB0YWJsZURhdGEpO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGNvbnN0IHRvQmVBZGRlZEZpZWxkcyA9IHt9O1xuXHRcdGZvciAoY29uc3QgW2ZpZWxkTmFtZSwgZmllbGRdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlLmZpZWxkcykpIHtcblx0XHRcdGNvbnN0IGNvbHVtbiA9IHRhYmxlLmNvbHVtbnMuZmluZCgoYykgPT4gYy5uYW1lID09PSBmaWVsZE5hbWUpO1xuXHRcdFx0aWYgKCFjb2x1bW4pIHtcblx0XHRcdFx0dG9CZUFkZGVkRmllbGRzW2ZpZWxkTmFtZV0gPSBmaWVsZDtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAobWF0Y2hUeXBlKGNvbHVtbi5kYXRhVHlwZSwgZmllbGQudHlwZSwgZGJUeXBlKSkgY29udGludWU7XG5cdFx0XHRlbHNlIGxvZ2dlciQxLndhcm4oYEZpZWxkICR7ZmllbGROYW1lfSBpbiB0YWJsZSAke2tleX0gaGFzIGEgZGlmZmVyZW50IHR5cGUgaW4gdGhlIGRhdGFiYXNlLiBFeHBlY3RlZCAke2ZpZWxkLnR5cGV9IGJ1dCBnb3QgJHtjb2x1bW4uZGF0YVR5cGV9LmApO1xuXHRcdH1cblx0XHRpZiAoT2JqZWN0LmtleXModG9CZUFkZGVkRmllbGRzKS5sZW5ndGggPiAwKSB0b0JlQWRkZWQucHVzaCh7XG5cdFx0XHR0YWJsZToga2V5LFxuXHRcdFx0ZmllbGRzOiB0b0JlQWRkZWRGaWVsZHMsXG5cdFx0XHRvcmRlcjogdmFsdWUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9KTtcblx0fVxuXHRjb25zdCBtaWdyYXRpb25zID0gW107XG5cdGNvbnN0IHVzZVVVSURzID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJ1dWlkXCI7XG5cdGNvbnN0IHVzZU51bWJlcklkID0gY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8udXNlTnVtYmVySWQgfHwgY29uZmlnLmFkdmFuY2VkPy5kYXRhYmFzZT8uZ2VuZXJhdGVJZCA9PT0gXCJzZXJpYWxcIjtcblx0ZnVuY3Rpb24gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGZpZWxkLnR5cGU7XG5cdFx0Y29uc3QgcHJvdmlkZXIgPSBkYlR5cGUgfHwgXCJzcWxpdGVcIjtcblx0XHRjb25zdCB0eXBlTWFwID0ge1xuXHRcdFx0c3RyaW5nOiB7XG5cdFx0XHRcdHNxbGl0ZTogXCJ0ZXh0XCIsXG5cdFx0XHRcdHBvc3RncmVzOiBcInRleHRcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLnVuaXF1ZSA/IFwidmFyY2hhcigyNTUpXCIgOiBmaWVsZC5yZWZlcmVuY2VzID8gXCJ2YXJjaGFyKDM2KVwiIDogZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQuaW5kZXggPyBcInZhcmNoYXIoMjU1KVwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG1zc3FsOiBmaWVsZC51bmlxdWUgfHwgZmllbGQuc29ydGFibGUgPyBcInZhcmNoYXIoMjU1KVwiIDogZmllbGQucmVmZXJlbmNlcyA/IFwidmFyY2hhcigzNilcIiA6IFwidmFyY2hhcig4MDAwKVwiXG5cdFx0XHR9LFxuXHRcdFx0Ym9vbGVhbjoge1xuXHRcdFx0XHRzcWxpdGU6IFwiaW50ZWdlclwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJib29sZWFuXCIsXG5cdFx0XHRcdG15c3FsOiBcImJvb2xlYW5cIixcblx0XHRcdFx0bXNzcWw6IFwic21hbGxpbnRcIlxuXHRcdFx0fSxcblx0XHRcdG51bWJlcjoge1xuXHRcdFx0XHRzcWxpdGU6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0cG9zdGdyZXM6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXlzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIixcblx0XHRcdFx0bXNzcWw6IGZpZWxkLmJpZ2ludCA/IFwiYmlnaW50XCIgOiBcImludGVnZXJcIlxuXHRcdFx0fSxcblx0XHRcdGRhdGU6IHtcblx0XHRcdFx0c3FsaXRlOiBcImRhdGVcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwidGltZXN0YW1wdHpcIixcblx0XHRcdFx0bXlzcWw6IFwidGltZXN0YW1wKDMpXCIsXG5cdFx0XHRcdG1zc3FsOiBzcWxgZGF0ZXRpbWUyKDMpYFxuXHRcdFx0fSxcblx0XHRcdGpzb246IHtcblx0XHRcdFx0c3FsaXRlOiBcInRleHRcIixcblx0XHRcdFx0cG9zdGdyZXM6IFwianNvbmJcIixcblx0XHRcdFx0bXlzcWw6IFwianNvblwiLFxuXHRcdFx0XHRtc3NxbDogXCJ2YXJjaGFyKDgwMDApXCJcblx0XHRcdH0sXG5cdFx0XHRpZDoge1xuXHRcdFx0XHRwb3N0Z3JlczogdXNlTnVtYmVySWQgPyBzcWxgaW50ZWdlciBHRU5FUkFURUQgQlkgREVGQVVMVCBBUyBJREVOVElUWWAgOiB1c2VVVUlEcyA/IFwidXVpZFwiIDogXCJ0ZXh0XCIsXG5cdFx0XHRcdG15c3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdG1zc3FsOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInZhcmNoYXIoMzYpXCIgOiBcInZhcmNoYXIoMzYpXCIsXG5cdFx0XHRcdHNxbGl0ZTogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IFwidGV4dFwiXG5cdFx0XHR9LFxuXHRcdFx0Zm9yZWlnbktleUlkOiB7XG5cdFx0XHRcdHBvc3RncmVzOiB1c2VOdW1iZXJJZCA/IFwiaW50ZWdlclwiIDogdXNlVVVJRHMgPyBcInV1aWRcIiA6IFwidGV4dFwiLFxuXHRcdFx0XHRteXNxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRtc3NxbDogdXNlTnVtYmVySWQgPyBcImludGVnZXJcIiA6IHVzZVVVSURzID8gXCJ2YXJjaGFyKDM2KVwiIDogXCJ2YXJjaGFyKDM2KVwiLFxuXHRcdFx0XHRzcWxpdGU6IHVzZU51bWJlcklkID8gXCJpbnRlZ2VyXCIgOiBcInRleHRcIlxuXHRcdFx0fSxcblx0XHRcdFwic3RyaW5nW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fSxcblx0XHRcdFwibnVtYmVyW11cIjoge1xuXHRcdFx0XHRzcWxpdGU6IFwidGV4dFwiLFxuXHRcdFx0XHRwb3N0Z3JlczogXCJqc29uYlwiLFxuXHRcdFx0XHRteXNxbDogXCJqc29uXCIsXG5cdFx0XHRcdG1zc3FsOiBcInZhcmNoYXIoODAwMClcIlxuXHRcdFx0fVxuXHRcdH07XG5cdFx0aWYgKGZpZWxkTmFtZSA9PT0gXCJpZFwiIHx8IGZpZWxkLnJlZmVyZW5jZXM/LmZpZWxkID09PSBcImlkXCIpIHtcblx0XHRcdGlmIChmaWVsZE5hbWUgPT09IFwiaWRcIikgcmV0dXJuIHR5cGVNYXAuaWRbcHJvdmlkZXJdO1xuXHRcdFx0cmV0dXJuIHR5cGVNYXAuZm9yZWlnbktleUlkW3Byb3ZpZGVyXTtcblx0XHR9XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHJldHVybiBcInRleHRcIjtcblx0XHRpZiAoISh0eXBlIGluIHR5cGVNYXApKSB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGZpZWxkIHR5cGUgJyR7U3RyaW5nKHR5cGUpfScgZm9yIGZpZWxkICcke2ZpZWxkTmFtZX0nLiBBbGxvd2VkIHR5cGVzIGFyZTogc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIGRhdGUsIHN0cmluZ1tdLCBudW1iZXJbXS4gSWYgeW91IG5lZWQgdG8gc3RvcmUgc3RydWN0dXJlZCBkYXRhLCBzdG9yZSBpdCBhcyBhIEpTT04gc3RyaW5nICh0eXBlOiBcInN0cmluZ1wiKSBvciBzcGxpdCBpdCBpbnRvIHByaW1pdGl2ZSBmaWVsZHMuIFNlZSBodHRwczovL2JldHRlci1hdXRoLmNvbS9kb2NzL2FkdmFuY2VkL3NjaGVtYSNhZGRpdGlvbmFsLWZpZWxkc2ApO1xuXHRcdHJldHVybiB0eXBlTWFwW3R5cGVdW3Byb3ZpZGVyXTtcblx0fVxuXHRjb25zdCBnZXRNb2RlbE5hbWUgPSBpbml0R2V0TW9kZWxOYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRjb25zdCBnZXRGaWVsZE5hbWUgPSBpbml0R2V0RmllbGROYW1lKHtcblx0XHRzY2hlbWE6IGdldEF1dGhUYWJsZXMoY29uZmlnKSxcblx0XHR1c2VQbHVyYWw6IGZhbHNlXG5cdH0pO1xuXHRmdW5jdGlvbiBnZXRSZWZlcmVuY2VQYXRoKG1vZGVsLCBmaWVsZCkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYCR7Z2V0TW9kZWxOYW1lKG1vZGVsKX0uJHtnZXRGaWVsZE5hbWUoe1xuXHRcdFx0XHRtb2RlbCxcblx0XHRcdFx0ZmllbGRcblx0XHRcdH0pfWA7XG5cdFx0fSBjYXRjaCB7XG5cdFx0XHRyZXR1cm4gYCR7bW9kZWx9LiR7ZmllbGR9YDtcblx0XHR9XG5cdH1cblx0aWYgKHRvQmVBZGRlZC5sZW5ndGgpIGZvciAoY29uc3QgdGFibGUgb2YgdG9CZUFkZGVkKSBmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0Y29uc3QgdHlwZSA9IGdldFR5cGUoZmllbGQsIGZpZWxkTmFtZSk7XG5cdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5hbHRlclRhYmxlKHRhYmxlLnRhYmxlKTtcblx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdGNvbnN0IGluZGV4ID0gZGIuc2NoZW1hLmFsdGVyVGFibGUodGFibGUudGFibGUpLmFkZEluZGV4KGAke3RhYmxlLnRhYmxlfV8ke2ZpZWxkTmFtZX1faWR4YCk7XG5cdFx0XHRtaWdyYXRpb25zLnB1c2goaW5kZXgpO1xuXHRcdH1cblx0XHRjb25zdCBidWlsdCA9IGJ1aWxkZXIuYWRkQ29sdW1uKGZpZWxkTmFtZSwgdHlwZSwgKGNvbCkgPT4ge1xuXHRcdFx0Y29sID0gZmllbGQucmVxdWlyZWQgIT09IGZhbHNlID8gY29sLm5vdE51bGwoKSA6IGNvbDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdGlmIChmaWVsZC51bmlxdWUpIGNvbCA9IGNvbC51bmlxdWUoKTtcblx0XHRcdGlmIChmaWVsZC50eXBlID09PSBcImRhdGVcIiAmJiB0eXBlb2YgZmllbGQuZGVmYXVsdFZhbHVlID09PSBcImZ1bmN0aW9uXCIgJiYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiIHx8IGRiVHlwZSA9PT0gXCJteXNxbFwiIHx8IGRiVHlwZSA9PT0gXCJtc3NxbFwiKSkgaWYgKGRiVHlwZSA9PT0gXCJteXNxbFwiKSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUCgzKWApO1xuXHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0cmV0dXJuIGNvbDtcblx0XHR9KTtcblx0XHRtaWdyYXRpb25zLnB1c2goYnVpbHQpO1xuXHR9XG5cdGNvbnN0IHRvQmVJbmRleGVkID0gW107XG5cdGlmIChjb25maWcuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCkgbG9nZ2VyJDEud2FybihcImB1c2VOdW1iZXJJZGAgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBgZ2VuZXJhdGVJZGAgd2l0aCBgc2VyaWFsYCBpbnN0ZWFkLlwiKTtcblx0aWYgKHRvQmVDcmVhdGVkLmxlbmd0aCkgZm9yIChjb25zdCB0YWJsZSBvZiB0b0JlQ3JlYXRlZCkge1xuXHRcdGNvbnN0IGlkVHlwZSA9IGdldFR5cGUoeyB0eXBlOiB1c2VOdW1iZXJJZCA/IFwibnVtYmVyXCIgOiBcInN0cmluZ1wiIH0sIFwiaWRcIik7XG5cdFx0bGV0IGRiVCA9IGRiLnNjaGVtYS5jcmVhdGVUYWJsZSh0YWJsZS50YWJsZSkuYWRkQ29sdW1uKFwiaWRcIiwgaWRUeXBlLCAoY29sKSA9PiB7XG5cdFx0XHRpZiAodXNlTnVtYmVySWQpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdGVsc2UgaWYgKGRiVHlwZSA9PT0gXCJzcWxpdGVcIikgcmV0dXJuIGNvbC5wcmltYXJ5S2V5KCkubm90TnVsbCgpO1xuXHRcdFx0XHRlbHNlIGlmIChkYlR5cGUgPT09IFwibXNzcWxcIikgcmV0dXJuIGNvbC5pZGVudGl0eSgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wuYXV0b0luY3JlbWVudCgpLnByaW1hcnlLZXkoKS5ub3ROdWxsKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodXNlVVVJRHMpIHtcblx0XHRcdFx0aWYgKGRiVHlwZSA9PT0gXCJwb3N0Z3Jlc1wiKSByZXR1cm4gY29sLnByaW1hcnlLZXkoKS5kZWZhdWx0VG8oc3FsYHBnX2NhdGFsb2cuZ2VuX3JhbmRvbV91dWlkKClgKS5ub3ROdWxsKCk7XG5cdFx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjb2wucHJpbWFyeUtleSgpLm5vdE51bGwoKTtcblx0XHR9KTtcblx0XHRmb3IgKGNvbnN0IFtmaWVsZE5hbWUsIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5maWVsZHMpKSB7XG5cdFx0XHRjb25zdCB0eXBlID0gZ2V0VHlwZShmaWVsZCwgZmllbGROYW1lKTtcblx0XHRcdGRiVCA9IGRiVC5hZGRDb2x1bW4oZmllbGROYW1lLCB0eXBlLCAoY29sKSA9PiB7XG5cdFx0XHRcdGNvbCA9IGZpZWxkLnJlcXVpcmVkICE9PSBmYWxzZSA/IGNvbC5ub3ROdWxsKCkgOiBjb2w7XG5cdFx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSBjb2wgPSBjb2wucmVmZXJlbmNlcyhnZXRSZWZlcmVuY2VQYXRoKGZpZWxkLnJlZmVyZW5jZXMubW9kZWwsIGZpZWxkLnJlZmVyZW5jZXMuZmllbGQpKS5vbkRlbGV0ZShmaWVsZC5yZWZlcmVuY2VzLm9uRGVsZXRlIHx8IFwiY2FzY2FkZVwiKTtcblx0XHRcdFx0aWYgKGZpZWxkLnVuaXF1ZSkgY29sID0gY29sLnVuaXF1ZSgpO1xuXHRcdFx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJkYXRlXCIgJiYgdHlwZW9mIGZpZWxkLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiICYmIChkYlR5cGUgPT09IFwicG9zdGdyZXNcIiB8fCBkYlR5cGUgPT09IFwibXlzcWxcIiB8fCBkYlR5cGUgPT09IFwibXNzcWxcIikpIGlmIChkYlR5cGUgPT09IFwibXlzcWxcIikgY29sID0gY29sLmRlZmF1bHRUbyhzcWxgQ1VSUkVOVF9USU1FU1RBTVAoMylgKTtcblx0XHRcdFx0ZWxzZSBjb2wgPSBjb2wuZGVmYXVsdFRvKHNxbGBDVVJSRU5UX1RJTUVTVEFNUGApO1xuXHRcdFx0XHRyZXR1cm4gY29sO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAoZmllbGQuaW5kZXgpIHtcblx0XHRcdFx0Y29uc3QgYnVpbGRlciA9IGRiLnNjaGVtYS5jcmVhdGVJbmRleChgJHt0YWJsZS50YWJsZX1fJHtmaWVsZE5hbWV9XyR7ZmllbGQudW5pcXVlID8gXCJ1aWR4XCIgOiBcImlkeFwifWApLm9uKHRhYmxlLnRhYmxlKS5jb2x1bW5zKFtmaWVsZE5hbWVdKTtcblx0XHRcdFx0dG9CZUluZGV4ZWQucHVzaChmaWVsZC51bmlxdWUgPyBidWlsZGVyLnVuaXF1ZSgpIDogYnVpbGRlcik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG1pZ3JhdGlvbnMucHVzaChkYlQpO1xuXHR9XG5cdGlmICh0b0JlSW5kZXhlZC5sZW5ndGgpIGZvciAoY29uc3QgaW5kZXggb2YgdG9CZUluZGV4ZWQpIG1pZ3JhdGlvbnMucHVzaChpbmRleCk7XG5cdGFzeW5jIGZ1bmN0aW9uIHJ1bk1pZ3JhdGlvbnMoKSB7XG5cdFx0Zm9yIChjb25zdCBtaWdyYXRpb24gb2YgbWlncmF0aW9ucykgYXdhaXQgbWlncmF0aW9uLmV4ZWN1dGUoKTtcblx0fVxuXHRhc3luYyBmdW5jdGlvbiBjb21waWxlTWlncmF0aW9ucygpIHtcblx0XHRyZXR1cm4gbWlncmF0aW9ucy5tYXAoKG0pID0+IG0uY29tcGlsZSgpLnNxbCkuam9pbihcIjtcXG5cXG5cIikgKyBcIjtcIjtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHRvQmVDcmVhdGVkLFxuXHRcdHRvQmVBZGRlZCxcblx0XHRydW5NaWdyYXRpb25zLFxuXHRcdGNvbXBpbGVNaWdyYXRpb25zXG5cdH07XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0TWlncmF0aW9ucywgbWF0Y2hUeXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtbWlncmF0aW9uLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/get-schema.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSchema: () => (/* binding */ getSchema)\n/* harmony export */ });\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/index.mjs\");\n\n\n//#region src/db/get-schema.ts\nfunction getSchema(config) {\n\tconst tables = (0, _index_mjs__WEBPACK_IMPORTED_MODULE_0__.db_exports.getAuthTables)(config);\n\tconst schema = {};\n\tfor (const key in tables) {\n\t\tconst table = tables[key];\n\t\tconst fields = table.fields;\n\t\tconst actualFields = {};\n\t\tObject.entries(fields).forEach(([key$1, field]) => {\n\t\t\tactualFields[field.fieldName || key$1] = field;\n\t\t\tif (field.references) {\n\t\t\t\tconst refTable = tables[field.references.model];\n\t\t\t\tif (refTable) actualFields[field.fieldName || key$1].references = {\n\t\t\t\t\t...field.references,\n\t\t\t\t\tmodel: refTable.modelName,\n\t\t\t\t\tfield: field.references.field\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t\tif (schema[table.modelName]) {\n\t\t\tschema[table.modelName].fields = {\n\t\t\t\t...schema[table.modelName].fields,\n\t\t\t\t...actualFields\n\t\t\t};\n\t\t\tcontinue;\n\t\t}\n\t\tschema[table.modelName] = {\n\t\t\tfields: actualFields,\n\t\t\torder: table.order || Infinity\n\t\t};\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9nZXQtc2NoZW1hLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5Qzs7QUFFekM7QUFDQTtBQUNBLG9CQUFvQixrREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNxQjtBQUNyQiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9nZXQtc2NoZW1hLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYl9leHBvcnRzIH0gZnJvbSBcIi4vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvZ2V0LXNjaGVtYS50c1xuZnVuY3Rpb24gZ2V0U2NoZW1hKGNvbmZpZykge1xuXHRjb25zdCB0YWJsZXMgPSAoMCwgZGJfZXhwb3J0cy5nZXRBdXRoVGFibGVzKShjb25maWcpO1xuXHRjb25zdCBzY2hlbWEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gdGFibGVzKSB7XG5cdFx0Y29uc3QgdGFibGUgPSB0YWJsZXNba2V5XTtcblx0XHRjb25zdCBmaWVsZHMgPSB0YWJsZS5maWVsZHM7XG5cdFx0Y29uc3QgYWN0dWFsRmllbGRzID0ge307XG5cdFx0T2JqZWN0LmVudHJpZXMoZmllbGRzKS5mb3JFYWNoKChba2V5JDEsIGZpZWxkXSkgPT4ge1xuXHRcdFx0YWN0dWFsRmllbGRzW2ZpZWxkLmZpZWxkTmFtZSB8fCBrZXkkMV0gPSBmaWVsZDtcblx0XHRcdGlmIChmaWVsZC5yZWZlcmVuY2VzKSB7XG5cdFx0XHRcdGNvbnN0IHJlZlRhYmxlID0gdGFibGVzW2ZpZWxkLnJlZmVyZW5jZXMubW9kZWxdO1xuXHRcdFx0XHRpZiAocmVmVGFibGUpIGFjdHVhbEZpZWxkc1tmaWVsZC5maWVsZE5hbWUgfHwga2V5JDFdLnJlZmVyZW5jZXMgPSB7XG5cdFx0XHRcdFx0Li4uZmllbGQucmVmZXJlbmNlcyxcblx0XHRcdFx0XHRtb2RlbDogcmVmVGFibGUubW9kZWxOYW1lLFxuXHRcdFx0XHRcdGZpZWxkOiBmaWVsZC5yZWZlcmVuY2VzLmZpZWxkXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0aWYgKHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdKSB7XG5cdFx0XHRzY2hlbWFbdGFibGUubW9kZWxOYW1lXS5maWVsZHMgPSB7XG5cdFx0XHRcdC4uLnNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdLmZpZWxkcyxcblx0XHRcdFx0Li4uYWN0dWFsRmllbGRzXG5cdFx0XHR9O1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdHNjaGVtYVt0YWJsZS5tb2RlbE5hbWVdID0ge1xuXHRcdFx0ZmllbGRzOiBhY3R1YWxGaWVsZHMsXG5cdFx0XHRvcmRlcjogdGFibGUub3JkZXIgfHwgSW5maW5pdHlcblx0XHR9O1xuXHR9XG5cdHJldHVybiBzY2hlbWE7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0U2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1nZXQtc2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/index.mjs":
/*!****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/index.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.accountSchema),\n/* harmony export */   convertFromDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB),\n/* harmony export */   convertToDB: () => (/* reexport safe */ _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.coreSchema),\n/* harmony export */   createFieldAttribute: () => (/* reexport safe */ _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute),\n/* harmony export */   createInternalAdapter: () => (/* reexport safe */ _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter),\n/* harmony export */   db_exports: () => (/* binding */ db_exports),\n/* harmony export */   getAdapter: () => (/* reexport safe */ _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.getAuthTables),\n/* harmony export */   getBaseAdapter: () => (/* reexport safe */ _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter),\n/* harmony export */   getMigrations: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations),\n/* harmony export */   getSchema: () => (/* reexport safe */ _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema),\n/* harmony export */   getWithHooks: () => (/* reexport safe */ _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks),\n/* harmony export */   matchType: () => (/* reexport safe */ _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType),\n/* harmony export */   mergeSchema: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData),\n/* harmony export */   parseSessionInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* reexport safe */ _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.sessionSchema),\n/* harmony export */   toZodSchema: () => (/* reexport safe */ _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.userSchema),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__.verificationSchema)\n/* harmony export */ });\n/* harmony import */ var _virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/rolldown_runtime.mjs */ \"(rsc)/./node_modules/better-auth/dist/_virtual/rolldown_runtime.mjs\");\n/* harmony import */ var _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./adapter-base.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-base.mjs\");\n/* harmony import */ var _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./adapter-kysely.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/adapter-kysely.mjs\");\n/* harmony import */ var _field_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./field.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/field.mjs\");\n/* harmony import */ var _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./field-converter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/field-converter.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./internal-adapter.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\");\n/* harmony import */ var _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./to-zod.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\");\n/* harmony import */ var _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./get-schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-schema.mjs\");\n/* harmony import */ var _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./get-migration.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/get-migration.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/db/index.ts\nvar db_exports = /* @__PURE__ */ (0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__export)({\n\tconvertFromDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertFromDB,\n\tconvertToDB: () => _field_converter_mjs__WEBPACK_IMPORTED_MODULE_4__.convertToDB,\n\tcreateFieldAttribute: () => _field_mjs__WEBPACK_IMPORTED_MODULE_3__.createFieldAttribute,\n\tcreateInternalAdapter: () => _internal_adapter_mjs__WEBPACK_IMPORTED_MODULE_7__.createInternalAdapter,\n\tgetAdapter: () => _adapter_kysely_mjs__WEBPACK_IMPORTED_MODULE_2__.getAdapter,\n\tgetBaseAdapter: () => _adapter_base_mjs__WEBPACK_IMPORTED_MODULE_1__.getBaseAdapter,\n\tgetMigrations: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.getMigrations,\n\tgetSchema: () => _get_schema_mjs__WEBPACK_IMPORTED_MODULE_9__.getSchema,\n\tgetWithHooks: () => _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_6__.getWithHooks,\n\tmatchType: () => _get_migration_mjs__WEBPACK_IMPORTED_MODULE_10__.matchType,\n\tmergeSchema: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.mergeSchema,\n\tparseAccountInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountInput,\n\tparseAccountOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAccountOutput,\n\tparseAdditionalUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseAdditionalUserInput,\n\tparseInputData: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseInputData,\n\tparseSessionInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionInput,\n\tparseSessionOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseSessionOutput,\n\tparseUserInput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserInput,\n\tparseUserOutput: () => _schema_mjs__WEBPACK_IMPORTED_MODULE_5__.parseUserOutput,\n\ttoZodSchema: () => _to_zod_mjs__WEBPACK_IMPORTED_MODULE_8__.toZodSchema\n});\n\n(0,_virtual_rolldown_runtime_mjs__WEBPACK_IMPORTED_MODULE_0__.__reExport)(db_exports, _better_auth_core_db__WEBPACK_IMPORTED_MODULE_11__);\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNwQjtBQUNGO0FBQ0M7QUFDZ0I7QUFDaUk7QUFDcEo7QUFDZTtBQUNwQjtBQUNFO0FBQ2tCOztBQUUzQjs7QUFFcEM7QUFDQSxpQ0FBaUMsdUVBQVE7QUFDekMsc0JBQXNCLCtEQUFhO0FBQ25DLG9CQUFvQiw2REFBVztBQUMvQiw2QkFBNkIsNERBQW9CO0FBQ2pELDhCQUE4Qix3RUFBcUI7QUFDbkQsbUJBQW1CLDJEQUFVO0FBQzdCLHVCQUF1Qiw2REFBYztBQUNyQyxzQkFBc0IsOERBQWE7QUFDbkMsa0JBQWtCLHNEQUFTO0FBQzNCLHFCQUFxQix5REFBWTtBQUNqQyxrQkFBa0IsMERBQVM7QUFDM0Isb0JBQW9CLG9EQUFXO0FBQy9CLDBCQUEwQiwwREFBaUI7QUFDM0MsMkJBQTJCLDJEQUFrQjtBQUM3QyxpQ0FBaUMsaUVBQXdCO0FBQ3pELHVCQUF1Qix1REFBYztBQUNyQywwQkFBMEIsMERBQWlCO0FBQzNDLDJCQUEyQiwyREFBa0I7QUFDN0MsdUJBQXVCLHVEQUFjO0FBQ3JDLHdCQUF3Qix3REFBZTtBQUN2QyxvQkFBb0Isb0RBQVc7QUFDL0IsQ0FBQztBQUNvRTtBQUNyRSx5RUFBVSxhQUFhLGtEQUE0Qjs7QUFFbkQ7QUFDaVc7QUFDalciLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXhwb3J0LCBfX3JlRXhwb3J0IH0gZnJvbSBcIi4uL192aXJ0dWFsL3JvbGxkb3duX3J1bnRpbWUubWpzXCI7XG5pbXBvcnQgeyBnZXRCYXNlQWRhcHRlciB9IGZyb20gXCIuL2FkYXB0ZXItYmFzZS5tanNcIjtcbmltcG9ydCB7IGdldEFkYXB0ZXIgfSBmcm9tIFwiLi9hZGFwdGVyLWt5c2VseS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUZpZWxkQXR0cmlidXRlIH0gZnJvbSBcIi4vZmllbGQubWpzXCI7XG5pbXBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiB9IGZyb20gXCIuL2ZpZWxkLWNvbnZlcnRlci5tanNcIjtcbmltcG9ydCB7IG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0IH0gZnJvbSBcIi4vc2NoZW1hLm1qc1wiO1xuaW1wb3J0IHsgZ2V0V2l0aEhvb2tzIH0gZnJvbSBcIi4vd2l0aC1ob29rcy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUludGVybmFsQWRhcHRlciB9IGZyb20gXCIuL2ludGVybmFsLWFkYXB0ZXIubWpzXCI7XG5pbXBvcnQgeyB0b1pvZFNjaGVtYSB9IGZyb20gXCIuL3RvLXpvZC5tanNcIjtcbmltcG9ydCB7IGdldFNjaGVtYSB9IGZyb20gXCIuL2dldC1zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRNaWdyYXRpb25zLCBtYXRjaFR5cGUgfSBmcm9tIFwiLi9nZXQtbWlncmF0aW9uLm1qc1wiO1xuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIlxuXG4vLyNyZWdpb24gc3JjL2RiL2luZGV4LnRzXG52YXIgZGJfZXhwb3J0cyA9IC8qIEBfX1BVUkVfXyAqLyBfX2V4cG9ydCh7XG5cdGNvbnZlcnRGcm9tREI6ICgpID0+IGNvbnZlcnRGcm9tREIsXG5cdGNvbnZlcnRUb0RCOiAoKSA9PiBjb252ZXJ0VG9EQixcblx0Y3JlYXRlRmllbGRBdHRyaWJ1dGU6ICgpID0+IGNyZWF0ZUZpZWxkQXR0cmlidXRlLFxuXHRjcmVhdGVJbnRlcm5hbEFkYXB0ZXI6ICgpID0+IGNyZWF0ZUludGVybmFsQWRhcHRlcixcblx0Z2V0QWRhcHRlcjogKCkgPT4gZ2V0QWRhcHRlcixcblx0Z2V0QmFzZUFkYXB0ZXI6ICgpID0+IGdldEJhc2VBZGFwdGVyLFxuXHRnZXRNaWdyYXRpb25zOiAoKSA9PiBnZXRNaWdyYXRpb25zLFxuXHRnZXRTY2hlbWE6ICgpID0+IGdldFNjaGVtYSxcblx0Z2V0V2l0aEhvb2tzOiAoKSA9PiBnZXRXaXRoSG9va3MsXG5cdG1hdGNoVHlwZTogKCkgPT4gbWF0Y2hUeXBlLFxuXHRtZXJnZVNjaGVtYTogKCkgPT4gbWVyZ2VTY2hlbWEsXG5cdHBhcnNlQWNjb3VudElucHV0OiAoKSA9PiBwYXJzZUFjY291bnRJbnB1dCxcblx0cGFyc2VBY2NvdW50T3V0cHV0OiAoKSA9PiBwYXJzZUFjY291bnRPdXRwdXQsXG5cdHBhcnNlQWRkaXRpb25hbFVzZXJJbnB1dDogKCkgPT4gcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LFxuXHRwYXJzZUlucHV0RGF0YTogKCkgPT4gcGFyc2VJbnB1dERhdGEsXG5cdHBhcnNlU2Vzc2lvbklucHV0OiAoKSA9PiBwYXJzZVNlc3Npb25JbnB1dCxcblx0cGFyc2VTZXNzaW9uT3V0cHV0OiAoKSA9PiBwYXJzZVNlc3Npb25PdXRwdXQsXG5cdHBhcnNlVXNlcklucHV0OiAoKSA9PiBwYXJzZVVzZXJJbnB1dCxcblx0cGFyc2VVc2VyT3V0cHV0OiAoKSA9PiBwYXJzZVVzZXJPdXRwdXQsXG5cdHRvWm9kU2NoZW1hOiAoKSA9PiB0b1pvZFNjaGVtYVxufSk7XG5pbXBvcnQgKiBhcyBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuX19yZUV4cG9ydChkYl9leHBvcnRzLCBpbXBvcnRfX19iZXR0ZXJfYXV0aF9jb3JlX2RiKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjb252ZXJ0RnJvbURCLCBjb252ZXJ0VG9EQiwgY3JlYXRlRmllbGRBdHRyaWJ1dGUsIGNyZWF0ZUludGVybmFsQWRhcHRlciwgZGJfZXhwb3J0cywgZ2V0QWRhcHRlciwgZ2V0QmFzZUFkYXB0ZXIsIGdldE1pZ3JhdGlvbnMsIGdldFNjaGVtYSwgZ2V0V2l0aEhvb2tzLCBtYXRjaFR5cGUsIG1lcmdlU2NoZW1hLCBwYXJzZUFjY291bnRJbnB1dCwgcGFyc2VBY2NvdW50T3V0cHV0LCBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQsIHBhcnNlSW5wdXREYXRhLCBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJJbnB1dCwgcGFyc2VVc2VyT3V0cHV0LCB0b1pvZFNjaGVtYSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/db/internal-adapter.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createInternalAdapter: () => (/* binding */ createInternalAdapter)\n/* harmony export */ });\n/* harmony import */ var _utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/date.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/date.mjs\");\n/* harmony import */ var _utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/get-request-ip.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\");\n/* harmony import */ var _schema_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/schema.mjs\");\n/* harmony import */ var _with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./with-hooks.mjs */ \"(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n//#region src/db/internal-adapter.ts\nconst createInternalAdapter = (adapter, ctx) => {\n\tconst logger = ctx.logger;\n\tconst options = ctx.options;\n\tconst secondaryStorage = options.secondaryStorage;\n\tconst sessionExpiration = options.session?.expiresIn || 3600 * 24 * 7;\n\tconst { createWithHooks, updateWithHooks, updateManyWithHooks, deleteWithHooks, deleteManyWithHooks } = (0,_with_hooks_mjs__WEBPACK_IMPORTED_MODULE_3__.getWithHooks)(adapter, ctx);\n\tasync function refreshUserSessions(user) {\n\t\tif (!secondaryStorage) return;\n\t\tconst listRaw = await secondaryStorage.get(`active-sessions-${user.id}`);\n\t\tif (!listRaw) return;\n\t\tconst now = Date.now();\n\t\tconst validSessions = ((0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || []).filter((s) => s.expiresAt > now);\n\t\tawait Promise.all(validSessions.map(async ({ token }) => {\n\t\t\tconst cached = await secondaryStorage.get(token);\n\t\t\tif (!cached) return;\n\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(cached);\n\t\t\tif (!parsed) return;\n\t\t\tconst sessionTTL = Math.max(Math.floor(new Date(parsed.session.expiresAt).getTime() - now) / 1e3, 0);\n\t\t\tawait secondaryStorage.set(token, JSON.stringify({\n\t\t\t\tsession: parsed.session,\n\t\t\t\tuser\n\t\t\t}), Math.floor(sessionTTL));\n\t\t}));\n\t}\n\treturn {\n\t\tcreateOAuthUser: async (user, account) => {\n\t\t\treturn (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.runWithTransaction)(adapter, async () => {\n\t\t\t\tconst createdUser = await createWithHooks({\n\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t...user\n\t\t\t\t}, \"user\", void 0);\n\t\t\t\treturn {\n\t\t\t\t\tuser: createdUser,\n\t\t\t\t\taccount: await createWithHooks({\n\t\t\t\t\t\t...account,\n\t\t\t\t\t\tuserId: createdUser.id,\n\t\t\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t\t\t}, \"account\", void 0)\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tcreateUser: async (user) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...user,\n\t\t\t\temail: user.email?.toLowerCase()\n\t\t\t}, \"user\", void 0);\n\t\t},\n\t\tcreateAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tlistSessions: async (userId) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\tif (!currentList) return [];\n\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\tconst now = Date.now();\n\t\t\t\tconst seenTokens = /* @__PURE__ */ new Set();\n\t\t\t\tconst sessions = [];\n\t\t\t\tfor (const { token, expiresAt } of list) {\n\t\t\t\t\tif (expiresAt <= now || seenTokens.has(token)) continue;\n\t\t\t\t\tseenTokens.add(token);\n\t\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\t\tif (!data) continue;\n\t\t\t\t\tconst parsed = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(data);\n\t\t\t\t\tif (!parsed) continue;\n\t\t\t\t\tsessions.push((0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t...parsed.session,\n\t\t\t\t\t\texpiresAt: new Date(parsed.session.expiresAt)\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn sessions;\n\t\t\t}\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlistUsers: async (limit, offset, sortBy, where) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"user\",\n\t\t\t\tlimit,\n\t\t\t\toffset,\n\t\t\t\tsortBy,\n\t\t\t\twhere\n\t\t\t});\n\t\t},\n\t\tcountTotalUsers: async (where) => {\n\t\t\tconst total = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).count({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere\n\t\t\t});\n\t\t\tif (typeof total === \"string\") return parseInt(total);\n\t\t\treturn total;\n\t\t},\n\t\tdeleteUser: async (userId) => {\n\t\t\tif (!secondaryStorage || options.session?.storeSessionInDatabase) await deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"session\", void 0);\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t},\n\t\tcreateSession: async (userId, dontRememberMe, override, overrideAll) => {\n\t\t\tconst ctx$1 = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAuthContext)().catch(() => null);\n\t\t\tconst headers = ctx$1?.headers || ctx$1?.request?.headers;\n\t\t\tconst { id: _, ...rest } = override || {};\n\t\t\tconst defaultAdditionalFields = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionInput)(ctx$1?.context.options ?? options, {});\n\t\t\tconst data = {\n\t\t\t\tipAddress: ctx$1?.request || ctx$1?.headers ? (0,_utils_get_request_ip_mjs__WEBPACK_IMPORTED_MODULE_1__.getIp)(ctx$1?.request || ctx$1?.headers, ctx$1?.context.options) || \"\" : \"\",\n\t\t\t\tuserAgent: headers?.get(\"user-agent\") || \"\",\n\t\t\t\t...rest,\n\t\t\t\texpiresAt: dontRememberMe ? (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(3600 * 24, \"sec\") : (0,_utils_date_mjs__WEBPACK_IMPORTED_MODULE_0__.getDate)(sessionExpiration, \"sec\"),\n\t\t\t\tuserId,\n\t\t\t\ttoken: (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.generateId)(32),\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...defaultAdditionalFields,\n\t\t\t\t...overrideAll ? rest : {}\n\t\t\t};\n\t\t\treturn await createWithHooks(data, \"session\", secondaryStorage ? {\n\t\t\t\tfn: async (sessionData) => {\n\t\t\t\t\t/**\n\t\t\t\t\t* store the session token for the user\n\t\t\t\t\t* so we can retrieve it later for listing sessions\n\t\t\t\t\t*/\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tlet list = [];\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tlist = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tlist = list.filter((session) => session.expiresAt > now && session.token !== data.token);\n\t\t\t\t\t}\n\t\t\t\t\tconst sorted = [...list, {\n\t\t\t\t\t\ttoken: data.token,\n\t\t\t\t\t\texpiresAt: data.expiresAt.getTime()\n\t\t\t\t\t}].sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt ?? data.expiresAt.getTime();\n\t\t\t\t\tconst furthestSessionTTL = Math.max(Math.floor((furthestSessionExp - now) / 1e3), 0);\n\t\t\t\t\tif (furthestSessionTTL > 0) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(sorted), furthestSessionTTL);\n\t\t\t\t\tconst user = await adapter.findOne({\n\t\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tfield: \"id\",\n\t\t\t\t\t\t\tvalue: userId\n\t\t\t\t\t\t}]\n\t\t\t\t\t});\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((data.expiresAt.getTime() - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) await secondaryStorage.set(data.token, JSON.stringify({\n\t\t\t\t\t\tsession: sessionData,\n\t\t\t\t\t\tuser\n\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\treturn sessionData;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tfindSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessionStringified = await secondaryStorage.get(token);\n\t\t\t\tif (!sessionStringified && !options.session?.storeSessionInDatabase) return null;\n\t\t\t\tif (sessionStringified) {\n\t\t\t\t\tconst s = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(sessionStringified);\n\t\t\t\t\tif (!s) return null;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt),\n\t\t\t\t\t\t\tcreatedAt: new Date(s.session.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.session.updatedAt)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, {\n\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t})\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: token,\n\t\t\t\t\tfield: \"token\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { user, ...session } = result;\n\t\t\tif (!user) return null;\n\t\t\treturn {\n\t\t\t\tsession: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, session),\n\t\t\t\tuser: (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseUserOutput)(ctx.options, user)\n\t\t\t};\n\t\t},\n\t\tfindSessions: async (sessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst sessions$1 = [];\n\t\t\t\tfor (const sessionToken of sessionTokens) {\n\t\t\t\t\tconst sessionStringified = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (sessionStringified) {\n\t\t\t\t\t\tconst s = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(sessionStringified);\n\t\t\t\t\t\tif (!s) return [];\n\t\t\t\t\t\tconst session = {\n\t\t\t\t\t\t\tsession: {\n\t\t\t\t\t\t\t\t...s.session,\n\t\t\t\t\t\t\t\texpiresAt: new Date(s.session.expiresAt)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tuser: {\n\t\t\t\t\t\t\t\t...s.user,\n\t\t\t\t\t\t\t\tcreatedAt: new Date(s.user.createdAt),\n\t\t\t\t\t\t\t\tupdatedAt: new Date(s.user.updatedAt)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tsessions$1.push(session);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn sessions$1;\n\t\t\t}\n\t\t\tconst sessions = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"session\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"token\",\n\t\t\t\t\tvalue: sessionTokens,\n\t\t\t\t\toperator: \"in\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t});\n\t\t\tif (!sessions.length) return [];\n\t\t\tif (sessions.some((session) => !session.user)) return [];\n\t\t\treturn sessions.map((_session) => {\n\t\t\t\tconst { user, ...session } = _session;\n\t\t\t\treturn {\n\t\t\t\t\tsession,\n\t\t\t\t\tuser\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateSession: async (sessionToken, session) => {\n\t\t\treturn await updateWithHooks(session, [{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: sessionToken\n\t\t\t}], \"session\", secondaryStorage ? {\n\t\t\t\tasync fn(data) {\n\t\t\t\t\tconst currentSession = await secondaryStorage.get(sessionToken);\n\t\t\t\t\tif (!currentSession) return null;\n\t\t\t\t\tconst parsedSession = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentSession);\n\t\t\t\t\tif (!parsedSession) return null;\n\t\t\t\t\tconst mergedSession = {\n\t\t\t\t\t\t...parsedSession.session,\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\texpiresAt: new Date(data.expiresAt ?? parsedSession.session.expiresAt),\n\t\t\t\t\t\tcreatedAt: new Date(parsedSession.session.createdAt),\n\t\t\t\t\t\tupdatedAt: new Date(data.updatedAt ?? parsedSession.session.updatedAt)\n\t\t\t\t\t};\n\t\t\t\t\tconst updatedSession = (0,_schema_mjs__WEBPACK_IMPORTED_MODULE_2__.parseSessionOutput)(ctx.options, mergedSession);\n\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\tconst expiresMs = new Date(updatedSession.expiresAt).getTime();\n\t\t\t\t\tconst sessionTTL = Math.max(Math.floor((expiresMs - now) / 1e3), 0);\n\t\t\t\t\tif (sessionTTL > 0) {\n\t\t\t\t\t\tawait secondaryStorage.set(sessionToken, JSON.stringify({\n\t\t\t\t\t\t\tsession: updatedSession,\n\t\t\t\t\t\t\tuser: parsedSession.user\n\t\t\t\t\t\t}), sessionTTL);\n\t\t\t\t\t\tconst listKey = `active-sessions-${updatedSession.userId}`;\n\t\t\t\t\t\tconst listRaw = await secondaryStorage.get(listKey);\n\t\t\t\t\t\tconst sorted = (listRaw ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(listRaw) || [] : []).filter((s) => s.token !== sessionToken && s.expiresAt > now).concat([{\n\t\t\t\t\t\t\ttoken: sessionToken,\n\t\t\t\t\t\t\texpiresAt: expiresMs\n\t\t\t\t\t\t}]).sort((a, b) => a.expiresAt - b.expiresAt);\n\t\t\t\t\t\tconst furthestSessionExp = sorted.at(-1)?.expiresAt;\n\t\t\t\t\t\tif (furthestSessionExp && furthestSessionExp > now) await secondaryStorage.set(listKey, JSON.stringify(sorted), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(listKey);\n\t\t\t\t\t}\n\t\t\t\t\treturn updatedSession;\n\t\t\t\t},\n\t\t\t\texecuteMainFn: options.session?.storeSessionInDatabase\n\t\t\t} : void 0);\n\t\t},\n\t\tdeleteSession: async (token) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tconst data = await secondaryStorage.get(token);\n\t\t\t\tif (data) {\n\t\t\t\t\tconst { session } = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(data) ?? {};\n\t\t\t\t\tif (!session) {\n\t\t\t\t\t\tlogger.error(\"Session not found in secondary storage\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst userId = session.userId;\n\t\t\t\t\tconst currentList = await secondaryStorage.get(`active-sessions-${userId}`);\n\t\t\t\t\tif (currentList) {\n\t\t\t\t\t\tconst list = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(currentList) || [];\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tconst filtered = list.filter((session$1) => session$1.expiresAt > now && session$1.token !== token);\n\t\t\t\t\t\tconst furthestSessionExp = filtered.sort((a, b) => a.expiresAt - b.expiresAt).at(-1)?.expiresAt;\n\t\t\t\t\t\tif (filtered.length > 0 && furthestSessionExp && furthestSessionExp > Date.now()) await secondaryStorage.set(`active-sessions-${userId}`, JSON.stringify(filtered), Math.floor((furthestSessionExp - now) / 1e3));\n\t\t\t\t\t\telse await secondaryStorage.delete(`active-sessions-${userId}`);\n\t\t\t\t\t} else logger.error(\"Active sessions list not found in secondary storage\");\n\t\t\t\t}\n\t\t\t\tawait secondaryStorage.delete(token);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"token\",\n\t\t\t\tvalue: token\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tdeleteAccounts: async (userId) => {\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteAccount: async (accountId) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: accountId\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tdeleteSessions: async (userIdOrSessionTokens) => {\n\t\t\tif (secondaryStorage) {\n\t\t\t\tif (typeof userIdOrSessionTokens === \"string\") {\n\t\t\t\t\tconst activeSession = await secondaryStorage.get(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t\tconst sessions = activeSession ? (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_5__.safeJSONParse)(activeSession) : [];\n\t\t\t\t\tif (!sessions) return;\n\t\t\t\t\tfor (const session of sessions) await secondaryStorage.delete(session.token);\n\t\t\t\t\tawait secondaryStorage.delete(`active-sessions-${userIdOrSessionTokens}`);\n\t\t\t\t} else for (const sessionToken of userIdOrSessionTokens) if (await secondaryStorage.get(sessionToken)) await secondaryStorage.delete(sessionToken);\n\t\t\t\tif (!options.session?.storeSessionInDatabase || ctx.options.session?.preserveSessionInDatabase) return;\n\t\t\t}\n\t\t\tawait deleteManyWithHooks([{\n\t\t\t\tfield: Array.isArray(userIdOrSessionTokens) ? \"token\" : \"userId\",\n\t\t\t\tvalue: userIdOrSessionTokens,\n\t\t\t\toperator: Array.isArray(userIdOrSessionTokens) ? \"in\" : void 0\n\t\t\t}], \"session\", void 0);\n\t\t},\n\t\tfindOAuthUser: async (email, accountId, providerId) => {\n\t\t\tconst account = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: accountId,\n\t\t\t\t\tfield: \"accountId\"\n\t\t\t\t}],\n\t\t\t\tjoin: { user: true }\n\t\t\t}).then((accounts) => {\n\t\t\t\treturn accounts.find((a) => a.providerId === providerId);\n\t\t\t});\n\t\t\tif (account) if (account.user) return {\n\t\t\t\tuser: account.user,\n\t\t\t\taccounts: [account]\n\t\t\t};\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\taccounts: [account]\n\t\t\t\t};\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst user = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\t\tmodel: \"user\",\n\t\t\t\t\twhere: [{\n\t\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\t\tfield: \"email\"\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t\tif (user) return {\n\t\t\t\t\tuser,\n\t\t\t\t\taccounts: await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\t\t\tmodel: \"account\",\n\t\t\t\t\t\twhere: [{\n\t\t\t\t\t\t\tvalue: user.id,\n\t\t\t\t\t\t\tfield: \"userId\"\n\t\t\t\t\t\t}]\n\t\t\t\t\t}) || []\n\t\t\t\t};\n\t\t\t\telse return null;\n\t\t\t}\n\t\t},\n\t\tfindUserByEmail: async (email, options$1) => {\n\t\t\tconst result = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tvalue: email.toLowerCase(),\n\t\t\t\t\tfield: \"email\"\n\t\t\t\t}],\n\t\t\t\tjoin: { ...options$1?.includeAccounts ? { account: true } : {} }\n\t\t\t});\n\t\t\tif (!result) return null;\n\t\t\tconst { account: accounts, ...user } = result;\n\t\t\treturn {\n\t\t\t\tuser,\n\t\t\t\taccounts: accounts ?? []\n\t\t\t};\n\t\t},\n\t\tfindUserById: async (userId) => {\n\t\t\tif (!userId) return null;\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"user\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"id\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tlinkAccount: async (account) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...account\n\t\t\t}, \"account\", void 0);\n\t\t},\n\t\tupdateUser: async (userId, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: userId\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdateUserByEmail: async (email, data) => {\n\t\t\tconst user = await updateWithHooks(data, [{\n\t\t\t\tfield: \"email\",\n\t\t\t\tvalue: email.toLowerCase()\n\t\t\t}], \"user\", void 0);\n\t\t\tawait refreshUserSessions(user);\n\t\t\treturn user;\n\t\t},\n\t\tupdatePassword: async (userId, password) => {\n\t\t\tawait updateManyWithHooks({ password }, [{\n\t\t\t\tfield: \"userId\",\n\t\t\t\tvalue: userId\n\t\t\t}, {\n\t\t\t\tfield: \"providerId\",\n\t\t\t\tvalue: \"credential\"\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tfindAccounts: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccount: async (accountId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByProviderId: async (accountId, providerId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findOne({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"accountId\",\n\t\t\t\t\tvalue: accountId\n\t\t\t\t}, {\n\t\t\t\t\tfield: \"providerId\",\n\t\t\t\t\tvalue: providerId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tfindAccountByUserId: async (userId) => {\n\t\t\treturn await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"account\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"userId\",\n\t\t\t\t\tvalue: userId\n\t\t\t\t}]\n\t\t\t});\n\t\t},\n\t\tupdateAccount: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"account\", void 0);\n\t\t},\n\t\tcreateVerificationValue: async (data) => {\n\t\t\treturn await createWithHooks({\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\t...data\n\t\t\t}, \"verification\", void 0);\n\t\t},\n\t\tfindVerificationValue: async (identifier) => {\n\t\t\tconst verification = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_4__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel: \"verification\",\n\t\t\t\twhere: [{\n\t\t\t\t\tfield: \"identifier\",\n\t\t\t\t\tvalue: identifier\n\t\t\t\t}],\n\t\t\t\tsortBy: {\n\t\t\t\t\tfield: \"createdAt\",\n\t\t\t\t\tdirection: \"desc\"\n\t\t\t\t},\n\t\t\t\tlimit: 1\n\t\t\t});\n\t\t\tif (!options.verification?.disableCleanup) await deleteManyWithHooks([{\n\t\t\t\tfield: \"expiresAt\",\n\t\t\t\tvalue: /* @__PURE__ */ new Date(),\n\t\t\t\toperator: \"lt\"\n\t\t\t}], \"verification\", void 0);\n\t\t\treturn verification[0];\n\t\t},\n\t\tdeleteVerificationValue: async (id) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tdeleteVerificationByIdentifier: async (identifier) => {\n\t\t\tawait deleteWithHooks([{\n\t\t\t\tfield: \"identifier\",\n\t\t\t\tvalue: identifier\n\t\t\t}], \"verification\", void 0);\n\t\t},\n\t\tupdateVerificationValue: async (id, data) => {\n\t\t\treturn await updateWithHooks(data, [{\n\t\t\t\tfield: \"id\",\n\t\t\t\tvalue: id\n\t\t\t}], \"verification\", void 0);\n\t\t}\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=internal-adapter.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9pbnRlcm5hbC1hZGFwdGVyLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRDO0FBQ1E7QUFDa0M7QUFDdEM7QUFDeUQ7QUFDckM7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsOEZBQThGLEVBQUUsNkRBQVk7QUFDckg7QUFDQTtBQUNBLGdFQUFnRSxRQUFRO0FBQ3hFO0FBQ0E7QUFDQSx5QkFBeUIsc0VBQWE7QUFDdEMsK0NBQStDLE9BQU87QUFDdEQ7QUFDQTtBQUNBLGtCQUFrQixzRUFBYTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZFQUFrQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0Esc0VBQXNFLE9BQU87QUFDN0U7QUFDQSxpQkFBaUIsc0VBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzRUFBYTtBQUNqQztBQUNBLG1CQUFtQiwrREFBa0I7QUFDckM7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsOEJBQThCLDRFQUFpQjtBQUMvQztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsZ0ZBQXFCO0FBQzVDO0FBQ0EsV0FBVyxpQkFBaUI7QUFDNUIsbUNBQW1DLDhEQUFpQixzQ0FBc0M7QUFDMUY7QUFDQSxrREFBa0QsZ0VBQUs7QUFDdkQ7QUFDQTtBQUNBLGdDQUFnQyx3REFBTyxxQkFBcUIsd0RBQU87QUFDbkU7QUFDQSxXQUFXLG1FQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsT0FBTztBQUM5RTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHNFQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLCtFQUErRSxPQUFPO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzRUFBYTtBQUM1QjtBQUNBO0FBQ0EsZUFBZSwrREFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsWUFBWSw0REFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDRFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0EsV0FBVyxtQkFBbUI7QUFDOUI7QUFDQTtBQUNBLGFBQWEsK0RBQWtCO0FBQy9CLFVBQVUsNERBQWU7QUFDekI7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNFQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw0RUFBaUI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsc0VBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QiwrREFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AseUNBQXlDLHNCQUFzQjtBQUMvRDtBQUNBLGdDQUFnQyxzRUFBYTtBQUM3QztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVLEVBQUUsc0VBQWE7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxPQUFPO0FBQzlFO0FBQ0EsbUJBQW1CLHNFQUFhO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLHNJQUFzSSxPQUFPO0FBQzdJLDREQUE0RCxPQUFPO0FBQ25FLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsc0JBQXNCO0FBQy9GLHNDQUFzQyxzRUFBYTtBQUNuRDtBQUNBO0FBQ0Esc0RBQXNELHNCQUFzQjtBQUM1RSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLGdDQUFnQyw0RUFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDRFQUFpQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsNEVBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFpQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsK0JBQStCLDRFQUFpQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZLGtDQUFrQyxnQkFBZ0I7QUFDOUQsSUFBSTtBQUNKO0FBQ0EsV0FBVyw2QkFBNkI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLHVCQUF1Qiw0RUFBaUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwrQkFBK0IsVUFBVTtBQUN6QztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsdUJBQXVCLDRFQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSx1QkFBdUIsNEVBQWlCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EscUNBQXFDLDRFQUFpQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDaUM7QUFDakMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvaW50ZXJuYWwtYWRhcHRlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RGF0ZSB9IGZyb20gXCIuLi91dGlscy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0SXAgfSBmcm9tIFwiLi4vdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNlc3Npb25JbnB1dCwgcGFyc2VTZXNzaW9uT3V0cHV0LCBwYXJzZVVzZXJPdXRwdXQgfSBmcm9tIFwiLi9zY2hlbWEubWpzXCI7XG5pbXBvcnQgeyBnZXRXaXRoSG9va3MgfSBmcm9tIFwiLi93aXRoLWhvb2tzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldEN1cnJlbnRBdXRoQ29udGV4dCwgcnVuV2l0aFRyYW5zYWN0aW9uIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2NvbnRleHRcIjtcbmltcG9ydCB7IGdlbmVyYXRlSWQsIHNhZmVKU09OUGFyc2UgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9pbnRlcm5hbC1hZGFwdGVyLnRzXG5jb25zdCBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIgPSAoYWRhcHRlciwgY3R4KSA9PiB7XG5cdGNvbnN0IGxvZ2dlciA9IGN0eC5sb2dnZXI7XG5cdGNvbnN0IG9wdGlvbnMgPSBjdHgub3B0aW9ucztcblx0Y29uc3Qgc2Vjb25kYXJ5U3RvcmFnZSA9IG9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZTtcblx0Y29uc3Qgc2Vzc2lvbkV4cGlyYXRpb24gPSBvcHRpb25zLnNlc3Npb24/LmV4cGlyZXNJbiB8fCAzNjAwICogMjQgKiA3O1xuXHRjb25zdCB7IGNyZWF0ZVdpdGhIb29rcywgdXBkYXRlV2l0aEhvb2tzLCB1cGRhdGVNYW55V2l0aEhvb2tzLCBkZWxldGVXaXRoSG9va3MsIGRlbGV0ZU1hbnlXaXRoSG9va3MgfSA9IGdldFdpdGhIb29rcyhhZGFwdGVyLCBjdHgpO1xuXHRhc3luYyBmdW5jdGlvbiByZWZyZXNoVXNlclNlc3Npb25zKHVzZXIpIHtcblx0XHRpZiAoIXNlY29uZGFyeVN0b3JhZ2UpIHJldHVybjtcblx0XHRjb25zdCBsaXN0UmF3ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXIuaWR9YCk7XG5cdFx0aWYgKCFsaXN0UmF3KSByZXR1cm47XG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCB2YWxpZFNlc3Npb25zID0gKHNhZmVKU09OUGFyc2UobGlzdFJhdykgfHwgW10pLmZpbHRlcigocykgPT4gcy5leHBpcmVzQXQgPiBub3cpO1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHZhbGlkU2Vzc2lvbnMubWFwKGFzeW5jICh7IHRva2VuIH0pID0+IHtcblx0XHRcdGNvbnN0IGNhY2hlZCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcblx0XHRcdGlmICghY2FjaGVkKSByZXR1cm47XG5cdFx0XHRjb25zdCBwYXJzZWQgPSBzYWZlSlNPTlBhcnNlKGNhY2hlZCk7XG5cdFx0XHRpZiAoIXBhcnNlZCkgcmV0dXJuO1xuXHRcdFx0Y29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IobmV3IERhdGUocGFyc2VkLnNlc3Npb24uZXhwaXJlc0F0KS5nZXRUaW1lKCkgLSBub3cpIC8gMWUzLCAwKTtcblx0XHRcdGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KHRva2VuLCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdHNlc3Npb246IHBhcnNlZC5zZXNzaW9uLFxuXHRcdFx0XHR1c2VyXG5cdFx0XHR9KSwgTWF0aC5mbG9vcihzZXNzaW9uVFRMKSk7XG5cdFx0fSkpO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0Y3JlYXRlT0F1dGhVc2VyOiBhc3luYyAodXNlciwgYWNjb3VudCkgPT4ge1xuXHRcdFx0cmV0dXJuIHJ1bldpdGhUcmFuc2FjdGlvbihhZGFwdGVyLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGNyZWF0ZWRVc2VyID0gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdFx0Li4udXNlclxuXHRcdFx0XHR9LCBcInVzZXJcIiwgdm9pZCAwKTtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR1c2VyOiBjcmVhdGVkVXNlcixcblx0XHRcdFx0XHRhY2NvdW50OiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRcdFx0Li4uYWNjb3VudCxcblx0XHRcdFx0XHRcdHVzZXJJZDogY3JlYXRlZFVzZXIuaWQsXG5cdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKVxuXHRcdFx0XHRcdH0sIFwiYWNjb3VudFwiLCB2b2lkIDApXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdGNyZWF0ZVVzZXI6IGFzeW5jICh1c2VyKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlV2l0aEhvb2tzKHtcblx0XHRcdFx0Y3JlYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0dXBkYXRlZEF0OiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0Li4udXNlcixcblx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWw/LnRvTG93ZXJDYXNlKClcblx0XHRcdH0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0Y3JlYXRlQWNjb3VudDogYXN5bmMgKGFjY291bnQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5hY2NvdW50XG5cdFx0XHR9LCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGxpc3RTZXNzaW9uczogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0aWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcblx0XHRcdFx0Y29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRpZiAoIWN1cnJlbnRMaXN0KSByZXR1cm4gW107XG5cdFx0XHRcdGNvbnN0IGxpc3QgPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRMaXN0KSB8fCBbXTtcblx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0Y29uc3Qgc2VlblRva2VucyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb25zID0gW107XG5cdFx0XHRcdGZvciAoY29uc3QgeyB0b2tlbiwgZXhwaXJlc0F0IH0gb2YgbGlzdCkge1xuXHRcdFx0XHRcdGlmIChleHBpcmVzQXQgPD0gbm93IHx8IHNlZW5Ub2tlbnMuaGFzKHRva2VuKSkgY29udGludWU7XG5cdFx0XHRcdFx0c2VlblRva2Vucy5hZGQodG9rZW4pO1xuXHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRcdFx0aWYgKCFkYXRhKSBjb250aW51ZTtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBzYWZlSlNPTlBhcnNlKGRhdGEpO1xuXHRcdFx0XHRcdGlmICghcGFyc2VkKSBjb250aW51ZTtcblx0XHRcdFx0XHRzZXNzaW9ucy5wdXNoKHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0Li4ucGFyc2VkLnNlc3Npb24sXG5cdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHBhcnNlZC5zZXNzaW9uLmV4cGlyZXNBdClcblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHNlc3Npb25zO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJzZXNzaW9uXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bGlzdFVzZXJzOiBhc3luYyAobGltaXQsIG9mZnNldCwgc29ydEJ5LCB3aGVyZSkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdGxpbWl0LFxuXHRcdFx0XHRvZmZzZXQsXG5cdFx0XHRcdHNvcnRCeSxcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0Y291bnRUb3RhbFVzZXJzOiBhc3luYyAod2hlcmUpID0+IHtcblx0XHRcdGNvbnN0IHRvdGFsID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5jb3VudCh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmVcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHR5cGVvZiB0b3RhbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHBhcnNlSW50KHRvdGFsKTtcblx0XHRcdHJldHVybiB0b3RhbDtcblx0XHR9LFxuXHRcdGRlbGV0ZVVzZXI6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdGlmICghc2Vjb25kYXJ5U3RvcmFnZSB8fCBvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcInNlc3Npb25cIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJpZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJ1c2VyXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVTZXNzaW9uOiBhc3luYyAodXNlcklkLCBkb250UmVtZW1iZXJNZSwgb3ZlcnJpZGUsIG92ZXJyaWRlQWxsKSA9PiB7XG5cdFx0XHRjb25zdCBjdHgkMSA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdFx0Y29uc3QgaGVhZGVycyA9IGN0eCQxPy5oZWFkZXJzIHx8IGN0eCQxPy5yZXF1ZXN0Py5oZWFkZXJzO1xuXHRcdFx0Y29uc3QgeyBpZDogXywgLi4ucmVzdCB9ID0gb3ZlcnJpZGUgfHwge307XG5cdFx0XHRjb25zdCBkZWZhdWx0QWRkaXRpb25hbEZpZWxkcyA9IHBhcnNlU2Vzc2lvbklucHV0KGN0eCQxPy5jb250ZXh0Lm9wdGlvbnMgPz8gb3B0aW9ucywge30pO1xuXHRcdFx0Y29uc3QgZGF0YSA9IHtcblx0XHRcdFx0aXBBZGRyZXNzOiBjdHgkMT8ucmVxdWVzdCB8fCBjdHgkMT8uaGVhZGVycyA/IGdldElwKGN0eCQxPy5yZXF1ZXN0IHx8IGN0eCQxPy5oZWFkZXJzLCBjdHgkMT8uY29udGV4dC5vcHRpb25zKSB8fCBcIlwiIDogXCJcIixcblx0XHRcdFx0dXNlckFnZW50OiBoZWFkZXJzPy5nZXQoXCJ1c2VyLWFnZW50XCIpIHx8IFwiXCIsXG5cdFx0XHRcdC4uLnJlc3QsXG5cdFx0XHRcdGV4cGlyZXNBdDogZG9udFJlbWVtYmVyTWUgPyBnZXREYXRlKDM2MDAgKiAyNCwgXCJzZWNcIikgOiBnZXREYXRlKHNlc3Npb25FeHBpcmF0aW9uLCBcInNlY1wiKSxcblx0XHRcdFx0dXNlcklkLFxuXHRcdFx0XHR0b2tlbjogZ2VuZXJhdGVJZCgzMiksXG5cdFx0XHRcdGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdHVwZGF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCksXG5cdFx0XHRcdC4uLmRlZmF1bHRBZGRpdGlvbmFsRmllbGRzLFxuXHRcdFx0XHQuLi5vdmVycmlkZUFsbCA/IHJlc3QgOiB7fVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3MoZGF0YSwgXCJzZXNzaW9uXCIsIHNlY29uZGFyeVN0b3JhZ2UgPyB7XG5cdFx0XHRcdGZuOiBhc3luYyAoc2Vzc2lvbkRhdGEpID0+IHtcblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQqIHN0b3JlIHRoZSBzZXNzaW9uIHRva2VuIGZvciB0aGUgdXNlclxuXHRcdFx0XHRcdCogc28gd2UgY2FuIHJldHJpZXZlIGl0IGxhdGVyIGZvciBsaXN0aW5nIHNlc3Npb25zXG5cdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRjb25zdCBjdXJyZW50TGlzdCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdFx0bGV0IGxpc3QgPSBbXTtcblx0XHRcdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TGlzdCkge1xuXHRcdFx0XHRcdFx0bGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRcdFx0bGlzdCA9IGxpc3QuZmlsdGVyKChzZXNzaW9uKSA9PiBzZXNzaW9uLmV4cGlyZXNBdCA+IG5vdyAmJiBzZXNzaW9uLnRva2VuICE9PSBkYXRhLnRva2VuKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3Qgc29ydGVkID0gWy4uLmxpc3QsIHtcblx0XHRcdFx0XHRcdHRva2VuOiBkYXRhLnRva2VuLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBkYXRhLmV4cGlyZXNBdC5nZXRUaW1lKClcblx0XHRcdFx0XHR9XS5zb3J0KChhLCBiKSA9PiBhLmV4cGlyZXNBdCAtIGIuZXhwaXJlc0F0KTtcblx0XHRcdFx0XHRjb25zdCBmdXJ0aGVzdFNlc3Npb25FeHAgPSBzb3J0ZWQuYXQoLTEpPy5leHBpcmVzQXQgPz8gZGF0YS5leHBpcmVzQXQuZ2V0VGltZSgpO1xuXHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGZ1cnRoZXN0U2Vzc2lvbkV4cCAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoZnVydGhlc3RTZXNzaW9uVFRMID4gMCkgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQoYGFjdGl2ZS1zZXNzaW9ucy0ke3VzZXJJZH1gLCBKU09OLnN0cmluZ2lmeShzb3J0ZWQpLCBmdXJ0aGVzdFNlc3Npb25UVEwpO1xuXHRcdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBhZGFwdGVyLmZpbmRPbmUoe1xuXHRcdFx0XHRcdFx0bW9kZWw6IFwidXNlclwiLFxuXHRcdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvblRUTCA9IE1hdGgubWF4KE1hdGguZmxvb3IoKGRhdGEuZXhwaXJlc0F0LmdldFRpbWUoKSAtIG5vdykgLyAxZTMpLCAwKTtcblx0XHRcdFx0XHRpZiAoc2Vzc2lvblRUTCA+IDApIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGRhdGEudG9rZW4sIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRcdHNlc3Npb246IHNlc3Npb25EYXRhLFxuXHRcdFx0XHRcdFx0dXNlclxuXHRcdFx0XHRcdH0pLCBzZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRyZXR1cm4gc2Vzc2lvbkRhdGE7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGV4ZWN1dGVNYWluRm46IG9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZVxuXHRcdFx0fSA6IHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kU2Vzc2lvbjogYXN5bmMgKHRva2VuKSA9PiB7XG5cdFx0XHRpZiAoc2Vjb25kYXJ5U3RvcmFnZSkge1xuXHRcdFx0XHRjb25zdCBzZXNzaW9uU3RyaW5naWZpZWQgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldCh0b2tlbik7XG5cdFx0XHRcdGlmICghc2Vzc2lvblN0cmluZ2lmaWVkICYmICFvcHRpb25zLnNlc3Npb24/LnN0b3JlU2Vzc2lvbkluRGF0YWJhc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAoc2Vzc2lvblN0cmluZ2lmaWVkKSB7XG5cdFx0XHRcdFx0Y29uc3QgcyA9IHNhZmVKU09OUGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKTtcblx0XHRcdFx0XHRpZiAoIXMpIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRzZXNzaW9uOiBwYXJzZVNlc3Npb25PdXRwdXQoY3R4Lm9wdGlvbnMsIHtcblx0XHRcdFx0XHRcdFx0Li4ucy5zZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5leHBpcmVzQXQpLFxuXHRcdFx0XHRcdFx0XHRjcmVhdGVkQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5jcmVhdGVkQXQpLFxuXHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdHVzZXI6IHBhcnNlVXNlck91dHB1dChjdHgub3B0aW9ucywge1xuXHRcdFx0XHRcdFx0XHQuLi5zLnVzZXIsXG5cdFx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocy51c2VyLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZWRBdDogbmV3IERhdGUocy51c2VyLnVwZGF0ZWRBdClcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHR2YWx1ZTogdG9rZW4sXG5cdFx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyB1c2VyOiB0cnVlIH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFyZXN1bHQpIHJldHVybiBudWxsO1xuXHRcdFx0Y29uc3QgeyB1c2VyLCAuLi5zZXNzaW9uIH0gPSByZXN1bHQ7XG5cdFx0XHRpZiAoIXVzZXIpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c2Vzc2lvbjogcGFyc2VTZXNzaW9uT3V0cHV0KGN0eC5vcHRpb25zLCBzZXNzaW9uKSxcblx0XHRcdFx0dXNlcjogcGFyc2VVc2VyT3V0cHV0KGN0eC5vcHRpb25zLCB1c2VyKVxuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGZpbmRTZXNzaW9uczogYXN5bmMgKHNlc3Npb25Ub2tlbnMpID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGNvbnN0IHNlc3Npb25zJDEgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBzZXNzaW9uVG9rZW4gb2Ygc2Vzc2lvblRva2Vucykge1xuXHRcdFx0XHRcdGNvbnN0IHNlc3Npb25TdHJpbmdpZmllZCA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHNlc3Npb25Ub2tlbik7XG5cdFx0XHRcdFx0aWYgKHNlc3Npb25TdHJpbmdpZmllZCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcyA9IHNhZmVKU09OUGFyc2Uoc2Vzc2lvblN0cmluZ2lmaWVkKTtcblx0XHRcdFx0XHRcdGlmICghcykgcmV0dXJuIFtdO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvbiA9IHtcblx0XHRcdFx0XHRcdFx0c2Vzc2lvbjoge1xuXHRcdFx0XHRcdFx0XHRcdC4uLnMuc2Vzc2lvbixcblx0XHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IG5ldyBEYXRlKHMuc2Vzc2lvbi5leHBpcmVzQXQpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHVzZXI6IHtcblx0XHRcdFx0XHRcdFx0XHQuLi5zLnVzZXIsXG5cdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0OiBuZXcgRGF0ZShzLnVzZXIuY3JlYXRlZEF0KSxcblx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKHMudXNlci51cGRhdGVkQXQpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRzZXNzaW9ucyQxLnB1c2goc2Vzc2lvbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXNzaW9ucyQxO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWw6IFwic2Vzc2lvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJ0b2tlblwiLFxuXHRcdFx0XHRcdHZhbHVlOiBzZXNzaW9uVG9rZW5zLFxuXHRcdFx0XHRcdG9wZXJhdG9yOiBcImluXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KTtcblx0XHRcdGlmICghc2Vzc2lvbnMubGVuZ3RoKSByZXR1cm4gW107XG5cdFx0XHRpZiAoc2Vzc2lvbnMuc29tZSgoc2Vzc2lvbikgPT4gIXNlc3Npb24udXNlcikpIHJldHVybiBbXTtcblx0XHRcdHJldHVybiBzZXNzaW9ucy5tYXAoKF9zZXNzaW9uKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgdXNlciwgLi4uc2Vzc2lvbiB9ID0gX3Nlc3Npb247XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0c2Vzc2lvbixcblx0XHRcdFx0XHR1c2VyXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdHVwZGF0ZVNlc3Npb246IGFzeW5jIChzZXNzaW9uVG9rZW4sIHNlc3Npb24pID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCB1cGRhdGVXaXRoSG9va3Moc2Vzc2lvbiwgW3tcblx0XHRcdFx0ZmllbGQ6IFwidG9rZW5cIixcblx0XHRcdFx0dmFsdWU6IHNlc3Npb25Ub2tlblxuXHRcdFx0fV0sIFwic2Vzc2lvblwiLCBzZWNvbmRhcnlTdG9yYWdlID8ge1xuXHRcdFx0XHRhc3luYyBmbihkYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFNlc3Npb24gPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRcdGlmICghY3VycmVudFNlc3Npb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IHBhcnNlZFNlc3Npb24gPSBzYWZlSlNPTlBhcnNlKGN1cnJlbnRTZXNzaW9uKTtcblx0XHRcdFx0XHRpZiAoIXBhcnNlZFNlc3Npb24pIHJldHVybiBudWxsO1xuXHRcdFx0XHRcdGNvbnN0IG1lcmdlZFNlc3Npb24gPSB7XG5cdFx0XHRcdFx0XHQuLi5wYXJzZWRTZXNzaW9uLnNlc3Npb24sXG5cdFx0XHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHRcdFx0ZXhwaXJlc0F0OiBuZXcgRGF0ZShkYXRhLmV4cGlyZXNBdCA/PyBwYXJzZWRTZXNzaW9uLnNlc3Npb24uZXhwaXJlc0F0KSxcblx0XHRcdFx0XHRcdGNyZWF0ZWRBdDogbmV3IERhdGUocGFyc2VkU2Vzc2lvbi5zZXNzaW9uLmNyZWF0ZWRBdCksXG5cdFx0XHRcdFx0XHR1cGRhdGVkQXQ6IG5ldyBEYXRlKGRhdGEudXBkYXRlZEF0ID8/IHBhcnNlZFNlc3Npb24uc2Vzc2lvbi51cGRhdGVkQXQpXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IHBhcnNlU2Vzc2lvbk91dHB1dChjdHgub3B0aW9ucywgbWVyZ2VkU2Vzc2lvbik7XG5cdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRjb25zdCBleHBpcmVzTXMgPSBuZXcgRGF0ZSh1cGRhdGVkU2Vzc2lvbi5leHBpcmVzQXQpLmdldFRpbWUoKTtcblx0XHRcdFx0XHRjb25zdCBzZXNzaW9uVFRMID0gTWF0aC5tYXgoTWF0aC5mbG9vcigoZXhwaXJlc01zIC0gbm93KSAvIDFlMyksIDApO1xuXHRcdFx0XHRcdGlmIChzZXNzaW9uVFRMID4gMCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5zZXQoc2Vzc2lvblRva2VuLCBKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0XHRcdHNlc3Npb246IHVwZGF0ZWRTZXNzaW9uLFxuXHRcdFx0XHRcdFx0XHR1c2VyOiBwYXJzZWRTZXNzaW9uLnVzZXJcblx0XHRcdFx0XHRcdH0pLCBzZXNzaW9uVFRMKTtcblx0XHRcdFx0XHRcdGNvbnN0IGxpc3RLZXkgPSBgYWN0aXZlLXNlc3Npb25zLSR7dXBkYXRlZFNlc3Npb24udXNlcklkfWA7XG5cdFx0XHRcdFx0XHRjb25zdCBsaXN0UmF3ID0gYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5nZXQobGlzdEtleSk7XG5cdFx0XHRcdFx0XHRjb25zdCBzb3J0ZWQgPSAobGlzdFJhdyA/IHNhZmVKU09OUGFyc2UobGlzdFJhdykgfHwgW10gOiBbXSkuZmlsdGVyKChzKSA9PiBzLnRva2VuICE9PSBzZXNzaW9uVG9rZW4gJiYgcy5leHBpcmVzQXQgPiBub3cpLmNvbmNhdChbe1xuXHRcdFx0XHRcdFx0XHR0b2tlbjogc2Vzc2lvblRva2VuLFxuXHRcdFx0XHRcdFx0XHRleHBpcmVzQXQ6IGV4cGlyZXNNc1xuXHRcdFx0XHRcdFx0fV0pLnNvcnQoKGEsIGIpID0+IGEuZXhwaXJlc0F0IC0gYi5leHBpcmVzQXQpO1xuXHRcdFx0XHRcdFx0Y29uc3QgZnVydGhlc3RTZXNzaW9uRXhwID0gc29ydGVkLmF0KC0xKT8uZXhwaXJlc0F0O1xuXHRcdFx0XHRcdFx0aWYgKGZ1cnRoZXN0U2Vzc2lvbkV4cCAmJiBmdXJ0aGVzdFNlc3Npb25FeHAgPiBub3cpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGxpc3RLZXksIEpTT04uc3RyaW5naWZ5KHNvcnRlZCksIE1hdGguZmxvb3IoKGZ1cnRoZXN0U2Vzc2lvbkV4cCAtIG5vdykgLyAxZTMpKTtcblx0XHRcdFx0XHRcdGVsc2UgYXdhaXQgc2Vjb25kYXJ5U3RvcmFnZS5kZWxldGUobGlzdEtleSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB1cGRhdGVkU2Vzc2lvbjtcblx0XHRcdFx0fSxcblx0XHRcdFx0ZXhlY3V0ZU1haW5Gbjogb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlXG5cdFx0XHR9IDogdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZVNlc3Npb246IGFzeW5jICh0b2tlbikgPT4ge1xuXHRcdFx0aWYgKHNlY29uZGFyeVN0b3JhZ2UpIHtcblx0XHRcdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KHRva2VuKTtcblx0XHRcdFx0aWYgKGRhdGEpIHtcblx0XHRcdFx0XHRjb25zdCB7IHNlc3Npb24gfSA9IHNhZmVKU09OUGFyc2UoZGF0YSkgPz8ge307XG5cdFx0XHRcdFx0aWYgKCFzZXNzaW9uKSB7XG5cdFx0XHRcdFx0XHRsb2dnZXIuZXJyb3IoXCJTZXNzaW9uIG5vdCBmb3VuZCBpbiBzZWNvbmRhcnkgc3RvcmFnZVwiKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VySWQ7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudExpc3QgPSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChgYWN0aXZlLXNlc3Npb25zLSR7dXNlcklkfWApO1xuXHRcdFx0XHRcdGlmIChjdXJyZW50TGlzdCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGlzdCA9IHNhZmVKU09OUGFyc2UoY3VycmVudExpc3QpIHx8IFtdO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0XHRcdGNvbnN0IGZpbHRlcmVkID0gbGlzdC5maWx0ZXIoKHNlc3Npb24kMSkgPT4gc2Vzc2lvbiQxLmV4cGlyZXNBdCA+IG5vdyAmJiBzZXNzaW9uJDEudG9rZW4gIT09IHRva2VuKTtcblx0XHRcdFx0XHRcdGNvbnN0IGZ1cnRoZXN0U2Vzc2lvbkV4cCA9IGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IGEuZXhwaXJlc0F0IC0gYi5leHBpcmVzQXQpLmF0KC0xKT8uZXhwaXJlc0F0O1xuXHRcdFx0XHRcdFx0aWYgKGZpbHRlcmVkLmxlbmd0aCA+IDAgJiYgZnVydGhlc3RTZXNzaW9uRXhwICYmIGZ1cnRoZXN0U2Vzc2lvbkV4cCA+IERhdGUubm93KCkpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2Uuc2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCwgSlNPTi5zdHJpbmdpZnkoZmlsdGVyZWQpLCBNYXRoLmZsb29yKChmdXJ0aGVzdFNlc3Npb25FeHAgLSBub3cpIC8gMWUzKSk7XG5cdFx0XHRcdFx0XHRlbHNlIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWR9YCk7XG5cdFx0XHRcdFx0fSBlbHNlIGxvZ2dlci5lcnJvcihcIkFjdGl2ZSBzZXNzaW9ucyBsaXN0IG5vdCBmb3VuZCBpbiBzZWNvbmRhcnkgc3RvcmFnZVwiKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZSh0b2tlbik7XG5cdFx0XHRcdGlmICghb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlIHx8IGN0eC5vcHRpb25zLnNlc3Npb24/LnByZXNlcnZlU2Vzc2lvbkluRGF0YWJhc2UpIHJldHVybjtcblx0XHRcdH1cblx0XHRcdGF3YWl0IGRlbGV0ZVdpdGhIb29rcyhbe1xuXHRcdFx0XHRmaWVsZDogXCJ0b2tlblwiLFxuXHRcdFx0XHR2YWx1ZTogdG9rZW5cblx0XHRcdH1dLCBcInNlc3Npb25cIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGRlbGV0ZUFjY291bnRzOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVBY2NvdW50OiBhc3luYyAoYWNjb3VudElkKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGFjY291bnRJZFxuXHRcdFx0fV0sIFwiYWNjb3VudFwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZGVsZXRlU2Vzc2lvbnM6IGFzeW5jICh1c2VySWRPclNlc3Npb25Ub2tlbnMpID0+IHtcblx0XHRcdGlmIChzZWNvbmRhcnlTdG9yYWdlKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgdXNlcklkT3JTZXNzaW9uVG9rZW5zID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0Y29uc3QgYWN0aXZlU2Vzc2lvbiA9IGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZ2V0KGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWRPclNlc3Npb25Ub2tlbnN9YCk7XG5cdFx0XHRcdFx0Y29uc3Qgc2Vzc2lvbnMgPSBhY3RpdmVTZXNzaW9uID8gc2FmZUpTT05QYXJzZShhY3RpdmVTZXNzaW9uKSA6IFtdO1xuXHRcdFx0XHRcdGlmICghc2Vzc2lvbnMpIHJldHVybjtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IHNlc3Npb24gb2Ygc2Vzc2lvbnMpIGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKHNlc3Npb24udG9rZW4pO1xuXHRcdFx0XHRcdGF3YWl0IHNlY29uZGFyeVN0b3JhZ2UuZGVsZXRlKGBhY3RpdmUtc2Vzc2lvbnMtJHt1c2VySWRPclNlc3Npb25Ub2tlbnN9YCk7XG5cdFx0XHRcdH0gZWxzZSBmb3IgKGNvbnN0IHNlc3Npb25Ub2tlbiBvZiB1c2VySWRPclNlc3Npb25Ub2tlbnMpIGlmIChhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmdldChzZXNzaW9uVG9rZW4pKSBhd2FpdCBzZWNvbmRhcnlTdG9yYWdlLmRlbGV0ZShzZXNzaW9uVG9rZW4pO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuc2Vzc2lvbj8uc3RvcmVTZXNzaW9uSW5EYXRhYmFzZSB8fCBjdHgub3B0aW9ucy5zZXNzaW9uPy5wcmVzZXJ2ZVNlc3Npb25JbkRhdGFiYXNlKSByZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRhd2FpdCBkZWxldGVNYW55V2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBBcnJheS5pc0FycmF5KHVzZXJJZE9yU2Vzc2lvblRva2VucykgPyBcInRva2VuXCIgOiBcInVzZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogdXNlcklkT3JTZXNzaW9uVG9rZW5zLFxuXHRcdFx0XHRvcGVyYXRvcjogQXJyYXkuaXNBcnJheSh1c2VySWRPclNlc3Npb25Ub2tlbnMpID8gXCJpblwiIDogdm9pZCAwXG5cdFx0XHR9XSwgXCJzZXNzaW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRmaW5kT0F1dGhVc2VyOiBhc3luYyAoZW1haWwsIGFjY291bnRJZCwgcHJvdmlkZXJJZCkgPT4ge1xuXHRcdFx0Y29uc3QgYWNjb3VudCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWQsXG5cdFx0XHRcdFx0ZmllbGQ6IFwiYWNjb3VudElkXCJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGpvaW46IHsgdXNlcjogdHJ1ZSB9XG5cdFx0XHR9KS50aGVuKChhY2NvdW50cykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYWNjb3VudHMuZmluZCgoYSkgPT4gYS5wcm92aWRlcklkID09PSBwcm92aWRlcklkKTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKGFjY291bnQpIGlmIChhY2NvdW50LnVzZXIpIHJldHVybiB7XG5cdFx0XHRcdHVzZXI6IGFjY291bnQudXNlcixcblx0XHRcdFx0YWNjb3VudHM6IFthY2NvdW50XVxuXHRcdFx0fTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kT25lKHtcblx0XHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKSxcblx0XHRcdFx0XHRcdGZpZWxkOiBcImVtYWlsXCJcblx0XHRcdFx0XHR9XVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKHVzZXIpIHJldHVybiB7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHRhY2NvdW50czogW2FjY291bnRdXG5cdFx0XHRcdH07XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRcdHZhbHVlOiBlbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIlxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAodXNlcikgcmV0dXJuIHtcblx0XHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRcdGFjY291bnRzOiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0XHRcdG1vZGVsOiBcImFjY291bnRcIixcblx0XHRcdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdXNlci5pZCxcblx0XHRcdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCJcblx0XHRcdFx0XHRcdH1dXG5cdFx0XHRcdFx0fSkgfHwgW11cblx0XHRcdFx0fTtcblx0XHRcdFx0ZWxzZSByZXR1cm4gbnVsbDtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGZpbmRVc2VyQnlFbWFpbDogYXN5bmMgKGVtYWlsLCBvcHRpb25zJDEpID0+IHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE9uZSh7XG5cdFx0XHRcdG1vZGVsOiBcInVzZXJcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0dmFsdWU6IGVtYWlsLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0ZmllbGQ6IFwiZW1haWxcIlxuXHRcdFx0XHR9XSxcblx0XHRcdFx0am9pbjogeyAuLi5vcHRpb25zJDE/LmluY2x1ZGVBY2NvdW50cyA/IHsgYWNjb3VudDogdHJ1ZSB9IDoge30gfVxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoIXJlc3VsdCkgcmV0dXJuIG51bGw7XG5cdFx0XHRjb25zdCB7IGFjY291bnQ6IGFjY291bnRzLCAuLi51c2VyIH0gPSByZXN1bHQ7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VyLFxuXHRcdFx0XHRhY2NvdW50czogYWNjb3VudHMgPz8gW11cblx0XHRcdH07XG5cdFx0fSxcblx0XHRmaW5kVXNlckJ5SWQ6IGFzeW5jICh1c2VySWQpID0+IHtcblx0XHRcdGlmICghdXNlcklkKSByZXR1cm4gbnVsbDtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJ1c2VyXCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRsaW5rQWNjb3VudDogYXN5bmMgKGFjY291bnQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5hY2NvdW50XG5cdFx0XHR9LCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdHVwZGF0ZVVzZXI6IGFzeW5jICh1c2VySWQsIGRhdGEpID0+IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0YXdhaXQgcmVmcmVzaFVzZXJTZXNzaW9ucyh1c2VyKTtcblx0XHRcdHJldHVybiB1c2VyO1xuXHRcdH0sXG5cdFx0dXBkYXRlVXNlckJ5RW1haWw6IGFzeW5jIChlbWFpbCwgZGF0YSkgPT4ge1xuXHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IHVwZGF0ZVdpdGhIb29rcyhkYXRhLCBbe1xuXHRcdFx0XHRmaWVsZDogXCJlbWFpbFwiLFxuXHRcdFx0XHR2YWx1ZTogZW1haWwudG9Mb3dlckNhc2UoKVxuXHRcdFx0fV0sIFwidXNlclwiLCB2b2lkIDApO1xuXHRcdFx0YXdhaXQgcmVmcmVzaFVzZXJTZXNzaW9ucyh1c2VyKTtcblx0XHRcdHJldHVybiB1c2VyO1xuXHRcdH0sXG5cdFx0dXBkYXRlUGFzc3dvcmQ6IGFzeW5jICh1c2VySWQsIHBhc3N3b3JkKSA9PiB7XG5cdFx0XHRhd2FpdCB1cGRhdGVNYW55V2l0aEhvb2tzKHsgcGFzc3dvcmQgfSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdH0sIHtcblx0XHRcdFx0ZmllbGQ6IFwicHJvdmlkZXJJZFwiLFxuXHRcdFx0XHR2YWx1ZTogXCJjcmVkZW50aWFsXCJcblx0XHRcdH1dLCBcImFjY291bnRcIiwgdm9pZCAwKTtcblx0XHR9LFxuXHRcdGZpbmRBY2NvdW50czogYXN5bmMgKHVzZXJJZCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZmluZE1hbnkoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcInVzZXJJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB1c2VySWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnQ6IGFzeW5jIChhY2NvdW50SWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdFx0fV1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0ZmluZEFjY291bnRCeVByb3ZpZGVySWQ6IGFzeW5jIChhY2NvdW50SWQsIHByb3ZpZGVySWQpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRPbmUoe1xuXHRcdFx0XHRtb2RlbDogXCJhY2NvdW50XCIsXG5cdFx0XHRcdHdoZXJlOiBbe1xuXHRcdFx0XHRcdGZpZWxkOiBcImFjY291bnRJZFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBhY2NvdW50SWRcblx0XHRcdFx0fSwge1xuXHRcdFx0XHRcdGZpZWxkOiBcInByb3ZpZGVySWRcIixcblx0XHRcdFx0XHR2YWx1ZTogcHJvdmlkZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRmaW5kQWNjb3VudEJ5VXNlcklkOiBhc3luYyAodXNlcklkKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcImFjY291bnRcIixcblx0XHRcdFx0d2hlcmU6IFt7XG5cdFx0XHRcdFx0ZmllbGQ6IFwidXNlcklkXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJJZFxuXHRcdFx0XHR9XVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHR1cGRhdGVBY2NvdW50OiBhc3luYyAoaWQsIGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCB1cGRhdGVXaXRoSG9va3MoZGF0YSwgW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRcIixcblx0XHRcdFx0dmFsdWU6IGlkXG5cdFx0XHR9XSwgXCJhY2NvdW50XCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRjcmVhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVXaXRoSG9va3Moe1xuXHRcdFx0XHRjcmVhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHR1cGRhdGVkQXQ6IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpLFxuXHRcdFx0XHQuLi5kYXRhXG5cdFx0XHR9LCBcInZlcmlmaWNhdGlvblwiLCB2b2lkIDApO1xuXHRcdH0sXG5cdFx0ZmluZFZlcmlmaWNhdGlvblZhbHVlOiBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0Y29uc3QgdmVyaWZpY2F0aW9uID0gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsOiBcInZlcmlmaWNhdGlvblwiLFxuXHRcdFx0XHR3aGVyZTogW3tcblx0XHRcdFx0XHRmaWVsZDogXCJpZGVudGlmaWVyXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGlkZW50aWZpZXJcblx0XHRcdFx0fV0sXG5cdFx0XHRcdHNvcnRCeToge1xuXHRcdFx0XHRcdGZpZWxkOiBcImNyZWF0ZWRBdFwiLFxuXHRcdFx0XHRcdGRpcmVjdGlvbjogXCJkZXNjXCJcblx0XHRcdFx0fSxcblx0XHRcdFx0bGltaXQ6IDFcblx0XHRcdH0pO1xuXHRcdFx0aWYgKCFvcHRpb25zLnZlcmlmaWNhdGlvbj8uZGlzYWJsZUNsZWFudXApIGF3YWl0IGRlbGV0ZU1hbnlXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiZXhwaXJlc0F0XCIsXG5cdFx0XHRcdHZhbHVlOiAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSxcblx0XHRcdFx0b3BlcmF0b3I6IFwibHRcIlxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0XHRyZXR1cm4gdmVyaWZpY2F0aW9uWzBdO1xuXHRcdH0sXG5cdFx0ZGVsZXRlVmVyaWZpY2F0aW9uVmFsdWU6IGFzeW5jIChpZCkgPT4ge1xuXHRcdFx0YXdhaXQgZGVsZXRlV2l0aEhvb2tzKFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHRkZWxldGVWZXJpZmljYXRpb25CeUlkZW50aWZpZXI6IGFzeW5jIChpZGVudGlmaWVyKSA9PiB7XG5cdFx0XHRhd2FpdCBkZWxldGVXaXRoSG9va3MoW3tcblx0XHRcdFx0ZmllbGQ6IFwiaWRlbnRpZmllclwiLFxuXHRcdFx0XHR2YWx1ZTogaWRlbnRpZmllclxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fSxcblx0XHR1cGRhdGVWZXJpZmljYXRpb25WYWx1ZTogYXN5bmMgKGlkLCBkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdXBkYXRlV2l0aEhvb2tzKGRhdGEsIFt7XG5cdFx0XHRcdGZpZWxkOiBcImlkXCIsXG5cdFx0XHRcdHZhbHVlOiBpZFxuXHRcdFx0fV0sIFwidmVyaWZpY2F0aW9uXCIsIHZvaWQgMCk7XG5cdFx0fVxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVJbnRlcm5hbEFkYXB0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVybmFsLWFkYXB0ZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/internal-adapter.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/schema.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/schema.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeSchema: () => (/* binding */ mergeSchema),\n/* harmony export */   parseAccountInput: () => (/* binding */ parseAccountInput),\n/* harmony export */   parseAccountOutput: () => (/* binding */ parseAccountOutput),\n/* harmony export */   parseAdditionalUserInput: () => (/* binding */ parseAdditionalUserInput),\n/* harmony export */   parseInputData: () => (/* binding */ parseInputData),\n/* harmony export */   parseSessionInput: () => (/* binding */ parseSessionInput),\n/* harmony export */   parseSessionOutput: () => (/* binding */ parseSessionOutput),\n/* harmony export */   parseUserInput: () => (/* binding */ parseUserInput),\n/* harmony export */   parseUserOutput: () => (/* binding */ parseUserOutput)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n//#region src/db/schema.ts\nconst cache = /* @__PURE__ */ new WeakMap();\nfunction parseOutputData(data, schema) {\n\tconst fields = schema.fields;\n\tconst parsedData = {};\n\tfor (const key in data) {\n\t\tconst field = fields[key];\n\t\tif (!field) {\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (field.returned === false && key !== \"id\") continue;\n\t\tparsedData[key] = data[key];\n\t}\n\treturn parsedData;\n}\nfunction getFields(options, table, mode) {\n\tconst cacheKey = `${table}:${mode}`;\n\tif (!cache.has(options)) cache.set(options, /* @__PURE__ */ new Map());\n\tconst tableCache = cache.get(options);\n\tif (tableCache.has(cacheKey)) return tableCache.get(cacheKey);\n\tconst coreSchema = mode === \"output\" ? (0,_better_auth_core_db__WEBPACK_IMPORTED_MODULE_0__.getAuthTables)(options)[table]?.fields ?? {} : {};\n\tconst additionalFields = table === \"user\" || table === \"session\" || table === \"account\" ? options[table]?.additionalFields : void 0;\n\tlet schema = {\n\t\t...coreSchema,\n\t\t...additionalFields ?? {}\n\t};\n\tfor (const plugin of options.plugins || []) if (plugin.schema && plugin.schema[table]) schema = {\n\t\t...schema,\n\t\t...plugin.schema[table].fields\n\t};\n\ttableCache.set(cacheKey, schema);\n\treturn schema;\n}\nfunction parseUserOutput(options, user) {\n\treturn parseOutputData(user, { fields: getFields(options, \"user\", \"output\") });\n}\nfunction parseSessionOutput(options, session) {\n\treturn parseOutputData(session, { fields: getFields(options, \"session\", \"output\") });\n}\nfunction parseAccountOutput(options, account) {\n\tconst { accessToken: _accessToken, refreshToken: _refreshToken, idToken: _idToken, accessTokenExpiresAt: _accessTokenExpiresAt, refreshTokenExpiresAt: _refreshTokenExpiresAt, password: _password, ...rest } = parseOutputData(account, { fields: getFields(options, \"account\", \"output\") });\n\treturn rest;\n}\nfunction parseInputData(data, schema) {\n\tconst action = schema.action || \"create\";\n\tconst fields = schema.fields;\n\tconst parsedData = Object.assign(Object.create(null), null);\n\tfor (const key in fields) {\n\t\tif (key in data) {\n\t\t\tif (fields[key].input === false) {\n\t\t\t\tif (fields[key].defaultValue !== void 0) {\n\t\t\t\t\tif (action !== \"update\") {\n\t\t\t\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (data[key]) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is not allowed to be set` });\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].validator?.input && data[key] !== void 0) {\n\t\t\t\tconst result = fields[key].validator.input[\"~standard\"].validate(data[key]);\n\t\t\t\tif (result instanceof Promise) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Async validation is not supported for additional fields\" });\n\t\t\t\tif (\"issues\" in result && result.issues) throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: result.issues[0]?.message || \"Validation Error\" });\n\t\t\t\tparsedData[key] = result.value;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (fields[key].transform?.input && data[key] !== void 0) {\n\t\t\t\tparsedData[key] = fields[key].transform?.input(data[key]);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = data[key];\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].defaultValue !== void 0 && action === \"create\") {\n\t\t\tif (typeof fields[key].defaultValue === \"function\") {\n\t\t\t\tparsedData[key] = fields[key].defaultValue();\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tparsedData[key] = fields[key].defaultValue;\n\t\t\tcontinue;\n\t\t}\n\t\tif (fields[key].required && action === \"create\") throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", { message: `${key} is required` });\n\t}\n\treturn parsedData;\n}\nfunction parseUserInput(options, user = {}, action) {\n\treturn parseInputData(user, {\n\t\tfields: getFields(options, \"user\", \"input\"),\n\t\taction\n\t});\n}\nfunction parseAdditionalUserInput(options, user) {\n\tconst schema = getFields(options, \"user\", \"input\");\n\treturn parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n\treturn parseInputData(account, { fields: getFields(options, \"account\", \"input\") });\n}\nfunction parseSessionInput(options, session) {\n\treturn parseInputData(session, { fields: getFields(options, \"session\", \"input\") });\n}\nfunction mergeSchema(schema, newSchema) {\n\tif (!newSchema) return schema;\n\tfor (const table in newSchema) {\n\t\tconst newModelName = newSchema[table]?.modelName;\n\t\tif (newModelName) schema[table].modelName = newModelName;\n\t\tfor (const field in schema[table].fields) {\n\t\t\tconst newField = newSchema[table]?.fields?.[field];\n\t\t\tif (!newField) continue;\n\t\t\tschema[table].fields[field].fieldName = newField;\n\t\t}\n\t}\n\treturn schema;\n}\n\n//#endregion\n\n//# sourceMappingURL=schema.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi9zY2hlbWEubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ2Q7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsTUFBTSxHQUFHLEtBQUs7QUFDbkM7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLG1FQUFhLCtCQUErQjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBLG1DQUFtQyxpREFBaUQ7QUFDcEY7QUFDQTtBQUNBLFNBQVMsc01BQXNNLDZCQUE2QixpREFBaUQ7QUFDN1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGlEQUFRLGtCQUFrQixZQUFZLEtBQUssMkJBQTJCO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGlEQUFRLDRCQUE0QixvRUFBb0U7QUFDckosdURBQXVELGlEQUFRLGtCQUFrQiwwREFBMEQ7QUFDM0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGlEQUFRLGtCQUFrQixZQUFZLEtBQUssY0FBYztBQUN0SDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUM7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxJQUFJLGdCQUFnQjtBQUNyRDtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFnRDtBQUNsRjtBQUNBO0FBQ0Esa0NBQWtDLGdEQUFnRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ2dMO0FBQ2hMIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2RiL3NjaGVtYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QXV0aFRhYmxlcyB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9kYlwiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi9zY2hlbWEudHNcbmNvbnN0IGNhY2hlID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBwYXJzZU91dHB1dERhdGEoZGF0YSwgc2NoZW1hKSB7XG5cdGNvbnN0IGZpZWxkcyA9IHNjaGVtYS5maWVsZHM7XG5cdGNvbnN0IHBhcnNlZERhdGEgPSB7fTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuXHRcdGNvbnN0IGZpZWxkID0gZmllbGRzW2tleV07XG5cdFx0aWYgKCFmaWVsZCkge1xuXHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZGF0YVtrZXldO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXHRcdGlmIChmaWVsZC5yZXR1cm5lZCA9PT0gZmFsc2UgJiYga2V5ICE9PSBcImlkXCIpIGNvbnRpbnVlO1xuXHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0fVxuXHRyZXR1cm4gcGFyc2VkRGF0YTtcbn1cbmZ1bmN0aW9uIGdldEZpZWxkcyhvcHRpb25zLCB0YWJsZSwgbW9kZSkge1xuXHRjb25zdCBjYWNoZUtleSA9IGAke3RhYmxlfToke21vZGV9YDtcblx0aWYgKCFjYWNoZS5oYXMob3B0aW9ucykpIGNhY2hlLnNldChvcHRpb25zLCAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKTtcblx0Y29uc3QgdGFibGVDYWNoZSA9IGNhY2hlLmdldChvcHRpb25zKTtcblx0aWYgKHRhYmxlQ2FjaGUuaGFzKGNhY2hlS2V5KSkgcmV0dXJuIHRhYmxlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0Y29uc3QgY29yZVNjaGVtYSA9IG1vZGUgPT09IFwib3V0cHV0XCIgPyBnZXRBdXRoVGFibGVzKG9wdGlvbnMpW3RhYmxlXT8uZmllbGRzID8/IHt9IDoge307XG5cdGNvbnN0IGFkZGl0aW9uYWxGaWVsZHMgPSB0YWJsZSA9PT0gXCJ1c2VyXCIgfHwgdGFibGUgPT09IFwic2Vzc2lvblwiIHx8IHRhYmxlID09PSBcImFjY291bnRcIiA/IG9wdGlvbnNbdGFibGVdPy5hZGRpdGlvbmFsRmllbGRzIDogdm9pZCAwO1xuXHRsZXQgc2NoZW1hID0ge1xuXHRcdC4uLmNvcmVTY2hlbWEsXG5cdFx0Li4uYWRkaXRpb25hbEZpZWxkcyA/PyB7fVxuXHR9O1xuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBvcHRpb25zLnBsdWdpbnMgfHwgW10pIGlmIChwbHVnaW4uc2NoZW1hICYmIHBsdWdpbi5zY2hlbWFbdGFibGVdKSBzY2hlbWEgPSB7XG5cdFx0Li4uc2NoZW1hLFxuXHRcdC4uLnBsdWdpbi5zY2hlbWFbdGFibGVdLmZpZWxkc1xuXHR9O1xuXHR0YWJsZUNhY2hlLnNldChjYWNoZUtleSwgc2NoZW1hKTtcblx0cmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIHBhcnNlVXNlck91dHB1dChvcHRpb25zLCB1c2VyKSB7XG5cdHJldHVybiBwYXJzZU91dHB1dERhdGEodXNlciwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJvdXRwdXRcIikgfSk7XG59XG5mdW5jdGlvbiBwYXJzZVNlc3Npb25PdXRwdXQob3B0aW9ucywgc2Vzc2lvbikge1xuXHRyZXR1cm4gcGFyc2VPdXRwdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwib3V0cHV0XCIpIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50T3V0cHV0KG9wdGlvbnMsIGFjY291bnQpIHtcblx0Y29uc3QgeyBhY2Nlc3NUb2tlbjogX2FjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW46IF9yZWZyZXNoVG9rZW4sIGlkVG9rZW46IF9pZFRva2VuLCBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogX2FjY2Vzc1Rva2VuRXhwaXJlc0F0LCByZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IF9yZWZyZXNoVG9rZW5FeHBpcmVzQXQsIHBhc3N3b3JkOiBfcGFzc3dvcmQsIC4uLnJlc3QgfSA9IHBhcnNlT3V0cHV0RGF0YShhY2NvdW50LCB7IGZpZWxkczogZ2V0RmllbGRzKG9wdGlvbnMsIFwiYWNjb3VudFwiLCBcIm91dHB1dFwiKSB9KTtcblx0cmV0dXJuIHJlc3Q7XG59XG5mdW5jdGlvbiBwYXJzZUlucHV0RGF0YShkYXRhLCBzY2hlbWEpIHtcblx0Y29uc3QgYWN0aW9uID0gc2NoZW1hLmFjdGlvbiB8fCBcImNyZWF0ZVwiO1xuXHRjb25zdCBmaWVsZHMgPSBzY2hlbWEuZmllbGRzO1xuXHRjb25zdCBwYXJzZWREYXRhID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBudWxsKTtcblx0Zm9yIChjb25zdCBrZXkgaW4gZmllbGRzKSB7XG5cdFx0aWYgKGtleSBpbiBkYXRhKSB7XG5cdFx0XHRpZiAoZmllbGRzW2tleV0uaW5wdXQgPT09IGZhbHNlKSB7XG5cdFx0XHRcdGlmIChmaWVsZHNba2V5XS5kZWZhdWx0VmFsdWUgIT09IHZvaWQgMCkge1xuXHRcdFx0XHRcdGlmIChhY3Rpb24gIT09IFwidXBkYXRlXCIpIHtcblx0XHRcdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGF0YVtrZXldKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgbm90IGFsbG93ZWQgdG8gYmUgc2V0YCB9KTtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZmllbGRzW2tleV0udmFsaWRhdG9yPy5pbnB1dCAmJiBkYXRhW2tleV0gIT09IHZvaWQgMCkge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBmaWVsZHNba2V5XS52YWxpZGF0b3IuaW5wdXRbXCJ+c3RhbmRhcmRcIl0udmFsaWRhdGUoZGF0YVtrZXldKTtcblx0XHRcdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiQXN5bmMgdmFsaWRhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciBhZGRpdGlvbmFsIGZpZWxkc1wiIH0pO1xuXHRcdFx0XHRpZiAoXCJpc3N1ZXNcIiBpbiByZXN1bHQgJiYgcmVzdWx0Lmlzc3VlcykgdGhyb3cgbmV3IEFQSUVycm9yKFwiQkFEX1JFUVVFU1RcIiwgeyBtZXNzYWdlOiByZXN1bHQuaXNzdWVzWzBdPy5tZXNzYWdlIHx8IFwiVmFsaWRhdGlvbiBFcnJvclwiIH0pO1xuXHRcdFx0XHRwYXJzZWREYXRhW2tleV0gPSByZXN1bHQudmFsdWU7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGZpZWxkc1trZXldLnRyYW5zZm9ybT8uaW5wdXQgJiYgZGF0YVtrZXldICE9PSB2b2lkIDApIHtcblx0XHRcdFx0cGFyc2VkRGF0YVtrZXldID0gZmllbGRzW2tleV0udHJhbnNmb3JtPy5pbnB1dChkYXRhW2tleV0pO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGRhdGFba2V5XTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0uZGVmYXVsdFZhbHVlICE9PSB2b2lkIDAgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG5cdFx0XHRpZiAodHlwZW9mIGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZSgpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHBhcnNlZERhdGFba2V5XSA9IGZpZWxkc1trZXldLmRlZmF1bHRWYWx1ZTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoZmllbGRzW2tleV0ucmVxdWlyZWQgJiYgYWN0aW9uID09PSBcImNyZWF0ZVwiKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IGAke2tleX0gaXMgcmVxdWlyZWRgIH0pO1xuXHR9XG5cdHJldHVybiBwYXJzZWREYXRhO1xufVxuZnVuY3Rpb24gcGFyc2VVc2VySW5wdXQob3B0aW9ucywgdXNlciA9IHt9LCBhY3Rpb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHVzZXIsIHtcblx0XHRmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcInVzZXJcIiwgXCJpbnB1dFwiKSxcblx0XHRhY3Rpb25cblx0fSk7XG59XG5mdW5jdGlvbiBwYXJzZUFkZGl0aW9uYWxVc2VySW5wdXQob3B0aW9ucywgdXNlcikge1xuXHRjb25zdCBzY2hlbWEgPSBnZXRGaWVsZHMob3B0aW9ucywgXCJ1c2VyXCIsIFwiaW5wdXRcIik7XG5cdHJldHVybiBwYXJzZUlucHV0RGF0YSh1c2VyIHx8IHt9LCB7IGZpZWxkczogc2NoZW1hIH0pO1xufVxuZnVuY3Rpb24gcGFyc2VBY2NvdW50SW5wdXQob3B0aW9ucywgYWNjb3VudCkge1xuXHRyZXR1cm4gcGFyc2VJbnB1dERhdGEoYWNjb3VudCwgeyBmaWVsZHM6IGdldEZpZWxkcyhvcHRpb25zLCBcImFjY291bnRcIiwgXCJpbnB1dFwiKSB9KTtcbn1cbmZ1bmN0aW9uIHBhcnNlU2Vzc2lvbklucHV0KG9wdGlvbnMsIHNlc3Npb24pIHtcblx0cmV0dXJuIHBhcnNlSW5wdXREYXRhKHNlc3Npb24sIHsgZmllbGRzOiBnZXRGaWVsZHMob3B0aW9ucywgXCJzZXNzaW9uXCIsIFwiaW5wdXRcIikgfSk7XG59XG5mdW5jdGlvbiBtZXJnZVNjaGVtYShzY2hlbWEsIG5ld1NjaGVtYSkge1xuXHRpZiAoIW5ld1NjaGVtYSkgcmV0dXJuIHNjaGVtYTtcblx0Zm9yIChjb25zdCB0YWJsZSBpbiBuZXdTY2hlbWEpIHtcblx0XHRjb25zdCBuZXdNb2RlbE5hbWUgPSBuZXdTY2hlbWFbdGFibGVdPy5tb2RlbE5hbWU7XG5cdFx0aWYgKG5ld01vZGVsTmFtZSkgc2NoZW1hW3RhYmxlXS5tb2RlbE5hbWUgPSBuZXdNb2RlbE5hbWU7XG5cdFx0Zm9yIChjb25zdCBmaWVsZCBpbiBzY2hlbWFbdGFibGVdLmZpZWxkcykge1xuXHRcdFx0Y29uc3QgbmV3RmllbGQgPSBuZXdTY2hlbWFbdGFibGVdPy5maWVsZHM/LltmaWVsZF07XG5cdFx0XHRpZiAoIW5ld0ZpZWxkKSBjb250aW51ZTtcblx0XHRcdHNjaGVtYVt0YWJsZV0uZmllbGRzW2ZpZWxkXS5maWVsZE5hbWUgPSBuZXdGaWVsZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHNjaGVtYTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtZXJnZVNjaGVtYSwgcGFyc2VBY2NvdW50SW5wdXQsIHBhcnNlQWNjb3VudE91dHB1dCwgcGFyc2VBZGRpdGlvbmFsVXNlcklucHV0LCBwYXJzZUlucHV0RGF0YSwgcGFyc2VTZXNzaW9uSW5wdXQsIHBhcnNlU2Vzc2lvbk91dHB1dCwgcGFyc2VVc2VySW5wdXQsIHBhcnNlVXNlck91dHB1dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NoZW1hLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/schema.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/db/to-zod.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toZodSchema: () => (/* binding */ toZodSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/index.js\");\n\n\n//#region src/db/to-zod.ts\nfunction toZodSchema({ fields, isClientSide }) {\n\tconst zodFields = Object.keys(fields).reduce((acc, key) => {\n\t\tconst field = fields[key];\n\t\tif (!field) return acc;\n\t\tif (isClientSide && field.input === false) return acc;\n\t\tlet schema;\n\t\tif (field.type === \"json\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.json ? zod__WEBPACK_IMPORTED_MODULE_0__.json() : zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse if (field.type === \"string[]\" || field.type === \"number[]\") schema = zod__WEBPACK_IMPORTED_MODULE_0__.array(field.type === \"string[]\" ? zod__WEBPACK_IMPORTED_MODULE_0__.string() : zod__WEBPACK_IMPORTED_MODULE_0__.number());\n\t\telse if (Array.isArray(field.type)) schema = zod__WEBPACK_IMPORTED_MODULE_0__.any();\n\t\telse schema = zod__WEBPACK_IMPORTED_MODULE_1__[field.type]();\n\t\tif (field?.required === false) schema = schema.optional();\n\t\tif (field?.returned === false) return acc;\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[key]: schema\n\t\t};\n\t}, {});\n\treturn zod__WEBPACK_IMPORTED_MODULE_0__.object(zodFields);\n}\n\n//#endregion\n\n//# sourceMappingURL=to-zod.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi90by16b2QubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5Qjs7QUFFekI7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUNBQU0sR0FBRyxxQ0FBTSxLQUFLLG9DQUFLO0FBQy9ELDRFQUE0RSxzQ0FBTyw2QkFBNkIsdUNBQVEsS0FBSyx1Q0FBUTtBQUNySSwrQ0FBK0Msb0NBQUs7QUFDcEQsZ0JBQWdCLGdDQUFDO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSTtBQUNOLFFBQVEsdUNBQVE7QUFDaEI7O0FBRUE7QUFDdUI7QUFDdkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvdG8tem9kLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcblxuLy8jcmVnaW9uIHNyYy9kYi90by16b2QudHNcbmZ1bmN0aW9uIHRvWm9kU2NoZW1hKHsgZmllbGRzLCBpc0NsaWVudFNpZGUgfSkge1xuXHRjb25zdCB6b2RGaWVsZHMgPSBPYmplY3Qua2V5cyhmaWVsZHMpLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcblx0XHRjb25zdCBmaWVsZCA9IGZpZWxkc1trZXldO1xuXHRcdGlmICghZmllbGQpIHJldHVybiBhY2M7XG5cdFx0aWYgKGlzQ2xpZW50U2lkZSAmJiBmaWVsZC5pbnB1dCA9PT0gZmFsc2UpIHJldHVybiBhY2M7XG5cdFx0bGV0IHNjaGVtYTtcblx0XHRpZiAoZmllbGQudHlwZSA9PT0gXCJqc29uXCIpIHNjaGVtYSA9IHouanNvbiA/IHouanNvbigpIDogei5hbnkoKTtcblx0XHRlbHNlIGlmIChmaWVsZC50eXBlID09PSBcInN0cmluZ1tdXCIgfHwgZmllbGQudHlwZSA9PT0gXCJudW1iZXJbXVwiKSBzY2hlbWEgPSB6LmFycmF5KGZpZWxkLnR5cGUgPT09IFwic3RyaW5nW11cIiA/IHouc3RyaW5nKCkgOiB6Lm51bWJlcigpKTtcblx0XHRlbHNlIGlmIChBcnJheS5pc0FycmF5KGZpZWxkLnR5cGUpKSBzY2hlbWEgPSB6LmFueSgpO1xuXHRcdGVsc2Ugc2NoZW1hID0geltmaWVsZC50eXBlXSgpO1xuXHRcdGlmIChmaWVsZD8ucmVxdWlyZWQgPT09IGZhbHNlKSBzY2hlbWEgPSBzY2hlbWEub3B0aW9uYWwoKTtcblx0XHRpZiAoZmllbGQ/LnJldHVybmVkID09PSBmYWxzZSkgcmV0dXJuIGFjYztcblx0XHRyZXR1cm4ge1xuXHRcdFx0Li4uYWNjLFxuXHRcdFx0W2tleV06IHNjaGVtYVxuXHRcdH07XG5cdH0sIHt9KTtcblx0cmV0dXJuIHoub2JqZWN0KHpvZEZpZWxkcyk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdG9ab2RTY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvLXpvZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/to-zod.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/db/with-hooks.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWithHooks: () => (/* binding */ getWithHooks)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n\n\n//#region src/db/with-hooks.ts\nfunction getWithHooks(adapter, ctx) {\n\tconst hooks = ctx.hooks;\n\tasync function createWithHooks(data, model, customCreateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(actualData, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customCreated = customCreateFn ? await customCreateFn.fn(actualData) : null;\n\t\tconst created = !customCreateFn || customCreateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).create({\n\t\t\tmodel,\n\t\t\tdata: actualData,\n\t\t\tforceAllowId: true\n\t\t}) : customCreated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.create?.after;\n\t\t\tif (toRun) await toRun(created, context);\n\t\t}\n\t\treturn created;\n\t}\n\tasync function updateWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).update({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function updateManyWithHooks(data, where, model, customUpdateFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet actualData = data;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.before;\n\t\t\tif (toRun) {\n\t\t\t\tconst result = await toRun(data, context);\n\t\t\t\tif (result === false) return null;\n\t\t\t\tif (typeof result === \"object\" && \"data\" in result) actualData = {\n\t\t\t\t\t...actualData,\n\t\t\t\t\t...result.data\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tconst customUpdated = customUpdateFn ? await customUpdateFn.fn(actualData) : null;\n\t\tconst updated = !customUpdateFn || customUpdateFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).updateMany({\n\t\t\tmodel,\n\t\t\tupdate: actualData,\n\t\t\twhere\n\t\t}) : customUpdated;\n\t\tfor (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.update?.after;\n\t\t\tif (toRun) await toRun(updated, context);\n\t\t}\n\t\treturn updated;\n\t}\n\tasync function deleteWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entityToDelete = null;\n\t\ttry {\n\t\t\tentityToDelete = (await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere,\n\t\t\t\tlimit: 1\n\t\t\t}))[0] || null;\n\t\t} catch {}\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entityToDelete, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).delete({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tif (entityToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entityToDelete, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\tasync function deleteManyWithHooks(where, model, customDeleteFn) {\n\t\tconst context = await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAuthContext)().catch(() => null);\n\t\tlet entitiesToDelete = [];\n\t\ttry {\n\t\t\tentitiesToDelete = await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).findMany({\n\t\t\t\tmodel,\n\t\t\t\twhere\n\t\t\t});\n\t\t} catch {}\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.before;\n\t\t\tif (toRun) {\n\t\t\t\tif (await toRun(entity, context) === false) return null;\n\t\t\t}\n\t\t}\n\t\tconst customDeleted = customDeleteFn ? await customDeleteFn.fn(where) : null;\n\t\tconst deleted = !customDeleteFn || customDeleteFn.executeMainFn ? await (await (0,_better_auth_core_context__WEBPACK_IMPORTED_MODULE_0__.getCurrentAdapter)(adapter)).deleteMany({\n\t\t\tmodel,\n\t\t\twhere\n\t\t}) : customDeleted;\n\t\tfor (const entity of entitiesToDelete) for (const hook of hooks || []) {\n\t\t\tconst toRun = hook[model]?.delete?.after;\n\t\t\tif (toRun) await toRun(entity, context);\n\t\t}\n\t\treturn deleted;\n\t}\n\treturn {\n\t\tcreateWithHooks,\n\t\tupdateWithHooks,\n\t\tupdateManyWithHooks,\n\t\tdeleteWithHooks,\n\t\tdeleteManyWithHooks\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=with-hooks.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9kYi93aXRoLWhvb2tzLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRjs7QUFFckY7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSxrQ0FBa0MsNEVBQWlCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRkFBaUYsNEVBQWlCO0FBQ2xHO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0ZBQXFCO0FBQzdDO0FBQ0E7QUFDQSxtQ0FBbUMsNEVBQWlCO0FBQ3BEO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGLDRFQUFpQjtBQUNsRztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDd0I7QUFDeEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvZGIvd2l0aC1ob29rcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q3VycmVudEFkYXB0ZXIsIGdldEN1cnJlbnRBdXRoQ29udGV4dCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvZGIvd2l0aC1ob29rcy50c1xuZnVuY3Rpb24gZ2V0V2l0aEhvb2tzKGFkYXB0ZXIsIGN0eCkge1xuXHRjb25zdCBob29rcyA9IGN0eC5ob29rcztcblx0YXN5bmMgZnVuY3Rpb24gY3JlYXRlV2l0aEhvb2tzKGRhdGEsIG1vZGVsLCBjdXN0b21DcmVhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5jcmVhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihhY3R1YWxEYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21DcmVhdGVkID0gY3VzdG9tQ3JlYXRlRm4gPyBhd2FpdCBjdXN0b21DcmVhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgY3JlYXRlZCA9ICFjdXN0b21DcmVhdGVGbiB8fCBjdXN0b21DcmVhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5jcmVhdGUoe1xuXHRcdFx0bW9kZWwsXG5cdFx0XHRkYXRhOiBhY3R1YWxEYXRhLFxuXHRcdFx0Zm9yY2VBbGxvd0lkOiB0cnVlXG5cdFx0fSkgOiBjdXN0b21DcmVhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uY3JlYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oY3JlYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiBjcmVhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdpdGhIb29rcyhkYXRhLCB3aGVyZSwgbW9kZWwsIGN1c3RvbVVwZGF0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBhY3R1YWxEYXRhID0gZGF0YTtcblx0XHRmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LnVwZGF0ZT8uYmVmb3JlO1xuXHRcdFx0aWYgKHRvUnVuKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvUnVuKGRhdGEsIGNvbnRleHQpO1xuXHRcdFx0XHRpZiAocmVzdWx0ID09PSBmYWxzZSkgcmV0dXJuIG51bGw7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiICYmIFwiZGF0YVwiIGluIHJlc3VsdCkgYWN0dWFsRGF0YSA9IHtcblx0XHRcdFx0XHQuLi5hY3R1YWxEYXRhLFxuXHRcdFx0XHRcdC4uLnJlc3VsdC5kYXRhXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGN1c3RvbVVwZGF0ZWQgPSBjdXN0b21VcGRhdGVGbiA/IGF3YWl0IGN1c3RvbVVwZGF0ZUZuLmZuKGFjdHVhbERhdGEpIDogbnVsbDtcblx0XHRjb25zdCB1cGRhdGVkID0gIWN1c3RvbVVwZGF0ZUZuIHx8IGN1c3RvbVVwZGF0ZUZuLmV4ZWN1dGVNYWluRm4gPyBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLnVwZGF0ZSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHVwZGF0ZTogYWN0dWFsRGF0YSxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21VcGRhdGVkO1xuXHRcdGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8udXBkYXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4odXBkYXRlZCwgY29udGV4dCk7XG5cdFx0fVxuXHRcdHJldHVybiB1cGRhdGVkO1xuXHR9XG5cdGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1hbnlXaXRoSG9va3MoZGF0YSwgd2hlcmUsIG1vZGVsLCBjdXN0b21VcGRhdGVGbikge1xuXHRcdGNvbnN0IGNvbnRleHQgPSBhd2FpdCBnZXRDdXJyZW50QXV0aENvbnRleHQoKS5jYXRjaCgoKSA9PiBudWxsKTtcblx0XHRsZXQgYWN0dWFsRGF0YSA9IGRhdGE7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0b1J1bihkYXRhLCBjb250ZXh0KTtcblx0XHRcdFx0aWYgKHJlc3VsdCA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIiAmJiBcImRhdGFcIiBpbiByZXN1bHQpIGFjdHVhbERhdGEgPSB7XG5cdFx0XHRcdFx0Li4uYWN0dWFsRGF0YSxcblx0XHRcdFx0XHQuLi5yZXN1bHQuZGF0YVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21VcGRhdGVkID0gY3VzdG9tVXBkYXRlRm4gPyBhd2FpdCBjdXN0b21VcGRhdGVGbi5mbihhY3R1YWxEYXRhKSA6IG51bGw7XG5cdFx0Y29uc3QgdXBkYXRlZCA9ICFjdXN0b21VcGRhdGVGbiB8fCBjdXN0b21VcGRhdGVGbi5leGVjdXRlTWFpbkZuID8gYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS51cGRhdGVNYW55KHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0dXBkYXRlOiBhY3R1YWxEYXRhLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbVVwZGF0ZWQ7XG5cdFx0Zm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy51cGRhdGU/LmFmdGVyO1xuXHRcdFx0aWYgKHRvUnVuKSBhd2FpdCB0b1J1bih1cGRhdGVkLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHVwZGF0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlV2l0aEhvb2tzKHdoZXJlLCBtb2RlbCwgY3VzdG9tRGVsZXRlRm4pIHtcblx0XHRjb25zdCBjb250ZXh0ID0gYXdhaXQgZ2V0Q3VycmVudEF1dGhDb250ZXh0KCkuY2F0Y2goKCkgPT4gbnVsbCk7XG5cdFx0bGV0IGVudGl0eVRvRGVsZXRlID0gbnVsbDtcblx0XHR0cnkge1xuXHRcdFx0ZW50aXR5VG9EZWxldGUgPSAoYXdhaXQgKGF3YWl0IGdldEN1cnJlbnRBZGFwdGVyKGFkYXB0ZXIpKS5maW5kTWFueSh7XG5cdFx0XHRcdG1vZGVsLFxuXHRcdFx0XHR3aGVyZSxcblx0XHRcdFx0bGltaXQ6IDFcblx0XHRcdH0pKVswXSB8fCBudWxsO1xuXHRcdH0gY2F0Y2gge31cblx0XHRpZiAoZW50aXR5VG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5iZWZvcmU7XG5cdFx0XHRpZiAodG9SdW4pIHtcblx0XHRcdFx0aWYgKGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlKHtcblx0XHRcdG1vZGVsLFxuXHRcdFx0d2hlcmVcblx0XHR9KSA6IGN1c3RvbURlbGV0ZWQ7XG5cdFx0aWYgKGVudGl0eVRvRGVsZXRlKSBmb3IgKGNvbnN0IGhvb2sgb2YgaG9va3MgfHwgW10pIHtcblx0XHRcdGNvbnN0IHRvUnVuID0gaG9va1ttb2RlbF0/LmRlbGV0ZT8uYWZ0ZXI7XG5cdFx0XHRpZiAodG9SdW4pIGF3YWl0IHRvUnVuKGVudGl0eVRvRGVsZXRlLCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0YXN5bmMgZnVuY3Rpb24gZGVsZXRlTWFueVdpdGhIb29rcyh3aGVyZSwgbW9kZWwsIGN1c3RvbURlbGV0ZUZuKSB7XG5cdFx0Y29uc3QgY29udGV4dCA9IGF3YWl0IGdldEN1cnJlbnRBdXRoQ29udGV4dCgpLmNhdGNoKCgpID0+IG51bGwpO1xuXHRcdGxldCBlbnRpdGllc1RvRGVsZXRlID0gW107XG5cdFx0dHJ5IHtcblx0XHRcdGVudGl0aWVzVG9EZWxldGUgPSBhd2FpdCAoYXdhaXQgZ2V0Q3VycmVudEFkYXB0ZXIoYWRhcHRlcikpLmZpbmRNYW55KHtcblx0XHRcdFx0bW9kZWwsXG5cdFx0XHRcdHdoZXJlXG5cdFx0XHR9KTtcblx0XHR9IGNhdGNoIHt9XG5cdFx0Zm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXNUb0RlbGV0ZSkgZm9yIChjb25zdCBob29rIG9mIGhvb2tzIHx8IFtdKSB7XG5cdFx0XHRjb25zdCB0b1J1biA9IGhvb2tbbW9kZWxdPy5kZWxldGU/LmJlZm9yZTtcblx0XHRcdGlmICh0b1J1bikge1xuXHRcdFx0XHRpZiAoYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KSA9PT0gZmFsc2UpIHJldHVybiBudWxsO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCBjdXN0b21EZWxldGVkID0gY3VzdG9tRGVsZXRlRm4gPyBhd2FpdCBjdXN0b21EZWxldGVGbi5mbih3aGVyZSkgOiBudWxsO1xuXHRcdGNvbnN0IGRlbGV0ZWQgPSAhY3VzdG9tRGVsZXRlRm4gfHwgY3VzdG9tRGVsZXRlRm4uZXhlY3V0ZU1haW5GbiA/IGF3YWl0IChhd2FpdCBnZXRDdXJyZW50QWRhcHRlcihhZGFwdGVyKSkuZGVsZXRlTWFueSh7XG5cdFx0XHRtb2RlbCxcblx0XHRcdHdoZXJlXG5cdFx0fSkgOiBjdXN0b21EZWxldGVkO1xuXHRcdGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzVG9EZWxldGUpIGZvciAoY29uc3QgaG9vayBvZiBob29rcyB8fCBbXSkge1xuXHRcdFx0Y29uc3QgdG9SdW4gPSBob29rW21vZGVsXT8uZGVsZXRlPy5hZnRlcjtcblx0XHRcdGlmICh0b1J1bikgYXdhaXQgdG9SdW4oZW50aXR5LCBjb250ZXh0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGRlbGV0ZWQ7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRjcmVhdGVXaXRoSG9va3MsXG5cdFx0dXBkYXRlV2l0aEhvb2tzLFxuXHRcdHVwZGF0ZU1hbnlXaXRoSG9va3MsXG5cdFx0ZGVsZXRlV2l0aEhvb2tzLFxuXHRcdGRlbGV0ZU1hbnlXaXRoSG9va3Ncblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRXaXRoSG9va3MgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXdpdGgtaG9va3MubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/db/with-hooks.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/index.mjs":
/*!*************************************************!*\
  !*** ./node_modules/better-auth/dist/index.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APIError: () => (/* reexport safe */ _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError),\n/* harmony export */   BASE_ERROR_CODES: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* reexport safe */ _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__.BetterAuthError),\n/* harmony export */   ENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.ENV),\n/* harmony export */   HIDE_METADATA: () => (/* reexport safe */ _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_1__.HIDE_METADATA),\n/* harmony export */   TTY_COLORS: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.TTY_COLORS),\n/* harmony export */   accountSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.accountSchema),\n/* harmony export */   betterAuth: () => (/* reexport safe */ _auth_auth_mjs__WEBPACK_IMPORTED_MODULE_4__.betterAuth),\n/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.capitalizeFirstLetter),\n/* harmony export */   clientCredentialsToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.clientCredentialsToken),\n/* harmony export */   coreSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.coreSchema),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationCodeRequest),\n/* harmony export */   createAuthorizationURL: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createAuthorizationURL),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createClientCredentialsTokenRequest),\n/* harmony export */   createLogger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.createLogger),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.createRefreshAccessTokenRequest),\n/* harmony export */   createTelemetry: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.createTelemetry),\n/* harmony export */   defineErrorCodes: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.defineErrorCodes),\n/* harmony export */   deprecate: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.deprecate),\n/* harmony export */   env: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.env),\n/* harmony export */   generateCodeChallenge: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.generateCodeChallenge),\n/* harmony export */   generateId: () => (/* reexport safe */ _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__.generateId),\n/* harmony export */   generateState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_0__.generateState),\n/* harmony export */   getAuthTables: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.getAuthTables),\n/* harmony export */   getBooleanEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getColorDepth),\n/* harmony export */   getCurrentAdapter: () => (/* reexport safe */ _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__.getCurrentAdapter),\n/* harmony export */   getEnvVar: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.getEnvVar),\n/* harmony export */   getJwks: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getJwks),\n/* harmony export */   getOAuth2Tokens: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.getOAuth2Tokens),\n/* harmony export */   getTelemetryAuthConfig: () => (/* reexport safe */ _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__.getTelemetryAuthConfig),\n/* harmony export */   isDevelopment: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isDevelopment),\n/* harmony export */   isProduction: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isProduction),\n/* harmony export */   isTest: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.isTest),\n/* harmony export */   levels: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.levels),\n/* harmony export */   logger: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.logger),\n/* harmony export */   nodeENV: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.nodeENV),\n/* harmony export */   parseState: () => (/* reexport safe */ _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_0__.parseState),\n/* harmony export */   rateLimitSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.rateLimitSchema),\n/* harmony export */   refreshAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.refreshAccessToken),\n/* harmony export */   safeJSONParse: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__.safeJSONParse),\n/* harmony export */   sessionSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.sessionSchema),\n/* harmony export */   shouldPublishLog: () => (/* reexport safe */ _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__.shouldPublishLog),\n/* harmony export */   userSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.userSchema),\n/* harmony export */   validateAuthorizationCode: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateAuthorizationCode),\n/* harmony export */   validateToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.validateToken),\n/* harmony export */   verificationSchema: () => (/* reexport safe */ _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__.verificationSchema),\n/* harmony export */   verifyAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyAccessToken),\n/* harmony export */   verifyJwsAccessToken: () => (/* reexport safe */ _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__.verifyJwsAccessToken)\n/* harmony export */ });\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _utils_hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils/hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _utils_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/index.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _auth_auth_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./auth/auth.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/auth.mjs\");\n/* harmony import */ var _auth_index_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./auth/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/auth/index.mjs\");\n/* harmony import */ var _better_auth_core_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/context */ \"(rsc)/./node_modules/@better-auth/core/dist/context/index.mjs\");\n/* harmony import */ var _better_auth_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @better-auth/telemetry */ \"(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs\");\n/* harmony import */ var _better_auth_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @better-auth/core */ \"(rsc)/./node_modules/@better-auth/core/dist/index.mjs\");\n/* harmony import */ var _better_auth_core_db__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @better-auth/core/db */ \"(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStEO0FBQ0w7QUFDWDtBQUNKO0FBQ0U7QUFDbkI7QUFDb0M7QUFDbUI7O0FBRWhEOztBQUVHOztBQUVDOztBQUVFOztBQUVDOztBQUVEIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4vb2F1dGgyL3N0YXRlLm1qc1wiO1xuaW1wb3J0IHsgSElERV9NRVRBREFUQSB9IGZyb20gXCIuL3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUlkIH0gZnJvbSBcIi4vdXRpbHMvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuL2FwaS9pbmRleC5tanNcIjtcbmltcG9ydCB7IGJldHRlckF1dGggfSBmcm9tIFwiLi9hdXRoL2F1dGgubWpzXCI7XG5pbXBvcnQgXCIuL2F1dGgvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50QWRhcHRlciB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9jb250ZXh0XCI7XG5pbXBvcnQgeyBjcmVhdGVUZWxlbWV0cnksIGdldFRlbGVtZXRyeUF1dGhDb25maWcgfSBmcm9tIFwiQGJldHRlci1hdXRoL3RlbGVtZXRyeVwiO1xuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmVcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZGJcIlxuXG5leHBvcnQgKiBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCJcblxuZXhwb3J0ICogZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL29hdXRoMlwiXG5cbmV4cG9ydCAqIGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS91dGlsc1wiXG5cbmV4cG9ydCB7IEFQSUVycm9yLCBISURFX01FVEFEQVRBLCBiZXR0ZXJBdXRoLCBjcmVhdGVUZWxlbWV0cnksIGdlbmVyYXRlSWQsIGdlbmVyYXRlU3RhdGUsIGdldEN1cnJlbnRBZGFwdGVyLCBnZXRUZWxlbWV0cnlBdXRoQ29uZmlnLCBwYXJzZVN0YXRlIH07Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/integrations/next-js.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/integrations/next-js.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   nextCookies: () => (/* binding */ nextCookies),\n/* harmony export */   toNextJsHandler: () => (/* binding */ toNextJsHandler)\n/* harmony export */ });\n/* harmony import */ var _cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/cookie-utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/cookie-utils.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var _better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/api */ \"(rsc)/./node_modules/@better-auth/core/dist/api/index.mjs\");\n\n\n\n\n//#region src/integrations/next-js.ts\nfunction toNextJsHandler(auth) {\n\tconst handler = async (request) => {\n\t\treturn \"handler\" in auth ? auth.handler(request) : auth(request);\n\t};\n\treturn {\n\t\tGET: handler,\n\t\tPOST: handler,\n\t\tPATCH: handler,\n\t\tPUT: handler,\n\t\tDELETE: handler\n\t};\n}\nconst nextCookies = () => {\n\treturn {\n\t\tid: \"next-cookies\",\n\t\thooks: { after: [{\n\t\t\tmatcher(ctx) {\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\thandler: (0,_better_auth_core_api__WEBPACK_IMPORTED_MODULE_2__.createAuthMiddleware)(async (ctx) => {\n\t\t\t\tconst returned = ctx.context.responseHeaders;\n\t\t\t\tif (\"_flag\" in ctx && ctx._flag === \"router\") return;\n\t\t\t\tif (returned instanceof Headers) {\n\t\t\t\t\tconst setCookies = returned?.get(\"set-cookie\");\n\t\t\t\t\tif (!setCookies) return;\n\t\t\t\t\tconst parsed = (0,_cookies_cookie_utils_mjs__WEBPACK_IMPORTED_MODULE_0__.parseSetCookieHeader)(setCookies);\n\t\t\t\t\tconst { cookies } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/next\").then(__webpack_require__.bind(__webpack_require__, /*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\"));\n\t\t\t\t\tlet cookieHelper;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcookieHelper = await cookies();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (error instanceof Error && error.message.startsWith(\"`cookies` was called outside a request scope.\")) return;\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t\tparsed.forEach((value, key) => {\n\t\t\t\t\t\tif (!key) return;\n\t\t\t\t\t\tconst opts = {\n\t\t\t\t\t\t\tsameSite: value.samesite,\n\t\t\t\t\t\t\tsecure: value.secure,\n\t\t\t\t\t\t\tmaxAge: value[\"max-age\"],\n\t\t\t\t\t\t\thttpOnly: value.httponly,\n\t\t\t\t\t\t\tdomain: value.domain,\n\t\t\t\t\t\t\tpath: value.path\n\t\t\t\t\t\t};\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookieHelper.set(key, decodeURIComponent(value.value), opts);\n\t\t\t\t\t\t} catch {}\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t})\n\t\t}] }\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=next-js.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9pbnRlZ3JhdGlvbnMvbmV4dC1qcy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUU7QUFDckM7QUFDK0I7O0FBRTdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxJQUFJO0FBQ0osWUFBWSwyRUFBb0I7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrRUFBb0I7QUFDeEMsYUFBYSxVQUFVLFFBQVEsb0xBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDd0M7QUFDeEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvaW50ZWdyYXRpb25zL25leHQtanMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlU2V0Q29va2llSGVhZGVyIH0gZnJvbSBcIi4uL2Nvb2tpZXMvY29va2llLXV0aWxzLm1qc1wiO1xuaW1wb3J0IFwiLi4vY29va2llcy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUF1dGhNaWRkbGV3YXJlIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2FwaVwiO1xuXG4vLyNyZWdpb24gc3JjL2ludGVncmF0aW9ucy9uZXh0LWpzLnRzXG5mdW5jdGlvbiB0b05leHRKc0hhbmRsZXIoYXV0aCkge1xuXHRjb25zdCBoYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QpID0+IHtcblx0XHRyZXR1cm4gXCJoYW5kbGVyXCIgaW4gYXV0aCA/IGF1dGguaGFuZGxlcihyZXF1ZXN0KSA6IGF1dGgocmVxdWVzdCk7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0R0VUOiBoYW5kbGVyLFxuXHRcdFBPU1Q6IGhhbmRsZXIsXG5cdFx0UEFUQ0g6IGhhbmRsZXIsXG5cdFx0UFVUOiBoYW5kbGVyLFxuXHRcdERFTEVURTogaGFuZGxlclxuXHR9O1xufVxuY29uc3QgbmV4dENvb2tpZXMgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IFwibmV4dC1jb29raWVzXCIsXG5cdFx0aG9va3M6IHsgYWZ0ZXI6IFt7XG5cdFx0XHRtYXRjaGVyKGN0eCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0sXG5cdFx0XHRoYW5kbGVyOiBjcmVhdGVBdXRoTWlkZGxld2FyZShhc3luYyAoY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJldHVybmVkID0gY3R4LmNvbnRleHQucmVzcG9uc2VIZWFkZXJzO1xuXHRcdFx0XHRpZiAoXCJfZmxhZ1wiIGluIGN0eCAmJiBjdHguX2ZsYWcgPT09IFwicm91dGVyXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHJldHVybmVkIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdFx0XHRcdGNvbnN0IHNldENvb2tpZXMgPSByZXR1cm5lZD8uZ2V0KFwic2V0LWNvb2tpZVwiKTtcblx0XHRcdFx0XHRpZiAoIXNldENvb2tpZXMpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVNldENvb2tpZUhlYWRlcihzZXRDb29raWVzKTtcblx0XHRcdFx0XHRjb25zdCB7IGNvb2tpZXMgfSA9IGF3YWl0IGltcG9ydChcIm5leHQvaGVhZGVyc1wiKTtcblx0XHRcdFx0XHRsZXQgY29va2llSGVscGVyO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb29raWVIZWxwZXIgPSBhd2FpdCBjb29raWVzKCk7XG5cdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcImBjb29raWVzYCB3YXMgY2FsbGVkIG91dHNpZGUgYSByZXF1ZXN0IHNjb3BlLlwiKSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhcnNlZC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoIWtleSkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3Qgb3B0cyA9IHtcblx0XHRcdFx0XHRcdFx0c2FtZVNpdGU6IHZhbHVlLnNhbWVzaXRlLFxuXHRcdFx0XHRcdFx0XHRzZWN1cmU6IHZhbHVlLnNlY3VyZSxcblx0XHRcdFx0XHRcdFx0bWF4QWdlOiB2YWx1ZVtcIm1heC1hZ2VcIl0sXG5cdFx0XHRcdFx0XHRcdGh0dHBPbmx5OiB2YWx1ZS5odHRwb25seSxcblx0XHRcdFx0XHRcdFx0ZG9tYWluOiB2YWx1ZS5kb21haW4sXG5cdFx0XHRcdFx0XHRcdHBhdGg6IHZhbHVlLnBhdGhcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWVIZWxwZXIuc2V0KGtleSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlLnZhbHVlKSwgb3B0cyk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIHt9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH1dIH1cblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgbmV4dENvb2tpZXMsIHRvTmV4dEpzSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmV4dC1qcy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/integrations/next-js.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/link-account.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleOAuthUserInfo: () => (/* binding */ handleOAuthUserInfo)\n/* harmony export */ });\n/* harmony import */ var _cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies/session-store.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/session-store.mjs\");\n/* harmony import */ var _utils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\");\n/* harmony import */ var _api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/routes/email-verification.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/routes/email-verification.mjs\");\n/* harmony import */ var _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n\n\n\n\n\n\n//#region src/oauth2/link-account.ts\nasync function handleOAuthUserInfo(c, opts) {\n\tconst { userInfo, account, callbackURL, disableSignUp, overrideUserInfo } = opts;\n\tconst dbUser = await c.context.internalAdapter.findOAuthUser(userInfo.email.toLowerCase(), account.accountId, account.providerId).catch((e) => {\n\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Better auth was unable to query your database.\\nError: \", e);\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=internal_server_error`);\n\t});\n\tlet user = dbUser?.user;\n\tconst isRegister = !user;\n\tif (dbUser) {\n\t\tconst hasBeenLinked = dbUser.accounts.find((a) => a.providerId === account.providerId && a.accountId === account.accountId);\n\t\tif (!hasBeenLinked) {\n\t\t\tconst trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n\t\t\tif (!(opts.isTrustedProvider || trustedProviders?.includes(account.providerId)) && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n\t\t\t\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.isDevelopment)()) _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.warn(`User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"account not linked\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tawait c.context.internalAdapter.linkAccount({\n\t\t\t\t\tproviderId: account.providerId,\n\t\t\t\t\taccountId: userInfo.id.toString(),\n\t\t\t\t\tuserId: dbUser.user.id,\n\t\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Unable to link account\", e);\n\t\t\t\treturn {\n\t\t\t\t\terror: \"unable to link account\",\n\t\t\t\t\tdata: null\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t} else {\n\t\t\tif (c.context.options.account?.updateAccountOnSignIn !== false) {\n\t\t\t\tconst updateData = Object.fromEntries(Object.entries({\n\t\t\t\t\tidToken: account.idToken,\n\t\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\t\tscope: account.scope\n\t\t\t\t}).filter(([_, value]) => value !== void 0));\n\t\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, {\n\t\t\t\t\t...account,\n\t\t\t\t\t...updateData\n\t\t\t\t});\n\t\t\t\tif (Object.keys(updateData).length > 0) await c.context.internalAdapter.updateAccount(hasBeenLinked.id, updateData);\n\t\t\t}\n\t\t\tif (userInfo.emailVerified && !dbUser.user.emailVerified && userInfo.email.toLowerCase() === dbUser.user.email) await c.context.internalAdapter.updateUser(dbUser.user.id, { emailVerified: true });\n\t\t}\n\t\tif (overrideUserInfo) {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tuser = await c.context.internalAdapter.updateUser(dbUser.user.id, {\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase(),\n\t\t\t\temailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n\t\t\t});\n\t\t}\n\t} else {\n\t\tif (disableSignUp) return {\n\t\t\terror: \"signup disabled\",\n\t\t\tdata: null,\n\t\t\tisRegister: false\n\t\t};\n\t\ttry {\n\t\t\tconst { id: _, ...restUserInfo } = userInfo;\n\t\t\tconst accountData = {\n\t\t\t\taccessToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.accessToken, c.context),\n\t\t\t\trefreshToken: await (0,_utils_mjs__WEBPACK_IMPORTED_MODULE_1__.setTokenUtil)(account.refreshToken, c.context),\n\t\t\t\tidToken: account.idToken,\n\t\t\t\taccessTokenExpiresAt: account.accessTokenExpiresAt,\n\t\t\t\trefreshTokenExpiresAt: account.refreshTokenExpiresAt,\n\t\t\t\tscope: account.scope,\n\t\t\t\tproviderId: account.providerId,\n\t\t\t\taccountId: userInfo.id.toString()\n\t\t\t};\n\t\t\tconst { user: createdUser, account: createdAccount } = await c.context.internalAdapter.createOAuthUser({\n\t\t\t\t...restUserInfo,\n\t\t\t\temail: userInfo.email.toLowerCase()\n\t\t\t}, accountData);\n\t\t\tuser = createdUser;\n\t\t\tif (c.context.options.account?.storeAccountCookie) await (0,_cookies_session_store_mjs__WEBPACK_IMPORTED_MODULE_0__.setAccountCookie)(c, createdAccount);\n\t\t\tif (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp && c.context.options.emailVerification?.sendVerificationEmail) {\n\t\t\t\tconst token = await (0,_api_routes_email_verification_mjs__WEBPACK_IMPORTED_MODULE_2__.createEmailVerificationToken)(c.context.secret, user.email, void 0, c.context.options.emailVerification?.expiresIn);\n\t\t\t\tconst url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n\t\t\t\tawait c.context.runInBackgroundOrAwait(c.context.options.emailVerification.sendVerificationEmail({\n\t\t\t\t\tuser,\n\t\t\t\t\turl,\n\t\t\t\t\ttoken\n\t\t\t\t}, c.request));\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(e);\n\t\t\tif (e instanceof _api_index_mjs__WEBPACK_IMPORTED_MODULE_3__.APIError) return {\n\t\t\t\terror: e.message,\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t\treturn {\n\t\t\t\terror: \"unable to create user\",\n\t\t\t\tdata: null,\n\t\t\t\tisRegister: false\n\t\t\t};\n\t\t}\n\t}\n\tif (!user) return {\n\t\terror: \"unable to create user\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\tconst session = await c.context.internalAdapter.createSession(user.id);\n\tif (!session) return {\n\t\terror: \"unable to create session\",\n\t\tdata: null,\n\t\tisRegister: false\n\t};\n\treturn {\n\t\tdata: {\n\t\t\tsession,\n\t\t\tuser\n\t\t},\n\t\terror: null,\n\t\tisRegister\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=link-account.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvbGluay1hY2NvdW50Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBZ0U7QUFDckI7QUFDeUM7QUFDeEM7QUFDa0I7O0FBRTlEO0FBQ0E7QUFDQSxTQUFTLGtFQUFrRTtBQUMzRTtBQUNBLEVBQUUseURBQU07QUFDUixnRUFBZ0Usa0JBQWtCO0FBQ2xGLHNCQUFzQixTQUFTO0FBQy9CLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQWEsSUFBSSx5REFBTSx3REFBd0QsbUJBQW1CO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFZO0FBQ3BDLHlCQUF5Qix3REFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxLQUFLO0FBQ0wsSUFBSSx5REFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnTEFBZ0wscUJBQXFCO0FBQ3JNLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isd0RBQVk7QUFDcEMseUJBQXlCLHdEQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCw2REFBNkQsNEVBQWdCO0FBQzdFO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdMQUFnTCxxQkFBcUI7QUFDck07QUFDQTtBQUNBLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcseUJBQXlCO0FBQ3BDO0FBQ0EsdUJBQXVCLHdEQUFZO0FBQ25DLHdCQUF3Qix3REFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNkNBQTZDO0FBQ3hEO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSw0REFBNEQsNEVBQWdCO0FBQzVFO0FBQ0Esd0JBQXdCLGdHQUE0QjtBQUNwRCxtQkFBbUIsa0JBQWtCLHNCQUFzQixNQUFNLGVBQWUsWUFBWTtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLElBQUk7QUFDSixHQUFHLHlEQUFNO0FBQ1Qsb0JBQW9CLG9EQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDK0I7QUFDL0IiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3Qvb2F1dGgyL2xpbmstYWNjb3VudC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0QWNjb3VudENvb2tpZSB9IGZyb20gXCIuLi9jb29raWVzL3Nlc3Npb24tc3RvcmUubWpzXCI7XG5pbXBvcnQgeyBzZXRUb2tlblV0aWwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4gfSBmcm9tIFwiLi4vYXBpL3JvdXRlcy9lbWFpbC12ZXJpZmljYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBBUElFcnJvciB9IGZyb20gXCIuLi9hcGkvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBpc0RldmVsb3BtZW50LCBsb2dnZXIgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvZW52XCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL2xpbmstYWNjb3VudC50c1xuYXN5bmMgZnVuY3Rpb24gaGFuZGxlT0F1dGhVc2VySW5mbyhjLCBvcHRzKSB7XG5cdGNvbnN0IHsgdXNlckluZm8sIGFjY291bnQsIGNhbGxiYWNrVVJMLCBkaXNhYmxlU2lnblVwLCBvdmVycmlkZVVzZXJJbmZvIH0gPSBvcHRzO1xuXHRjb25zdCBkYlVzZXIgPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRPQXV0aFVzZXIodXNlckluZm8uZW1haWwudG9Mb3dlckNhc2UoKSwgYWNjb3VudC5hY2NvdW50SWQsIGFjY291bnQucHJvdmlkZXJJZCkuY2F0Y2goKGUpID0+IHtcblx0XHRsb2dnZXIuZXJyb3IoXCJCZXR0ZXIgYXV0aCB3YXMgdW5hYmxlIHRvIHF1ZXJ5IHlvdXIgZGF0YWJhc2UuXFxuRXJyb3I6IFwiLCBlKTtcblx0XHRjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9aW50ZXJuYWxfc2VydmVyX2Vycm9yYCk7XG5cdH0pO1xuXHRsZXQgdXNlciA9IGRiVXNlcj8udXNlcjtcblx0Y29uc3QgaXNSZWdpc3RlciA9ICF1c2VyO1xuXHRpZiAoZGJVc2VyKSB7XG5cdFx0Y29uc3QgaGFzQmVlbkxpbmtlZCA9IGRiVXNlci5hY2NvdW50cy5maW5kKChhKSA9PiBhLnByb3ZpZGVySWQgPT09IGFjY291bnQucHJvdmlkZXJJZCAmJiBhLmFjY291bnRJZCA9PT0gYWNjb3VudC5hY2NvdW50SWQpO1xuXHRcdGlmICghaGFzQmVlbkxpbmtlZCkge1xuXHRcdFx0Y29uc3QgdHJ1c3RlZFByb3ZpZGVycyA9IGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy50cnVzdGVkUHJvdmlkZXJzO1xuXHRcdFx0aWYgKCEob3B0cy5pc1RydXN0ZWRQcm92aWRlciB8fCB0cnVzdGVkUHJvdmlkZXJzPy5pbmNsdWRlcyhhY2NvdW50LnByb3ZpZGVySWQpKSAmJiAhdXNlckluZm8uZW1haWxWZXJpZmllZCB8fCBjLmNvbnRleHQub3B0aW9ucy5hY2NvdW50Py5hY2NvdW50TGlua2luZz8uZW5hYmxlZCA9PT0gZmFsc2UpIHtcblx0XHRcdFx0aWYgKGlzRGV2ZWxvcG1lbnQoKSkgbG9nZ2VyLndhcm4oYFVzZXIgYWxyZWFkeSBleGlzdCBidXQgYWNjb3VudCBpc24ndCBsaW5rZWQgdG8gJHthY2NvdW50LnByb3ZpZGVySWR9LiBUbyByZWFkIG1vcmUgYWJvdXQgaG93IGFjY291bnQgbGlua2luZyB3b3JrcyBpbiBCZXR0ZXIgQXV0aCBzZWUgaHR0cHM6Ly93d3cuYmV0dGVyLWF1dGguY29tL2RvY3MvY29uY2VwdHMvdXNlcnMtYWNjb3VudHMjYWNjb3VudC1saW5raW5nLmApO1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGVycm9yOiBcImFjY291bnQgbm90IGxpbmtlZFwiLFxuXHRcdFx0XHRcdGRhdGE6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIubGlua0FjY291bnQoe1xuXHRcdFx0XHRcdHByb3ZpZGVySWQ6IGFjY291bnQucHJvdmlkZXJJZCxcblx0XHRcdFx0XHRhY2NvdW50SWQ6IHVzZXJJbmZvLmlkLnRvU3RyaW5nKCksXG5cdFx0XHRcdFx0dXNlcklkOiBkYlVzZXIudXNlci5pZCxcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdFx0cmVmcmVzaFRva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5yZWZyZXNoVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdFx0aWRUb2tlbjogYWNjb3VudC5pZFRva2VuLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdHJlZnJlc2hUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5yZWZyZXNoVG9rZW5FeHBpcmVzQXQsXG5cdFx0XHRcdFx0c2NvcGU6IGFjY291bnQuc2NvcGVcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBsaW5rIGFjY291bnRcIiwgZSk7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZXJyb3I6IFwidW5hYmxlIHRvIGxpbmsgYWNjb3VudFwiLFxuXHRcdFx0XHRcdGRhdGE6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdGlmICh1c2VySW5mby5lbWFpbFZlcmlmaWVkICYmICFkYlVzZXIudXNlci5lbWFpbFZlcmlmaWVkICYmIHVzZXJJbmZvLmVtYWlsLnRvTG93ZXJDYXNlKCkgPT09IGRiVXNlci51c2VyLmVtYWlsKSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZVVzZXIoZGJVc2VyLnVzZXIuaWQsIHsgZW1haWxWZXJpZmllZDogdHJ1ZSB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGMuY29udGV4dC5vcHRpb25zLmFjY291bnQ/LnVwZGF0ZUFjY291bnRPblNpZ25JbiAhPT0gZmFsc2UpIHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlRGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh7XG5cdFx0XHRcdFx0aWRUb2tlbjogYWNjb3VudC5pZFRva2VuLFxuXHRcdFx0XHRcdGFjY2Vzc1Rva2VuOiBhd2FpdCBzZXRUb2tlblV0aWwoYWNjb3VudC5hY2Nlc3NUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW46IGF3YWl0IHNldFRva2VuVXRpbChhY2NvdW50LnJlZnJlc2hUb2tlbiwgYy5jb250ZXh0KSxcblx0XHRcdFx0XHRhY2Nlc3NUb2tlbkV4cGlyZXNBdDogYWNjb3VudC5hY2Nlc3NUb2tlbkV4cGlyZXNBdCxcblx0XHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRcdHNjb3BlOiBhY2NvdW50LnNjb3BlXG5cdFx0XHRcdH0pLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgIT09IHZvaWQgMCkpO1xuXHRcdFx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGMsIHtcblx0XHRcdFx0XHQuLi5hY2NvdW50LFxuXHRcdFx0XHRcdC4uLnVwZGF0ZURhdGFcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmIChPYmplY3Qua2V5cyh1cGRhdGVEYXRhKS5sZW5ndGggPiAwKSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLnVwZGF0ZUFjY291bnQoaGFzQmVlbkxpbmtlZC5pZCwgdXBkYXRlRGF0YSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodXNlckluZm8uZW1haWxWZXJpZmllZCAmJiAhZGJVc2VyLnVzZXIuZW1haWxWZXJpZmllZCAmJiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCkgYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci51cGRhdGVVc2VyKGRiVXNlci51c2VyLmlkLCB7IGVtYWlsVmVyaWZpZWQ6IHRydWUgfSk7XG5cdFx0fVxuXHRcdGlmIChvdmVycmlkZVVzZXJJbmZvKSB7XG5cdFx0XHRjb25zdCB7IGlkOiBfLCAuLi5yZXN0VXNlckluZm8gfSA9IHVzZXJJbmZvO1xuXHRcdFx0dXNlciA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIudXBkYXRlVXNlcihkYlVzZXIudXNlci5pZCwge1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpID09PSBkYlVzZXIudXNlci5lbWFpbCA/IGRiVXNlci51c2VyLmVtYWlsVmVyaWZpZWQgfHwgdXNlckluZm8uZW1haWxWZXJpZmllZCA6IHVzZXJJbmZvLmVtYWlsVmVyaWZpZWRcblx0XHRcdH0pO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRpZiAoZGlzYWJsZVNpZ25VcCkgcmV0dXJuIHtcblx0XHRcdGVycm9yOiBcInNpZ251cCBkaXNhYmxlZFwiLFxuXHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdFx0fTtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgeyBpZDogXywgLi4ucmVzdFVzZXJJbmZvIH0gPSB1c2VySW5mbztcblx0XHRcdGNvbnN0IGFjY291bnREYXRhID0ge1xuXHRcdFx0XHRhY2Nlc3NUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQuYWNjZXNzVG9rZW4sIGMuY29udGV4dCksXG5cdFx0XHRcdHJlZnJlc2hUb2tlbjogYXdhaXQgc2V0VG9rZW5VdGlsKGFjY291bnQucmVmcmVzaFRva2VuLCBjLmNvbnRleHQpLFxuXHRcdFx0XHRpZFRva2VuOiBhY2NvdW50LmlkVG9rZW4sXG5cdFx0XHRcdGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBhY2NvdW50LmFjY2Vzc1Rva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRyZWZyZXNoVG9rZW5FeHBpcmVzQXQ6IGFjY291bnQucmVmcmVzaFRva2VuRXhwaXJlc0F0LFxuXHRcdFx0XHRzY29wZTogYWNjb3VudC5zY29wZSxcblx0XHRcdFx0cHJvdmlkZXJJZDogYWNjb3VudC5wcm92aWRlcklkLFxuXHRcdFx0XHRhY2NvdW50SWQ6IHVzZXJJbmZvLmlkLnRvU3RyaW5nKClcblx0XHRcdH07XG5cdFx0XHRjb25zdCB7IHVzZXI6IGNyZWF0ZWRVc2VyLCBhY2NvdW50OiBjcmVhdGVkQWNjb3VudCB9ID0gYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5jcmVhdGVPQXV0aFVzZXIoe1xuXHRcdFx0XHQuLi5yZXN0VXNlckluZm8sXG5cdFx0XHRcdGVtYWlsOiB1c2VySW5mby5lbWFpbC50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9LCBhY2NvdW50RGF0YSk7XG5cdFx0XHR1c2VyID0gY3JlYXRlZFVzZXI7XG5cdFx0XHRpZiAoYy5jb250ZXh0Lm9wdGlvbnMuYWNjb3VudD8uc3RvcmVBY2NvdW50Q29va2llKSBhd2FpdCBzZXRBY2NvdW50Q29va2llKGMsIGNyZWF0ZWRBY2NvdW50KTtcblx0XHRcdGlmICghdXNlckluZm8uZW1haWxWZXJpZmllZCAmJiB1c2VyICYmIGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduVXAgJiYgYy5jb250ZXh0Lm9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRWZXJpZmljYXRpb25FbWFpbCkge1xuXHRcdFx0XHRjb25zdCB0b2tlbiA9IGF3YWl0IGNyZWF0ZUVtYWlsVmVyaWZpY2F0aW9uVG9rZW4oYy5jb250ZXh0LnNlY3JldCwgdXNlci5lbWFpbCwgdm9pZCAwLCBjLmNvbnRleHQub3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uZXhwaXJlc0luKTtcblx0XHRcdFx0Y29uc3QgdXJsID0gYCR7Yy5jb250ZXh0LmJhc2VVUkx9L3ZlcmlmeS1lbWFpbD90b2tlbj0ke3Rva2VufSZjYWxsYmFja1VSTD0ke2NhbGxiYWNrVVJMfWA7XG5cdFx0XHRcdGF3YWl0IGMuY29udGV4dC5ydW5JbkJhY2tncm91bmRPckF3YWl0KGMuY29udGV4dC5vcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uLnNlbmRWZXJpZmljYXRpb25FbWFpbCh7XG5cdFx0XHRcdFx0dXNlcixcblx0XHRcdFx0XHR1cmwsXG5cdFx0XHRcdFx0dG9rZW5cblx0XHRcdFx0fSwgYy5yZXF1ZXN0KSk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bG9nZ2VyLmVycm9yKGUpO1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBUElFcnJvcikgcmV0dXJuIHtcblx0XHRcdFx0ZXJyb3I6IGUubWVzc2FnZSxcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0aXNSZWdpc3RlcjogZmFsc2Vcblx0XHRcdH07XG5cdFx0fVxuXHR9XG5cdGlmICghdXNlcikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHVzZXJcIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVNlc3Npb24odXNlci5pZCk7XG5cdGlmICghc2Vzc2lvbikgcmV0dXJuIHtcblx0XHRlcnJvcjogXCJ1bmFibGUgdG8gY3JlYXRlIHNlc3Npb25cIixcblx0XHRkYXRhOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXI6IGZhbHNlXG5cdH07XG5cdHJldHVybiB7XG5cdFx0ZGF0YToge1xuXHRcdFx0c2Vzc2lvbixcblx0XHRcdHVzZXJcblx0XHR9LFxuXHRcdGVycm9yOiBudWxsLFxuXHRcdGlzUmVnaXN0ZXJcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBoYW5kbGVPQXV0aFVzZXJJbmZvIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5rLWFjY291bnQubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/link-account.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/state.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateState: () => (/* binding */ generateState),\n/* harmony export */   parseState: () => (/* binding */ parseState)\n/* harmony export */ });\n/* harmony import */ var _api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../api/middlewares/oauth.mjs */ \"(rsc)/./node_modules/better-auth/dist/api/middlewares/oauth.mjs\");\n/* harmony import */ var _crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../crypto/random.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/random.mjs\");\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n/* harmony import */ var _cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../cookies/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/cookies/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n\n\n\n\n\n//#region src/oauth2/state.ts\nasync function generateState(c, link, additionalData) {\n\tconst callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n\tif (!callbackURL) throw new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"BAD_REQUEST\", { message: \"callbackURL is required\" });\n\tconst codeVerifier = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(128);\n\tconst state = (0,_crypto_random_mjs__WEBPACK_IMPORTED_MODULE_1__.generateRandomString)(32);\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\tconst stateData = {\n\t\t...additionalData ? additionalData : {},\n\t\tcallbackURL,\n\t\tcodeVerifier,\n\t\terrorURL: c.body?.errorCallbackURL,\n\t\tnewUserURL: c.body?.newUserCallbackURL,\n\t\tlink,\n\t\texpiresAt: Date.now() + 600 * 1e3,\n\t\trequestSignUp: c.body?.requestSignUp,\n\t\tstate\n\t};\n\tawait (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(stateData);\n\tif (storeStateStrategy === \"cookie\") {\n\t\tconst encryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricEncrypt)({\n\t\t\tkey: c.context.secret,\n\t\t\tdata: JSON.stringify(stateData)\n\t\t});\n\t\tconst stateCookie$1 = c.context.createAuthCookie(\"oauth_state\", { maxAge: 600 * 1e3 });\n\t\tc.setCookie(stateCookie$1.name, encryptedData, stateCookie$1.attributes);\n\t\treturn {\n\t\t\tstate,\n\t\t\tcodeVerifier\n\t\t};\n\t}\n\tconst stateCookie = c.context.createAuthCookie(\"state\", { maxAge: 300 * 1e3 });\n\tawait c.setSignedCookie(stateCookie.name, state, c.context.secret, stateCookie.attributes);\n\tconst expiresAt = /* @__PURE__ */ new Date();\n\texpiresAt.setMinutes(expiresAt.getMinutes() + 10);\n\tconst verification = await c.context.internalAdapter.createVerificationValue({\n\t\tvalue: JSON.stringify(stateData),\n\t\tidentifier: state,\n\t\texpiresAt\n\t});\n\tif (!verification) {\n\t\tc.context.logger.error(\"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\");\n\t\tthrow new better_call__WEBPACK_IMPORTED_MODULE_4__.APIError(\"INTERNAL_SERVER_ERROR\", { message: \"Unable to create verification\" });\n\t}\n\treturn {\n\t\tstate: verification.identifier,\n\t\tcodeVerifier\n\t};\n}\nasync function parseState(c) {\n\tconst state = c.query.state || c.body.state;\n\tconst storeStateStrategy = c.context.oauthConfig.storeStateStrategy;\n\tconst stateDataSchema = zod__WEBPACK_IMPORTED_MODULE_5__.looseObject({\n\t\tcallbackURL: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n\t\tcodeVerifier: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n\t\terrorURL: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n\t\tnewUserURL: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional(),\n\t\texpiresAt: zod__WEBPACK_IMPORTED_MODULE_5__.number(),\n\t\tlink: zod__WEBPACK_IMPORTED_MODULE_5__.object({\n\t\t\temail: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n\t\t\tuserId: zod__WEBPACK_IMPORTED_MODULE_5__.coerce.string()\n\t\t}).optional(),\n\t\trequestSignUp: zod__WEBPACK_IMPORTED_MODULE_5__.boolean().optional(),\n\t\tstate: zod__WEBPACK_IMPORTED_MODULE_5__.string().optional()\n\t});\n\tlet parsedData;\n\t/**\n\t* This is generally cause security issue and should only be used in\n\t* dev or staging environments. It's currently used by the oauth-proxy\n\t* plugin\n\t*/\n\tconst skipStateCookieCheck = c.context.oauthConfig?.skipStateCookieCheck;\n\tif (storeStateStrategy === \"cookie\") {\n\t\tconst stateCookie = c.context.createAuthCookie(\"oauth_state\");\n\t\tconst encryptedData = c.getCookie(stateCookie.name);\n\t\tif (!encryptedData) {\n\t\t\tc.context.logger.error(\"State Mismatch. OAuth state cookie not found\", { state });\n\t\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\t\ttry {\n\t\t\tconst decryptedData = await (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_2__.symmetricDecrypt)({\n\t\t\t\tkey: c.context.secret,\n\t\t\t\tdata: encryptedData\n\t\t\t});\n\t\t\tparsedData = stateDataSchema.parse(JSON.parse(decryptedData));\n\t\t} catch (error) {\n\t\t\tc.context.logger.error(\"Failed to decrypt or parse OAuth state cookie\", { error });\n\t\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\t\tif (!c.context.oauthConfig?.skipStateCookieCheck && parsedData.state && parsedData.state !== state) {\n\t\t\tc.context.logger.error(\"State Mismatch. State parameter does not match\", {\n\t\t\t\texpected: parsedData.state,\n\t\t\t\treceived: state\n\t\t\t});\n\t\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=state_mismatch`);\n\t\t}\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.expireCookie)(c, stateCookie);\n\t} else {\n\t\tconst data = await c.context.internalAdapter.findVerificationValue(state);\n\t\tif (!data) {\n\t\t\tc.context.logger.error(\"State Mismatch. Verification not found\", { state });\n\t\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t\t}\n\t\tparsedData = stateDataSchema.parse(JSON.parse(data.value));\n\t\tconst stateCookie = c.context.createAuthCookie(\"state\");\n\t\tconst stateCookieValue = await c.getSignedCookie(stateCookie.name, c.context.secret);\n\t\tif (!skipStateCookieCheck && (!stateCookieValue || stateCookieValue !== state)) {\n\t\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\t\tthrow c.redirect(`${errorURL}?error=state_mismatch`);\n\t\t}\n\t\t(0,_cookies_index_mjs__WEBPACK_IMPORTED_MODULE_3__.expireCookie)(c, stateCookie);\n\t\tawait c.context.internalAdapter.deleteVerificationValue(data.id);\n\t}\n\tif (!parsedData.errorURL) parsedData.errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\tif (parsedData.expiresAt < Date.now()) {\n\t\tconst errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n\t\tthrow c.redirect(`${errorURL}?error=please_restart_the_process`);\n\t}\n\tif (parsedData) await (0,_api_middlewares_oauth_mjs__WEBPACK_IMPORTED_MODULE_0__.setOAuthState)(parsedData);\n\treturn parsedData;\n}\n\n//#endregion\n\n//# sourceMappingURL=state.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvc3RhdGUubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTZEO0FBQ0Q7QUFDYTtBQUNyQjtBQUMzQjtBQUNjOztBQUV2QztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaURBQVEsa0JBQWtCLG9DQUFvQztBQUMzRixzQkFBc0Isd0VBQW9CO0FBQzFDLGVBQWUsd0VBQW9CO0FBQ25DO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyx5RUFBYTtBQUNwQjtBQUNBLDhCQUE4QixtRUFBZ0I7QUFDOUM7QUFDQTtBQUNBLEdBQUc7QUFDSCxvRUFBb0UsbUJBQW1CO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxtQkFBbUI7QUFDOUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLFlBQVksaURBQVEsNEJBQTRCLDBDQUEwQztBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNENBQWE7QUFDdEMsZUFBZSx1Q0FBUTtBQUN2QixnQkFBZ0IsdUNBQVE7QUFDeEIsWUFBWSx1Q0FBUTtBQUNwQixjQUFjLHVDQUFRO0FBQ3RCLGFBQWEsdUNBQVE7QUFDckIsUUFBUSx1Q0FBUTtBQUNoQixVQUFVLHVDQUFRO0FBQ2xCLFdBQVcsOENBQWU7QUFDMUIsR0FBRztBQUNILGlCQUFpQix3Q0FBUztBQUMxQixTQUFTLHVDQUFRO0FBQ2pCLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLE9BQU87QUFDbkYsaUVBQWlFLGtCQUFrQjtBQUNuRix1QkFBdUIsU0FBUztBQUNoQztBQUNBO0FBQ0EsK0JBQStCLG1FQUFnQjtBQUMvQztBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKLDZFQUE2RSxPQUFPO0FBQ3BGLGlFQUFpRSxrQkFBa0I7QUFDbkYsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixpRUFBaUUsa0JBQWtCO0FBQ25GLHVCQUF1QixTQUFTO0FBQ2hDO0FBQ0EsRUFBRSxnRUFBWTtBQUNkLEdBQUc7QUFDSDtBQUNBO0FBQ0Esc0VBQXNFLE9BQU87QUFDN0UsaUVBQWlFLGtCQUFrQjtBQUNuRix1QkFBdUIsU0FBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGtCQUFrQjtBQUNuRix1QkFBdUIsU0FBUztBQUNoQztBQUNBLEVBQUUsZ0VBQVk7QUFDZDtBQUNBO0FBQ0EsOEZBQThGLGtCQUFrQjtBQUNoSDtBQUNBLGdFQUFnRSxrQkFBa0I7QUFDbEYsc0JBQXNCLFNBQVM7QUFDL0I7QUFDQSx1QkFBdUIseUVBQWE7QUFDcEM7QUFDQTs7QUFFQTtBQUNxQztBQUNyQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvc3RhdGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNldE9BdXRoU3RhdGUgfSBmcm9tIFwiLi4vYXBpL21pZGRsZXdhcmVzL29hdXRoLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSYW5kb21TdHJpbmcgfSBmcm9tIFwiLi4vY3J5cHRvL3JhbmRvbS5tanNcIjtcbmltcG9ydCB7IHN5bW1ldHJpY0RlY3J5cHQsIHN5bW1ldHJpY0VuY3J5cHQgfSBmcm9tIFwiLi4vY3J5cHRvL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgZXhwaXJlQ29va2llIH0gZnJvbSBcIi4uL2Nvb2tpZXMvaW5kZXgubWpzXCI7XG5pbXBvcnQgKiBhcyB6IGZyb20gXCJ6b2RcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcImJldHRlci1jYWxsXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3N0YXRlLnRzXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVN0YXRlKGMsIGxpbmssIGFkZGl0aW9uYWxEYXRhKSB7XG5cdGNvbnN0IGNhbGxiYWNrVVJMID0gYy5ib2R5Py5jYWxsYmFja1VSTCB8fCBjLmNvbnRleHQub3B0aW9ucy5iYXNlVVJMO1xuXHRpZiAoIWNhbGxiYWNrVVJMKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiY2FsbGJhY2tVUkwgaXMgcmVxdWlyZWRcIiB9KTtcblx0Y29uc3QgY29kZVZlcmlmaWVyID0gZ2VuZXJhdGVSYW5kb21TdHJpbmcoMTI4KTtcblx0Y29uc3Qgc3RhdGUgPSBnZW5lcmF0ZVJhbmRvbVN0cmluZygzMik7XG5cdGNvbnN0IHN0b3JlU3RhdGVTdHJhdGVneSA9IGMuY29udGV4dC5vYXV0aENvbmZpZy5zdG9yZVN0YXRlU3RyYXRlZ3k7XG5cdGNvbnN0IHN0YXRlRGF0YSA9IHtcblx0XHQuLi5hZGRpdGlvbmFsRGF0YSA/IGFkZGl0aW9uYWxEYXRhIDoge30sXG5cdFx0Y2FsbGJhY2tVUkwsXG5cdFx0Y29kZVZlcmlmaWVyLFxuXHRcdGVycm9yVVJMOiBjLmJvZHk/LmVycm9yQ2FsbGJhY2tVUkwsXG5cdFx0bmV3VXNlclVSTDogYy5ib2R5Py5uZXdVc2VyQ2FsbGJhY2tVUkwsXG5cdFx0bGluayxcblx0XHRleHBpcmVzQXQ6IERhdGUubm93KCkgKyA2MDAgKiAxZTMsXG5cdFx0cmVxdWVzdFNpZ25VcDogYy5ib2R5Py5yZXF1ZXN0U2lnblVwLFxuXHRcdHN0YXRlXG5cdH07XG5cdGF3YWl0IHNldE9BdXRoU3RhdGUoc3RhdGVEYXRhKTtcblx0aWYgKHN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikge1xuXHRcdGNvbnN0IGVuY3J5cHRlZERhdGEgPSBhd2FpdCBzeW1tZXRyaWNFbmNyeXB0KHtcblx0XHRcdGtleTogYy5jb250ZXh0LnNlY3JldCxcblx0XHRcdGRhdGE6IEpTT04uc3RyaW5naWZ5KHN0YXRlRGF0YSlcblx0XHR9KTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZSQxID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoXCJvYXV0aF9zdGF0ZVwiLCB7IG1heEFnZTogNjAwICogMWUzIH0pO1xuXHRcdGMuc2V0Q29va2llKHN0YXRlQ29va2llJDEubmFtZSwgZW5jcnlwdGVkRGF0YSwgc3RhdGVDb29raWUkMS5hdHRyaWJ1dGVzKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0c3RhdGUsXG5cdFx0XHRjb2RlVmVyaWZpZXJcblx0XHR9O1xuXHR9XG5cdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoXCJzdGF0ZVwiLCB7IG1heEFnZTogMzAwICogMWUzIH0pO1xuXHRhd2FpdCBjLnNldFNpZ25lZENvb2tpZShzdGF0ZUNvb2tpZS5uYW1lLCBzdGF0ZSwgYy5jb250ZXh0LnNlY3JldCwgc3RhdGVDb29raWUuYXR0cmlidXRlcyk7XG5cdGNvbnN0IGV4cGlyZXNBdCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuXHRleHBpcmVzQXQuc2V0TWludXRlcyhleHBpcmVzQXQuZ2V0TWludXRlcygpICsgMTApO1xuXHRjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmNyZWF0ZVZlcmlmaWNhdGlvblZhbHVlKHtcblx0XHR2YWx1ZTogSlNPTi5zdHJpbmdpZnkoc3RhdGVEYXRhKSxcblx0XHRpZGVudGlmaWVyOiBzdGF0ZSxcblx0XHRleHBpcmVzQXRcblx0fSk7XG5cdGlmICghdmVyaWZpY2F0aW9uKSB7XG5cdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBjcmVhdGUgdmVyaWZpY2F0aW9uLiBNYWtlIHN1cmUgdGhlIGRhdGFiYXNlIGFkYXB0ZXIgaXMgcHJvcGVybHkgd29ya2luZyBhbmQgdGhlcmUgaXMgYSB2ZXJpZmljYXRpb24gdGFibGUgaW4gdGhlIGRhdGFiYXNlXCIpO1xuXHRcdHRocm93IG5ldyBBUElFcnJvcihcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLCB7IG1lc3NhZ2U6IFwiVW5hYmxlIHRvIGNyZWF0ZSB2ZXJpZmljYXRpb25cIiB9KTtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHN0YXRlOiB2ZXJpZmljYXRpb24uaWRlbnRpZmllcixcblx0XHRjb2RlVmVyaWZpZXJcblx0fTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHBhcnNlU3RhdGUoYykge1xuXHRjb25zdCBzdGF0ZSA9IGMucXVlcnkuc3RhdGUgfHwgYy5ib2R5LnN0YXRlO1xuXHRjb25zdCBzdG9yZVN0YXRlU3RyYXRlZ3kgPSBjLmNvbnRleHQub2F1dGhDb25maWcuc3RvcmVTdGF0ZVN0cmF0ZWd5O1xuXHRjb25zdCBzdGF0ZURhdGFTY2hlbWEgPSB6Lmxvb3NlT2JqZWN0KHtcblx0XHRjYWxsYmFja1VSTDogei5zdHJpbmcoKSxcblx0XHRjb2RlVmVyaWZpZXI6IHouc3RyaW5nKCksXG5cdFx0ZXJyb3JVUkw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcblx0XHRuZXdVc2VyVVJMOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG5cdFx0ZXhwaXJlc0F0OiB6Lm51bWJlcigpLFxuXHRcdGxpbms6IHoub2JqZWN0KHtcblx0XHRcdGVtYWlsOiB6LnN0cmluZygpLFxuXHRcdFx0dXNlcklkOiB6LmNvZXJjZS5zdHJpbmcoKVxuXHRcdH0pLm9wdGlvbmFsKCksXG5cdFx0cmVxdWVzdFNpZ25VcDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcblx0XHRzdGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG5cdH0pO1xuXHRsZXQgcGFyc2VkRGF0YTtcblx0LyoqXG5cdCogVGhpcyBpcyBnZW5lcmFsbHkgY2F1c2Ugc2VjdXJpdHkgaXNzdWUgYW5kIHNob3VsZCBvbmx5IGJlIHVzZWQgaW5cblx0KiBkZXYgb3Igc3RhZ2luZyBlbnZpcm9ubWVudHMuIEl0J3MgY3VycmVudGx5IHVzZWQgYnkgdGhlIG9hdXRoLXByb3h5XG5cdCogcGx1Z2luXG5cdCovXG5cdGNvbnN0IHNraXBTdGF0ZUNvb2tpZUNoZWNrID0gYy5jb250ZXh0Lm9hdXRoQ29uZmlnPy5za2lwU3RhdGVDb29raWVDaGVjaztcblx0aWYgKHN0b3JlU3RhdGVTdHJhdGVneSA9PT0gXCJjb29raWVcIikge1xuXHRcdGNvbnN0IHN0YXRlQ29va2llID0gYy5jb250ZXh0LmNyZWF0ZUF1dGhDb29raWUoXCJvYXV0aF9zdGF0ZVwiKTtcblx0XHRjb25zdCBlbmNyeXB0ZWREYXRhID0gYy5nZXRDb29raWUoc3RhdGVDb29raWUubmFtZSk7XG5cdFx0aWYgKCFlbmNyeXB0ZWREYXRhKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiU3RhdGUgTWlzbWF0Y2guIE9BdXRoIHN0YXRlIGNvb2tpZSBub3QgZm91bmRcIiwgeyBzdGF0ZSB9KTtcblx0XHRcdGNvbnN0IGVycm9yVVJMID0gYy5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYDtcblx0XHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPXBsZWFzZV9yZXN0YXJ0X3RoZV9wcm9jZXNzYCk7XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBkZWNyeXB0ZWREYXRhID0gYXdhaXQgc3ltbWV0cmljRGVjcnlwdCh7XG5cdFx0XHRcdGtleTogYy5jb250ZXh0LnNlY3JldCxcblx0XHRcdFx0ZGF0YTogZW5jcnlwdGVkRGF0YVxuXHRcdFx0fSk7XG5cdFx0XHRwYXJzZWREYXRhID0gc3RhdGVEYXRhU2NoZW1hLnBhcnNlKEpTT04ucGFyc2UoZGVjcnlwdGVkRGF0YSkpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjLmNvbnRleHQubG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGRlY3J5cHQgb3IgcGFyc2UgT0F1dGggc3RhdGUgY29va2llXCIsIHsgZXJyb3IgfSk7XG5cdFx0XHRjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdFx0XHR0aHJvdyBjLnJlZGlyZWN0KGAke2Vycm9yVVJMfT9lcnJvcj1wbGVhc2VfcmVzdGFydF90aGVfcHJvY2Vzc2ApO1xuXHRcdH1cblx0XHRpZiAoIWMuY29udGV4dC5vYXV0aENvbmZpZz8uc2tpcFN0YXRlQ29va2llQ2hlY2sgJiYgcGFyc2VkRGF0YS5zdGF0ZSAmJiBwYXJzZWREYXRhLnN0YXRlICE9PSBzdGF0ZSkge1xuXHRcdFx0Yy5jb250ZXh0LmxvZ2dlci5lcnJvcihcIlN0YXRlIE1pc21hdGNoLiBTdGF0ZSBwYXJhbWV0ZXIgZG9lcyBub3QgbWF0Y2hcIiwge1xuXHRcdFx0XHRleHBlY3RlZDogcGFyc2VkRGF0YS5zdGF0ZSxcblx0XHRcdFx0cmVjZWl2ZWQ6IHN0YXRlXG5cdFx0XHR9KTtcblx0XHRcdGNvbnN0IGVycm9yVVJMID0gYy5jb250ZXh0Lm9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwgfHwgYCR7Yy5jb250ZXh0LmJhc2VVUkx9L2Vycm9yYDtcblx0XHRcdHRocm93IGMucmVkaXJlY3QoYCR7ZXJyb3JVUkx9P2Vycm9yPXN0YXRlX21pc21hdGNoYCk7XG5cdFx0fVxuXHRcdGV4cGlyZUNvb2tpZShjLCBzdGF0ZUNvb2tpZSk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IGMuY29udGV4dC5pbnRlcm5hbEFkYXB0ZXIuZmluZFZlcmlmaWNhdGlvblZhbHVlKHN0YXRlKTtcblx0XHRpZiAoIWRhdGEpIHtcblx0XHRcdGMuY29udGV4dC5sb2dnZXIuZXJyb3IoXCJTdGF0ZSBNaXNtYXRjaC4gVmVyaWZpY2F0aW9uIG5vdCBmb3VuZFwiLCB7IHN0YXRlIH0pO1xuXHRcdFx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRcdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9cGxlYXNlX3Jlc3RhcnRfdGhlX3Byb2Nlc3NgKTtcblx0XHR9XG5cdFx0cGFyc2VkRGF0YSA9IHN0YXRlRGF0YVNjaGVtYS5wYXJzZShKU09OLnBhcnNlKGRhdGEudmFsdWUpKTtcblx0XHRjb25zdCBzdGF0ZUNvb2tpZSA9IGMuY29udGV4dC5jcmVhdGVBdXRoQ29va2llKFwic3RhdGVcIik7XG5cdFx0Y29uc3Qgc3RhdGVDb29raWVWYWx1ZSA9IGF3YWl0IGMuZ2V0U2lnbmVkQ29va2llKHN0YXRlQ29va2llLm5hbWUsIGMuY29udGV4dC5zZWNyZXQpO1xuXHRcdGlmICghc2tpcFN0YXRlQ29va2llQ2hlY2sgJiYgKCFzdGF0ZUNvb2tpZVZhbHVlIHx8IHN0YXRlQ29va2llVmFsdWUgIT09IHN0YXRlKSkge1xuXHRcdFx0Y29uc3QgZXJyb3JVUkwgPSBjLmNvbnRleHQub3B0aW9ucy5vbkFQSUVycm9yPy5lcnJvclVSTCB8fCBgJHtjLmNvbnRleHQuYmFzZVVSTH0vZXJyb3JgO1xuXHRcdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9c3RhdGVfbWlzbWF0Y2hgKTtcblx0XHR9XG5cdFx0ZXhwaXJlQ29va2llKGMsIHN0YXRlQ29va2llKTtcblx0XHRhd2FpdCBjLmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmRlbGV0ZVZlcmlmaWNhdGlvblZhbHVlKGRhdGEuaWQpO1xuXHR9XG5cdGlmICghcGFyc2VkRGF0YS5lcnJvclVSTCkgcGFyc2VkRGF0YS5lcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdGlmIChwYXJzZWREYXRhLmV4cGlyZXNBdCA8IERhdGUubm93KCkpIHtcblx0XHRjb25zdCBlcnJvclVSTCA9IGMuY29udGV4dC5vcHRpb25zLm9uQVBJRXJyb3I/LmVycm9yVVJMIHx8IGAke2MuY29udGV4dC5iYXNlVVJMfS9lcnJvcmA7XG5cdFx0dGhyb3cgYy5yZWRpcmVjdChgJHtlcnJvclVSTH0/ZXJyb3I9cGxlYXNlX3Jlc3RhcnRfdGhlX3Byb2Nlc3NgKTtcblx0fVxuXHRpZiAocGFyc2VkRGF0YSkgYXdhaXQgc2V0T0F1dGhTdGF0ZShwYXJzZWREYXRhKTtcblx0cmV0dXJuIHBhcnNlZERhdGE7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2VuZXJhdGVTdGF0ZSwgcGFyc2VTdGF0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RhdGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/oauth2/utils.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decryptOAuthToken: () => (/* binding */ decryptOAuthToken),\n/* harmony export */   setTokenUtil: () => (/* binding */ setTokenUtil)\n/* harmony export */ });\n/* harmony import */ var _crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../crypto/index.mjs */ \"(rsc)/./node_modules/better-auth/dist/crypto/index.mjs\");\n\n\n//#region src/oauth2/utils.ts\nfunction decryptOAuthToken(token, ctx) {\n\tif (!token) return token;\n\tif (ctx.options.account?.encryptOAuthTokens) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricDecrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\nfunction setTokenUtil(token, ctx) {\n\tif (ctx.options.account?.encryptOAuthTokens && token) return (0,_crypto_index_mjs__WEBPACK_IMPORTED_MODULE_0__.symmetricEncrypt)({\n\t\tkey: ctx.secret,\n\t\tdata: token\n\t});\n\treturn token;\n}\n\n//#endregion\n\n//# sourceMappingURL=utils.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9vYXV0aDIvdXRpbHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RTs7QUFFekU7QUFDQTtBQUNBO0FBQ0EscURBQXFELG1FQUFnQjtBQUNyRTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCxtRUFBZ0I7QUFDOUU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQzJDO0FBQzNDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L29hdXRoMi91dGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3ltbWV0cmljRGVjcnlwdCwgc3ltbWV0cmljRW5jcnlwdCB9IGZyb20gXCIuLi9jcnlwdG8vaW5kZXgubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvb2F1dGgyL3V0aWxzLnRzXG5mdW5jdGlvbiBkZWNyeXB0T0F1dGhUb2tlbih0b2tlbiwgY3R4KSB7XG5cdGlmICghdG9rZW4pIHJldHVybiB0b2tlbjtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucykgcmV0dXJuIHN5bW1ldHJpY0RlY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuZnVuY3Rpb24gc2V0VG9rZW5VdGlsKHRva2VuLCBjdHgpIHtcblx0aWYgKGN0eC5vcHRpb25zLmFjY291bnQ/LmVuY3J5cHRPQXV0aFRva2VucyAmJiB0b2tlbikgcmV0dXJuIHN5bW1ldHJpY0VuY3J5cHQoe1xuXHRcdGtleTogY3R4LnNlY3JldCxcblx0XHRkYXRhOiB0b2tlblxuXHR9KTtcblx0cmV0dXJuIHRva2VuO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGRlY3J5cHRPQXV0aFRva2VuLCBzZXRUb2tlblV0aWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/oauth2/utils.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/constants.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/constants.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_SECRET: () => (/* binding */ DEFAULT_SECRET)\n/* harmony export */ });\n//#region src/utils/constants.ts\nconst DEFAULT_SECRET = \"better-auth-secret-12345678901234567890\";\n\n//#endregion\n\n//# sourceMappingURL=constants.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9jb25zdGFudHMubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2NvbnN0YW50cy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9jb25zdGFudHMudHNcbmNvbnN0IERFRkFVTFRfU0VDUkVUID0gXCJiZXR0ZXItYXV0aC1zZWNyZXQtMTIzNDU2Nzg5MDEyMzQ1Njc4OTBcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBERUZBVUxUX1NFQ1JFVCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uc3RhbnRzLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/constants.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/date.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/date.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDate: () => (/* binding */ getDate)\n/* harmony export */ });\n//#region src/utils/date.ts\nconst getDate = (span, unit = \"ms\") => {\n\treturn new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\n//#endregion\n\n//# sourceMappingURL=date.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9kYXRlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDbUI7QUFDbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvZGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9kYXRlLnRzXG5jb25zdCBnZXREYXRlID0gKHNwYW4sIHVuaXQgPSBcIm1zXCIpID0+IHtcblx0cmV0dXJuIG5ldyBEYXRlKERhdGUubm93KCkgKyAodW5pdCA9PT0gXCJzZWNcIiA/IHNwYW4gKiAxZTMgOiBzcGFuKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldERhdGUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/date.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/get-request-ip.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getIp: () => (/* binding */ getIp)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\n\n//#region src/utils/get-request-ip.ts\nconst LOCALHOST_IP = \"127.0.0.1\";\nfunction getIp(req, options) {\n\tif (options.advanced?.ipAddress?.disableIpTracking) return null;\n\tconst headers = \"headers\" in req ? req.headers : req;\n\tconst ipHeaders = options.advanced?.ipAddress?.ipAddressHeaders || [\"x-forwarded-for\"];\n\tfor (const key of ipHeaders) {\n\t\tconst value = \"get\" in headers ? headers.get(key) : headers[key];\n\t\tif (typeof value === \"string\") {\n\t\t\tconst ip = value.split(\",\")[0].trim();\n\t\t\tif (isValidIP(ip)) return ip;\n\t\t}\n\t}\n\tif ((0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)() || (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isDevelopment)()) return LOCALHOST_IP;\n\treturn null;\n}\nfunction isValidIP(ip) {\n\tif (zod__WEBPACK_IMPORTED_MODULE_1__.ipv4().safeParse(ip).success) return true;\n\tif (zod__WEBPACK_IMPORTED_MODULE_1__.ipv6().safeParse(ip).success) return true;\n\treturn false;\n}\n\n//#endregion\n\n//# sourceMappingURL=get-request-ip.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9nZXQtcmVxdWVzdC1pcC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThEO0FBQ3JDOztBQUV6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssNkRBQU0sTUFBTSxvRUFBYTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxLQUFLLHFDQUFNO0FBQ1gsS0FBSyxxQ0FBTTtBQUNYO0FBQ0E7O0FBRUE7QUFDaUI7QUFDakIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvZ2V0LXJlcXVlc3QtaXAubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRGV2ZWxvcG1lbnQsIGlzVGVzdCB9IGZyb20gXCJAYmV0dGVyLWF1dGgvY29yZS9lbnZcIjtcbmltcG9ydCAqIGFzIHogZnJvbSBcInpvZFwiO1xuXG4vLyNyZWdpb24gc3JjL3V0aWxzL2dldC1yZXF1ZXN0LWlwLnRzXG5jb25zdCBMT0NBTEhPU1RfSVAgPSBcIjEyNy4wLjAuMVwiO1xuZnVuY3Rpb24gZ2V0SXAocmVxLCBvcHRpb25zKSB7XG5cdGlmIChvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmRpc2FibGVJcFRyYWNraW5nKSByZXR1cm4gbnVsbDtcblx0Y29uc3QgaGVhZGVycyA9IFwiaGVhZGVyc1wiIGluIHJlcSA/IHJlcS5oZWFkZXJzIDogcmVxO1xuXHRjb25zdCBpcEhlYWRlcnMgPSBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwQWRkcmVzc0hlYWRlcnMgfHwgW1wieC1mb3J3YXJkZWQtZm9yXCJdO1xuXHRmb3IgKGNvbnN0IGtleSBvZiBpcEhlYWRlcnMpIHtcblx0XHRjb25zdCB2YWx1ZSA9IFwiZ2V0XCIgaW4gaGVhZGVycyA/IGhlYWRlcnMuZ2V0KGtleSkgOiBoZWFkZXJzW2tleV07XG5cdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0Y29uc3QgaXAgPSB2YWx1ZS5zcGxpdChcIixcIilbMF0udHJpbSgpO1xuXHRcdFx0aWYgKGlzVmFsaWRJUChpcCkpIHJldHVybiBpcDtcblx0XHR9XG5cdH1cblx0aWYgKGlzVGVzdCgpIHx8IGlzRGV2ZWxvcG1lbnQoKSkgcmV0dXJuIExPQ0FMSE9TVF9JUDtcblx0cmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSVAoaXApIHtcblx0aWYgKHouaXB2NCgpLnNhZmVQYXJzZShpcCkuc3VjY2VzcykgcmV0dXJuIHRydWU7XG5cdGlmICh6LmlwdjYoKS5zYWZlUGFyc2UoaXApLnN1Y2Nlc3MpIHJldHVybiB0cnVlO1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0SXAgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1yZXF1ZXN0LWlwLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/get-request-ip.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/hide-metadata.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   HIDE_METADATA: () => (/* binding */ HIDE_METADATA)\n/* harmony export */ });\n//#region src/utils/hide-metadata.ts\nconst HIDE_METADATA = { scope: \"server\" };\n\n//#endregion\n\n//# sourceMappingURL=hide-metadata.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9oaWRlLW1ldGFkYXRhLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ3lCO0FBQ3pCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2hpZGUtbWV0YWRhdGEubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvaGlkZS1tZXRhZGF0YS50c1xuY29uc3QgSElERV9NRVRBREFUQSA9IHsgc2NvcGU6IFwic2VydmVyXCIgfTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBISURFX01FVEFEQVRBIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oaWRlLW1ldGFkYXRhLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateId: () => (/* reexport safe */ _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__.generateId)\n/* harmony export */ });\n/* harmony import */ var _oauth2_state_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../oauth2/state.mjs */ \"(rsc)/./node_modules/better-auth/dist/oauth2/state.mjs\");\n/* harmony import */ var _hide_metadata_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./hide-metadata.mjs */ \"(rsc)/./node_modules/better-auth/dist/utils/hide-metadata.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnRTtBQUNaO0FBQ2lCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5lcmF0ZVN0YXRlLCBwYXJzZVN0YXRlIH0gZnJvbSBcIi4uL29hdXRoMi9zdGF0ZS5tanNcIjtcbmltcG9ydCB7IEhJREVfTUVUQURBVEEgfSBmcm9tIFwiLi9oaWRlLW1ldGFkYXRhLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVJZCBhcyBnZW5lcmF0ZUlkJDEgfSBmcm9tIFwiQGJldHRlci1hdXRoL2NvcmUvdXRpbHNcIjtcblxuZXhwb3J0IHsgZ2VuZXJhdGVJZCQxIGFzIGdlbmVyYXRlSWQgfTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs":
/*!************************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/is-promise.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isPromise: () => (/* binding */ isPromise)\n/* harmony export */ });\n//#region src/utils/is-promise.ts\nfunction isPromise(obj) {\n\treturn !!obj && (typeof obj === \"object\" || typeof obj === \"function\") && typeof obj.then === \"function\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-promise.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pcy1wcm9taXNlLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvaXMtcHJvbWlzZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1wcm9taXNlLnRzXG5mdW5jdGlvbiBpc1Byb21pc2Uob2JqKSB7XG5cdHJldHVybiAhIW9iaiAmJiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzUHJvbWlzZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtcHJvbWlzZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/is-promise.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/password.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/password.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkPassword: () => (/* binding */ checkPassword),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.mjs\");\n\n\n//#region src/utils/password.ts\nasync function validatePassword(ctx, data) {\n\tconst credentialAccount = (await ctx.context.internalAdapter.findAccounts(data.userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword) return false;\n\treturn await ctx.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: data.password\n\t});\n}\nasync function checkPassword(userId, c) {\n\tconst credentialAccount = (await c.context.internalAdapter.findAccounts(userId))?.find((account) => account.providerId === \"credential\");\n\tconst currentPassword = credentialAccount?.password;\n\tif (!credentialAccount || !currentPassword || !c.body.password) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"No password credential found\" });\n\tif (!await c.context.password.verify({\n\t\thash: currentPassword,\n\t\tpassword: c.body.password\n\t})) throw new better_call__WEBPACK_IMPORTED_MODULE_0__.APIError(\"BAD_REQUEST\", { message: \"Invalid password\" });\n\treturn true;\n}\n\n//#endregion\n\n//# sourceMappingURL=password.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9wYXNzd29yZC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXVDOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFLGlEQUFRLGtCQUFrQix5Q0FBeUM7QUFDOUk7QUFDQTtBQUNBO0FBQ0EsRUFBRSxhQUFhLGlEQUFRLGtCQUFrQiw2QkFBNkI7QUFDdEU7QUFDQTs7QUFFQTtBQUMyQztBQUMzQyIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9wYXNzd29yZC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiYmV0dGVyLWNhbGxcIjtcblxuLy8jcmVnaW9uIHNyYy91dGlscy9wYXNzd29yZC50c1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZChjdHgsIGRhdGEpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgY3R4LmNvbnRleHQuaW50ZXJuYWxBZGFwdGVyLmZpbmRBY2NvdW50cyhkYXRhLnVzZXJJZCkpPy5maW5kKChhY2NvdW50KSA9PiBhY2NvdW50LnByb3ZpZGVySWQgPT09IFwiY3JlZGVudGlhbFwiKTtcblx0Y29uc3QgY3VycmVudFBhc3N3b3JkID0gY3JlZGVudGlhbEFjY291bnQ/LnBhc3N3b3JkO1xuXHRpZiAoIWNyZWRlbnRpYWxBY2NvdW50IHx8ICFjdXJyZW50UGFzc3dvcmQpIHJldHVybiBmYWxzZTtcblx0cmV0dXJuIGF3YWl0IGN0eC5jb250ZXh0LnBhc3N3b3JkLnZlcmlmeSh7XG5cdFx0aGFzaDogY3VycmVudFBhc3N3b3JkLFxuXHRcdHBhc3N3b3JkOiBkYXRhLnBhc3N3b3JkXG5cdH0pO1xufVxuYXN5bmMgZnVuY3Rpb24gY2hlY2tQYXNzd29yZCh1c2VySWQsIGMpIHtcblx0Y29uc3QgY3JlZGVudGlhbEFjY291bnQgPSAoYXdhaXQgYy5jb250ZXh0LmludGVybmFsQWRhcHRlci5maW5kQWNjb3VudHModXNlcklkKSk/LmZpbmQoKGFjY291bnQpID0+IGFjY291bnQucHJvdmlkZXJJZCA9PT0gXCJjcmVkZW50aWFsXCIpO1xuXHRjb25zdCBjdXJyZW50UGFzc3dvcmQgPSBjcmVkZW50aWFsQWNjb3VudD8ucGFzc3dvcmQ7XG5cdGlmICghY3JlZGVudGlhbEFjY291bnQgfHwgIWN1cnJlbnRQYXNzd29yZCB8fCAhYy5ib2R5LnBhc3N3b3JkKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiTm8gcGFzc3dvcmQgY3JlZGVudGlhbCBmb3VuZFwiIH0pO1xuXHRpZiAoIWF3YWl0IGMuY29udGV4dC5wYXNzd29yZC52ZXJpZnkoe1xuXHRcdGhhc2g6IGN1cnJlbnRQYXNzd29yZCxcblx0XHRwYXNzd29yZDogYy5ib2R5LnBhc3N3b3JkXG5cdH0pKSB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7IG1lc3NhZ2U6IFwiSW52YWxpZCBwYXNzd29yZFwiIH0pO1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjaGVja1Bhc3N3b3JkLCB2YWxpZGF0ZVBhc3N3b3JkIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXNzd29yZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/password.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/time.mjs":
/*!******************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/time.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ms: () => (/* binding */ ms),\n/* harmony export */   sec: () => (/* binding */ sec)\n/* harmony export */ });\n//#region src/utils/time.ts\nconst SEC = 1e3;\nconst MIN = SEC * 60;\nconst HOUR = MIN * 60;\nconst DAY = HOUR * 24;\nconst WEEK = DAY * 7;\nconst MONTH = DAY * 30;\nconst YEAR = DAY * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;\nfunction parse(value) {\n\tconst match = REGEX.exec(value);\n\tif (!match || match[4] && match[1]) throw new TypeError(`Invalid time string format: \"${value}\". Use formats like \"7d\", \"30m\", \"1 hour\", etc.`);\n\tconst n = parseFloat(match[2]);\n\tconst unit = match[3].toLowerCase();\n\tlet result;\n\tswitch (unit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\":\n\t\t\tresult = n * YEAR;\n\t\t\tbreak;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\":\n\t\t\tresult = n * MONTH;\n\t\t\tbreak;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\":\n\t\t\tresult = n * WEEK;\n\t\t\tbreak;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\":\n\t\t\tresult = n * DAY;\n\t\t\tbreak;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\":\n\t\t\tresult = n * HOUR;\n\t\t\tbreak;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\":\n\t\t\tresult = n * MIN;\n\t\t\tbreak;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\":\n\t\t\tresult = n * SEC;\n\t\t\tbreak;\n\t\tdefault: throw new TypeError(`Unknown time unit: \"${unit}\"`);\n\t}\n\tif (match[1] === \"-\" || match[4] === \"ago\") return -result;\n\treturn result;\n}\n/**\n* Parse a time string and return the value in milliseconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in milliseconds\n* @throws TypeError if the string format is invalid\n*\n* @example\n* ms(\"1d\")          // 86400000\n* ms(\"2 hours\")     // 7200000\n* ms(\"30s\")         // 30000\n* ms(\"2 hours ago\") // -7200000\n*/\nfunction ms(value) {\n\treturn parse(value);\n}\n/**\n* Parse a time string and return the value in seconds.\n*\n* @param value - A time string like \"7d\", \"30m\", \"1 hour\", \"2 hours ago\"\n* @returns The parsed value in seconds (rounded)\n* @throws TypeError if the string format is invalid\n*\n* @example\n* sec(\"1d\")          // 86400\n* sec(\"2 hours\")     // 7200\n* sec(\"-30s\")        // -30\n* sec(\"2 hours ago\") // -7200\n*/\nfunction sec(value) {\n\treturn Math.round(parse(value) / 1e3);\n}\n\n//#endregion\n\n//# sourceMappingURL=time.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy90aW1lLm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RkFBeUYsTUFBTTtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3RpbWUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvdGltZS50c1xuY29uc3QgU0VDID0gMWUzO1xuY29uc3QgTUlOID0gU0VDICogNjA7XG5jb25zdCBIT1VSID0gTUlOICogNjA7XG5jb25zdCBEQVkgPSBIT1VSICogMjQ7XG5jb25zdCBXRUVLID0gREFZICogNztcbmNvbnN0IE1PTlRIID0gREFZICogMzA7XG5jb25zdCBZRUFSID0gREFZICogMzY1LjI1O1xuY29uc3QgUkVHRVggPSAvXihcXCt8XFwtKT8gPyhcXGQrfFxcZCtcXC5cXGQrKSA/KHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8bW9udGhzP3xtb3x5ZWFycz98eXJzP3x5KSg/OiAoYWdvfGZyb20gbm93KSk/JC9pO1xuZnVuY3Rpb24gcGFyc2UodmFsdWUpIHtcblx0Y29uc3QgbWF0Y2ggPSBSRUdFWC5leGVjKHZhbHVlKTtcblx0aWYgKCFtYXRjaCB8fCBtYXRjaFs0XSAmJiBtYXRjaFsxXSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB0aW1lIHN0cmluZyBmb3JtYXQ6IFwiJHt2YWx1ZX1cIi4gVXNlIGZvcm1hdHMgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIGV0Yy5gKTtcblx0Y29uc3QgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuXHRjb25zdCB1bml0ID0gbWF0Y2hbM10udG9Mb3dlckNhc2UoKTtcblx0bGV0IHJlc3VsdDtcblx0c3dpdGNoICh1bml0KSB7XG5cdFx0Y2FzZSBcInllYXJzXCI6XG5cdFx0Y2FzZSBcInllYXJcIjpcblx0XHRjYXNlIFwieXJzXCI6XG5cdFx0Y2FzZSBcInlyXCI6XG5cdFx0Y2FzZSBcInlcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBZRUFSO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIm1vbnRoc1wiOlxuXHRcdGNhc2UgXCJtb250aFwiOlxuXHRcdGNhc2UgXCJtb1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIE1PTlRIO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcIndlZWtzXCI6XG5cdFx0Y2FzZSBcIndlZWtcIjpcblx0XHRjYXNlIFwid1wiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIFdFRUs7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIFwiZGF5c1wiOlxuXHRcdGNhc2UgXCJkYXlcIjpcblx0XHRjYXNlIFwiZFwiOlxuXHRcdFx0cmVzdWx0ID0gbiAqIERBWTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJob3Vyc1wiOlxuXHRcdGNhc2UgXCJob3VyXCI6XG5cdFx0Y2FzZSBcImhyc1wiOlxuXHRcdGNhc2UgXCJoclwiOlxuXHRcdGNhc2UgXCJoXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogSE9VUjtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJtaW51dGVzXCI6XG5cdFx0Y2FzZSBcIm1pbnV0ZVwiOlxuXHRcdGNhc2UgXCJtaW5zXCI6XG5cdFx0Y2FzZSBcIm1pblwiOlxuXHRcdGNhc2UgXCJtXCI6XG5cdFx0XHRyZXN1bHQgPSBuICogTUlOO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSBcInNlY29uZHNcIjpcblx0XHRjYXNlIFwic2Vjb25kXCI6XG5cdFx0Y2FzZSBcInNlY3NcIjpcblx0XHRjYXNlIFwic2VjXCI6XG5cdFx0Y2FzZSBcInNcIjpcblx0XHRcdHJlc3VsdCA9IG4gKiBTRUM7XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIHRpbWUgdW5pdDogXCIke3VuaXR9XCJgKTtcblx0fVxuXHRpZiAobWF0Y2hbMV0gPT09IFwiLVwiIHx8IG1hdGNoWzRdID09PSBcImFnb1wiKSByZXR1cm4gLXJlc3VsdDtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIG1pbGxpc2Vjb25kcy5cbipcbiogQHBhcmFtIHZhbHVlIC0gQSB0aW1lIHN0cmluZyBsaWtlIFwiN2RcIiwgXCIzMG1cIiwgXCIxIGhvdXJcIiwgXCIyIGhvdXJzIGFnb1wiXG4qIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUgaW4gbWlsbGlzZWNvbmRzXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogbXMoXCIxZFwiKSAgICAgICAgICAvLyA4NjQwMDAwMFxuKiBtcyhcIjIgaG91cnNcIikgICAgIC8vIDcyMDAwMDBcbiogbXMoXCIzMHNcIikgICAgICAgICAvLyAzMDAwMFxuKiBtcyhcIjIgaG91cnMgYWdvXCIpIC8vIC03MjAwMDAwXG4qL1xuZnVuY3Rpb24gbXModmFsdWUpIHtcblx0cmV0dXJuIHBhcnNlKHZhbHVlKTtcbn1cbi8qKlxuKiBQYXJzZSBhIHRpbWUgc3RyaW5nIGFuZCByZXR1cm4gdGhlIHZhbHVlIGluIHNlY29uZHMuXG4qXG4qIEBwYXJhbSB2YWx1ZSAtIEEgdGltZSBzdHJpbmcgbGlrZSBcIjdkXCIsIFwiMzBtXCIsIFwiMSBob3VyXCIsIFwiMiBob3VycyBhZ29cIlxuKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlIGluIHNlY29uZHMgKHJvdW5kZWQpXG4qIEB0aHJvd3MgVHlwZUVycm9yIGlmIHRoZSBzdHJpbmcgZm9ybWF0IGlzIGludmFsaWRcbipcbiogQGV4YW1wbGVcbiogc2VjKFwiMWRcIikgICAgICAgICAgLy8gODY0MDBcbiogc2VjKFwiMiBob3Vyc1wiKSAgICAgLy8gNzIwMFxuKiBzZWMoXCItMzBzXCIpICAgICAgICAvLyAtMzBcbiogc2VjKFwiMiBob3VycyBhZ29cIikgLy8gLTcyMDBcbiovXG5mdW5jdGlvbiBzZWModmFsdWUpIHtcblx0cmV0dXJuIE1hdGgucm91bmQocGFyc2UodmFsdWUpIC8gMWUzKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBtcywgc2VjIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/time.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/url.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/url.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy91cmwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QztBQUNjOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9FQUFlLHNCQUFzQixJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsb0VBQWUsc0JBQXNCLElBQUk7QUFDNUgsR0FBRztBQUNILHVCQUF1QixvRUFBZTtBQUN0QyxZQUFZLG9FQUFlLHNCQUFzQixJQUFJLHVDQUF1QyxjQUFjO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEtBQUs7QUFDL0MsV0FBVyxXQUFXLEVBQUUsS0FBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsS0FBSyx5Q0FBeUMsS0FBSyx1QkFBdUIsSUFBSSwyQkFBMkIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLFFBQVEsSUFBSSxnREFBZ0QsSUFBSSx3Q0FBd0MsSUFBSTtBQUMxUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQUcsb0JBQW9CLHNEQUFHLGdDQUFnQyxzREFBRywyQkFBMkIsc0RBQUcsZ0NBQWdDLHNEQUFHLDBCQUEwQixzREFBRyxvQkFBb0Isc0RBQUc7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQixLQUFLLFlBQVk7QUFDeEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3VybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/url.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/wildcard.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   wildcardMatch: () => (/* binding */ wildcardMatch)\n/* harmony export */ });\n//#region src/utils/wildcard.ts\n/**\n* Escapes a character if it has a special meaning in regular expressions\n* and returns the character as is if it doesn't\n*/\nfunction escapeRegExpChar(char) {\n\tif (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") return `\\\\${char}`;\n\telse return char;\n}\n/**\n* Escapes all characters in a given string that have a special meaning in regular expressions\n*/\nfunction escapeRegExpString(str) {\n\tlet result = \"\";\n\tfor (let i = 0; i < str.length; i++) result += escapeRegExpChar(str[i]);\n\treturn result;\n}\n/**\n* Transforms one or more glob patterns into a RegExp pattern\n*/\nfunction transform(pattern, separator = true) {\n\tif (Array.isArray(pattern)) return `(?:${pattern.map((p) => `^${transform(p, separator)}$`).join(\"|\")})`;\n\tlet separatorSplitter = \"\";\n\tlet separatorMatcher = \"\";\n\tlet wildcard = \".\";\n\tif (separator === true) {\n\t\tseparatorSplitter = \"/\";\n\t\tseparatorMatcher = \"[/\\\\\\\\]\";\n\t\twildcard = \"[^/\\\\\\\\]\";\n\t} else if (separator) {\n\t\tseparatorSplitter = separator;\n\t\tseparatorMatcher = escapeRegExpString(separatorSplitter);\n\t\tif (separatorMatcher.length > 1) {\n\t\t\tseparatorMatcher = `(?:${separatorMatcher})`;\n\t\t\twildcard = `((?!${separatorMatcher}).)`;\n\t\t} else wildcard = `[^${separatorMatcher}]`;\n\t}\n\tconst requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n\tconst optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n\tconst segments = separator ? pattern.split(separatorSplitter) : [pattern];\n\tlet result = \"\";\n\tfor (let s = 0; s < segments.length; s++) {\n\t\tconst segment = segments[s];\n\t\tconst nextSegment = segments[s + 1];\n\t\tlet currentSeparator = \"\";\n\t\tif (!segment && s > 0) continue;\n\t\tif (separator) if (s === segments.length - 1) currentSeparator = optionalSeparator;\n\t\telse if (nextSegment !== \"**\") currentSeparator = requiredSeparator;\n\t\telse currentSeparator = \"\";\n\t\tif (separator && segment === \"**\") {\n\t\t\tif (currentSeparator) {\n\t\t\t\tresult += s === 0 ? \"\" : currentSeparator;\n\t\t\t\tresult += `(?:${wildcard}*?${currentSeparator})*?`;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tfor (let c = 0; c < segment.length; c++) {\n\t\t\tconst char = segment[c];\n\t\t\tif (char === \"\\\\\") {\n\t\t\t\tif (c < segment.length - 1) {\n\t\t\t\t\tresult += escapeRegExpChar(segment[c + 1]);\n\t\t\t\t\tc++;\n\t\t\t\t}\n\t\t\t} else if (char === \"?\") result += wildcard;\n\t\t\telse if (char === \"*\") result += `${wildcard}*?`;\n\t\t\telse result += escapeRegExpChar(char);\n\t\t}\n\t\tresult += currentSeparator;\n\t}\n\treturn result;\n}\nfunction isMatch(regexp, sample) {\n\tif (typeof sample !== \"string\") throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n\treturn regexp.test(sample);\n}\n/**\n* Compiles one or more glob patterns into a RegExp and returns an isMatch function.\n* The isMatch function takes a sample string as its only argument and returns `true`\n* if the string matches the pattern(s).\n*\n* ```js\n* wildcardMatch('src/*.js')('src/index.js') //=> true\n* ```\n*\n* ```js\n* const isMatch = wildcardMatch('*.example.com', '.')\n* isMatch('foo.example.com') //=> true\n* isMatch('foo.bar.com') //=> false\n* ```\n*/\nfunction wildcardMatch(pattern, options) {\n\tif (typeof pattern !== \"string\" && !Array.isArray(pattern)) throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`);\n\tif (typeof options === \"string\" || typeof options === \"boolean\") options = { separator: options };\n\tif (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof options} given`);\n\toptions = options || {};\n\tif (options.separator === \"\\\\\") throw new Error(\"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\");\n\tconst regexpPattern = transform(pattern, options.separator);\n\tconst regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n\tconst fn = isMatch.bind(null, regexp);\n\tfn.options = options;\n\tfn.pattern = pattern;\n\tfn.regexp = regexp;\n\treturn fn;\n}\n\n//#endregion\n\n//# sourceMappingURL=wildcard.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy93aWxkY2FyZC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdMQUFnTCxnQkFBZ0IsZ0VBQWdFLEtBQUs7QUFDclE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx1QkFBdUIsd0JBQXdCLGNBQWM7QUFDdkc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlCQUFpQjtBQUM3QyxxQkFBcUIsaUJBQWlCO0FBQ3RDLElBQUkscUJBQXFCLGlCQUFpQjtBQUMxQztBQUNBLDBDQUEwQyxpQkFBaUI7QUFDM0QsMENBQTBDLGlCQUFpQjtBQUMzRDtBQUNBO0FBQ0EsaUJBQWlCLHFCQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTLElBQUksaUJBQWlCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvQkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHVDQUF1QyxTQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUZBQXFGLGVBQWU7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0tBQW9LLGdCQUFnQjtBQUNwTCw4RUFBOEU7QUFDOUUsd1BBQXdQLGdCQUFnQjtBQUN4UTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsY0FBYztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDeUI7QUFDekIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvd2lsZGNhcmQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vI3JlZ2lvbiBzcmMvdXRpbHMvd2lsZGNhcmQudHNcbi8qKlxuKiBFc2NhcGVzIGEgY2hhcmFjdGVyIGlmIGl0IGhhcyBhIHNwZWNpYWwgbWVhbmluZyBpbiByZWd1bGFyIGV4cHJlc3Npb25zXG4qIGFuZCByZXR1cm5zIHRoZSBjaGFyYWN0ZXIgYXMgaXMgaWYgaXQgZG9lc24ndFxuKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cENoYXIoY2hhcikge1xuXHRpZiAoY2hhciA9PT0gXCItXCIgfHwgY2hhciA9PT0gXCJeXCIgfHwgY2hhciA9PT0gXCIkXCIgfHwgY2hhciA9PT0gXCIrXCIgfHwgY2hhciA9PT0gXCIuXCIgfHwgY2hhciA9PT0gXCIoXCIgfHwgY2hhciA9PT0gXCIpXCIgfHwgY2hhciA9PT0gXCJ8XCIgfHwgY2hhciA9PT0gXCJbXCIgfHwgY2hhciA9PT0gXCJdXCIgfHwgY2hhciA9PT0gXCJ7XCIgfHwgY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCIqXCIgfHwgY2hhciA9PT0gXCI/XCIgfHwgY2hhciA9PT0gXCJcXFxcXCIpIHJldHVybiBgXFxcXCR7Y2hhcn1gO1xuXHRlbHNlIHJldHVybiBjaGFyO1xufVxuLyoqXG4qIEVzY2FwZXMgYWxsIGNoYXJhY3RlcnMgaW4gYSBnaXZlbiBzdHJpbmcgdGhhdCBoYXZlIGEgc3BlY2lhbCBtZWFuaW5nIGluIHJlZ3VsYXIgZXhwcmVzc2lvbnNcbiovXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHBTdHJpbmcoc3RyKSB7XG5cdGxldCByZXN1bHQgPSBcIlwiO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgcmVzdWx0ICs9IGVzY2FwZVJlZ0V4cENoYXIoc3RyW2ldKTtcblx0cmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuKiBUcmFuc2Zvcm1zIG9uZSBvciBtb3JlIGdsb2IgcGF0dGVybnMgaW50byBhIFJlZ0V4cCBwYXR0ZXJuXG4qL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHBhdHRlcm4sIHNlcGFyYXRvciA9IHRydWUpIHtcblx0aWYgKEFycmF5LmlzQXJyYXkocGF0dGVybikpIHJldHVybiBgKD86JHtwYXR0ZXJuLm1hcCgocCkgPT4gYF4ke3RyYW5zZm9ybShwLCBzZXBhcmF0b3IpfSRgKS5qb2luKFwifFwiKX0pYDtcblx0bGV0IHNlcGFyYXRvclNwbGl0dGVyID0gXCJcIjtcblx0bGV0IHNlcGFyYXRvck1hdGNoZXIgPSBcIlwiO1xuXHRsZXQgd2lsZGNhcmQgPSBcIi5cIjtcblx0aWYgKHNlcGFyYXRvciA9PT0gdHJ1ZSkge1xuXHRcdHNlcGFyYXRvclNwbGl0dGVyID0gXCIvXCI7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IFwiWy9cXFxcXFxcXF1cIjtcblx0XHR3aWxkY2FyZCA9IFwiW14vXFxcXFxcXFxdXCI7XG5cdH0gZWxzZSBpZiAoc2VwYXJhdG9yKSB7XG5cdFx0c2VwYXJhdG9yU3BsaXR0ZXIgPSBzZXBhcmF0b3I7XG5cdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGVzY2FwZVJlZ0V4cFN0cmluZyhzZXBhcmF0b3JTcGxpdHRlcik7XG5cdFx0aWYgKHNlcGFyYXRvck1hdGNoZXIubGVuZ3RoID4gMSkge1xuXHRcdFx0c2VwYXJhdG9yTWF0Y2hlciA9IGAoPzoke3NlcGFyYXRvck1hdGNoZXJ9KWA7XG5cdFx0XHR3aWxkY2FyZCA9IGAoKD8hJHtzZXBhcmF0b3JNYXRjaGVyfSkuKWA7XG5cdFx0fSBlbHNlIHdpbGRjYXJkID0gYFteJHtzZXBhcmF0b3JNYXRjaGVyfV1gO1xuXHR9XG5cdGNvbnN0IHJlcXVpcmVkU2VwYXJhdG9yID0gc2VwYXJhdG9yID8gYCR7c2VwYXJhdG9yTWF0Y2hlcn0rP2AgOiBcIlwiO1xuXHRjb25zdCBvcHRpb25hbFNlcGFyYXRvciA9IHNlcGFyYXRvciA/IGAke3NlcGFyYXRvck1hdGNoZXJ9Kj9gIDogXCJcIjtcblx0Y29uc3Qgc2VnbWVudHMgPSBzZXBhcmF0b3IgPyBwYXR0ZXJuLnNwbGl0KHNlcGFyYXRvclNwbGl0dGVyKSA6IFtwYXR0ZXJuXTtcblx0bGV0IHJlc3VsdCA9IFwiXCI7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc2VnbWVudHMubGVuZ3RoOyBzKyspIHtcblx0XHRjb25zdCBzZWdtZW50ID0gc2VnbWVudHNbc107XG5cdFx0Y29uc3QgbmV4dFNlZ21lbnQgPSBzZWdtZW50c1tzICsgMV07XG5cdFx0bGV0IGN1cnJlbnRTZXBhcmF0b3IgPSBcIlwiO1xuXHRcdGlmICghc2VnbWVudCAmJiBzID4gMCkgY29udGludWU7XG5cdFx0aWYgKHNlcGFyYXRvcikgaWYgKHMgPT09IHNlZ21lbnRzLmxlbmd0aCAtIDEpIGN1cnJlbnRTZXBhcmF0b3IgPSBvcHRpb25hbFNlcGFyYXRvcjtcblx0XHRlbHNlIGlmIChuZXh0U2VnbWVudCAhPT0gXCIqKlwiKSBjdXJyZW50U2VwYXJhdG9yID0gcmVxdWlyZWRTZXBhcmF0b3I7XG5cdFx0ZWxzZSBjdXJyZW50U2VwYXJhdG9yID0gXCJcIjtcblx0XHRpZiAoc2VwYXJhdG9yICYmIHNlZ21lbnQgPT09IFwiKipcIikge1xuXHRcdFx0aWYgKGN1cnJlbnRTZXBhcmF0b3IpIHtcblx0XHRcdFx0cmVzdWx0ICs9IHMgPT09IDAgPyBcIlwiIDogY3VycmVudFNlcGFyYXRvcjtcblx0XHRcdFx0cmVzdWx0ICs9IGAoPzoke3dpbGRjYXJkfSo/JHtjdXJyZW50U2VwYXJhdG9yfSkqP2A7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgYyA9IDA7IGMgPCBzZWdtZW50Lmxlbmd0aDsgYysrKSB7XG5cdFx0XHRjb25zdCBjaGFyID0gc2VnbWVudFtjXTtcblx0XHRcdGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuXHRcdFx0XHRpZiAoYyA8IHNlZ21lbnQubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdHJlc3VsdCArPSBlc2NhcGVSZWdFeHBDaGFyKHNlZ21lbnRbYyArIDFdKTtcblx0XHRcdFx0XHRjKys7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoY2hhciA9PT0gXCI/XCIpIHJlc3VsdCArPSB3aWxkY2FyZDtcblx0XHRcdGVsc2UgaWYgKGNoYXIgPT09IFwiKlwiKSByZXN1bHQgKz0gYCR7d2lsZGNhcmR9Kj9gO1xuXHRcdFx0ZWxzZSByZXN1bHQgKz0gZXNjYXBlUmVnRXhwQ2hhcihjaGFyKTtcblx0XHR9XG5cdFx0cmVzdWx0ICs9IGN1cnJlbnRTZXBhcmF0b3I7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGlzTWF0Y2gocmVnZXhwLCBzYW1wbGUpIHtcblx0aWYgKHR5cGVvZiBzYW1wbGUgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoYFNhbXBsZSBtdXN0IGJlIGEgc3RyaW5nLCBidXQgJHt0eXBlb2Ygc2FtcGxlfSBnaXZlbmApO1xuXHRyZXR1cm4gcmVnZXhwLnRlc3Qoc2FtcGxlKTtcbn1cbi8qKlxuKiBDb21waWxlcyBvbmUgb3IgbW9yZSBnbG9iIHBhdHRlcm5zIGludG8gYSBSZWdFeHAgYW5kIHJldHVybnMgYW4gaXNNYXRjaCBmdW5jdGlvbi5cbiogVGhlIGlzTWF0Y2ggZnVuY3Rpb24gdGFrZXMgYSBzYW1wbGUgc3RyaW5nIGFzIGl0cyBvbmx5IGFyZ3VtZW50IGFuZCByZXR1cm5zIGB0cnVlYFxuKiBpZiB0aGUgc3RyaW5nIG1hdGNoZXMgdGhlIHBhdHRlcm4ocykuXG4qXG4qIGBgYGpzXG4qIHdpbGRjYXJkTWF0Y2goJ3NyYy8qLmpzJykoJ3NyYy9pbmRleC5qcycpIC8vPT4gdHJ1ZVxuKiBgYGBcbipcbiogYGBganNcbiogY29uc3QgaXNNYXRjaCA9IHdpbGRjYXJkTWF0Y2goJyouZXhhbXBsZS5jb20nLCAnLicpXG4qIGlzTWF0Y2goJ2Zvby5leGFtcGxlLmNvbScpIC8vPT4gdHJ1ZVxuKiBpc01hdGNoKCdmb28uYmFyLmNvbScpIC8vPT4gZmFsc2VcbiogYGBgXG4qL1xuZnVuY3Rpb24gd2lsZGNhcmRNYXRjaChwYXR0ZXJuLCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgcGF0dGVybiAhPT0gXCJzdHJpbmdcIiAmJiAhQXJyYXkuaXNBcnJheShwYXR0ZXJuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBzaW5nbGUgcGF0dGVybiBzdHJpbmcgb3IgYW4gYXJyYXkgb2YgcGF0dGVybnMsIGJ1dCAke3R5cGVvZiBwYXR0ZXJufSBnaXZlbmApO1xuXHRpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiKSBvcHRpb25zID0geyBzZXBhcmF0b3I6IG9wdGlvbnMgfTtcblx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgISh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9wdGlvbnMpKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgVGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGFuIG9wdGlvbnMgb2JqZWN0IG9yIGEgc3RyaW5nL2Jvb2xlYW4gc2VwYXJhdG9yLCBidXQgJHt0eXBlb2Ygb3B0aW9uc30gZ2l2ZW5gKTtcblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdGlmIChvcHRpb25zLnNlcGFyYXRvciA9PT0gXCJcXFxcXCIpIHRocm93IG5ldyBFcnJvcihcIlxcXFwgaXMgbm90IGEgdmFsaWQgc2VwYXJhdG9yIGJlY2F1c2UgaXQgaXMgdXNlZCBmb3IgZXNjYXBpbmcuIFRyeSBzZXR0aW5nIHRoZSBzZXBhcmF0b3IgdG8gYHRydWVgIGluc3RlYWRcIik7XG5cdGNvbnN0IHJlZ2V4cFBhdHRlcm4gPSB0cmFuc2Zvcm0ocGF0dGVybiwgb3B0aW9ucy5zZXBhcmF0b3IpO1xuXHRjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeJHtyZWdleHBQYXR0ZXJufSRgLCBvcHRpb25zLmZsYWdzKTtcblx0Y29uc3QgZm4gPSBpc01hdGNoLmJpbmQobnVsbCwgcmVnZXhwKTtcblx0Zm4ub3B0aW9ucyA9IG9wdGlvbnM7XG5cdGZuLnBhdHRlcm4gPSBwYXR0ZXJuO1xuXHRmbi5yZWdleHAgPSByZWdleHA7XG5cdHJldHVybiBmbjtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB3aWxkY2FyZE1hdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD13aWxkY2FyZC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/better-auth/dist/utils/wildcard.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/broadcast-channel.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalBroadcastChannel: () => (/* binding */ getGlobalBroadcastChannel),\n/* harmony export */   kBroadcastChannel: () => (/* binding */ kBroadcastChannel)\n/* harmony export */ });\n//#region src/client/broadcast-channel.ts\nconst kBroadcastChannel = Symbol.for(\"better-auth:broadcast-channel\");\nconst now = () => Math.floor(Date.now() / 1e3);\nvar WindowBroadcastChannel = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tname;\n\tconstructor(name = \"better-auth.message\") {\n\t\tthis.name = name;\n\t}\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tpost(message) {\n\t\tif (typeof window === \"undefined\") return;\n\t\ttry {\n\t\t\tlocalStorage.setItem(this.name, JSON.stringify({\n\t\t\t\t...message,\n\t\t\t\ttimestamp: now()\n\t\t\t}));\n\t\t} catch {}\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst handler = (event) => {\n\t\t\tif (event.key !== this.name) return;\n\t\t\tconst message = JSON.parse(event.newValue ?? \"{}\");\n\t\t\tif (message?.event !== \"session\" || !message?.data) return;\n\t\t\tthis.listeners.forEach((listener) => listener(message));\n\t\t};\n\t\twindow.addEventListener(\"storage\", handler);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"storage\", handler);\n\t\t};\n\t}\n};\nfunction getGlobalBroadcastChannel(name = \"better-auth.message\") {\n\tif (!globalThis[kBroadcastChannel]) globalThis[kBroadcastChannel] = new WindowBroadcastChannel(name);\n\treturn globalThis[kBroadcastChannel];\n}\n\n//#endregion\n\n//# sourceMappingURL=broadcast-channel.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3dEO0FBQ3hEIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9icm9hZGNhc3QtY2hhbm5lbC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvYnJvYWRjYXN0LWNoYW5uZWwudHNcbmNvbnN0IGtCcm9hZGNhc3RDaGFubmVsID0gU3ltYm9sLmZvcihcImJldHRlci1hdXRoOmJyb2FkY2FzdC1jaGFubmVsXCIpO1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbnZhciBXaW5kb3dCcm9hZGNhc3RDaGFubmVsID0gY2xhc3Mge1xuXHRsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuXHRuYW1lO1xuXHRjb25zdHJ1Y3RvcihuYW1lID0gXCJiZXR0ZXItYXV0aC5tZXNzYWdlXCIpIHtcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xuXHR9XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRwb3N0KG1lc3NhZ2UpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuO1xuXHRcdHRyeSB7XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLm5hbWUsIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0Li4ubWVzc2FnZSxcblx0XHRcdFx0dGltZXN0YW1wOiBub3coKVxuXHRcdFx0fSkpO1xuXHRcdH0gY2F0Y2gge31cblx0fVxuXHRzZXR1cCgpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiAoKSA9PiB7fTtcblx0XHRjb25zdCBoYW5kbGVyID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRpZiAoZXZlbnQua2V5ICE9PSB0aGlzLm5hbWUpIHJldHVybjtcblx0XHRcdGNvbnN0IG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50Lm5ld1ZhbHVlID8/IFwie31cIik7XG5cdFx0XHRpZiAobWVzc2FnZT8uZXZlbnQgIT09IFwic2Vzc2lvblwiIHx8ICFtZXNzYWdlPy5kYXRhKSByZXR1cm47XG5cdFx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIobWVzc2FnZSkpO1xuXHRcdH07XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIGhhbmRsZXIpO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInN0b3JhZ2VcIiwgaGFuZGxlcik7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwobmFtZSA9IFwiYmV0dGVyLWF1dGgubWVzc2FnZVwiKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trQnJvYWRjYXN0Q2hhbm5lbF0pIGdsb2JhbFRoaXNba0Jyb2FkY2FzdENoYW5uZWxdID0gbmV3IFdpbmRvd0Jyb2FkY2FzdENoYW5uZWwobmFtZSk7XG5cdHJldHVybiBnbG9iYWxUaGlzW2tCcm9hZGNhc3RDaGFubmVsXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsLCBrQnJvYWRjYXN0Q2hhbm5lbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YnJvYWRjYXN0LWNoYW5uZWwubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/config.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/config.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientConfig: () => (/* binding */ getClientConfig)\n/* harmony export */ });\n/* harmony import */ var _utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/url.mjs */ \"(ssr)/./node_modules/better-auth/dist/utils/url.mjs\");\n/* harmony import */ var _fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch-plugins.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\");\n/* harmony import */ var _parser_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/parser.mjs\");\n/* harmony import */ var _session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session-atom.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-fetch/fetch */ \"(ssr)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\n//#region src/client/config.ts\nconst getClientConfig = (options, loadEnv) => {\n\tconst isCredentialsSupported = \"credentials\" in Request.prototype;\n\tconst baseURL = (0,_utils_url_mjs__WEBPACK_IMPORTED_MODULE_0__.getBaseURL)(options?.baseURL, options?.basePath, void 0, loadEnv) ?? \"/api/auth\";\n\tconst pluginsFetchPlugins = options?.plugins?.flatMap((plugin) => plugin.fetchPlugins).filter((pl) => pl !== void 0) || [];\n\tconst lifeCyclePlugin = {\n\t\tid: \"lifecycle-hooks\",\n\t\tname: \"lifecycle-hooks\",\n\t\thooks: {\n\t\t\tonSuccess: options?.fetchOptions?.onSuccess,\n\t\t\tonError: options?.fetchOptions?.onError,\n\t\t\tonRequest: options?.fetchOptions?.onRequest,\n\t\t\tonResponse: options?.fetchOptions?.onResponse\n\t\t}\n\t};\n\tconst { onSuccess: _onSuccess, onError: _onError, onRequest: _onRequest, onResponse: _onResponse, ...restOfFetchOptions } = options?.fetchOptions || {};\n\tconst $fetch = (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__.createFetch)({\n\t\tbaseURL,\n\t\t...isCredentialsSupported ? { credentials: \"include\" } : {},\n\t\tmethod: \"GET\",\n\t\tjsonParser(text) {\n\t\t\tif (!text) return null;\n\t\t\treturn (0,_parser_mjs__WEBPACK_IMPORTED_MODULE_2__.parseJSON)(text, { strict: false });\n\t\t},\n\t\tcustomFetchImpl: fetch,\n\t\t...restOfFetchOptions,\n\t\tplugins: [\n\t\t\tlifeCyclePlugin,\n\t\t\t...restOfFetchOptions.plugins || [],\n\t\t\t...options?.disableDefaultFetchPlugins ? [] : [_fetch_plugins_mjs__WEBPACK_IMPORTED_MODULE_1__.redirectPlugin],\n\t\t\t...pluginsFetchPlugins\n\t\t]\n\t});\n\tconst { $sessionSignal, session } = (0,_session_atom_mjs__WEBPACK_IMPORTED_MODULE_3__.getSessionAtom)($fetch, options);\n\tconst plugins = options?.plugins || [];\n\tconst pluginsActions = {};\n\tconst pluginsAtoms = {\n\t\t$sessionSignal,\n\t\tsession\n\t};\n\tconst pluginPathMethods = {\n\t\t\"/sign-out\": \"POST\",\n\t\t\"/revoke-sessions\": \"POST\",\n\t\t\"/revoke-other-sessions\": \"POST\",\n\t\t\"/delete-user\": \"POST\"\n\t};\n\tconst atomListeners = [{\n\t\tsignal: \"$sessionSignal\",\n\t\tmatcher(path) {\n\t\t\treturn path === \"/sign-out\" || path === \"/update-user\" || path === \"/sign-up/email\" || path === \"/sign-in/email\" || path === \"/delete-user\" || path === \"/verify-email\" || path === \"/revoke-sessions\" || path === \"/revoke-session\" || path === \"/change-email\";\n\t\t}\n\t}];\n\tfor (const plugin of plugins) {\n\t\tif (plugin.getAtoms) Object.assign(pluginsAtoms, plugin.getAtoms?.($fetch));\n\t\tif (plugin.pathMethods) Object.assign(pluginPathMethods, plugin.pathMethods);\n\t\tif (plugin.atomListeners) atomListeners.push(...plugin.atomListeners);\n\t}\n\tconst $store = {\n\t\tnotify: (signal) => {\n\t\t\tpluginsAtoms[signal].set(!pluginsAtoms[signal].get());\n\t\t},\n\t\tlisten: (signal, listener) => {\n\t\t\tpluginsAtoms[signal].subscribe(listener);\n\t\t},\n\t\tatoms: pluginsAtoms\n\t};\n\tfor (const plugin of plugins) if (plugin.getActions) Object.assign(pluginsActions, plugin.getActions?.($fetch, $store, options));\n\treturn {\n\t\tget baseURL() {\n\t\t\treturn baseURL;\n\t\t},\n\t\tpluginsActions,\n\t\tpluginsAtoms,\n\t\tpluginPathMethods,\n\t\tatomListeners,\n\t\t$fetch,\n\t\t$store\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=config.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvY29uZmlnLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBOEM7QUFDTztBQUNaO0FBQ1c7QUFDRjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGtIQUFrSDtBQUMzSCxnQkFBZ0IsZ0VBQVc7QUFDM0I7QUFDQSxnQ0FBZ0MseUJBQXlCLElBQUk7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsVUFBVSxzREFBUyxTQUFTLGVBQWU7QUFDM0MsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsOERBQWM7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRixTQUFTLDBCQUEwQixFQUFFLGlFQUFjO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzJCO0FBQzNCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9jb25maWcubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEJhc2VVUkwgfSBmcm9tIFwiLi4vdXRpbHMvdXJsLm1qc1wiO1xuaW1wb3J0IHsgcmVkaXJlY3RQbHVnaW4gfSBmcm9tIFwiLi9mZXRjaC1wbHVnaW5zLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VKU09OIH0gZnJvbSBcIi4vcGFyc2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbkF0b20gfSBmcm9tIFwiLi9zZXNzaW9uLWF0b20ubWpzXCI7XG5pbXBvcnQgeyBjcmVhdGVGZXRjaCB9IGZyb20gXCJAYmV0dGVyLWZldGNoL2ZldGNoXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L2NvbmZpZy50c1xuY29uc3QgZ2V0Q2xpZW50Q29uZmlnID0gKG9wdGlvbnMsIGxvYWRFbnYpID0+IHtcblx0Y29uc3QgaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA9IFwiY3JlZGVudGlhbHNcIiBpbiBSZXF1ZXN0LnByb3RvdHlwZTtcblx0Y29uc3QgYmFzZVVSTCA9IGdldEJhc2VVUkwob3B0aW9ucz8uYmFzZVVSTCwgb3B0aW9ucz8uYmFzZVBhdGgsIHZvaWQgMCwgbG9hZEVudikgPz8gXCIvYXBpL2F1dGhcIjtcblx0Y29uc3QgcGx1Z2luc0ZldGNoUGx1Z2lucyA9IG9wdGlvbnM/LnBsdWdpbnM/LmZsYXRNYXAoKHBsdWdpbikgPT4gcGx1Z2luLmZldGNoUGx1Z2lucykuZmlsdGVyKChwbCkgPT4gcGwgIT09IHZvaWQgMCkgfHwgW107XG5cdGNvbnN0IGxpZmVDeWNsZVBsdWdpbiA9IHtcblx0XHRpZDogXCJsaWZlY3ljbGUtaG9va3NcIixcblx0XHRuYW1lOiBcImxpZmVjeWNsZS1ob29rc1wiLFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRvblN1Y2Nlc3M6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25TdWNjZXNzLFxuXHRcdFx0b25FcnJvcjogb3B0aW9ucz8uZmV0Y2hPcHRpb25zPy5vbkVycm9yLFxuXHRcdFx0b25SZXF1ZXN0OiBvcHRpb25zPy5mZXRjaE9wdGlvbnM/Lm9uUmVxdWVzdCxcblx0XHRcdG9uUmVzcG9uc2U6IG9wdGlvbnM/LmZldGNoT3B0aW9ucz8ub25SZXNwb25zZVxuXHRcdH1cblx0fTtcblx0Y29uc3QgeyBvblN1Y2Nlc3M6IF9vblN1Y2Nlc3MsIG9uRXJyb3I6IF9vbkVycm9yLCBvblJlcXVlc3Q6IF9vblJlcXVlc3QsIG9uUmVzcG9uc2U6IF9vblJlc3BvbnNlLCAuLi5yZXN0T2ZGZXRjaE9wdGlvbnMgfSA9IG9wdGlvbnM/LmZldGNoT3B0aW9ucyB8fCB7fTtcblx0Y29uc3QgJGZldGNoID0gY3JlYXRlRmV0Y2goe1xuXHRcdGJhc2VVUkwsXG5cdFx0Li4uaXNDcmVkZW50aWFsc1N1cHBvcnRlZCA/IHsgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiIH0gOiB7fSxcblx0XHRtZXRob2Q6IFwiR0VUXCIsXG5cdFx0anNvblBhcnNlcih0ZXh0KSB7XG5cdFx0XHRpZiAoIXRleHQpIHJldHVybiBudWxsO1xuXHRcdFx0cmV0dXJuIHBhcnNlSlNPTih0ZXh0LCB7IHN0cmljdDogZmFsc2UgfSk7XG5cdFx0fSxcblx0XHRjdXN0b21GZXRjaEltcGw6IGZldGNoLFxuXHRcdC4uLnJlc3RPZkZldGNoT3B0aW9ucyxcblx0XHRwbHVnaW5zOiBbXG5cdFx0XHRsaWZlQ3ljbGVQbHVnaW4sXG5cdFx0XHQuLi5yZXN0T2ZGZXRjaE9wdGlvbnMucGx1Z2lucyB8fCBbXSxcblx0XHRcdC4uLm9wdGlvbnM/LmRpc2FibGVEZWZhdWx0RmV0Y2hQbHVnaW5zID8gW10gOiBbcmVkaXJlY3RQbHVnaW5dLFxuXHRcdFx0Li4ucGx1Z2luc0ZldGNoUGx1Z2luc1xuXHRcdF1cblx0fSk7XG5cdGNvbnN0IHsgJHNlc3Npb25TaWduYWwsIHNlc3Npb24gfSA9IGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucyk7XG5cdGNvbnN0IHBsdWdpbnMgPSBvcHRpb25zPy5wbHVnaW5zIHx8IFtdO1xuXHRjb25zdCBwbHVnaW5zQWN0aW9ucyA9IHt9O1xuXHRjb25zdCBwbHVnaW5zQXRvbXMgPSB7XG5cdFx0JHNlc3Npb25TaWduYWwsXG5cdFx0c2Vzc2lvblxuXHR9O1xuXHRjb25zdCBwbHVnaW5QYXRoTWV0aG9kcyA9IHtcblx0XHRcIi9zaWduLW91dFwiOiBcIlBPU1RcIixcblx0XHRcIi9yZXZva2Utc2Vzc2lvbnNcIjogXCJQT1NUXCIsXG5cdFx0XCIvcmV2b2tlLW90aGVyLXNlc3Npb25zXCI6IFwiUE9TVFwiLFxuXHRcdFwiL2RlbGV0ZS11c2VyXCI6IFwiUE9TVFwiXG5cdH07XG5cdGNvbnN0IGF0b21MaXN0ZW5lcnMgPSBbe1xuXHRcdHNpZ25hbDogXCIkc2Vzc2lvblNpZ25hbFwiLFxuXHRcdG1hdGNoZXIocGF0aCkge1xuXHRcdFx0cmV0dXJuIHBhdGggPT09IFwiL3NpZ24tb3V0XCIgfHwgcGF0aCA9PT0gXCIvdXBkYXRlLXVzZXJcIiB8fCBwYXRoID09PSBcIi9zaWduLXVwL2VtYWlsXCIgfHwgcGF0aCA9PT0gXCIvc2lnbi1pbi9lbWFpbFwiIHx8IHBhdGggPT09IFwiL2RlbGV0ZS11c2VyXCIgfHwgcGF0aCA9PT0gXCIvdmVyaWZ5LWVtYWlsXCIgfHwgcGF0aCA9PT0gXCIvcmV2b2tlLXNlc3Npb25zXCIgfHwgcGF0aCA9PT0gXCIvcmV2b2tlLXNlc3Npb25cIiB8fCBwYXRoID09PSBcIi9jaGFuZ2UtZW1haWxcIjtcblx0XHR9XG5cdH1dO1xuXHRmb3IgKGNvbnN0IHBsdWdpbiBvZiBwbHVnaW5zKSB7XG5cdFx0aWYgKHBsdWdpbi5nZXRBdG9tcykgT2JqZWN0LmFzc2lnbihwbHVnaW5zQXRvbXMsIHBsdWdpbi5nZXRBdG9tcz8uKCRmZXRjaCkpO1xuXHRcdGlmIChwbHVnaW4ucGF0aE1ldGhvZHMpIE9iamVjdC5hc3NpZ24ocGx1Z2luUGF0aE1ldGhvZHMsIHBsdWdpbi5wYXRoTWV0aG9kcyk7XG5cdFx0aWYgKHBsdWdpbi5hdG9tTGlzdGVuZXJzKSBhdG9tTGlzdGVuZXJzLnB1c2goLi4ucGx1Z2luLmF0b21MaXN0ZW5lcnMpO1xuXHR9XG5cdGNvbnN0ICRzdG9yZSA9IHtcblx0XHRub3RpZnk6IChzaWduYWwpID0+IHtcblx0XHRcdHBsdWdpbnNBdG9tc1tzaWduYWxdLnNldCghcGx1Z2luc0F0b21zW3NpZ25hbF0uZ2V0KCkpO1xuXHRcdH0sXG5cdFx0bGlzdGVuOiAoc2lnbmFsLCBsaXN0ZW5lcikgPT4ge1xuXHRcdFx0cGx1Z2luc0F0b21zW3NpZ25hbF0uc3Vic2NyaWJlKGxpc3RlbmVyKTtcblx0XHR9LFxuXHRcdGF0b21zOiBwbHVnaW5zQXRvbXNcblx0fTtcblx0Zm9yIChjb25zdCBwbHVnaW4gb2YgcGx1Z2lucykgaWYgKHBsdWdpbi5nZXRBY3Rpb25zKSBPYmplY3QuYXNzaWduKHBsdWdpbnNBY3Rpb25zLCBwbHVnaW4uZ2V0QWN0aW9ucz8uKCRmZXRjaCwgJHN0b3JlLCBvcHRpb25zKSk7XG5cdHJldHVybiB7XG5cdFx0Z2V0IGJhc2VVUkwoKSB7XG5cdFx0XHRyZXR1cm4gYmFzZVVSTDtcblx0XHR9LFxuXHRcdHBsdWdpbnNBY3Rpb25zLFxuXHRcdHBsdWdpbnNBdG9tcyxcblx0XHRwbHVnaW5QYXRoTWV0aG9kcyxcblx0XHRhdG9tTGlzdGVuZXJzLFxuXHRcdCRmZXRjaCxcblx0XHQkc3RvcmVcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgZ2V0Q2xpZW50Q29uZmlnIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/config.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/fetch-plugins.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   redirectPlugin: () => (/* binding */ redirectPlugin)\n/* harmony export */ });\n//#region src/client/fetch-plugins.ts\nconst redirectPlugin = {\n\tid: \"redirect\",\n\tname: \"Redirect\",\n\thooks: { onSuccess(context) {\n\t\tif (context.data?.url && context.data?.redirect) {\n\t\t\tif (typeof window !== \"undefined\" && window.location) {\n\t\t\t\tif (window.location) try {\n\t\t\t\t\twindow.location.href = context.data.url;\n\t\t\t\t} catch {}\n\t\t\t}\n\t\t}\n\t} }\n};\n\n//#endregion\n\n//# sourceMappingURL=fetch-plugins.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZmV0Y2gtcGx1Z2lucy5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzBCO0FBQzFCIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9mZXRjaC1wbHVnaW5zLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9mZXRjaC1wbHVnaW5zLnRzXG5jb25zdCByZWRpcmVjdFBsdWdpbiA9IHtcblx0aWQ6IFwicmVkaXJlY3RcIixcblx0bmFtZTogXCJSZWRpcmVjdFwiLFxuXHRob29rczogeyBvblN1Y2Nlc3MoY29udGV4dCkge1xuXHRcdGlmIChjb250ZXh0LmRhdGE/LnVybCAmJiBjb250ZXh0LmRhdGE/LnJlZGlyZWN0KSB7XG5cdFx0XHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24pIHtcblx0XHRcdFx0aWYgKHdpbmRvdy5sb2NhdGlvbikgdHJ5IHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IGNvbnRleHQuZGF0YS51cmw7XG5cdFx0XHRcdH0gY2F0Y2gge31cblx0XHRcdH1cblx0XHR9XG5cdH0gfVxufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyByZWRpcmVjdFBsdWdpbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmV0Y2gtcGx1Z2lucy5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/fetch-plugins.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/focus-manager.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalFocusManager: () => (/* binding */ getGlobalFocusManager),\n/* harmony export */   kFocusManager: () => (/* binding */ kFocusManager)\n/* harmony export */ });\n//#region src/client/focus-manager.ts\nconst kFocusManager = Symbol.for(\"better-auth:focus-manager\");\nvar WindowFocusManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetFocused(focused) {\n\t\tthis.listeners.forEach((listener) => listener(focused));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof document === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst visibilityHandler = () => {\n\t\t\tif (document.visibilityState === \"visible\") this.setFocused(true);\n\t\t};\n\t\tdocument.addEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener(\"visibilitychange\", visibilityHandler, false);\n\t\t};\n\t}\n};\nfunction getGlobalFocusManager() {\n\tif (!globalThis[kFocusManager]) globalThis[kFocusManager] = new WindowFocusManager();\n\treturn globalThis[kFocusManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=focus-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZm9jdXMtbWFuYWdlci5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNnRDtBQUNoRCIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvZm9jdXMtbWFuYWdlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvZm9jdXMtbWFuYWdlci50c1xuY29uc3Qga0ZvY3VzTWFuYWdlciA9IFN5bWJvbC5mb3IoXCJiZXR0ZXItYXV0aDpmb2N1cy1tYW5hZ2VyXCIpO1xudmFyIFdpbmRvd0ZvY3VzTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0c3Vic2NyaWJlKGxpc3RlbmVyKSB7XG5cdFx0dGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcblx0XHR9O1xuXHR9XG5cdHNldEZvY3VzZWQoZm9jdXNlZCkge1xuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lcihmb2N1c2VkKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGRvY3VtZW50ID09PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuICgpID0+IHt9O1xuXHRcdGNvbnN0IHZpc2liaWxpdHlIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0aWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCIpIHRoaXMuc2V0Rm9jdXNlZCh0cnVlKTtcblx0XHR9O1xuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHZpc2liaWxpdHlIYW5kbGVyLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbEZvY3VzTWFuYWdlcigpIHtcblx0aWYgKCFnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdKSBnbG9iYWxUaGlzW2tGb2N1c01hbmFnZXJdID0gbmV3IFdpbmRvd0ZvY3VzTWFuYWdlcigpO1xuXHRyZXR1cm4gZ2xvYmFsVGhpc1trRm9jdXNNYW5hZ2VyXTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRHbG9iYWxGb2N1c01hbmFnZXIsIGtGb2N1c01hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLW1hbmFnZXIubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/online-manager.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getGlobalOnlineManager: () => (/* binding */ getGlobalOnlineManager),\n/* harmony export */   kOnlineManager: () => (/* binding */ kOnlineManager)\n/* harmony export */ });\n//#region src/client/online-manager.ts\nconst kOnlineManager = Symbol.for(\"better-auth:online-manager\");\nvar WindowOnlineManager = class {\n\tlisteners = /* @__PURE__ */ new Set();\n\tisOnline = typeof navigator !== \"undefined\" ? navigator.onLine : true;\n\tsubscribe(listener) {\n\t\tthis.listeners.add(listener);\n\t\treturn () => {\n\t\t\tthis.listeners.delete(listener);\n\t\t};\n\t}\n\tsetOnline(online) {\n\t\tthis.isOnline = online;\n\t\tthis.listeners.forEach((listener) => listener(online));\n\t}\n\tsetup() {\n\t\tif (typeof window === \"undefined\" || typeof window.addEventListener === \"undefined\") return () => {};\n\t\tconst onOnline = () => this.setOnline(true);\n\t\tconst onOffline = () => this.setOnline(false);\n\t\twindow.addEventListener(\"online\", onOnline, false);\n\t\twindow.addEventListener(\"offline\", onOffline, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"online\", onOnline, false);\n\t\t\twindow.removeEventListener(\"offline\", onOffline, false);\n\t\t};\n\t}\n};\nfunction getGlobalOnlineManager() {\n\tif (!globalThis[kOnlineManager]) globalThis[kOnlineManager] = new WindowOnlineManager();\n\treturn globalThis[kOnlineManager];\n}\n\n//#endregion\n\n//# sourceMappingURL=online-manager.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvb25saW5lLW1hbmFnZXIubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0Q7QUFDbEQiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY2xpZW50L29ubGluZS1tYW5hZ2VyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL2NsaWVudC9vbmxpbmUtbWFuYWdlci50c1xuY29uc3Qga09ubGluZU1hbmFnZXIgPSBTeW1ib2wuZm9yKFwiYmV0dGVyLWF1dGg6b25saW5lLW1hbmFnZXJcIik7XG52YXIgV2luZG93T25saW5lTWFuYWdlciA9IGNsYXNzIHtcblx0bGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcblx0aXNPbmxpbmUgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiID8gbmF2aWdhdG9yLm9uTGluZSA6IHRydWU7XG5cdHN1YnNjcmliZShsaXN0ZW5lcikge1xuXHRcdHRoaXMubGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMubGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG5cdFx0fTtcblx0fVxuXHRzZXRPbmxpbmUob25saW5lKSB7XG5cdFx0dGhpcy5pc09ubGluZSA9IG9ubGluZTtcblx0XHR0aGlzLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4gbGlzdGVuZXIob25saW5lKSk7XG5cdH1cblx0c2V0dXAoKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gKCkgPT4ge307XG5cdFx0Y29uc3Qgb25PbmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZSh0cnVlKTtcblx0XHRjb25zdCBvbk9mZmxpbmUgPSAoKSA9PiB0aGlzLnNldE9ubGluZShmYWxzZSk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgb25PbmxpbmUsIGZhbHNlKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIG9uT25saW5lLCBmYWxzZSk7XG5cdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgb25PZmZsaW5lLCBmYWxzZSk7XG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKSB7XG5cdGlmICghZ2xvYmFsVGhpc1trT25saW5lTWFuYWdlcl0pIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdID0gbmV3IFdpbmRvd09ubGluZU1hbmFnZXIoKTtcblx0cmV0dXJuIGdsb2JhbFRoaXNba09ubGluZU1hbmFnZXJdO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEdsb2JhbE9ubGluZU1hbmFnZXIsIGtPbmxpbmVNYW5hZ2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vbmxpbmUtbWFuYWdlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/parser.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/parser.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parseJSON: () => (/* binding */ parseJSON)\n/* harmony export */ });\n//#region src/client/parser.ts\nconst PROTO_POLLUTION_PATTERNS = {\n\tproto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n\tconstructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n\tprotoShort: /\"__proto__\"\\s*:/,\n\tconstructorShort: /\"constructor\"\\s*:/\n};\nconst JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nconst SPECIAL_VALUES = {\n\ttrue: true,\n\tfalse: false,\n\tnull: null,\n\tundefined: void 0,\n\tnan: NaN,\n\tinfinity: Number.POSITIVE_INFINITY,\n\t\"-infinity\": Number.NEGATIVE_INFINITY\n};\nconst ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n\treturn date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n\tconst match = ISO_DATE_REGEX.exec(value);\n\tif (!match) return null;\n\tconst [, year, month, day, hour, minute, second, ms, offsetSign, offsetHour, offsetMinute] = match;\n\tconst date = new Date(Date.UTC(parseInt(year, 10), parseInt(month, 10) - 1, parseInt(day, 10), parseInt(hour, 10), parseInt(minute, 10), parseInt(second, 10), ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0));\n\tif (offsetSign) {\n\t\tconst offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n\t\tdate.setUTCMinutes(date.getUTCMinutes() + offset);\n\t}\n\treturn isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n\tconst { strict = false, warnings = false, reviver, parseDates = true } = options;\n\tif (typeof value !== \"string\") return value;\n\tconst trimmed = value.trim();\n\tif (trimmed.length > 0 && trimmed[0] === \"\\\"\" && trimmed.endsWith(\"\\\"\") && !trimmed.slice(1, -1).includes(\"\\\"\")) return trimmed.slice(1, -1);\n\tconst lowerValue = trimmed.toLowerCase();\n\tif (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) return SPECIAL_VALUES[lowerValue];\n\tif (!JSON_SIGNATURE.test(trimmed)) {\n\t\tif (strict) throw new SyntaxError(\"[better-json] Invalid JSON\");\n\t\treturn value;\n\t}\n\tif (Object.entries(PROTO_POLLUTION_PATTERNS).some(([key, pattern]) => {\n\t\tconst matches = pattern.test(trimmed);\n\t\tif (matches && warnings) console.warn(`[better-json] Detected potential prototype pollution attempt using ${key} pattern`);\n\t\treturn matches;\n\t}) && strict) throw new Error(\"[better-json] Potential prototype pollution attempt detected\");\n\ttry {\n\t\tconst secureReviver = (key, value$1) => {\n\t\t\tif (key === \"__proto__\" || key === \"constructor\" && value$1 && typeof value$1 === \"object\" && \"prototype\" in value$1) {\n\t\t\t\tif (warnings) console.warn(`[better-json] Dropping \"${key}\" key to prevent prototype pollution`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (parseDates && typeof value$1 === \"string\") {\n\t\t\t\tconst date = parseISODate(value$1);\n\t\t\t\tif (date) return date;\n\t\t\t}\n\t\t\treturn reviver ? reviver(key, value$1) : value$1;\n\t\t};\n\t\treturn JSON.parse(trimmed, secureReviver);\n\t} catch (error) {\n\t\tif (strict) throw error;\n\t\treturn value;\n\t}\n}\nfunction parseJSON(value, options = { strict: true }) {\n\treturn betterJSONParse(value, options);\n}\n\n//#endregion\n\n//# sourceMappingURL=parser.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcGFyc2VyLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBLG9CQUFvQixFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLFdBQVcsS0FBSyxNQUFNLEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLElBQUksa0JBQWtCLEVBQUUsTUFBTSxFQUFFO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUMsU0FBUywrREFBK0Q7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RyxLQUFLO0FBQ25IO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxJQUFJO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxjQUFjO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDcUI7QUFDckIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY2xpZW50L3BhcnNlci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy9jbGllbnQvcGFyc2VyLnRzXG5jb25zdCBQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMgPSB7XG5cdHByb3RvOiAvXCIoPzpffFxcXFx1MHsyfTVbRmZdKXsyfSg/OnB8XFxcXHUwezJ9NzApKD86cnxcXFxcdTB7Mn03MikoPzpvfFxcXFx1MHsyfTZbRmZdKSg/OnR8XFxcXHUwezJ9NzQpKD86b3xcXFxcdTB7Mn02W0ZmXSkoPzpffFxcXFx1MHsyfTVbRmZdKXsyfVwiXFxzKjovLFxuXHRjb25zdHJ1Y3RvcjogL1wiKD86Y3xcXFxcdTAwNjMpKD86b3xcXFxcdTAwNltGZl0pKD86bnxcXFxcdTAwNltFZV0pKD86c3xcXFxcdTAwNzMpKD86dHxcXFxcdTAwNzQpKD86cnxcXFxcdTAwNzIpKD86dXxcXFxcdTAwNzUpKD86Y3xcXFxcdTAwNjMpKD86dHxcXFxcdTAwNzQpKD86b3xcXFxcdTAwNltGZl0pKD86cnxcXFxcdTAwNzIpXCJcXHMqOi8sXG5cdHByb3RvU2hvcnQ6IC9cIl9fcHJvdG9fX1wiXFxzKjovLFxuXHRjb25zdHJ1Y3RvclNob3J0OiAvXCJjb25zdHJ1Y3RvclwiXFxzKjovXG59O1xuY29uc3QgSlNPTl9TSUdOQVRVUkUgPSAvXlxccypbXCJbe118XlxccyotP1xcZHsxLDE2fShcXC5cXGR7MSwxN30pPyhbRWVdWystXT9cXGQrKT9cXHMqJC87XG5jb25zdCBTUEVDSUFMX1ZBTFVFUyA9IHtcblx0dHJ1ZTogdHJ1ZSxcblx0ZmFsc2U6IGZhbHNlLFxuXHRudWxsOiBudWxsLFxuXHR1bmRlZmluZWQ6IHZvaWQgMCxcblx0bmFuOiBOYU4sXG5cdGluZmluaXR5OiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG5cdFwiLWluZmluaXR5XCI6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWVxufTtcbmNvbnN0IElTT19EQVRFX1JFR0VYID0gL14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KVQoXFxkezJ9KTooXFxkezJ9KTooXFxkezJ9KSg/OlxcLihcXGR7MSw3fSkpPyg/Olp8KFsrLV0pKFxcZHsyfSk6KFxcZHsyfSkpJC87XG5mdW5jdGlvbiBpc1ZhbGlkRGF0ZShkYXRlKSB7XG5cdHJldHVybiBkYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4oZGF0ZS5nZXRUaW1lKCkpO1xufVxuZnVuY3Rpb24gcGFyc2VJU09EYXRlKHZhbHVlKSB7XG5cdGNvbnN0IG1hdGNoID0gSVNPX0RBVEVfUkVHRVguZXhlYyh2YWx1ZSk7XG5cdGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuXHRjb25zdCBbLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbXMsIG9mZnNldFNpZ24sIG9mZnNldEhvdXIsIG9mZnNldE1pbnV0ZV0gPSBtYXRjaDtcblx0Y29uc3QgZGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHBhcnNlSW50KHllYXIsIDEwKSwgcGFyc2VJbnQobW9udGgsIDEwKSAtIDEsIHBhcnNlSW50KGRheSwgMTApLCBwYXJzZUludChob3VyLCAxMCksIHBhcnNlSW50KG1pbnV0ZSwgMTApLCBwYXJzZUludChzZWNvbmQsIDEwKSwgbXMgPyBwYXJzZUludChtcy5wYWRFbmQoMywgXCIwXCIpLCAxMCkgOiAwKSk7XG5cdGlmIChvZmZzZXRTaWduKSB7XG5cdFx0Y29uc3Qgb2Zmc2V0ID0gKHBhcnNlSW50KG9mZnNldEhvdXIsIDEwKSAqIDYwICsgcGFyc2VJbnQob2Zmc2V0TWludXRlLCAxMCkpICogKG9mZnNldFNpZ24gPT09IFwiK1wiID8gLTEgOiAxKTtcblx0XHRkYXRlLnNldFVUQ01pbnV0ZXMoZGF0ZS5nZXRVVENNaW51dGVzKCkgKyBvZmZzZXQpO1xuXHR9XG5cdHJldHVybiBpc1ZhbGlkRGF0ZShkYXRlKSA/IGRhdGUgOiBudWxsO1xufVxuZnVuY3Rpb24gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zID0ge30pIHtcblx0Y29uc3QgeyBzdHJpY3QgPSBmYWxzZSwgd2FybmluZ3MgPSBmYWxzZSwgcmV2aXZlciwgcGFyc2VEYXRlcyA9IHRydWUgfSA9IG9wdGlvbnM7XG5cdGlmICh0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIpIHJldHVybiB2YWx1ZTtcblx0Y29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcblx0aWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkWzBdID09PSBcIlxcXCJcIiAmJiB0cmltbWVkLmVuZHNXaXRoKFwiXFxcIlwiKSAmJiAhdHJpbW1lZC5zbGljZSgxLCAtMSkuaW5jbHVkZXMoXCJcXFwiXCIpKSByZXR1cm4gdHJpbW1lZC5zbGljZSgxLCAtMSk7XG5cdGNvbnN0IGxvd2VyVmFsdWUgPSB0cmltbWVkLnRvTG93ZXJDYXNlKCk7XG5cdGlmIChsb3dlclZhbHVlLmxlbmd0aCA8PSA5ICYmIGxvd2VyVmFsdWUgaW4gU1BFQ0lBTF9WQUxVRVMpIHJldHVybiBTUEVDSUFMX1ZBTFVFU1tsb3dlclZhbHVlXTtcblx0aWYgKCFKU09OX1NJR05BVFVSRS50ZXN0KHRyaW1tZWQpKSB7XG5cdFx0aWYgKHN0cmljdCkgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW2JldHRlci1qc29uXSBJbnZhbGlkIEpTT05cIik7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmIChPYmplY3QuZW50cmllcyhQUk9UT19QT0xMVVRJT05fUEFUVEVSTlMpLnNvbWUoKFtrZXksIHBhdHRlcm5dKSA9PiB7XG5cdFx0Y29uc3QgbWF0Y2hlcyA9IHBhdHRlcm4udGVzdCh0cmltbWVkKTtcblx0XHRpZiAobWF0Y2hlcyAmJiB3YXJuaW5ncykgY29uc29sZS53YXJuKGBbYmV0dGVyLWpzb25dIERldGVjdGVkIHBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgdXNpbmcgJHtrZXl9IHBhdHRlcm5gKTtcblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSkgJiYgc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJbYmV0dGVyLWpzb25dIFBvdGVudGlhbCBwcm90b3R5cGUgcG9sbHV0aW9uIGF0dGVtcHQgZGV0ZWN0ZWRcIik7XG5cdHRyeSB7XG5cdFx0Y29uc3Qgc2VjdXJlUmV2aXZlciA9IChrZXksIHZhbHVlJDEpID0+IHtcblx0XHRcdGlmIChrZXkgPT09IFwiX19wcm90b19fXCIgfHwga2V5ID09PSBcImNvbnN0cnVjdG9yXCIgJiYgdmFsdWUkMSAmJiB0eXBlb2YgdmFsdWUkMSA9PT0gXCJvYmplY3RcIiAmJiBcInByb3RvdHlwZVwiIGluIHZhbHVlJDEpIHtcblx0XHRcdFx0aWYgKHdhcm5pbmdzKSBjb25zb2xlLndhcm4oYFtiZXR0ZXItanNvbl0gRHJvcHBpbmcgXCIke2tleX1cIiBrZXkgdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uYCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChwYXJzZURhdGVzICYmIHR5cGVvZiB2YWx1ZSQxID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdGNvbnN0IGRhdGUgPSBwYXJzZUlTT0RhdGUodmFsdWUkMSk7XG5cdFx0XHRcdGlmIChkYXRlKSByZXR1cm4gZGF0ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXZpdmVyID8gcmV2aXZlcihrZXksIHZhbHVlJDEpIDogdmFsdWUkMTtcblx0XHR9O1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHRyaW1tZWQsIHNlY3VyZVJldml2ZXIpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChzdHJpY3QpIHRocm93IGVycm9yO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxufVxuZnVuY3Rpb24gcGFyc2VKU09OKHZhbHVlLCBvcHRpb25zID0geyBzdHJpY3Q6IHRydWUgfSkge1xuXHRyZXR1cm4gYmV0dGVySlNPTlBhcnNlKHZhbHVlLCBvcHRpb25zKTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBwYXJzZUpTT04gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/parser.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/proxy.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/proxy.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDynamicPathProxy: () => (/* binding */ createDynamicPathProxy)\n/* harmony export */ });\n/* harmony import */ var _utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-atom.mjs */ \"(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs\");\n\n\n//#region src/client/proxy.ts\nfunction getMethod(path, knownPathMethods, args) {\n\tconst method = knownPathMethods[path];\n\tconst { fetchOptions, query: _query, ...body } = args || {};\n\tif (method) return method;\n\tif (fetchOptions?.method) return fetchOptions.method;\n\tif (body && Object.keys(body).length > 0) return \"POST\";\n\treturn \"GET\";\n}\nfunction createDynamicPathProxy(routes, client, knownPathMethods, atoms, atomListeners) {\n\tfunction createProxy(path = []) {\n\t\treturn new Proxy(function() {}, {\n\t\t\tget(_, prop) {\n\t\t\t\tif (typeof prop !== \"string\") return;\n\t\t\t\tif (prop === \"then\" || prop === \"catch\" || prop === \"finally\") return;\n\t\t\t\tconst fullPath = [...path, prop];\n\t\t\t\tlet current = routes;\n\t\t\t\tfor (const segment of fullPath) if (current && typeof current === \"object\" && segment in current) current = current[segment];\n\t\t\t\telse {\n\t\t\t\t\tcurrent = void 0;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (typeof current === \"function\") return current;\n\t\t\t\tif ((0,_utils_is_atom_mjs__WEBPACK_IMPORTED_MODULE_0__.isAtom)(current)) return current;\n\t\t\t\treturn createProxy(fullPath);\n\t\t\t},\n\t\t\tapply: async (_, __, args) => {\n\t\t\t\tconst routePath = \"/\" + path.map((segment) => segment.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`)).join(\"/\");\n\t\t\t\tconst arg = args[0] || {};\n\t\t\t\tconst fetchOptions = args[1] || {};\n\t\t\t\tconst { query, fetchOptions: argFetchOptions, ...body } = arg;\n\t\t\t\tconst options = {\n\t\t\t\t\t...fetchOptions,\n\t\t\t\t\t...argFetchOptions\n\t\t\t\t};\n\t\t\t\tconst method = getMethod(routePath, knownPathMethods, arg);\n\t\t\t\treturn await client(routePath, {\n\t\t\t\t\t...options,\n\t\t\t\t\tbody: method === \"GET\" ? void 0 : {\n\t\t\t\t\t\t...body,\n\t\t\t\t\t\t...options?.body || {}\n\t\t\t\t\t},\n\t\t\t\t\tquery: query || options?.query,\n\t\t\t\t\tmethod,\n\t\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\t\tawait options?.onSuccess?.(context);\n\t\t\t\t\t\tif (!atomListeners || options.disableSignal) return;\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t* We trigger listeners\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tconst matches = atomListeners.filter((s) => s.matcher(routePath));\n\t\t\t\t\t\tif (!matches.length) return;\n\t\t\t\t\t\tconst visited = /* @__PURE__ */ new Set();\n\t\t\t\t\t\tfor (const match of matches) {\n\t\t\t\t\t\t\tconst signal = atoms[match.signal];\n\t\t\t\t\t\t\tif (!signal) return;\n\t\t\t\t\t\t\tif (visited.has(match.signal)) continue;\n\t\t\t\t\t\t\tvisited.add(match.signal);\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* To avoid race conditions we set the signal in a setTimeout\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tconst val = signal.get();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsignal.set(!val);\n\t\t\t\t\t\t\t}, 10);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn createProxy();\n}\n\n//#endregion\n\n//# sourceMappingURL=proxy.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcHJveHkubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDOztBQUU5QztBQUNBO0FBQ0E7QUFDQSxTQUFTLHVDQUF1QztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwwREFBTTtBQUNkO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNEZBQTRGLHFCQUFxQjtBQUNqSDtBQUNBO0FBQ0EsWUFBWSxnREFBZ0Q7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDa0M7QUFDbEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY2xpZW50L3Byb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0F0b20gfSBmcm9tIFwiLi4vdXRpbHMvaXMtYXRvbS5tanNcIjtcblxuLy8jcmVnaW9uIHNyYy9jbGllbnQvcHJveHkudHNcbmZ1bmN0aW9uIGdldE1ldGhvZChwYXRoLCBrbm93blBhdGhNZXRob2RzLCBhcmdzKSB7XG5cdGNvbnN0IG1ldGhvZCA9IGtub3duUGF0aE1ldGhvZHNbcGF0aF07XG5cdGNvbnN0IHsgZmV0Y2hPcHRpb25zLCBxdWVyeTogX3F1ZXJ5LCAuLi5ib2R5IH0gPSBhcmdzIHx8IHt9O1xuXHRpZiAobWV0aG9kKSByZXR1cm4gbWV0aG9kO1xuXHRpZiAoZmV0Y2hPcHRpb25zPy5tZXRob2QpIHJldHVybiBmZXRjaE9wdGlvbnMubWV0aG9kO1xuXHRpZiAoYm9keSAmJiBPYmplY3Qua2V5cyhib2R5KS5sZW5ndGggPiAwKSByZXR1cm4gXCJQT1NUXCI7XG5cdHJldHVybiBcIkdFVFwiO1xufVxuZnVuY3Rpb24gY3JlYXRlRHluYW1pY1BhdGhQcm94eShyb3V0ZXMsIGNsaWVudCwga25vd25QYXRoTWV0aG9kcywgYXRvbXMsIGF0b21MaXN0ZW5lcnMpIHtcblx0ZnVuY3Rpb24gY3JlYXRlUHJveHkocGF0aCA9IFtdKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm94eShmdW5jdGlvbigpIHt9LCB7XG5cdFx0XHRnZXQoXywgcHJvcCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIHByb3AgIT09IFwic3RyaW5nXCIpIHJldHVybjtcblx0XHRcdFx0aWYgKHByb3AgPT09IFwidGhlblwiIHx8IHByb3AgPT09IFwiY2F0Y2hcIiB8fCBwcm9wID09PSBcImZpbmFsbHlcIikgcmV0dXJuO1xuXHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCBwcm9wXTtcblx0XHRcdFx0bGV0IGN1cnJlbnQgPSByb3V0ZXM7XG5cdFx0XHRcdGZvciAoY29uc3Qgc2VnbWVudCBvZiBmdWxsUGF0aCkgaWYgKGN1cnJlbnQgJiYgdHlwZW9mIGN1cnJlbnQgPT09IFwib2JqZWN0XCIgJiYgc2VnbWVudCBpbiBjdXJyZW50KSBjdXJyZW50ID0gY3VycmVudFtzZWdtZW50XTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y3VycmVudCA9IHZvaWQgMDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZW9mIGN1cnJlbnQgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIGN1cnJlbnQ7XG5cdFx0XHRcdGlmIChpc0F0b20oY3VycmVudCkpIHJldHVybiBjdXJyZW50O1xuXHRcdFx0XHRyZXR1cm4gY3JlYXRlUHJveHkoZnVsbFBhdGgpO1xuXHRcdFx0fSxcblx0XHRcdGFwcGx5OiBhc3luYyAoXywgX18sIGFyZ3MpID0+IHtcblx0XHRcdFx0Y29uc3Qgcm91dGVQYXRoID0gXCIvXCIgKyBwYXRoLm1hcCgoc2VnbWVudCkgPT4gc2VnbWVudC5yZXBsYWNlKC9bQS1aXS9nLCAobGV0dGVyKSA9PiBgLSR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YCkpLmpvaW4oXCIvXCIpO1xuXHRcdFx0XHRjb25zdCBhcmcgPSBhcmdzWzBdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCBmZXRjaE9wdGlvbnMgPSBhcmdzWzFdIHx8IHt9O1xuXHRcdFx0XHRjb25zdCB7IHF1ZXJ5LCBmZXRjaE9wdGlvbnM6IGFyZ0ZldGNoT3B0aW9ucywgLi4uYm9keSB9ID0gYXJnO1xuXHRcdFx0XHRjb25zdCBvcHRpb25zID0ge1xuXHRcdFx0XHRcdC4uLmZldGNoT3B0aW9ucyxcblx0XHRcdFx0XHQuLi5hcmdGZXRjaE9wdGlvbnNcblx0XHRcdFx0fTtcblx0XHRcdFx0Y29uc3QgbWV0aG9kID0gZ2V0TWV0aG9kKHJvdXRlUGF0aCwga25vd25QYXRoTWV0aG9kcywgYXJnKTtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IGNsaWVudChyb3V0ZVBhdGgsIHtcblx0XHRcdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0XHRcdGJvZHk6IG1ldGhvZCA9PT0gXCJHRVRcIiA/IHZvaWQgMCA6IHtcblx0XHRcdFx0XHRcdC4uLmJvZHksXG5cdFx0XHRcdFx0XHQuLi5vcHRpb25zPy5ib2R5IHx8IHt9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRxdWVyeTogcXVlcnkgfHwgb3B0aW9ucz8ucXVlcnksXG5cdFx0XHRcdFx0bWV0aG9kLFxuXHRcdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0XHRhd2FpdCBvcHRpb25zPy5vblN1Y2Nlc3M/Lihjb250ZXh0KTtcblx0XHRcdFx0XHRcdGlmICghYXRvbUxpc3RlbmVycyB8fCBvcHRpb25zLmRpc2FibGVTaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdFx0KiBXZSB0cmlnZ2VyIGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0Ki9cblx0XHRcdFx0XHRcdGNvbnN0IG1hdGNoZXMgPSBhdG9tTGlzdGVuZXJzLmZpbHRlcigocykgPT4gcy5tYXRjaGVyKHJvdXRlUGF0aCkpO1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaGVzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0Y29uc3QgdmlzaXRlZCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IG1hdGNoIG9mIG1hdGNoZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2lnbmFsID0gYXRvbXNbbWF0Y2guc2lnbmFsXTtcblx0XHRcdFx0XHRcdFx0aWYgKCFzaWduYWwpIHJldHVybjtcblx0XHRcdFx0XHRcdFx0aWYgKHZpc2l0ZWQuaGFzKG1hdGNoLnNpZ25hbCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR2aXNpdGVkLmFkZChtYXRjaC5zaWduYWwpO1xuXHRcdFx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHRcdFx0KiBUbyBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2Ugc2V0IHRoZSBzaWduYWwgaW4gYSBzZXRUaW1lb3V0XG5cdFx0XHRcdFx0XHRcdCovXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZhbCA9IHNpZ25hbC5nZXQoKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c2lnbmFsLnNldCghdmFsKTtcblx0XHRcdFx0XHRcdFx0fSwgMTApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblx0cmV0dXJuIGNyZWF0ZVByb3h5KCk7XG59XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgY3JlYXRlRHluYW1pY1BhdGhQcm94eSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJveHkubWpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/proxy.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/query.mjs":
/*!********************************************************!*\
  !*** ./node_modules/better-auth/dist/client/query.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuthQuery: () => (/* binding */ useAuthQuery)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n//#region src/client/query.ts\nconst isServer = () => typeof window === \"undefined\";\nconst useAuthQuery = (initializedAtom, path, $fetch, options) => {\n\tconst value = (0,nanostores__WEBPACK_IMPORTED_MODULE_0__.atom)({\n\t\tdata: null,\n\t\terror: null,\n\t\tisPending: true,\n\t\tisRefetching: false,\n\t\trefetch: (queryParams) => fn(queryParams)\n\t});\n\tconst fn = async (queryParams) => {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst opts = typeof options === \"function\" ? options({\n\t\t\t\tdata: value.get().data,\n\t\t\t\terror: value.get().error,\n\t\t\t\tisPending: value.get().isPending\n\t\t\t}) : options;\n\t\t\t$fetch(path, {\n\t\t\t\t...opts,\n\t\t\t\tquery: {\n\t\t\t\t\t...opts?.query,\n\t\t\t\t\t...queryParams?.query\n\t\t\t\t},\n\t\t\t\tasync onSuccess(context) {\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tdata: context.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onSuccess?.(context);\n\t\t\t\t},\n\t\t\t\tasync onError(context) {\n\t\t\t\t\tconst { request } = context;\n\t\t\t\t\tconst retryAttempts = typeof request.retry === \"number\" ? request.retry : request.retry?.attempts;\n\t\t\t\t\tconst retryAttempt = request.retryAttempt || 0;\n\t\t\t\t\tif (retryAttempts && retryAttempt < retryAttempts) return;\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\terror: context.error,\n\t\t\t\t\t\tdata: null,\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tisRefetching: false,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onError?.(context);\n\t\t\t\t},\n\t\t\t\tasync onRequest(context) {\n\t\t\t\t\tconst currentValue = value.get();\n\t\t\t\t\tvalue.set({\n\t\t\t\t\t\tisPending: currentValue.data === null,\n\t\t\t\t\t\tdata: currentValue.data,\n\t\t\t\t\t\terror: null,\n\t\t\t\t\t\tisRefetching: true,\n\t\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t\t});\n\t\t\t\t\tawait opts?.onRequest?.(context);\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tvalue.set({\n\t\t\t\t\terror,\n\t\t\t\t\tdata: null,\n\t\t\t\t\tisPending: false,\n\t\t\t\t\tisRefetching: false,\n\t\t\t\t\trefetch: value.value.refetch\n\t\t\t\t});\n\t\t\t}).finally(() => {\n\t\t\t\tresolve(void 0);\n\t\t\t});\n\t\t});\n\t};\n\tinitializedAtom = Array.isArray(initializedAtom) ? initializedAtom : [initializedAtom];\n\tlet isMounted = false;\n\tfor (const initAtom of initializedAtom) initAtom.subscribe(async () => {\n\t\tif (isServer()) return;\n\t\tif (isMounted) await fn();\n\t\telse (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.onMount)(value, () => {\n\t\t\tconst timeoutId = setTimeout(async () => {\n\t\t\t\tif (!isMounted) {\n\t\t\t\t\tawait fn();\n\t\t\t\t\tisMounted = true;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t\treturn () => {\n\t\t\t\tvalue.off();\n\t\t\t\tinitAtom.off();\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t};\n\t\t});\n\t});\n\treturn value;\n};\n\n//#endregion\n\n//# sourceMappingURL=query.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcXVlcnkubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQzs7QUFFM0M7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBSTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxtREFBTztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUN3QjtBQUN4QiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcXVlcnkubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9xdWVyeS50c1xuY29uc3QgaXNTZXJ2ZXIgPSAoKSA9PiB0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiO1xuY29uc3QgdXNlQXV0aFF1ZXJ5ID0gKGluaXRpYWxpemVkQXRvbSwgcGF0aCwgJGZldGNoLCBvcHRpb25zKSA9PiB7XG5cdGNvbnN0IHZhbHVlID0gYXRvbSh7XG5cdFx0ZGF0YTogbnVsbCxcblx0XHRlcnJvcjogbnVsbCxcblx0XHRpc1BlbmRpbmc6IHRydWUsXG5cdFx0aXNSZWZldGNoaW5nOiBmYWxzZSxcblx0XHRyZWZldGNoOiAocXVlcnlQYXJhbXMpID0+IGZuKHF1ZXJ5UGFyYW1zKVxuXHR9KTtcblx0Y29uc3QgZm4gPSBhc3luYyAocXVlcnlQYXJhbXMpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IG9wdHMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJmdW5jdGlvblwiID8gb3B0aW9ucyh7XG5cdFx0XHRcdGRhdGE6IHZhbHVlLmdldCgpLmRhdGEsXG5cdFx0XHRcdGVycm9yOiB2YWx1ZS5nZXQoKS5lcnJvcixcblx0XHRcdFx0aXNQZW5kaW5nOiB2YWx1ZS5nZXQoKS5pc1BlbmRpbmdcblx0XHRcdH0pIDogb3B0aW9ucztcblx0XHRcdCRmZXRjaChwYXRoLCB7XG5cdFx0XHRcdC4uLm9wdHMsXG5cdFx0XHRcdHF1ZXJ5OiB7XG5cdFx0XHRcdFx0Li4ub3B0cz8ucXVlcnksXG5cdFx0XHRcdFx0Li4ucXVlcnlQYXJhbXM/LnF1ZXJ5XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uU3VjY2Vzcyhjb250ZXh0KSB7XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGRhdGE6IGNvbnRleHQuZGF0YSxcblx0XHRcdFx0XHRcdGVycm9yOiBudWxsLFxuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRcdGlzUmVmZXRjaGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25TdWNjZXNzPy4oY29udGV4dCk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFzeW5jIG9uRXJyb3IoY29udGV4dCkge1xuXHRcdFx0XHRcdGNvbnN0IHsgcmVxdWVzdCB9ID0gY29udGV4dDtcblx0XHRcdFx0XHRjb25zdCByZXRyeUF0dGVtcHRzID0gdHlwZW9mIHJlcXVlc3QucmV0cnkgPT09IFwibnVtYmVyXCIgPyByZXF1ZXN0LnJldHJ5IDogcmVxdWVzdC5yZXRyeT8uYXR0ZW1wdHM7XG5cdFx0XHRcdFx0Y29uc3QgcmV0cnlBdHRlbXB0ID0gcmVxdWVzdC5yZXRyeUF0dGVtcHQgfHwgMDtcblx0XHRcdFx0XHRpZiAocmV0cnlBdHRlbXB0cyAmJiByZXRyeUF0dGVtcHQgPCByZXRyeUF0dGVtcHRzKSByZXR1cm47XG5cdFx0XHRcdFx0dmFsdWUuc2V0KHtcblx0XHRcdFx0XHRcdGVycm9yOiBjb250ZXh0LmVycm9yLFxuXHRcdFx0XHRcdFx0ZGF0YTogbnVsbCxcblx0XHRcdFx0XHRcdGlzUGVuZGluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdFx0cmVmZXRjaDogdmFsdWUudmFsdWUucmVmZXRjaFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGF3YWl0IG9wdHM/Lm9uRXJyb3I/Lihjb250ZXh0KTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YXN5bmMgb25SZXF1ZXN0KGNvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50VmFsdWUgPSB2YWx1ZS5nZXQoKTtcblx0XHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdFx0aXNQZW5kaW5nOiBjdXJyZW50VmFsdWUuZGF0YSA9PT0gbnVsbCxcblx0XHRcdFx0XHRcdGRhdGE6IGN1cnJlbnRWYWx1ZS5kYXRhLFxuXHRcdFx0XHRcdFx0ZXJyb3I6IG51bGwsXG5cdFx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IHRydWUsXG5cdFx0XHRcdFx0XHRyZWZldGNoOiB2YWx1ZS52YWx1ZS5yZWZldGNoXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YXdhaXQgb3B0cz8ub25SZXF1ZXN0Py4oY29udGV4dCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0XHR2YWx1ZS5zZXQoe1xuXHRcdFx0XHRcdGVycm9yLFxuXHRcdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdFx0aXNQZW5kaW5nOiBmYWxzZSxcblx0XHRcdFx0XHRpc1JlZmV0Y2hpbmc6IGZhbHNlLFxuXHRcdFx0XHRcdHJlZmV0Y2g6IHZhbHVlLnZhbHVlLnJlZmV0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHR9KS5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0cmVzb2x2ZSh2b2lkIDApO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG5cdGluaXRpYWxpemVkQXRvbSA9IEFycmF5LmlzQXJyYXkoaW5pdGlhbGl6ZWRBdG9tKSA/IGluaXRpYWxpemVkQXRvbSA6IFtpbml0aWFsaXplZEF0b21dO1xuXHRsZXQgaXNNb3VudGVkID0gZmFsc2U7XG5cdGZvciAoY29uc3QgaW5pdEF0b20gb2YgaW5pdGlhbGl6ZWRBdG9tKSBpbml0QXRvbS5zdWJzY3JpYmUoYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChpc1NlcnZlcigpKSByZXR1cm47XG5cdFx0aWYgKGlzTW91bnRlZCkgYXdhaXQgZm4oKTtcblx0XHRlbHNlIG9uTW91bnQodmFsdWUsICgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRpZiAoIWlzTW91bnRlZCkge1xuXHRcdFx0XHRcdGF3YWl0IGZuKCk7XG5cdFx0XHRcdFx0aXNNb3VudGVkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgMCk7XG5cdFx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0XHR2YWx1ZS5vZmYoKTtcblx0XHRcdFx0aW5pdEF0b20ub2ZmKCk7XG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0fSk7XG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgdXNlQXV0aFF1ZXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/query.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/react/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/react/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthClient: () => (/* binding */ createAuthClient),\n/* harmony export */   useStore: () => (/* reexport safe */ _react_store_mjs__WEBPACK_IMPORTED_MODULE_2__.useStore)\n/* harmony export */ });\n/* harmony import */ var _config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/config.mjs\");\n/* harmony import */ var _proxy_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../proxy.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/proxy.mjs\");\n/* harmony import */ var _react_store_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./react-store.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/react/react-store.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/core/utils */ \"(ssr)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n//#region src/client/react/index.ts\nfunction getAtomKey(str) {\n\treturn `use${(0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_3__.capitalizeFirstLetter)(str)}`;\n}\nfunction createAuthClient(options) {\n\tconst { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, $store, atomListeners } = (0,_config_mjs__WEBPACK_IMPORTED_MODULE_0__.getClientConfig)(options);\n\tconst resolvedHooks = {};\n\tfor (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[getAtomKey(key)] = () => (0,_react_store_mjs__WEBPACK_IMPORTED_MODULE_2__.useStore)(value);\n\treturn (0,_proxy_mjs__WEBPACK_IMPORTED_MODULE_1__.createDynamicPathProxy)({\n\t\t...pluginsActions,\n\t\t...resolvedHooks,\n\t\t$fetch,\n\t\t$store\n\t}, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);\n}\n\n//#endregion\n\n//# sourceMappingURL=index.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcmVhY3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnRDtBQUNNO0FBQ1Q7QUFDbUI7O0FBRWhFO0FBQ0E7QUFDQSxjQUFjLDhFQUFxQixNQUFNO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTLGlGQUFpRixFQUFFLDREQUFlO0FBQzNHO0FBQ0EsaUdBQWlHLDBEQUFRO0FBQ3pHLFFBQVEsa0VBQXNCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ3NDO0FBQ3RDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9yZWFjdC9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q2xpZW50Q29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZy5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUR5bmFtaWNQYXRoUHJveHkgfSBmcm9tIFwiLi4vcHJveHkubWpzXCI7XG5pbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gXCIuL3JlYWN0LXN0b3JlLm1qc1wiO1xuaW1wb3J0IHsgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL3V0aWxzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3JlYWN0L2luZGV4LnRzXG5mdW5jdGlvbiBnZXRBdG9tS2V5KHN0cikge1xuXHRyZXR1cm4gYHVzZSR7Y2FwaXRhbGl6ZUZpcnN0TGV0dGVyKHN0cil9YDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUF1dGhDbGllbnQob3B0aW9ucykge1xuXHRjb25zdCB7IHBsdWdpblBhdGhNZXRob2RzLCBwbHVnaW5zQWN0aW9ucywgcGx1Z2luc0F0b21zLCAkZmV0Y2gsICRzdG9yZSwgYXRvbUxpc3RlbmVycyB9ID0gZ2V0Q2xpZW50Q29uZmlnKG9wdGlvbnMpO1xuXHRjb25zdCByZXNvbHZlZEhvb2tzID0ge307XG5cdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBsdWdpbnNBdG9tcykpIHJlc29sdmVkSG9va3NbZ2V0QXRvbUtleShrZXkpXSA9ICgpID0+IHVzZVN0b3JlKHZhbHVlKTtcblx0cmV0dXJuIGNyZWF0ZUR5bmFtaWNQYXRoUHJveHkoe1xuXHRcdC4uLnBsdWdpbnNBY3Rpb25zLFxuXHRcdC4uLnJlc29sdmVkSG9va3MsXG5cdFx0JGZldGNoLFxuXHRcdCRzdG9yZVxuXHR9LCAkZmV0Y2gsIHBsdWdpblBhdGhNZXRob2RzLCBwbHVnaW5zQXRvbXMsIGF0b21MaXN0ZW5lcnMpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGNyZWF0ZUF1dGhDbGllbnQsIHVzZVN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/react/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/react/react-store.mjs":
/*!********************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/react/react-store.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useStore: () => (/* binding */ useStore)\n/* harmony export */ });\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/listen-keys/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n//#region src/client/react/react-store.ts\n/**\n* Subscribe to store changes and get store's value.\n*\n* Can be used with store builder too.\n*\n* ```js\n* import { useStore } from 'nanostores/react'\n*\n* import { router } from '../store/router'\n*\n* export const Layout = () => {\n*   let page = useStore(router)\n*   if (page.route === 'home') {\n*     return <HomePage />\n*   } else {\n*     return <Error404 />\n*   }\n* }\n* ```\n*\n* @param store Store instance.\n* @returns Store value.\n*/\nfunction useStore(store, options = {}) {\n\tconst snapshotRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(store.get());\n\tconst { keys, deps = [store, keys] } = options;\n\tconst subscribe = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((onChange) => {\n\t\tconst emitChange = (value) => {\n\t\t\tif (snapshotRef.current === value) return;\n\t\t\tsnapshotRef.current = value;\n\t\t\tonChange();\n\t\t};\n\t\temitChange(store.value);\n\t\tif (keys?.length) return (0,nanostores__WEBPACK_IMPORTED_MODULE_1__.listenKeys)(store, keys, emitChange);\n\t\treturn store.listen(emitChange);\n\t}, deps);\n\tconst get = () => snapshotRef.current;\n\treturn (0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(subscribe, get, get);\n}\n\n//#endregion\n\n//# sourceMappingURL=react-store.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvcmVhY3QvcmVhY3Qtc3RvcmUubWpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3QztBQUMwQjs7QUFFbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFdBQVc7QUFDdEI7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLHFCQUFxQiw2Q0FBTTtBQUMzQixTQUFTLDZCQUE2QjtBQUN0QyxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHNEQUFVO0FBQ3JDO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsUUFBUSwyREFBb0I7QUFDNUI7O0FBRUE7QUFDb0I7QUFDcEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvY2xpZW50L3JlYWN0L3JlYWN0LXN0b3JlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsaXN0ZW5LZXlzIH0gZnJvbSBcIm5hbm9zdG9yZXNcIjtcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN5bmNFeHRlcm5hbFN0b3JlIH0gZnJvbSBcInJlYWN0XCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3JlYWN0L3JlYWN0LXN0b3JlLnRzXG4vKipcbiogU3Vic2NyaWJlIHRvIHN0b3JlIGNoYW5nZXMgYW5kIGdldCBzdG9yZSdzIHZhbHVlLlxuKlxuKiBDYW4gYmUgdXNlZCB3aXRoIHN0b3JlIGJ1aWxkZXIgdG9vLlxuKlxuKiBgYGBqc1xuKiBpbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ25hbm9zdG9yZXMvcmVhY3QnXG4qXG4qIGltcG9ydCB7IHJvdXRlciB9IGZyb20gJy4uL3N0b3JlL3JvdXRlcidcbipcbiogZXhwb3J0IGNvbnN0IExheW91dCA9ICgpID0+IHtcbiogICBsZXQgcGFnZSA9IHVzZVN0b3JlKHJvdXRlcilcbiogICBpZiAocGFnZS5yb3V0ZSA9PT0gJ2hvbWUnKSB7XG4qICAgICByZXR1cm4gPEhvbWVQYWdlIC8+XG4qICAgfSBlbHNlIHtcbiogICAgIHJldHVybiA8RXJyb3I0MDQgLz5cbiogICB9XG4qIH1cbiogYGBgXG4qXG4qIEBwYXJhbSBzdG9yZSBTdG9yZSBpbnN0YW5jZS5cbiogQHJldHVybnMgU3RvcmUgdmFsdWUuXG4qL1xuZnVuY3Rpb24gdXNlU3RvcmUoc3RvcmUsIG9wdGlvbnMgPSB7fSkge1xuXHRjb25zdCBzbmFwc2hvdFJlZiA9IHVzZVJlZihzdG9yZS5nZXQoKSk7XG5cdGNvbnN0IHsga2V5cywgZGVwcyA9IFtzdG9yZSwga2V5c10gfSA9IG9wdGlvbnM7XG5cdGNvbnN0IHN1YnNjcmliZSA9IHVzZUNhbGxiYWNrKChvbkNoYW5nZSkgPT4ge1xuXHRcdGNvbnN0IGVtaXRDaGFuZ2UgPSAodmFsdWUpID0+IHtcblx0XHRcdGlmIChzbmFwc2hvdFJlZi5jdXJyZW50ID09PSB2YWx1ZSkgcmV0dXJuO1xuXHRcdFx0c25hcHNob3RSZWYuY3VycmVudCA9IHZhbHVlO1xuXHRcdFx0b25DaGFuZ2UoKTtcblx0XHR9O1xuXHRcdGVtaXRDaGFuZ2Uoc3RvcmUudmFsdWUpO1xuXHRcdGlmIChrZXlzPy5sZW5ndGgpIHJldHVybiBsaXN0ZW5LZXlzKHN0b3JlLCBrZXlzLCBlbWl0Q2hhbmdlKTtcblx0XHRyZXR1cm4gc3RvcmUubGlzdGVuKGVtaXRDaGFuZ2UpO1xuXHR9LCBkZXBzKTtcblx0Y29uc3QgZ2V0ID0gKCkgPT4gc25hcHNob3RSZWYuY3VycmVudDtcblx0cmV0dXJuIHVzZVN5bmNFeHRlcm5hbFN0b3JlKHN1YnNjcmliZSwgZ2V0LCBnZXQpO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IHVzZVN0b3JlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdC1zdG9yZS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/react/react-store.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs":
/*!***************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-atom.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionAtom: () => (/* binding */ getSessionAtom)\n/* harmony export */ });\n/* harmony import */ var _query_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./query.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/query.mjs\");\n/* harmony import */ var _session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session-refresh.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/atom/index.js\");\n/* harmony import */ var nanostores__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! nanostores */ \"(ssr)/./node_modules/nanostores/lifecycle/index.js\");\n\n\n\n\n//#region src/client/session-atom.ts\nfunction getSessionAtom($fetch, options) {\n\tconst $signal = (0,nanostores__WEBPACK_IMPORTED_MODULE_2__.atom)(false);\n\tconst session = (0,_query_mjs__WEBPACK_IMPORTED_MODULE_0__.useAuthQuery)($signal, \"/get-session\", $fetch, { method: \"GET\" });\n\t(0,nanostores__WEBPACK_IMPORTED_MODULE_3__.onMount)(session, () => {\n\t\tconst refreshManager = (0,_session_refresh_mjs__WEBPACK_IMPORTED_MODULE_1__.createSessionRefreshManager)({\n\t\t\tsessionAtom: session,\n\t\t\tsessionSignal: $signal,\n\t\t\t$fetch,\n\t\t\toptions\n\t\t});\n\t\trefreshManager.init();\n\t\treturn () => {\n\t\t\trefreshManager.cleanup();\n\t\t};\n\t});\n\treturn {\n\t\tsession,\n\t\t$sessionSignal: $signal\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyQztBQUN5QjtBQUN6Qjs7QUFFM0M7QUFDQTtBQUNBLGlCQUFpQixnREFBSTtBQUNyQixpQkFBaUIsd0RBQVksb0NBQW9DLGVBQWU7QUFDaEYsQ0FBQyxtREFBTztBQUNSLHlCQUF5QixpRkFBMkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUMwQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL3dvei93b3Jrc3BhY2Uvc2NvcmVkL3Njb3JlZC9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1hdG9tLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VBdXRoUXVlcnkgfSBmcm9tIFwiLi9xdWVyeS5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlciB9IGZyb20gXCIuL3Nlc3Npb24tcmVmcmVzaC5tanNcIjtcbmltcG9ydCB7IGF0b20sIG9uTW91bnQgfSBmcm9tIFwibmFub3N0b3Jlc1wiO1xuXG4vLyNyZWdpb24gc3JjL2NsaWVudC9zZXNzaW9uLWF0b20udHNcbmZ1bmN0aW9uIGdldFNlc3Npb25BdG9tKCRmZXRjaCwgb3B0aW9ucykge1xuXHRjb25zdCAkc2lnbmFsID0gYXRvbShmYWxzZSk7XG5cdGNvbnN0IHNlc3Npb24gPSB1c2VBdXRoUXVlcnkoJHNpZ25hbCwgXCIvZ2V0LXNlc3Npb25cIiwgJGZldGNoLCB7IG1ldGhvZDogXCJHRVRcIiB9KTtcblx0b25Nb3VudChzZXNzaW9uLCAoKSA9PiB7XG5cdFx0Y29uc3QgcmVmcmVzaE1hbmFnZXIgPSBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIoe1xuXHRcdFx0c2Vzc2lvbkF0b206IHNlc3Npb24sXG5cdFx0XHRzZXNzaW9uU2lnbmFsOiAkc2lnbmFsLFxuXHRcdFx0JGZldGNoLFxuXHRcdFx0b3B0aW9uc1xuXHRcdH0pO1xuXHRcdHJlZnJlc2hNYW5hZ2VyLmluaXQoKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0cmVmcmVzaE1hbmFnZXIuY2xlYW51cCgpO1xuXHRcdH07XG5cdH0pO1xuXHRyZXR1cm4ge1xuXHRcdHNlc3Npb24sXG5cdFx0JHNlc3Npb25TaWduYWw6ICRzaWduYWxcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBnZXRTZXNzaW9uQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2Vzc2lvbi1hdG9tLm1qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/session-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/better-auth/dist/client/session-refresh.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSessionRefreshManager: () => (/* binding */ createSessionRefreshManager)\n/* harmony export */ });\n/* harmony import */ var _broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./broadcast-channel.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/broadcast-channel.mjs\");\n/* harmony import */ var _focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./focus-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/focus-manager.mjs\");\n/* harmony import */ var _online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./online-manager.mjs */ \"(ssr)/./node_modules/better-auth/dist/client/online-manager.mjs\");\n\n\n\n\n//#region src/client/session-refresh.ts\nconst now = () => Math.floor(Date.now() / 1e3);\n/**\n* Rate limit: don't refetch on focus if a session request was made within this many seconds\n*/\nconst FOCUS_REFETCH_RATE_LIMIT_SECONDS = 5;\nfunction createSessionRefreshManager(opts) {\n\tconst { sessionAtom, sessionSignal, $fetch, options = {} } = opts;\n\tconst refetchInterval = options.sessionOptions?.refetchInterval ?? 0;\n\tconst refetchOnWindowFocus = options.sessionOptions?.refetchOnWindowFocus ?? true;\n\tconst refetchWhenOffline = options.sessionOptions?.refetchWhenOffline ?? false;\n\tconst state = {\n\t\tlastSync: 0,\n\t\tlastSessionRequest: 0,\n\t\tcachedSession: void 0\n\t};\n\tconst shouldRefetch = () => {\n\t\treturn refetchWhenOffline || (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().isOnline;\n\t};\n\tconst triggerRefetch = (event) => {\n\t\tif (!shouldRefetch()) return;\n\t\tif (event?.event === \"storage\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\treturn;\n\t\t}\n\t\tconst currentSession = sessionAtom.get();\n\t\tif (event?.event === \"poll\") {\n\t\t\tstate.lastSessionRequest = now();\n\t\t\t$fetch(\"/get-session\").then((res) => {\n\t\t\t\tif (res.error) sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: null,\n\t\t\t\t\terror: res.error\n\t\t\t\t});\n\t\t\t\telse sessionAtom.set({\n\t\t\t\t\t...currentSession,\n\t\t\t\t\tdata: res.data,\n\t\t\t\t\terror: null\n\t\t\t\t});\n\t\t\t\tstate.lastSync = now();\n\t\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t\t}).catch(() => {});\n\t\t\treturn;\n\t\t}\n\t\tif (event?.event === \"visibilitychange\") {\n\t\t\tif (now() - state.lastSessionRequest < FOCUS_REFETCH_RATE_LIMIT_SECONDS) return;\n\t\t\tstate.lastSessionRequest = now();\n\t\t}\n\t\tif (currentSession?.data === null || currentSession?.data === void 0 || event?.event === \"visibilitychange\") {\n\t\t\tstate.lastSync = now();\n\t\t\tsessionSignal.set(!sessionSignal.get());\n\t\t}\n\t};\n\tconst broadcastSessionUpdate = (trigger) => {\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().post({\n\t\t\tevent: \"session\",\n\t\t\tdata: { trigger },\n\t\t\tclientId: Math.random().toString(36).substring(7)\n\t\t});\n\t};\n\tconst setupPolling = () => {\n\t\tif (refetchInterval && refetchInterval > 0) state.pollInterval = setInterval(() => {\n\t\t\tif (sessionAtom.get()?.data) triggerRefetch({ event: \"poll\" });\n\t\t}, refetchInterval * 1e3);\n\t};\n\tconst setupBroadcast = () => {\n\t\tstate.unsubscribeBroadcast = (0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"storage\" });\n\t\t});\n\t};\n\tconst setupFocusRefetch = () => {\n\t\tif (!refetchOnWindowFocus) return;\n\t\tstate.unsubscribeFocus = (0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().subscribe(() => {\n\t\t\ttriggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst setupOnlineRefetch = () => {\n\t\tstate.unsubscribeOnline = (0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().subscribe((online) => {\n\t\t\tif (online) triggerRefetch({ event: \"visibilitychange\" });\n\t\t});\n\t};\n\tconst init = () => {\n\t\tsetupPolling();\n\t\tsetupBroadcast();\n\t\tsetupFocusRefetch();\n\t\tsetupOnlineRefetch();\n\t\t(0,_broadcast_channel_mjs__WEBPACK_IMPORTED_MODULE_0__.getGlobalBroadcastChannel)().setup();\n\t\t(0,_focus_manager_mjs__WEBPACK_IMPORTED_MODULE_1__.getGlobalFocusManager)().setup();\n\t\t(0,_online_manager_mjs__WEBPACK_IMPORTED_MODULE_2__.getGlobalOnlineManager)().setup();\n\t};\n\tconst cleanup = () => {\n\t\tif (state.pollInterval) {\n\t\t\tclearInterval(state.pollInterval);\n\t\t\tstate.pollInterval = void 0;\n\t\t}\n\t\tif (state.unsubscribeBroadcast) {\n\t\t\tstate.unsubscribeBroadcast();\n\t\t\tstate.unsubscribeBroadcast = void 0;\n\t\t}\n\t\tif (state.unsubscribeFocus) {\n\t\t\tstate.unsubscribeFocus();\n\t\t\tstate.unsubscribeFocus = void 0;\n\t\t}\n\t\tif (state.unsubscribeOnline) {\n\t\t\tstate.unsubscribeOnline();\n\t\t\tstate.unsubscribeOnline = void 0;\n\t\t}\n\t\tstate.lastSync = 0;\n\t\tstate.lastSessionRequest = 0;\n\t\tstate.cachedSession = void 0;\n\t};\n\treturn {\n\t\tinit,\n\t\tcleanup,\n\t\ttriggerRefetch,\n\t\tbroadcastSessionUpdate\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=session-refresh.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC9jbGllbnQvc2Vzc2lvbi1yZWZyZXNoLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW9FO0FBQ1I7QUFDRTs7QUFFOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1EQUFtRDtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMkVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJLGdCQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQjtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZUFBZTtBQUNoRSxHQUFHO0FBQ0g7QUFDQTtBQUNBLCtCQUErQixpRkFBeUI7QUFDeEQsb0JBQW9CLGtCQUFrQjtBQUN0QyxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlFQUFxQjtBQUNoRCxvQkFBb0IsMkJBQTJCO0FBQy9DLEdBQUc7QUFDSDtBQUNBO0FBQ0EsNEJBQTRCLDJFQUFzQjtBQUNsRCxnQ0FBZ0MsMkJBQTJCO0FBQzNELEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLGlGQUF5QjtBQUMzQixFQUFFLHlFQUFxQjtBQUN2QixFQUFFLDJFQUFzQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3VDO0FBQ3ZDIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L2NsaWVudC9zZXNzaW9uLXJlZnJlc2gubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEdsb2JhbEJyb2FkY2FzdENoYW5uZWwgfSBmcm9tIFwiLi9icm9hZGNhc3QtY2hhbm5lbC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbEZvY3VzTWFuYWdlciB9IGZyb20gXCIuL2ZvY3VzLW1hbmFnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyIH0gZnJvbSBcIi4vb25saW5lLW1hbmFnZXIubWpzXCI7XG5cbi8vI3JlZ2lvbiBzcmMvY2xpZW50L3Nlc3Npb24tcmVmcmVzaC50c1xuY29uc3Qgbm93ID0gKCkgPT4gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMWUzKTtcbi8qKlxuKiBSYXRlIGxpbWl0OiBkb24ndCByZWZldGNoIG9uIGZvY3VzIGlmIGEgc2Vzc2lvbiByZXF1ZXN0IHdhcyBtYWRlIHdpdGhpbiB0aGlzIG1hbnkgc2Vjb25kc1xuKi9cbmNvbnN0IEZPQ1VTX1JFRkVUQ0hfUkFURV9MSU1JVF9TRUNPTkRTID0gNTtcbmZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25SZWZyZXNoTWFuYWdlcihvcHRzKSB7XG5cdGNvbnN0IHsgc2Vzc2lvbkF0b20sIHNlc3Npb25TaWduYWwsICRmZXRjaCwgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xuXHRjb25zdCByZWZldGNoSW50ZXJ2YWwgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoSW50ZXJ2YWwgPz8gMDtcblx0Y29uc3QgcmVmZXRjaE9uV2luZG93Rm9jdXMgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoT25XaW5kb3dGb2N1cyA/PyB0cnVlO1xuXHRjb25zdCByZWZldGNoV2hlbk9mZmxpbmUgPSBvcHRpb25zLnNlc3Npb25PcHRpb25zPy5yZWZldGNoV2hlbk9mZmxpbmUgPz8gZmFsc2U7XG5cdGNvbnN0IHN0YXRlID0ge1xuXHRcdGxhc3RTeW5jOiAwLFxuXHRcdGxhc3RTZXNzaW9uUmVxdWVzdDogMCxcblx0XHRjYWNoZWRTZXNzaW9uOiB2b2lkIDBcblx0fTtcblx0Y29uc3Qgc2hvdWxkUmVmZXRjaCA9ICgpID0+IHtcblx0XHRyZXR1cm4gcmVmZXRjaFdoZW5PZmZsaW5lIHx8IGdldEdsb2JhbE9ubGluZU1hbmFnZXIoKS5pc09ubGluZTtcblx0fTtcblx0Y29uc3QgdHJpZ2dlclJlZmV0Y2ggPSAoZXZlbnQpID0+IHtcblx0XHRpZiAoIXNob3VsZFJlZmV0Y2goKSkgcmV0dXJuO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwic3RvcmFnZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBjdXJyZW50U2Vzc2lvbiA9IHNlc3Npb25BdG9tLmdldCgpO1xuXHRcdGlmIChldmVudD8uZXZlbnQgPT09IFwicG9sbFwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSBub3coKTtcblx0XHRcdCRmZXRjaChcIi9nZXQtc2Vzc2lvblwiKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0aWYgKHJlcy5lcnJvcikgc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRcdGVycm9yOiByZXMuZXJyb3Jcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGVsc2Ugc2Vzc2lvbkF0b20uc2V0KHtcblx0XHRcdFx0XHQuLi5jdXJyZW50U2Vzc2lvbixcblx0XHRcdFx0XHRkYXRhOiByZXMuZGF0YSxcblx0XHRcdFx0XHRlcnJvcjogbnVsbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c3RhdGUubGFzdFN5bmMgPSBub3coKTtcblx0XHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdFx0fSkuY2F0Y2goKCkgPT4ge30pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoZXZlbnQ/LmV2ZW50ID09PSBcInZpc2liaWxpdHljaGFuZ2VcIikge1xuXHRcdFx0aWYgKG5vdygpIC0gc3RhdGUubGFzdFNlc3Npb25SZXF1ZXN0IDwgRk9DVVNfUkVGRVRDSF9SQVRFX0xJTUlUX1NFQ09ORFMpIHJldHVybjtcblx0XHRcdHN0YXRlLmxhc3RTZXNzaW9uUmVxdWVzdCA9IG5vdygpO1xuXHRcdH1cblx0XHRpZiAoY3VycmVudFNlc3Npb24/LmRhdGEgPT09IG51bGwgfHwgY3VycmVudFNlc3Npb24/LmRhdGEgPT09IHZvaWQgMCB8fCBldmVudD8uZXZlbnQgPT09IFwidmlzaWJpbGl0eWNoYW5nZVwiKSB7XG5cdFx0XHRzdGF0ZS5sYXN0U3luYyA9IG5vdygpO1xuXHRcdFx0c2Vzc2lvblNpZ25hbC5zZXQoIXNlc3Npb25TaWduYWwuZ2V0KCkpO1xuXHRcdH1cblx0fTtcblx0Y29uc3QgYnJvYWRjYXN0U2Vzc2lvblVwZGF0ZSA9ICh0cmlnZ2VyKSA9PiB7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnBvc3Qoe1xuXHRcdFx0ZXZlbnQ6IFwic2Vzc2lvblwiLFxuXHRcdFx0ZGF0YTogeyB0cmlnZ2VyIH0sXG5cdFx0XHRjbGllbnRJZDogTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDcpXG5cdFx0fSk7XG5cdH07XG5cdGNvbnN0IHNldHVwUG9sbGluZyA9ICgpID0+IHtcblx0XHRpZiAocmVmZXRjaEludGVydmFsICYmIHJlZmV0Y2hJbnRlcnZhbCA+IDApIHN0YXRlLnBvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGlmIChzZXNzaW9uQXRvbS5nZXQoKT8uZGF0YSkgdHJpZ2dlclJlZmV0Y2goeyBldmVudDogXCJwb2xsXCIgfSk7XG5cdFx0fSwgcmVmZXRjaEludGVydmFsICogMWUzKTtcblx0fTtcblx0Y29uc3Qgc2V0dXBCcm9hZGNhc3QgPSAoKSA9PiB7XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QgPSBnZXRHbG9iYWxCcm9hZGNhc3RDaGFubmVsKCkuc3Vic2NyaWJlKCgpID0+IHtcblx0XHRcdHRyaWdnZXJSZWZldGNoKHsgZXZlbnQ6IFwic3RvcmFnZVwiIH0pO1xuXHRcdH0pO1xuXHR9O1xuXHRjb25zdCBzZXR1cEZvY3VzUmVmZXRjaCA9ICgpID0+IHtcblx0XHRpZiAoIXJlZmV0Y2hPbldpbmRvd0ZvY3VzKSByZXR1cm47XG5cdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IGdldEdsb2JhbEZvY3VzTWFuYWdlcigpLnN1YnNjcmliZSgoKSA9PiB7XG5cdFx0XHR0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3Qgc2V0dXBPbmxpbmVSZWZldGNoID0gKCkgPT4ge1xuXHRcdHN0YXRlLnVuc3Vic2NyaWJlT25saW5lID0gZ2V0R2xvYmFsT25saW5lTWFuYWdlcigpLnN1YnNjcmliZSgob25saW5lKSA9PiB7XG5cdFx0XHRpZiAob25saW5lKSB0cmlnZ2VyUmVmZXRjaCh7IGV2ZW50OiBcInZpc2liaWxpdHljaGFuZ2VcIiB9KTtcblx0XHR9KTtcblx0fTtcblx0Y29uc3QgaW5pdCA9ICgpID0+IHtcblx0XHRzZXR1cFBvbGxpbmcoKTtcblx0XHRzZXR1cEJyb2FkY2FzdCgpO1xuXHRcdHNldHVwRm9jdXNSZWZldGNoKCk7XG5cdFx0c2V0dXBPbmxpbmVSZWZldGNoKCk7XG5cdFx0Z2V0R2xvYmFsQnJvYWRjYXN0Q2hhbm5lbCgpLnNldHVwKCk7XG5cdFx0Z2V0R2xvYmFsRm9jdXNNYW5hZ2VyKCkuc2V0dXAoKTtcblx0XHRnZXRHbG9iYWxPbmxpbmVNYW5hZ2VyKCkuc2V0dXAoKTtcblx0fTtcblx0Y29uc3QgY2xlYW51cCA9ICgpID0+IHtcblx0XHRpZiAoc3RhdGUucG9sbEludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHN0YXRlLnBvbGxJbnRlcnZhbCk7XG5cdFx0XHRzdGF0ZS5wb2xsSW50ZXJ2YWwgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdGlmIChzdGF0ZS51bnN1YnNjcmliZUJyb2FkY2FzdCkge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVCcm9hZGNhc3QoKTtcblx0XHRcdHN0YXRlLnVuc3Vic2NyaWJlQnJvYWRjYXN0ID0gdm9pZCAwO1xuXHRcdH1cblx0XHRpZiAoc3RhdGUudW5zdWJzY3JpYmVGb2N1cykge1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cygpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVGb2N1cyA9IHZvaWQgMDtcblx0XHR9XG5cdFx0aWYgKHN0YXRlLnVuc3Vic2NyaWJlT25saW5lKSB7XG5cdFx0XHRzdGF0ZS51bnN1YnNjcmliZU9ubGluZSgpO1xuXHRcdFx0c3RhdGUudW5zdWJzY3JpYmVPbmxpbmUgPSB2b2lkIDA7XG5cdFx0fVxuXHRcdHN0YXRlLmxhc3RTeW5jID0gMDtcblx0XHRzdGF0ZS5sYXN0U2Vzc2lvblJlcXVlc3QgPSAwO1xuXHRcdHN0YXRlLmNhY2hlZFNlc3Npb24gPSB2b2lkIDA7XG5cdH07XG5cdHJldHVybiB7XG5cdFx0aW5pdCxcblx0XHRjbGVhbnVwLFxuXHRcdHRyaWdnZXJSZWZldGNoLFxuXHRcdGJyb2FkY2FzdFNlc3Npb25VcGRhdGVcblx0fTtcbn1cblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVTZXNzaW9uUmVmcmVzaE1hbmFnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlc3Npb24tcmVmcmVzaC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/client/session-refresh.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/is-atom.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isAtom: () => (/* binding */ isAtom)\n/* harmony export */ });\n//#region src/utils/is-atom.ts\nfunction isAtom(value) {\n\treturn typeof value === \"object\" && value !== null && \"get\" in value && typeof value.get === \"function\" && \"lc\" in value && typeof value.lc === \"number\";\n}\n\n//#endregion\n\n//# sourceMappingURL=is-atom.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy9pcy1hdG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDa0I7QUFDbEIiLCJzb3VyY2VzIjpbIi9Vc2Vycy93b3ovd29ya3NwYWNlL3Njb3JlZC9zY29yZWQvbm9kZV9tb2R1bGVzL2JldHRlci1hdXRoL2Rpc3QvdXRpbHMvaXMtYXRvbS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8jcmVnaW9uIHNyYy91dGlscy9pcy1hdG9tLnRzXG5mdW5jdGlvbiBpc0F0b20odmFsdWUpIHtcblx0cmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiB2YWx1ZSAhPT0gbnVsbCAmJiBcImdldFwiIGluIHZhbHVlICYmIHR5cGVvZiB2YWx1ZS5nZXQgPT09IFwiZnVuY3Rpb25cIiAmJiBcImxjXCIgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlLmxjID09PSBcIm51bWJlclwiO1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGlzQXRvbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXMtYXRvbS5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/utils/is-atom.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/better-auth/dist/utils/url.mjs":
/*!*****************************************************!*\
  !*** ./node_modules/better-auth/dist/utils/url.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBaseURL: () => (/* binding */ getBaseURL),\n/* harmony export */   getHost: () => (/* binding */ getHost),\n/* harmony export */   getOrigin: () => (/* binding */ getOrigin),\n/* harmony export */   getProtocol: () => (/* binding */ getProtocol)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(ssr)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/core/error */ \"(ssr)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n\n\n\n//#region src/utils/url.ts\nfunction checkHasPath(url) {\n\ttry {\n\t\treturn (new URL(url).pathname.replace(/\\/+$/, \"\") || \"/\") !== \"/\";\n\t} catch {\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`);\n\t}\n}\nfunction assertHasProtocol(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\tif (parsedUrl.protocol !== \"http:\" && parsedUrl.protocol !== \"https:\") throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. URL must include 'http://' or 'https://'`);\n\t} catch (error) {\n\t\tif (error instanceof _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError) throw error;\n\t\tthrow new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(`Invalid base URL: ${url}. Please provide a valid base URL.`, { cause: error });\n\t}\n}\nfunction withPath(url, path = \"/api/auth\") {\n\tassertHasProtocol(url);\n\tif (checkHasPath(url)) return url;\n\tconst trimmedUrl = url.replace(/\\/+$/, \"\");\n\tif (!path || path === \"/\") return trimmedUrl;\n\tpath = path.startsWith(\"/\") ? path : `/${path}`;\n\treturn `${trimmedUrl}${path}`;\n}\nfunction validateProxyHeader(header, type) {\n\tif (!header || header.trim() === \"\") return false;\n\tif (type === \"proto\") return header === \"http\" || header === \"https\";\n\tif (type === \"host\") {\n\t\tif ([\n\t\t\t/\\.\\./,\n\t\t\t/\\0/,\n\t\t\t/[\\s]/,\n\t\t\t/^[.]/,\n\t\t\t/[<>'\"]/,\n\t\t\t/javascript:/i,\n\t\t\t/file:/i,\n\t\t\t/data:/i\n\t\t].some((pattern) => pattern.test(header))) return false;\n\t\treturn /^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test(header) || /^(\\d{1,3}\\.){3}\\d{1,3}(:[0-9]{1,5})?$/.test(header) || /^\\[[0-9a-fA-F:]+\\](:[0-9]{1,5})?$/.test(header) || /^localhost(:[0-9]{1,5})?$/i.test(header);\n\t}\n\treturn false;\n}\nfunction getBaseURL(url, path, request, loadEnv, trustedProxyHeaders) {\n\tif (url) return withPath(url, path);\n\tif (loadEnv !== false) {\n\t\tconst fromEnv = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NEXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_BETTER_AUTH_URL || _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.NUXT_PUBLIC_AUTH_URL || (_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL !== \"/\" ? _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.BASE_URL : void 0);\n\t\tif (fromEnv) return withPath(fromEnv, path);\n\t}\n\tconst fromRequest = request?.headers.get(\"x-forwarded-host\");\n\tconst fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n\tif (fromRequest && fromRequestProto && trustedProxyHeaders) {\n\t\tif (validateProxyHeader(fromRequestProto, \"proto\") && validateProxyHeader(fromRequest, \"host\")) try {\n\t\t\treturn withPath(`${fromRequestProto}://${fromRequest}`, path);\n\t\t} catch (_error) {}\n\t}\n\tif (request) {\n\t\tconst url$1 = getOrigin(request.url);\n\t\tif (!url$1) throw new _better_auth_core_error__WEBPACK_IMPORTED_MODULE_1__.BetterAuthError(\"Could not get origin from request. Please provide a valid base URL.\");\n\t\treturn withPath(url$1, path);\n\t}\n\tif (typeof window !== \"undefined\" && window.location) return withPath(window.location.origin, path);\n}\nfunction getOrigin(url) {\n\ttry {\n\t\tconst parsedUrl = new URL(url);\n\t\treturn parsedUrl.origin === \"null\" ? null : parsedUrl.origin;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getProtocol(url) {\n\ttry {\n\t\treturn new URL(url).protocol;\n\t} catch {\n\t\treturn null;\n\t}\n}\nfunction getHost(url) {\n\ttry {\n\t\treturn new URL(url).host;\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n\n//# sourceMappingURL=url.mjs.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYmV0dGVyLWF1dGgvZGlzdC91dGlscy91cmwubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE0QztBQUNjOztBQUUxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxZQUFZLG9FQUFlLHNCQUFzQixJQUFJO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsb0VBQWUsc0JBQXNCLElBQUk7QUFDNUgsR0FBRztBQUNILHVCQUF1QixvRUFBZTtBQUN0QyxZQUFZLG9FQUFlLHNCQUFzQixJQUFJLHVDQUF1QyxjQUFjO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLEtBQUs7QUFDL0MsV0FBVyxXQUFXLEVBQUUsS0FBSztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsS0FBSyx5Q0FBeUMsS0FBSyx1QkFBdUIsSUFBSSwyQkFBMkIsSUFBSSxJQUFJLEVBQUUsR0FBRyxJQUFJLFFBQVEsSUFBSSxnREFBZ0QsSUFBSSx3Q0FBd0MsSUFBSTtBQUMxUTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isc0RBQUcsb0JBQW9CLHNEQUFHLGdDQUFnQyxzREFBRywyQkFBMkIsc0RBQUcsZ0NBQWdDLHNEQUFHLDBCQUEwQixzREFBRyxvQkFBb0Isc0RBQUc7QUFDcE07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlCQUFpQixLQUFLLFlBQVk7QUFDeEQsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBZTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ3VEO0FBQ3ZEIiwic291cmNlcyI6WyIvVXNlcnMvd296L3dvcmtzcGFjZS9zY29yZWQvc2NvcmVkL25vZGVfbW9kdWxlcy9iZXR0ZXItYXV0aC9kaXN0L3V0aWxzL3VybC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZW52IH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2VudlwiO1xuaW1wb3J0IHsgQmV0dGVyQXV0aEVycm9yIH0gZnJvbSBcIkBiZXR0ZXItYXV0aC9jb3JlL2Vycm9yXCI7XG5cbi8vI3JlZ2lvbiBzcmMvdXRpbHMvdXJsLnRzXG5mdW5jdGlvbiBjaGVja0hhc1BhdGgodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIChuZXcgVVJMKHVybCkucGF0aG5hbWUucmVwbGFjZSgvXFwvKyQvLCBcIlwiKSB8fCBcIi9cIikgIT09IFwiL1wiO1xuXHR9IGNhdGNoIHtcblx0XHR0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuYCk7XG5cdH1cbn1cbmZ1bmN0aW9uIGFzc2VydEhhc1Byb3RvY29sKHVybCkge1xuXHR0cnkge1xuXHRcdGNvbnN0IHBhcnNlZFVybCA9IG5ldyBVUkwodXJsKTtcblx0XHRpZiAocGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHA6XCIgJiYgcGFyc2VkVXJsLnByb3RvY29sICE9PSBcImh0dHBzOlwiKSB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKGBJbnZhbGlkIGJhc2UgVVJMOiAke3VybH0uIFVSTCBtdXN0IGluY2x1ZGUgJ2h0dHA6Ly8nIG9yICdodHRwczovLydgKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBCZXR0ZXJBdXRoRXJyb3IpIHRocm93IGVycm9yO1xuXHRcdHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoYEludmFsaWQgYmFzZSBVUkw6ICR7dXJsfS4gUGxlYXNlIHByb3ZpZGUgYSB2YWxpZCBiYXNlIFVSTC5gLCB7IGNhdXNlOiBlcnJvciB9KTtcblx0fVxufVxuZnVuY3Rpb24gd2l0aFBhdGgodXJsLCBwYXRoID0gXCIvYXBpL2F1dGhcIikge1xuXHRhc3NlcnRIYXNQcm90b2NvbCh1cmwpO1xuXHRpZiAoY2hlY2tIYXNQYXRoKHVybCkpIHJldHVybiB1cmw7XG5cdGNvbnN0IHRyaW1tZWRVcmwgPSB1cmwucmVwbGFjZSgvXFwvKyQvLCBcIlwiKTtcblx0aWYgKCFwYXRoIHx8IHBhdGggPT09IFwiL1wiKSByZXR1cm4gdHJpbW1lZFVybDtcblx0cGF0aCA9IHBhdGguc3RhcnRzV2l0aChcIi9cIikgPyBwYXRoIDogYC8ke3BhdGh9YDtcblx0cmV0dXJuIGAke3RyaW1tZWRVcmx9JHtwYXRofWA7XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3h5SGVhZGVyKGhlYWRlciwgdHlwZSkge1xuXHRpZiAoIWhlYWRlciB8fCBoZWFkZXIudHJpbSgpID09PSBcIlwiKSByZXR1cm4gZmFsc2U7XG5cdGlmICh0eXBlID09PSBcInByb3RvXCIpIHJldHVybiBoZWFkZXIgPT09IFwiaHR0cFwiIHx8IGhlYWRlciA9PT0gXCJodHRwc1wiO1xuXHRpZiAodHlwZSA9PT0gXCJob3N0XCIpIHtcblx0XHRpZiAoW1xuXHRcdFx0L1xcLlxcLi8sXG5cdFx0XHQvXFwwLyxcblx0XHRcdC9bXFxzXS8sXG5cdFx0XHQvXlsuXS8sXG5cdFx0XHQvWzw+J1wiXS8sXG5cdFx0XHQvamF2YXNjcmlwdDovaSxcblx0XHRcdC9maWxlOi9pLFxuXHRcdFx0L2RhdGE6L2lcblx0XHRdLnNvbWUoKHBhdHRlcm4pID0+IHBhdHRlcm4udGVzdChoZWFkZXIpKSkgcmV0dXJuIGZhbHNlO1xuXHRcdHJldHVybiAvXlthLXpBLVowLTldKFthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oXFwuW2EtekEtWjAtOV0oW2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqKDpbMC05XXsxLDV9KT8kLy50ZXN0KGhlYWRlcikgfHwgL14oXFxkezEsM31cXC4pezN9XFxkezEsM30oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXlxcW1swLTlhLWZBLUY6XStcXF0oOlswLTldezEsNX0pPyQvLnRlc3QoaGVhZGVyKSB8fCAvXmxvY2FsaG9zdCg6WzAtOV17MSw1fSk/JC9pLnRlc3QoaGVhZGVyKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXRCYXNlVVJMKHVybCwgcGF0aCwgcmVxdWVzdCwgbG9hZEVudiwgdHJ1c3RlZFByb3h5SGVhZGVycykge1xuXHRpZiAodXJsKSByZXR1cm4gd2l0aFBhdGgodXJsLCBwYXRoKTtcblx0aWYgKGxvYWRFbnYgIT09IGZhbHNlKSB7XG5cdFx0Y29uc3QgZnJvbUVudiA9IGVudi5CRVRURVJfQVVUSF9VUkwgfHwgZW52Lk5FWFRfUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuUFVCTElDX0JFVFRFUl9BVVRIX1VSTCB8fCBlbnYuTlVYVF9QVUJMSUNfQkVUVEVSX0FVVEhfVVJMIHx8IGVudi5OVVhUX1BVQkxJQ19BVVRIX1VSTCB8fCAoZW52LkJBU0VfVVJMICE9PSBcIi9cIiA/IGVudi5CQVNFX1VSTCA6IHZvaWQgMCk7XG5cdFx0aWYgKGZyb21FbnYpIHJldHVybiB3aXRoUGF0aChmcm9tRW52LCBwYXRoKTtcblx0fVxuXHRjb25zdCBmcm9tUmVxdWVzdCA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtaG9zdFwiKTtcblx0Y29uc3QgZnJvbVJlcXVlc3RQcm90byA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtcHJvdG9cIik7XG5cdGlmIChmcm9tUmVxdWVzdCAmJiBmcm9tUmVxdWVzdFByb3RvICYmIHRydXN0ZWRQcm94eUhlYWRlcnMpIHtcblx0XHRpZiAodmFsaWRhdGVQcm94eUhlYWRlcihmcm9tUmVxdWVzdFByb3RvLCBcInByb3RvXCIpICYmIHZhbGlkYXRlUHJveHlIZWFkZXIoZnJvbVJlcXVlc3QsIFwiaG9zdFwiKSkgdHJ5IHtcblx0XHRcdHJldHVybiB3aXRoUGF0aChgJHtmcm9tUmVxdWVzdFByb3RvfTovLyR7ZnJvbVJlcXVlc3R9YCwgcGF0aCk7XG5cdFx0fSBjYXRjaCAoX2Vycm9yKSB7fVxuXHR9XG5cdGlmIChyZXF1ZXN0KSB7XG5cdFx0Y29uc3QgdXJsJDEgPSBnZXRPcmlnaW4ocmVxdWVzdC51cmwpO1xuXHRcdGlmICghdXJsJDEpIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDb3VsZCBub3QgZ2V0IG9yaWdpbiBmcm9tIHJlcXVlc3QuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgYmFzZSBVUkwuXCIpO1xuXHRcdHJldHVybiB3aXRoUGF0aCh1cmwkMSwgcGF0aCk7XG5cdH1cblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uKSByZXR1cm4gd2l0aFBhdGgod2luZG93LmxvY2F0aW9uLm9yaWdpbiwgcGF0aCk7XG59XG5mdW5jdGlvbiBnZXRPcmlnaW4odXJsKSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgcGFyc2VkVXJsID0gbmV3IFVSTCh1cmwpO1xuXHRcdHJldHVybiBwYXJzZWRVcmwub3JpZ2luID09PSBcIm51bGxcIiA/IG51bGwgOiBwYXJzZWRVcmwub3JpZ2luO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuZnVuY3Rpb24gZ2V0UHJvdG9jb2wodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5wcm90b2NvbDtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cbmZ1bmN0aW9uIGdldEhvc3QodXJsKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBVUkwodXJsKS5ob3N0O1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IGdldEJhc2VVUkwsIGdldEhvc3QsIGdldE9yaWdpbiwgZ2V0UHJvdG9jb2wgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVybC5tanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/better-auth/dist/utils/url.mjs\n");

/***/ })

};
;